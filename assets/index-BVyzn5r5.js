(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Tf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var b_={exports:{}},Cd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function VN(){if(GE)return Cd;GE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Cd.Fragment=e,Cd.jsx=t,Cd.jsxs=t,Cd}var WE;function FN(){return WE||(WE=1,b_.exports=VN()),b_.exports}var p=FN(),v_={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function UN(){if(KE)return _t;KE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function x(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function R(P,fe,Ae){this.props=P,this.context=fe,this.refs=k,this.updater=Ae||T}R.prototype.isReactComponent={},R.prototype.setState=function(P,fe){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,fe,"setState")},R.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function j(){}j.prototype=R.prototype;function q(P,fe,Ae){this.props=P,this.context=fe,this.refs=k,this.updater=Ae||T}var G=q.prototype=new j;G.constructor=q,C(G,R.prototype),G.isPureReactComponent=!0;var X=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function F(P,fe,Ae,ge,ke,$e){return Ae=$e.ref,{$$typeof:n,type:P,key:fe,ref:Ae!==void 0?Ae:null,props:$e}}function I(P,fe){return F(P.type,fe,void 0,void 0,void 0,P.props)}function O(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function U(P){var fe={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Ae){return fe[Ae]})}var H=/\/+/g;function B(P,fe){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):fe.toString(36)}function z(){}function je(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(z,z):(P.status="pending",P.then(function(fe){P.status==="pending"&&(P.status="fulfilled",P.value=fe)},function(fe){P.status==="pending"&&(P.status="rejected",P.reason=fe)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function _e(P,fe,Ae,ge,ke){var $e=typeof P;($e==="undefined"||$e==="boolean")&&(P=null);var Pe=!1;if(P===null)Pe=!0;else switch($e){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(P.$$typeof){case n:case e:Pe=!0;break;case y:return Pe=P._init,_e(Pe(P._payload),fe,Ae,ge,ke)}}if(Pe)return ke=ke(P),Pe=ge===""?"."+B(P,0):ge,X(ke)?(Ae="",Pe!=null&&(Ae=Pe.replace(H,"$&/")+"/"),_e(ke,fe,Ae,"",function(Et){return Et})):ke!=null&&(O(ke)&&(ke=I(ke,Ae+(ke.key==null||P&&P.key===ke.key?"":(""+ke.key).replace(H,"$&/")+"/")+Pe)),fe.push(ke)),1;Pe=0;var Ge=ge===""?".":ge+":";if(X(P))for(var Se=0;Se<P.length;Se++)ge=P[Se],$e=Ge+B(ge,Se),Pe+=_e(ge,fe,Ae,$e,ke);else if(Se=x(P),typeof Se=="function")for(P=Se.call(P),Se=0;!(ge=P.next()).done;)ge=ge.value,$e=Ge+B(ge,Se++),Pe+=_e(ge,fe,Ae,$e,ke);else if($e==="object"){if(typeof P.then=="function")return _e(je(P),fe,Ae,ge,ke);throw fe=String(P),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function K(P,fe,Ae){if(P==null)return P;var ge=[],ke=0;return _e(P,ge,"","",function($e){return fe.call(Ae,$e,ke++)}),ge}function se(P){if(P._status===-1){var fe=P._result;fe=fe(),fe.then(function(Ae){(P._status===0||P._status===-1)&&(P._status=1,P._result=Ae)},function(Ae){(P._status===0||P._status===-1)&&(P._status=2,P._result=Ae)}),P._status===-1&&(P._status=0,P._result=fe)}if(P._status===1)return P._result.default;throw P._result}var Ee=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Le(){}return _t.Children={map:K,forEach:function(P,fe,Ae){K(P,function(){fe.apply(this,arguments)},Ae)},count:function(P){var fe=0;return K(P,function(){fe++}),fe},toArray:function(P){return K(P,function(fe){return fe})||[]},only:function(P){if(!O(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},_t.Component=R,_t.Fragment=t,_t.Profiler=s,_t.PureComponent=q,_t.StrictMode=i,_t.Suspense=h,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,_t.__COMPILER_RUNTIME={__proto__:null,c:function(P){return Y.H.useMemoCache(P)}},_t.cache=function(P){return function(){return P.apply(null,arguments)}},_t.cloneElement=function(P,fe,Ae){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ge=C({},P.props),ke=P.key,$e=void 0;if(fe!=null)for(Pe in fe.ref!==void 0&&($e=void 0),fe.key!==void 0&&(ke=""+fe.key),fe)!J.call(fe,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&fe.ref===void 0||(ge[Pe]=fe[Pe]);var Pe=arguments.length-2;if(Pe===1)ge.children=Ae;else if(1<Pe){for(var Ge=Array(Pe),Se=0;Se<Pe;Se++)Ge[Se]=arguments[Se+2];ge.children=Ge}return F(P.type,ke,void 0,void 0,$e,ge)},_t.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},_t.createElement=function(P,fe,Ae){var ge,ke={},$e=null;if(fe!=null)for(ge in fe.key!==void 0&&($e=""+fe.key),fe)J.call(fe,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ke[ge]=fe[ge]);var Pe=arguments.length-2;if(Pe===1)ke.children=Ae;else if(1<Pe){for(var Ge=Array(Pe),Se=0;Se<Pe;Se++)Ge[Se]=arguments[Se+2];ke.children=Ge}if(P&&P.defaultProps)for(ge in Pe=P.defaultProps,Pe)ke[ge]===void 0&&(ke[ge]=Pe[ge]);return F(P,$e,void 0,void 0,null,ke)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(P){return{$$typeof:u,render:P}},_t.isValidElement=O,_t.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:se}},_t.memo=function(P,fe){return{$$typeof:f,type:P,compare:fe===void 0?null:fe}},_t.startTransition=function(P){var fe=Y.T,Ae={};Y.T=Ae;try{var ge=P(),ke=Y.S;ke!==null&&ke(Ae,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(Le,Ee)}catch($e){Ee($e)}finally{Y.T=fe}},_t.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},_t.use=function(P){return Y.H.use(P)},_t.useActionState=function(P,fe,Ae){return Y.H.useActionState(P,fe,Ae)},_t.useCallback=function(P,fe){return Y.H.useCallback(P,fe)},_t.useContext=function(P){return Y.H.useContext(P)},_t.useDebugValue=function(){},_t.useDeferredValue=function(P,fe){return Y.H.useDeferredValue(P,fe)},_t.useEffect=function(P,fe,Ae){var ge=Y.H;if(typeof Ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ge.useEffect(P,fe)},_t.useId=function(){return Y.H.useId()},_t.useImperativeHandle=function(P,fe,Ae){return Y.H.useImperativeHandle(P,fe,Ae)},_t.useInsertionEffect=function(P,fe){return Y.H.useInsertionEffect(P,fe)},_t.useLayoutEffect=function(P,fe){return Y.H.useLayoutEffect(P,fe)},_t.useMemo=function(P,fe){return Y.H.useMemo(P,fe)},_t.useOptimistic=function(P,fe){return Y.H.useOptimistic(P,fe)},_t.useReducer=function(P,fe,Ae){return Y.H.useReducer(P,fe,Ae)},_t.useRef=function(P){return Y.H.useRef(P)},_t.useState=function(P){return Y.H.useState(P)},_t.useSyncExternalStore=function(P,fe,Ae){return Y.H.useSyncExternalStore(P,fe,Ae)},_t.useTransition=function(){return Y.H.useTransition()},_t.version="19.1.1",_t}var YE;function iv(){return YE||(YE=1,v_.exports=UN()),v_.exports}var D=iv();const ur=Tf(D);var x_={exports:{}},Rd={},E_={exports:{}},w_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function zN(){return XE||(XE=1,function(n){function e(K,se){var Ee=K.length;K.push(se);e:for(;0<Ee;){var Le=Ee-1>>>1,P=K[Le];if(0<s(P,se))K[Le]=se,K[Ee]=P,Ee=Le;else break e}}function t(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var se=K[0],Ee=K.pop();if(Ee!==se){K[0]=Ee;e:for(var Le=0,P=K.length,fe=P>>>1;Le<fe;){var Ae=2*(Le+1)-1,ge=K[Ae],ke=Ae+1,$e=K[ke];if(0>s(ge,Ee))ke<P&&0>s($e,ge)?(K[Le]=$e,K[ke]=Ee,Le=ke):(K[Le]=ge,K[Ae]=Ee,Le=Ae);else if(ke<P&&0>s($e,Ee))K[Le]=$e,K[ke]=Ee,Le=ke;else break e}}return se}function s(K,se){var Ee=K.sortIndex-se.sortIndex;return Ee!==0?Ee:K.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],y=1,v=null,x=3,T=!1,C=!1,k=!1,R=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function X(K){for(var se=t(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=K)i(f),se.sortIndex=se.expirationTime,e(h,se);else break;se=t(f)}}function Y(K){if(k=!1,X(K),!C)if(t(h)!==null)C=!0,J||(J=!0,B());else{var se=t(f);se!==null&&_e(Y,se.startTime-K)}}var J=!1,F=-1,I=5,O=-1;function U(){return R?!0:!(n.unstable_now()-O<I)}function H(){if(R=!1,J){var K=n.unstable_now();O=K;var se=!0;try{e:{C=!1,k&&(k=!1,q(F),F=-1),T=!0;var Ee=x;try{t:{for(X(K),v=t(h);v!==null&&!(v.expirationTime>K&&U());){var Le=v.callback;if(typeof Le=="function"){v.callback=null,x=v.priorityLevel;var P=Le(v.expirationTime<=K);if(K=n.unstable_now(),typeof P=="function"){v.callback=P,X(K),se=!0;break t}v===t(h)&&i(h),X(K)}else i(h);v=t(h)}if(v!==null)se=!0;else{var fe=t(f);fe!==null&&_e(Y,fe.startTime-K),se=!1}}break e}finally{v=null,x=Ee,T=!1}se=void 0}}finally{se?B():J=!1}}}var B;if(typeof G=="function")B=function(){G(H)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,je=z.port2;z.port1.onmessage=H,B=function(){je.postMessage(null)}}else B=function(){j(H,0)};function _e(K,se){F=j(function(){K(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(K){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var Ee=x;x=se;try{return K()}finally{x=Ee}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(K,se){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Ee=x;x=K;try{return se()}finally{x=Ee}},n.unstable_scheduleCallback=function(K,se,Ee){var Le=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Le+Ee:Le):Ee=Le,K){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=Ee+P,K={id:y++,callback:se,priorityLevel:K,startTime:Ee,expirationTime:P,sortIndex:-1},Ee>Le?(K.sortIndex=Ee,e(f,K),t(h)===null&&K===t(f)&&(k?(q(F),F=-1):k=!0,_e(Y,Ee-Le))):(K.sortIndex=P,e(h,K),C||T||(C=!0,J||(J=!0,B()))),K},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(K){var se=x;return function(){var Ee=x;x=se;try{return K.apply(this,arguments)}finally{x=Ee}}}}(w_)),w_}var QE;function BN(){return QE||(QE=1,E_.exports=zN()),E_.exports}var T_={exports:{}},Di={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function HN(){if(ZE)return Di;ZE=1;var n=iv();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,f,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:f,implementation:y}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Di.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Di.createPortal=function(h,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,y)},Di.flushSync=function(h){var f=l.T,y=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=y,i.d.f()}},Di.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Di.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Di.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var y=f.as,v=u(y,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:T}):y==="script"&&i.d.X(h,{crossOrigin:v,integrity:x,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Di.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Di.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,v=u(y,f.crossOrigin);i.d.L(h,y,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Di.preloadModule=function(h,f){if(typeof h=="string")if(f){var y=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Di.requestFormReset=function(h){i.d.r(h)},Di.unstable_batchedUpdates=function(h,f){return h(f)},Di.useFormState=function(h,f,y){return l.H.useFormState(h,f,y)},Di.useFormStatus=function(){return l.H.useHostTransitionStatus()},Di.version="19.1.1",Di}var JE;function OA(){if(JE)return T_.exports;JE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),T_.exports=HN(),T_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function $N(){if(ew)return Rd;ew=1;var n=BN(),e=iv(),t=OA();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var c=r,d=o;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return u(g),r;if(b===d)return u(g),o;b=b.sibling}throw Error(i(188))}if(c.return!==d.return)c=g,d=b;else{for(var A=!1,M=g.child;M;){if(M===c){A=!0,c=g,d=b;break}if(M===d){A=!0,d=g,c=b;break}M=M.sibling}if(!A){for(M=b.child;M;){if(M===c){A=!0,c=b,d=g;break}if(M===d){A=!0,d=b,c=g;break}M=M.sibling}if(!A)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:o}function f(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=f(r),o!==null)return o;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),G=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=H&&r[H]||r["@@iterator"],typeof r=="function"?r:null)}var z=Symbol.for("react.client.reference");function je(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===z?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case R:return"Profiler";case k:return"StrictMode";case Y:return"Suspense";case J:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case G:return(r.displayName||"Context")+".Provider";case q:return(r._context.displayName||"Context")+".Consumer";case X:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return o=r.displayName||null,o!==null?o:je(r.type)||"Memo";case I:o=r._payload,r=r._init;try{return je(r(o))}catch{}}return null}var _e=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Le=[],P=-1;function fe(r){return{current:r}}function Ae(r){0>P||(r.current=Le[P],Le[P]=null,P--)}function ge(r,o){P++,Le[P]=r.current,r.current=o}var ke=fe(null),$e=fe(null),Pe=fe(null),Ge=fe(null);function Se(r,o){switch(ge(Pe,o),ge($e,r),ge(ke,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?vE(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=vE(o),r=xE(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Ae(ke),ge(ke,r)}function Et(){Ae(ke),Ae($e),Ae(Pe)}function gt(r){r.memoizedState!==null&&ge(Ge,r);var o=ke.current,c=xE(o,r.type);o!==c&&(ge($e,r),ge(ke,c))}function ee(r){$e.current===r&&(Ae(ke),Ae($e)),Ge.current===r&&(Ae(Ge),Ed._currentValue=Ee)}var me=Object.prototype.hasOwnProperty,Re=n.unstable_scheduleCallback,et=n.unstable_cancelCallback,it=n.unstable_shouldYield,mn=n.unstable_requestPaint,Ht=n.unstable_now,zi=n.unstable_getCurrentPriorityLevel,Xi=n.unstable_ImmediatePriority,gs=n.unstable_UserBlockingPriority,Bi=n.unstable_NormalPriority,Ra=n.unstable_LowPriority,Vs=n.unstable_IdlePriority,Vn=n.log,pe=n.unstable_setDisableYieldValue,ze=null,$=null;function ae(r){if(typeof Vn=="function"&&pe(r),$&&typeof $.setStrictMode=="function")try{$.setStrictMode(ze,r)}catch{}}var oe=Math.clz32?Math.clz32:De,be=Math.log,Ie=Math.LN2;function De(r){return r>>>=0,r===0?32:31-(be(r)/Ie|0)|0}var Ne=256,Ve=4194304;function We(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function bt(r,o,c){var d=r.pendingLanes;if(d===0)return 0;var g=0,b=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var M=d&134217727;return M!==0?(d=M&~b,d!==0?g=We(d):(A&=M,A!==0?g=We(A):c||(c=M&~r,c!==0&&(g=We(c))))):(M=d&~b,M!==0?g=We(M):A!==0?g=We(A):c||(c=d&~r,c!==0&&(g=We(c)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:g}function mi(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function ys(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gl(){var r=Ne;return Ne<<=1,(Ne&4194048)===0&&(Ne=256),r}function Wl(){var r=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),r}function Fs(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Qi(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function No(r,o,c,d,g,b){var A=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var M=r.entanglements,W=r.expirationTimes,le=r.hiddenUpdates;for(c=A&~c;0<c;){var ye=31-oe(c),we=1<<ye;M[ye]=0,W[ye]=-1;var ce=le[ye];if(ce!==null)for(le[ye]=null,ye=0;ye<ce.length;ye++){var ue=ce[ye];ue!==null&&(ue.lane&=-536870913)}c&=~we}d!==0&&_s(r,d,0),b!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=b&~(A&~o))}function _s(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var d=31-oe(o);r.entangledLanes|=o,r.entanglements[d]=r.entanglements[d]|1073741824|c&4194090}function Kl(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var d=31-oe(c),g=1<<d;g&o|r[d]&o&&(r[d]|=o),c&=~g}}function Ur(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Do(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function zr(){var r=se.p;return r!==0?r:(r=window.event,r===void 0?32:UE(r.type))}function pr(r,o){var c=se.p;try{return se.p=r,o()}finally{se.p=c}}var $t=Math.random().toString(36).slice(2),Sn="__reactFiber$"+$t,xn="__reactProps$"+$t,Zi="__reactContainer$"+$t,Yl="__reactEvents$"+$t,bh="__reactListeners$"+$t,Us="__reactHandles$"+$t,gr="__reactResources$"+$t,zs="__reactMarker$"+$t;function Br(r){delete r[Sn],delete r[xn],delete r[Yl],delete r[bh],delete r[Us]}function bs(r){var o=r[Sn];if(o)return o;for(var c=r.parentNode;c;){if(o=c[Zi]||c[Sn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=SE(r);r!==null;){if(c=r[Sn])return c;r=SE(r)}return o}r=c,c=r.parentNode}return null}function Bs(r){if(r=r[Sn]||r[Zi]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Hs(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function En(r){var o=r[gr];return o||(o=r[gr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wt(r){r[zs]=!0}var Kn=new Set,Fn={};function rn(r,o){Ji(r,o),Ji(r+"Capture",o)}function Ji(r,o){for(Fn[r]=o,r=0;r<o.length;r++)Kn.add(o[r])}var yr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$s={},es={};function Xl(r){return me.call(es,r)?!0:me.call($s,r)?!1:yr.test(r)?es[r]=!0:($s[r]=!0,!1)}function qs(r,o,c){if(Xl(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function pi(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function Un(r,o,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+d)}}var _r,Oo;function Gs(r){if(_r===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);_r=o&&o[1]||"",Oo=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_r+r+Oo}var Ia=!1;function ka(r,o){if(!r||Ia)return"";Ia=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ue){var ce=ue}Reflect.construct(r,[],we)}else{try{we.call()}catch(ue){ce=ue}r.call(we.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(we=r())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),A=b[0],M=b[1];if(A&&M){var W=A.split(`
`),le=M.split(`
`);for(g=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;g<le.length&&!le[g].includes("DetermineComponentFrameRoot");)g++;if(d===W.length||g===le.length)for(d=W.length-1,g=le.length-1;1<=d&&0<=g&&W[d]!==le[g];)g--;for(;1<=d&&0<=g;d--,g--)if(W[d]!==le[g]){if(d!==1||g!==1)do if(d--,g--,0>g||W[d]!==le[g]){var ye=`
`+W[d].replace(" at new "," at ");return r.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",r.displayName)),ye}while(1<=d&&0<=g);break}}}finally{Ia=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Gs(c):""}function Mo(r){switch(r.tag){case 26:case 27:case 5:return Gs(r.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 15:return ka(r.type,!1);case 11:return ka(r.type.render,!1);case 1:return ka(r.type,!0);case 31:return Gs("Activity");default:return""}}function Na(r){try{var o="";do o+=Mo(r),r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ai(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Po(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Yc(r){var o=Po(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),d=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,b=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(A){d=""+A,b.call(this,A)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(A){d=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Da(r){r._valueTracker||(r._valueTracker=Yc(r))}function jo(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return r&&(d=Po(r)?r.checked?"true":"false":r.value),r=d,r!==c?(o.setValue(r),!0):!1}function oi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var gi=/[\n"\\]/g;function Jt(r){return r.replace(gi,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ln(r,o,c,d,g,b,A,M){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+ai(o)):r.value!==""+ai(o)&&(r.value=""+ai(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?Ws(r,A,ai(o)):c!=null?Ws(r,A,ai(c)):d!=null&&r.removeAttribute("value"),g==null&&b!=null&&(r.defaultChecked=!!b),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.name=""+ai(M):r.removeAttribute("name")}function br(r,o,c,d,g,b,A,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+ai(c):"",o=o!=null?""+ai(o):c,M||o===r.value||(r.value=o),r.defaultValue=o}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=M?r.checked:!!d,r.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A)}function Ws(r,o,c){o==="number"&&oi(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function zn(r,o,c,d){if(r=r.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=o.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&d&&(r[c].defaultSelected=!0)}else{for(c=""+ai(c),o=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,d&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function Ct(r,o,c){if(o!=null&&(o=""+ai(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+ai(c):""}function Ks(r,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(i(92));if(_e(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=ai(o),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d)}function Yn(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(r,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":d?r.setProperty(o,c):typeof c!="number"||c===0||vr.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function Ys(r,o,c){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var g in o)d=o[g],o.hasOwnProperty(g)&&c[g]!==d&&Ql(r,g,d)}else for(var b in o)o.hasOwnProperty(b)&&Ql(r,b,o[b])}function Oa(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lo(r){return vs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var li=null;function yi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xs=null,Hi=null;function Ma(r){var o=Bs(r);if(o&&(r=o.stateNode)){var c=r[xn]||null;e:switch(r=o.stateNode,o.type){case"input":if(ln(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Jt(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==r&&d.form===r.form){var g=d[xn]||null;if(!g)throw Error(i(90));ln(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===r.form&&jo(d)}break e;case"textarea":Ct(r,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&zn(r,!!c.multiple,o,!1)}}}var Ai=!1;function Zl(r,o,c){if(Ai)return r(o,c);Ai=!0;try{var d=r(o);return d}finally{if(Ai=!1,(Xs!==null||Hi!==null)&&(Am(),Xs&&(o=Xs,r=Hi,Hi=Xs=null,Ma(o),r)))for(o=0;o<r.length;o++)Ma(r[o])}}function Hr(r,o){var c=r.stateNode;if(c===null)return null;var d=c[xn]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,o,typeof c));return c}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xn=!1;if(ts)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){Xn=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{Xn=!1}var xs=null,Qs=null,ns=null;function ja(){if(ns)return ns;var r,o=Qs,c=o.length,d,g="value"in xs?xs.value:xs.textContent,b=g.length;for(r=0;r<c&&o[r]===g[r];r++);var A=c-r;for(d=1;d<=A&&o[c-d]===g[b-d];d++);return ns=g.slice(r,1<d?1-d:void 0)}function Zs(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function $i(){return!0}function Jl(){return!1}function An(r){function o(c,d,g,b,A){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var M in r)r.hasOwnProperty(M)&&(c=r[M],this[M]=c?c(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?$i:Jl,this.isPropagationStopped=Jl,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),o}var Pt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$r=An(Pt),xr=y({},Pt,{view:0,detail:0}),ec=An(xr),Js,qr,Es,Gr=y({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:za,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Es&&(Es&&r.type==="mousemove"?(Js=r.screenX-Es.screenX,qr=r.screenY-Es.screenY):qr=Js=0,Es=r),Js)},movementY:function(r){return"movementY"in r?r.movementY:qr}}),Qn=An(Gr),Qc=y({},Gr,{dataTransfer:0}),Zc=An(Qc),Wr=y({},xr,{relatedTarget:0}),La=An(Wr),Vo=y({},Pt,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=An(Vo),Fo=y({},Pt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Fa=An(Fo),vh=y({},Pt,{data:0}),tc=An(vh),Kr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ua={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ic(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Ua[r])?!!o[r]:!1}function za(){return ic}var Uo=y({},xr,{key:function(r){if(r.key){var o=Kr[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Zs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:za,charCode:function(r){return r.type==="keypress"?Zs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Zs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ba=An(Uo),sc=y({},Gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ws=An(sc),Ts=y({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:za}),Jc=An(Ts),rc=y({},Pt,{propertyName:0,elapsedTime:0,pseudoElement:0}),eu=An(rc),tu=y({},Gr,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),zo=An(tu),_i=y({},Pt,{newState:0,oldState:0}),ac=An(_i),oc=[9,13,27,32],er=ts&&"CompositionEvent"in window,m=null;ts&&"documentMode"in document&&(m=document.documentMode);var E=ts&&"TextEvent"in window&&!m,S=ts&&(!er||m&&8<m&&11>=m),V=" ",ie=!1;function he(r,o){switch(r){case"keyup":return oc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Me(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Rt=!1;function Cn(r,o){switch(r){case"compositionend":return Me(o);case"keypress":return o.which!==32?null:(ie=!0,V);case"textInput":return r=o.data,r===V&&ie?null:r;default:return null}}function It(r,o){if(Rt)return r==="compositionend"||!er&&he(r,o)?(r=ja(),ns=Qs=xs=null,Rt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return S&&o.locale!=="ko"?null:o.data;default:return null}}var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Bn[r.type]:o==="textarea"}function In(r,o,c,d){Xs?Hi?Hi.push(d):Hi=[d]:Xs=d,o=Dm(o,"onChange"),0<o.length&&(c=new $r("onChange","change",null,c,d),r.push({event:c,listeners:o}))}var Hn=null,Ss=null;function Bo(r){pE(r,0)}function nu(r){var o=Hs(r);if(jo(o))return r}function Ff(r,o){if(r==="change")return o}var xh=!1;if(ts){var Ho;if(ts){var Eh="oninput"in document;if(!Eh){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Eh=typeof Uf.oninput=="function"}Ho=Eh}else Ho=!1;xh=Ho&&(!document.documentMode||9<document.documentMode)}function wh(){Hn&&(Hn.detachEvent("onpropertychange",zf),Ss=Hn=null)}function zf(r){if(r.propertyName==="value"&&nu(Ss)){var o=[];In(o,Ss,r,yi(r)),Zl(Bo,o)}}function ly(r,o,c){r==="focusin"?(wh(),Hn=o,Ss=c,Hn.attachEvent("onpropertychange",zf)):r==="focusout"&&wh()}function Bf(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return nu(Ss)}function Hf(r,o){if(r==="click")return nu(o)}function $f(r,o){if(r==="input"||r==="change")return nu(o)}function iu(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Ci=typeof Object.is=="function"?Object.is:iu;function Ha(r,o){if(Ci(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!me.call(o,g)||!Ci(r[g],o[g]))return!1}return!0}function qi(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function qf(r,o){var c=qi(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=o&&d>=o)return{node:c,offset:o-r};r=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=qi(c)}}function Gf(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Gf(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Th(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=oi(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=oi(r.document)}return o}function su(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var cy=ts&&"documentMode"in document&&11>=document.documentMode,$o=null,Sh=null,lc=null,Ah=!1;function Wf(r,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ah||$o==null||$o!==oi(d)||(d=$o,"selectionStart"in d&&su(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),lc&&Ha(lc,d)||(lc=d,d=Dm(Sh,"onSelect"),0<d.length&&(o=new $r("onSelect","select",null,o,c),r.push({event:o,listeners:d}),o.target=$o)))}function Yr(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var $a={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},cc={},Kf={};ts&&(Kf=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function qa(r){if(cc[r])return cc[r];if(!$a[r])return r;var o=$a[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Kf)return cc[r]=o[c];return r}var Xr=qa("animationend"),tr=qa("animationiteration"),Ch=qa("animationstart"),uy=qa("transitionrun"),Yf=qa("transitionstart"),Xf=qa("transitioncancel"),Rh=qa("transitionend"),Ih=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function As(r,o){Ih.set(r,o),rn(o,[r])}var Qf=new WeakMap;function Gi(r,o){if(typeof r=="object"&&r!==null){var c=Qf.get(r);return c!==void 0?c:(o={value:r,source:o,stack:Na(o)},Qf.set(r,o),o)}return{value:r,source:o,stack:Na(o)}}var Wi=[],qo=0,Nh=0;function ru(){for(var r=qo,o=Nh=qo=0;o<r;){var c=Wi[o];Wi[o++]=null;var d=Wi[o];Wi[o++]=null;var g=Wi[o];Wi[o++]=null;var b=Wi[o];if(Wi[o++]=null,d!==null&&g!==null){var A=d.pending;A===null?g.next=g:(g.next=A.next,A.next=g),d.pending=g}b!==0&&Oh(c,g,b)}}function au(r,o,c,d){Wi[qo++]=r,Wi[qo++]=o,Wi[qo++]=c,Wi[qo++]=d,Nh|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Dh(r,o,c,d){return au(r,o,c,d),ou(r)}function Ri(r,o){return au(r,null,null,o),ou(r)}function Oh(r,o,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var g=!1,b=r.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(g=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,g&&o!==null&&(g=31-oe(c),r=b.hiddenUpdates,d=r[g],d===null?r[g]=[o]:d.push(o),o.lane=c|536870912),b):null}function ou(r){if(50<md)throw md=0,Hy=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Go={};function hy(r,o,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(r,o,c,d){return new hy(r,o,c,d)}function Mh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Er(r,o){var c=r.alternate;return c===null?(c=Ki(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Zf(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function lu(r,o,c,d,g,b){var A=0;if(d=r,typeof r=="function")Mh(r)&&(A=1);else if(typeof r=="string")A=SN(r,c,ke.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=Ki(31,c,o,g),r.elementType=O,r.lanes=b,r;case C:return wr(c.children,g,b,o);case k:A=8,g|=24;break;case R:return r=Ki(12,c,o,g|2),r.elementType=R,r.lanes=b,r;case Y:return r=Ki(13,c,o,g),r.elementType=Y,r.lanes=b,r;case J:return r=Ki(19,c,o,g),r.elementType=J,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case j:case G:A=10;break e;case q:A=9;break e;case X:A=11;break e;case F:A=14;break e;case I:A=16,d=null;break e}A=29,c=Error(i(130,r===null?"null":typeof r,"")),d=null}return o=Ki(A,c,o,g),o.elementType=r,o.type=d,o.lanes=b,o}function wr(r,o,c,d){return r=Ki(7,r,d,o),r.lanes=c,r}function Wo(r,o,c){return r=Ki(6,r,null,o),r.lanes=c,r}function Ph(r,o,c){return o=Ki(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Ga=[],Wa=0,Qr=null,Ko=0,Ii=[],is=0,Ka=null,Tr=1,bi="";function Ya(r,o){Ga[Wa++]=Ko,Ga[Wa++]=Qr,Qr=r,Ko=o}function Jf(r,o,c){Ii[is++]=Tr,Ii[is++]=bi,Ii[is++]=Ka,Ka=r;var d=Tr;r=bi;var g=32-oe(d)-1;d&=~(1<<g),c+=1;var b=32-oe(o)+g;if(30<b){var A=g-g%5;b=(d&(1<<A)-1).toString(32),d>>=A,g-=A,Tr=1<<32-oe(o)+g|c<<g|d,bi=b+r}else Tr=1<<b|c<<g|d,bi=r}function jh(r){r.return!==null&&(Ya(r,1),Jf(r,1,0))}function Lh(r){for(;r===Qr;)Qr=Ga[--Wa],Ga[Wa]=null,Ko=Ga[--Wa],Ga[Wa]=null;for(;r===Ka;)Ka=Ii[--is],Ii[is]=null,bi=Ii[--is],Ii[is]=null,Tr=Ii[--is],Ii[is]=null}var $n=null,cn=null,Ft=!1,Zr=null,nr=!1,Jr=Error(i(519));function Sr(r){var o=Error(i(418,""));throw Cs(Gi(o,r)),Jr}function Vh(r){var o=r.stateNode,c=r.type,d=r.memoizedProps;switch(o[Sn]=r,o[xn]=d,c){case"dialog":St("cancel",o),St("close",o);break;case"iframe":case"object":case"embed":St("load",o);break;case"video":case"audio":for(c=0;c<gd.length;c++)St(gd[c],o);break;case"source":St("error",o);break;case"img":case"image":case"link":St("error",o),St("load",o);break;case"details":St("toggle",o);break;case"input":St("invalid",o),br(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Da(o);break;case"select":St("invalid",o);break;case"textarea":St("invalid",o),Ks(o,d.value,d.defaultValue,d.children),Da(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||bE(o.textContent,c)?(d.popover!=null&&(St("beforetoggle",o),St("toggle",o)),d.onScroll!=null&&St("scroll",o),d.onScrollEnd!=null&&St("scrollend",o),d.onClick!=null&&(o.onclick=Om),o=!0):o=!1,o||Sr(r)}function em(r){for($n=r.return;$n;)switch($n.tag){case 5:case 13:nr=!1;return;case 27:case 3:nr=!0;return;default:$n=$n.return}}function uc(r){if(r!==$n)return!1;if(!Ft)return em(r),Ft=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||r_(r.type,r.memoizedProps)),c=!c),c&&cn&&Sr(r),em(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(o===0){cn=Ir(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;r=r.nextSibling}cn=null}}else o===27?(o=cn,cl(r.type)?(r=c_,c_=null,cn=r):cn=o):cn=$n?Ir(r.stateNode.nextSibling):null;return!0}function hc(){cn=$n=null,Ft=!1}function Yo(){var r=Zr;return r!==null&&(cs===null?cs=r:cs.push.apply(cs,r),Zr=null),r}function Cs(r){Zr===null?Zr=[r]:Zr.push(r)}var Fh=fe(null),Xa=null,Ar=null;function ea(r,o,c){ge(Fh,o._currentValue),o._currentValue=c}function Cr(r){r._currentValue=Fh.current,Ae(Fh)}function Uh(r,o,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),r===c)break;r=r.return}}function zh(r,o,c,d){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var b=g.dependencies;if(b!==null){var A=g.child;b=b.firstContext;e:for(;b!==null;){var M=b;b=g;for(var W=0;W<o.length;W++)if(M.context===o[W]){b.lanes|=c,M=b.alternate,M!==null&&(M.lanes|=c),Uh(b.return,c,r),d||(A=null);break e}b=M.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=c,b=A.alternate,b!==null&&(b.lanes|=c),Uh(A,c,r),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===r){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function dc(r,o,c,d){r=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var M=g.type;Ci(g.pendingProps.value,A.value)||(r!==null?r.push(M):r=[M])}}else if(g===Ge.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Ed):r=[Ed])}g=g.return}r!==null&&zh(o,r,c,d),o.flags|=262144}function fc(r){for(r=r.firstContext;r!==null;){if(!Ci(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Qa(r){Xa=r,Ar=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Zn(r){return Bh(Xa,r)}function Xo(r,o){return Xa===null&&Qa(r),Bh(r,o)}function Bh(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ar===null){if(r===null)throw Error(i(308));Ar=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Ar=Ar.next=o;return c}var Za=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},tm=n.unstable_scheduleCallback,Hh=n.unstable_NormalPriority,wn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mc(){return{controller:new Za,data:new Map,refCount:0}}function Qo(r){r.refCount--,r.refCount===0&&tm(Hh,function(){r.controller.abort()})}var Ja=null,$h=0,ss=0,Yi=null;function dy(r,o){if(Ja===null){var c=Ja=[];$h=0,ss=Xy(),Yi={status:"pending",value:void 0,then:function(d){c.push(d)}}}return $h++,o.then(nm,nm),o}function nm(){if(--$h===0&&Ja!==null){Yi!==null&&(Yi.status="fulfilled");var r=Ja;Ja=null,ss=0,Yi=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function fy(r,o){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return r.then(function(){d.status="fulfilled",d.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var im=K.S;K.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&dy(r,o),im!==null&&im(r,o)};var eo=fe(null);function qh(){var r=eo.current;return r!==null?r:un.pooledCache}function cu(r,o){o===null?ge(eo,eo.current):ge(eo,o.pool)}function sm(){var r=qh();return r===null?null:{parent:wn._currentValue,pool:r}}var Zo=Error(i(460)),pc=Error(i(474)),to=Error(i(542)),Gh={then:function(){}};function rm(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ta(){}function N(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(ta,ta),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,L(r),r;default:if(typeof o.status=="string")o.then(ta,ta);else{if(r=un,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(d){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=d}},function(d){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,L(r),r}throw _=o,Zo}}var _=null;function w(){if(_===null)throw Error(i(459));var r=_;return _=null,r}function L(r){if(r===Zo||r===to)throw Error(i(483))}var Z=!1;function te(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function de(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ve(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Oe(r,o,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Yt&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,o=ou(r),Oh(r,null,c),o}return au(r,d,o,c),ou(r)}function Be(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=r.pendingLanes,c|=d,o.lanes=c,Kl(r,c)}}function He(r,o){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=A:b=b.next=A,c=c.next}while(c!==null);b===null?g=b=o:b=b.next=o}else g=b=o;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var Fe=!1;function ht(){if(Fe){var r=Yi;if(r!==null)throw r}}function Ze(r,o,c,d){Fe=!1;var g=r.updateQueue;Z=!1;var b=g.firstBaseUpdate,A=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var W=M,le=W.next;W.next=null,A===null?b=le:A.next=le,A=W;var ye=r.alternate;ye!==null&&(ye=ye.updateQueue,M=ye.lastBaseUpdate,M!==A&&(M===null?ye.firstBaseUpdate=le:M.next=le,ye.lastBaseUpdate=W))}if(b!==null){var we=g.baseState;A=0,ye=le=W=null,M=b;do{var ce=M.lane&-536870913,ue=ce!==M.lane;if(ue?(Lt&ce)===ce:(d&ce)===ce){ce!==0&&ce===ss&&(Fe=!0),ye!==null&&(ye=ye.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var ut=r,nt=M;ce=o;var nn=c;switch(nt.tag){case 1:if(ut=nt.payload,typeof ut=="function"){we=ut.call(nn,we,ce);break e}we=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=nt.payload,ce=typeof ut=="function"?ut.call(nn,we,ce):ut,ce==null)break e;we=y({},we,ce);break e;case 2:Z=!0}}ce=M.callback,ce!==null&&(r.flags|=64,ue&&(r.flags|=8192),ue=g.callbacks,ue===null?g.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ye===null?(le=ye=ue,W=we):ye=ye.next=ue,A|=ce;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ue=M,M=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);ye===null&&(W=we),g.baseState=W,g.firstBaseUpdate=le,g.lastBaseUpdate=ye,b===null&&(g.shared.lanes=0),rl|=A,r.lanes=A,r.memoizedState=we}}function dt(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function rt(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)dt(c[r],o)}var tt=fe(null),Ut=fe(0);function Wt(r,o){r=lo,ge(Ut,r),ge(tt,o),lo=r|o.baseLanes}function yt(){ge(Ut,lo),ge(tt,tt.current)}function Mt(){lo=Ut.current,Ae(tt),Ae(Ut)}var at=0,Ue=null,Xe=null,ot=null,jt=!1,en=!1,kn=!1,ki=0,Nn=0,Jn=null,rs=0;function mt(){throw Error(i(321))}function as(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!Ci(r[c],o[c]))return!1;return!0}function os(r,o,c,d,g,b){return at=b,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,K.H=r===null||r.memoizedState===null?J0:ex,kn=!1,b=c(d,g),kn=!1,en&&(b=Dn(o,c,d,g)),no(r),b}function no(r){K.H=fm;var o=Xe!==null&&Xe.next!==null;if(at=0,ot=Xe=Ue=null,jt=!1,Nn=0,Jn=null,o)throw Error(i(300));r===null||ci||(r=r.dependencies,r!==null&&fc(r)&&(ci=!0))}function Dn(r,o,c,d){Ue=r;var g=0;do{if(en&&(Jn=null),Nn=0,en=!1,25<=g)throw Error(i(301));if(g+=1,ot=Xe=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}K.H=jk,b=o(c,d)}while(en);return b}function Kt(){var r=K.H,o=r.useState()[0];return o=typeof o.then=="function"?na(o):o,r=r.useState()[0],(Xe!==null?Xe.memoizedState:null)!==r&&(Ue.flags|=1024),o}function ei(){var r=ki!==0;return ki=0,r}function Ni(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function ir(r){if(jt){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}jt=!1}at=0,ot=Xe=Ue=null,en=!1,Nn=ki=0,Jn=null}function ti(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ue.memoizedState=ot=r:ot=ot.next=r,ot}function yn(){if(Xe===null){var r=Ue.alternate;r=r!==null?r.memoizedState:null}else r=Xe.next;var o=ot===null?Ue.memoizedState:ot.next;if(o!==null)ot=o,Xe=r;else{if(r===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));Xe=r,r={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},ot===null?Ue.memoizedState=ot=r:ot=ot.next=r}return ot}function uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function na(r){var o=Nn;return Nn+=1,Jn===null&&(Jn=[]),r=N(Jn,r,o),o=Ue,(ot===null?o.memoizedState:ot.next)===null&&(o=o.alternate,K.H=o===null||o.memoizedState===null?J0:ex),r}function hu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return na(r);if(r.$$typeof===G)return Zn(r)}throw Error(i(438,String(r)))}function Wh(r){var o=null,c=Ue.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=Ue.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=uu(),Ue.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),d=0;d<r;d++)c[d]=U;return o.index++,c}function Rs(r,o){return typeof o=="function"?o(r):o}function du(r){var o=yn();return fu(o,Xe,r)}function fu(r,o,c){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var g=r.baseQueue,b=d.pending;if(b!==null){if(g!==null){var A=g.next;g.next=b.next,b.next=A}o.baseQueue=g=b,d.pending=null}if(b=r.baseState,g===null)r.memoizedState=b;else{o=g.next;var M=A=null,W=null,le=o,ye=!1;do{var we=le.lane&-536870913;if(we!==le.lane?(Lt&we)===we:(at&we)===we){var ce=le.revertLane;if(ce===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),we===ss&&(ye=!0);else if((at&ce)===ce){le=le.next,ce===ss&&(ye=!0);continue}else we={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},W===null?(M=W=we,A=b):W=W.next=we,Ue.lanes|=ce,rl|=ce;we=le.action,kn&&c(b,we),b=le.hasEagerState?le.eagerState:c(b,we)}else ce={lane:we,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},W===null?(M=W=ce,A=b):W=W.next=ce,Ue.lanes|=we,rl|=we;le=le.next}while(le!==null&&le!==o);if(W===null?A=b:W.next=M,!Ci(b,r.memoizedState)&&(ci=!0,ye&&(c=Yi,c!==null)))throw c;r.memoizedState=b,r.baseState=A,r.baseQueue=W,d.lastRenderedState=b}return g===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Kh(r){var o=yn(),c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var d=c.dispatch,g=c.pending,b=o.memoizedState;if(g!==null){c.pending=null;var A=g=g.next;do b=r(b,A.action),A=A.next;while(A!==g);Ci(b,o.memoizedState)||(ci=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Yh(r,o,c){var d=Ue,g=yn(),b=Ft;if(b){if(c===void 0)throw Error(i(407));c=c()}else c=o();var A=!Ci((Xe||g).memoizedState,c);A&&(g.memoizedState=c,ci=!0),g=g.queue;var M=om.bind(null,d,g,r);if(id(2048,8,M,[r]),g.getSnapshot!==o||A||ot!==null&&ot.memoizedState.tag&1){if(d.flags|=2048,yu(9,um(),am.bind(null,d,g,c,o),null),un===null)throw Error(i(349));b||(at&124)!==0||Xh(d,o,c)}return c}function Xh(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Ue.updateQueue,o===null?(o=uu(),Ue.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function am(r,o,c,d){o.value=c,o.getSnapshot=d,ia(o)&&gc(r)}function om(r,o,c){return c(function(){ia(o)&&gc(r)})}function ia(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!Ci(r,c)}catch{return!0}}function gc(r){var o=Ri(r,2);o!==null&&Os(o,r,2)}function mu(r){var o=ti();if(typeof r=="function"){var c=r;if(r=c(),kn){ae(!0);try{c()}finally{ae(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:r},o}function Qh(r,o,c,d){return r.baseState=c,fu(r,Xe,typeof d=="function"?d:Rs)}function Zh(r,o,c,d,g){if(dm(r))throw Error(i(485));if(r=o.action,r!==null){var b={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};K.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Jh(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Jh(r,o){var c=o.action,d=o.payload,g=r.state;if(o.isTransition){var b=K.T,A={};K.T=A;try{var M=c(g,d),W=K.S;W!==null&&W(A,M),ed(r,o,M)}catch(le){pu(r,o,le)}finally{K.T=b}}else try{b=c(g,d),ed(r,o,b)}catch(le){pu(r,o,le)}}function ed(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){td(r,o,d)},function(d){return pu(r,o,d)}):td(r,o,c)}function td(r,o,c){o.status="fulfilled",o.value=c,lm(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,Jh(r,c)))}function pu(r,o,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,lm(o),o=o.next;while(o!==d)}r.action=null}function lm(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function cm(r,o){return o}function gu(r,o){if(Ft){var c=un.formState;if(c!==null){e:{var d=Ue;if(Ft){if(cn){t:{for(var g=cn,b=nr;g.nodeType!==8;){if(!b){g=null;break t}if(g=Ir(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){cn=Ir(g.nextSibling),d=g.data==="F!";break e}}Sr(d)}d=!1}d&&(o=c[0])}}return c=ti(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cm,lastRenderedState:o},c.queue=d,c=X0.bind(null,Ue,d),d.dispatch=c,d=mu(!1),b=_y.bind(null,Ue,!1,d.queue),d=ti(),g={state:o,dispatch:null,action:r,pending:null},d.queue=g,c=Zh.bind(null,Ue,g,b,c),g.dispatch=c,d.memoizedState=r,[o,c,!1]}function nd(r){var o=yn();return O0(o,Xe,r)}function O0(r,o,c){if(o=fu(r,o,cm)[0],r=du(Rs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=na(o)}catch(A){throw A===Zo?to:A}else d=o;o=yn();var g=o.queue,b=g.dispatch;return c!==o.memoizedState&&(Ue.flags|=2048,yu(9,um(),Dk.bind(null,g,c),null)),[d,b,r]}function Dk(r,o){r.action=o}function M0(r){var o=yn(),c=Xe;if(c!==null)return O0(o,c,r);yn(),o=o.memoizedState,c=yn();var d=c.queue.dispatch;return c.memoizedState=r,[o,d,!1]}function yu(r,o,c,d){return r={tag:r,create:c,deps:d,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=uu(),Ue.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,o.lastEffect=r),r}function um(){return{destroy:void 0,resource:void 0}}function P0(){return yn().memoizedState}function hm(r,o,c,d){var g=ti();d=d===void 0?null:d,Ue.flags|=r,g.memoizedState=yu(1|o,um(),c,d)}function id(r,o,c,d){var g=yn();d=d===void 0?null:d;var b=g.memoizedState.inst;Xe!==null&&d!==null&&as(d,Xe.memoizedState.deps)?g.memoizedState=yu(o,b,c,d):(Ue.flags|=r,g.memoizedState=yu(1|o,b,c,d))}function j0(r,o){hm(8390656,8,r,o)}function L0(r,o){id(2048,8,r,o)}function V0(r,o){return id(4,2,r,o)}function F0(r,o){return id(4,4,r,o)}function U0(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function z0(r,o,c){c=c!=null?c.concat([r]):null,id(4,4,U0.bind(null,o,r),c)}function my(){}function B0(r,o){var c=yn();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&as(o,d[1])?d[0]:(c.memoizedState=[r,o],r)}function H0(r,o){var c=yn();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&as(o,d[1]))return d[0];if(d=r(),kn){ae(!0);try{r()}finally{ae(!1)}}return c.memoizedState=[d,o],d}function py(r,o,c){return c===void 0||(at&1073741824)!==0?r.memoizedState=o:(r.memoizedState=c,r=Gx(),Ue.lanes|=r,rl|=r,c)}function $0(r,o,c,d){return Ci(c,o)?c:tt.current!==null?(r=py(r,c,d),Ci(r,o)||(ci=!0),r):(at&42)===0?(ci=!0,r.memoizedState=c):(r=Gx(),Ue.lanes|=r,rl|=r,o)}function q0(r,o,c,d,g){var b=se.p;se.p=b!==0&&8>b?b:8;var A=K.T,M={};K.T=M,_y(r,!1,o,c);try{var W=g(),le=K.S;if(le!==null&&le(M,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ye=fy(W,d);sd(r,o,ye,Ds(r))}else sd(r,o,d,Ds(r))}catch(we){sd(r,o,{then:function(){},status:"rejected",reason:we},Ds())}finally{se.p=b,K.T=A}}function Ok(){}function gy(r,o,c,d){if(r.tag!==5)throw Error(i(476));var g=G0(r).queue;q0(r,g,o,Ee,c===null?Ok:function(){return W0(r),c(d)})}function G0(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:Ee},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function W0(r){var o=G0(r).next.queue;sd(r,o,{},Ds())}function yy(){return Zn(Ed)}function K0(){return yn().memoizedState}function Y0(){return yn().memoizedState}function Mk(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=Ds();r=ve(c);var d=Oe(o,r,c);d!==null&&(Os(d,o,c),Be(d,o,c)),o={cache:mc()},r.payload=o;return}o=o.return}}function Pk(r,o,c){var d=Ds();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},dm(r)?Q0(o,c):(c=Dh(r,o,c,d),c!==null&&(Os(c,r,d),Z0(c,o,d)))}function X0(r,o,c){var d=Ds();sd(r,o,c,d)}function sd(r,o,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(dm(r))Q0(o,g);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var A=o.lastRenderedState,M=b(A,c);if(g.hasEagerState=!0,g.eagerState=M,Ci(M,A))return au(r,o,g,0),un===null&&ru(),!1}catch{}finally{}if(c=Dh(r,o,g,d),c!==null)return Os(c,r,d),Z0(c,o,d),!0}return!1}function _y(r,o,c,d){if(d={lane:2,revertLane:Xy(),action:d,hasEagerState:!1,eagerState:null,next:null},dm(r)){if(o)throw Error(i(479))}else o=Dh(r,c,d,2),o!==null&&Os(o,r,2)}function dm(r){var o=r.alternate;return r===Ue||o!==null&&o===Ue}function Q0(r,o){en=jt=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function Z0(r,o,c){if((c&4194048)!==0){var d=o.lanes;d&=r.pendingLanes,c|=d,o.lanes=c,Kl(r,c)}}var fm={readContext:Zn,use:hu,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},J0={readContext:Zn,use:hu,useCallback:function(r,o){return ti().memoizedState=[r,o===void 0?null:o],r},useContext:Zn,useEffect:j0,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,hm(4194308,4,U0.bind(null,o,r),c)},useLayoutEffect:function(r,o){return hm(4194308,4,r,o)},useInsertionEffect:function(r,o){hm(4,2,r,o)},useMemo:function(r,o){var c=ti();o=o===void 0?null:o;var d=r();if(kn){ae(!0);try{r()}finally{ae(!1)}}return c.memoizedState=[d,o],d},useReducer:function(r,o,c){var d=ti();if(c!==void 0){var g=c(o);if(kn){ae(!0);try{c(o)}finally{ae(!1)}}}else g=o;return d.memoizedState=d.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},d.queue=r,r=r.dispatch=Pk.bind(null,Ue,r),[d.memoizedState,r]},useRef:function(r){var o=ti();return r={current:r},o.memoizedState=r},useState:function(r){r=mu(r);var o=r.queue,c=X0.bind(null,Ue,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:my,useDeferredValue:function(r,o){var c=ti();return py(c,r,o)},useTransition:function(){var r=mu(!1);return r=q0.bind(null,Ue,r.queue,!0,!1),ti().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var d=Ue,g=ti();if(Ft){if(c===void 0)throw Error(i(407));c=c()}else{if(c=o(),un===null)throw Error(i(349));(Lt&124)!==0||Xh(d,o,c)}g.memoizedState=c;var b={value:c,getSnapshot:o};return g.queue=b,j0(om.bind(null,d,b,r),[r]),d.flags|=2048,yu(9,um(),am.bind(null,d,b,c,o),null),c},useId:function(){var r=ti(),o=un.identifierPrefix;if(Ft){var c=bi,d=Tr;c=(d&~(1<<32-oe(d)-1)).toString(32)+c,o=""+o+"R"+c,c=ki++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=rs++,o=""+o+"r"+c.toString(32)+"";return r.memoizedState=o},useHostTransitionStatus:yy,useFormState:gu,useActionState:gu,useOptimistic:function(r){var o=ti();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=_y.bind(null,Ue,!0,c),c.dispatch=o,[r,o]},useMemoCache:Wh,useCacheRefresh:function(){return ti().memoizedState=Mk.bind(null,Ue)}},ex={readContext:Zn,use:hu,useCallback:B0,useContext:Zn,useEffect:L0,useImperativeHandle:z0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:H0,useReducer:du,useRef:P0,useState:function(){return du(Rs)},useDebugValue:my,useDeferredValue:function(r,o){var c=yn();return $0(c,Xe.memoizedState,r,o)},useTransition:function(){var r=du(Rs)[0],o=yn().memoizedState;return[typeof r=="boolean"?r:na(r),o]},useSyncExternalStore:Yh,useId:K0,useHostTransitionStatus:yy,useFormState:nd,useActionState:nd,useOptimistic:function(r,o){var c=yn();return Qh(c,Xe,r,o)},useMemoCache:Wh,useCacheRefresh:Y0},jk={readContext:Zn,use:hu,useCallback:B0,useContext:Zn,useEffect:L0,useImperativeHandle:z0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:H0,useReducer:Kh,useRef:P0,useState:function(){return Kh(Rs)},useDebugValue:my,useDeferredValue:function(r,o){var c=yn();return Xe===null?py(c,r,o):$0(c,Xe.memoizedState,r,o)},useTransition:function(){var r=Kh(Rs)[0],o=yn().memoizedState;return[typeof r=="boolean"?r:na(r),o]},useSyncExternalStore:Yh,useId:K0,useHostTransitionStatus:yy,useFormState:M0,useActionState:M0,useOptimistic:function(r,o){var c=yn();return Xe!==null?Qh(c,Xe,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:Y0},_u=null,rd=0;function mm(r){var o=rd;return rd+=1,_u===null&&(_u=[]),N(_u,r,o)}function ad(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function pm(r,o){throw o.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function tx(r){var o=r._init;return o(r._payload)}function nx(r){function o(ne,Q){if(r){var re=ne.deletions;re===null?(ne.deletions=[Q],ne.flags|=16):re.push(Q)}}function c(ne,Q){if(!r)return null;for(;Q!==null;)o(ne,Q),Q=Q.sibling;return null}function d(ne){for(var Q=new Map;ne!==null;)ne.key!==null?Q.set(ne.key,ne):Q.set(ne.index,ne),ne=ne.sibling;return Q}function g(ne,Q){return ne=Er(ne,Q),ne.index=0,ne.sibling=null,ne}function b(ne,Q,re){return ne.index=re,r?(re=ne.alternate,re!==null?(re=re.index,re<Q?(ne.flags|=67108866,Q):re):(ne.flags|=67108866,Q)):(ne.flags|=1048576,Q)}function A(ne){return r&&ne.alternate===null&&(ne.flags|=67108866),ne}function M(ne,Q,re,xe){return Q===null||Q.tag!==6?(Q=Wo(re,ne.mode,xe),Q.return=ne,Q):(Q=g(Q,re),Q.return=ne,Q)}function W(ne,Q,re,xe){var Ke=re.type;return Ke===C?ye(ne,Q,re.props.children,xe,re.key):Q!==null&&(Q.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===I&&tx(Ke)===Q.type)?(Q=g(Q,re.props),ad(Q,re),Q.return=ne,Q):(Q=lu(re.type,re.key,re.props,null,ne.mode,xe),ad(Q,re),Q.return=ne,Q)}function le(ne,Q,re,xe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==re.containerInfo||Q.stateNode.implementation!==re.implementation?(Q=Ph(re,ne.mode,xe),Q.return=ne,Q):(Q=g(Q,re.children||[]),Q.return=ne,Q)}function ye(ne,Q,re,xe,Ke){return Q===null||Q.tag!==7?(Q=wr(re,ne.mode,xe,Ke),Q.return=ne,Q):(Q=g(Q,re),Q.return=ne,Q)}function we(ne,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Wo(""+Q,ne.mode,re),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return re=lu(Q.type,Q.key,Q.props,null,ne.mode,re),ad(re,Q),re.return=ne,re;case T:return Q=Ph(Q,ne.mode,re),Q.return=ne,Q;case I:var xe=Q._init;return Q=xe(Q._payload),we(ne,Q,re)}if(_e(Q)||B(Q))return Q=wr(Q,ne.mode,re,null),Q.return=ne,Q;if(typeof Q.then=="function")return we(ne,mm(Q),re);if(Q.$$typeof===G)return we(ne,Xo(ne,Q),re);pm(ne,Q)}return null}function ce(ne,Q,re,xe){var Ke=Q!==null?Q.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ke!==null?null:M(ne,Q,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case x:return re.key===Ke?W(ne,Q,re,xe):null;case T:return re.key===Ke?le(ne,Q,re,xe):null;case I:return Ke=re._init,re=Ke(re._payload),ce(ne,Q,re,xe)}if(_e(re)||B(re))return Ke!==null?null:ye(ne,Q,re,xe,null);if(typeof re.then=="function")return ce(ne,Q,mm(re),xe);if(re.$$typeof===G)return ce(ne,Q,Xo(ne,re),xe);pm(ne,re)}return null}function ue(ne,Q,re,xe,Ke){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ne=ne.get(re)||null,M(Q,ne,""+xe,Ke);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case x:return ne=ne.get(xe.key===null?re:xe.key)||null,W(Q,ne,xe,Ke);case T:return ne=ne.get(xe.key===null?re:xe.key)||null,le(Q,ne,xe,Ke);case I:var xt=xe._init;return xe=xt(xe._payload),ue(ne,Q,re,xe,Ke)}if(_e(xe)||B(xe))return ne=ne.get(re)||null,ye(Q,ne,xe,Ke,null);if(typeof xe.then=="function")return ue(ne,Q,re,mm(xe),Ke);if(xe.$$typeof===G)return ue(ne,Q,re,Xo(Q,xe),Ke);pm(Q,xe)}return null}function ut(ne,Q,re,xe){for(var Ke=null,xt=null,Qe=Q,st=Q=0,hi=null;Qe!==null&&st<re.length;st++){Qe.index>st?(hi=Qe,Qe=null):hi=Qe.sibling;var zt=ce(ne,Qe,re[st],xe);if(zt===null){Qe===null&&(Qe=hi);break}r&&Qe&&zt.alternate===null&&o(ne,Qe),Q=b(zt,Q,st),xt===null?Ke=zt:xt.sibling=zt,xt=zt,Qe=hi}if(st===re.length)return c(ne,Qe),Ft&&Ya(ne,st),Ke;if(Qe===null){for(;st<re.length;st++)Qe=we(ne,re[st],xe),Qe!==null&&(Q=b(Qe,Q,st),xt===null?Ke=Qe:xt.sibling=Qe,xt=Qe);return Ft&&Ya(ne,st),Ke}for(Qe=d(Qe);st<re.length;st++)hi=ue(Qe,ne,st,re[st],xe),hi!==null&&(r&&hi.alternate!==null&&Qe.delete(hi.key===null?st:hi.key),Q=b(hi,Q,st),xt===null?Ke=hi:xt.sibling=hi,xt=hi);return r&&Qe.forEach(function(ml){return o(ne,ml)}),Ft&&Ya(ne,st),Ke}function nt(ne,Q,re,xe){if(re==null)throw Error(i(151));for(var Ke=null,xt=null,Qe=Q,st=Q=0,hi=null,zt=re.next();Qe!==null&&!zt.done;st++,zt=re.next()){Qe.index>st?(hi=Qe,Qe=null):hi=Qe.sibling;var ml=ce(ne,Qe,zt.value,xe);if(ml===null){Qe===null&&(Qe=hi);break}r&&Qe&&ml.alternate===null&&o(ne,Qe),Q=b(ml,Q,st),xt===null?Ke=ml:xt.sibling=ml,xt=ml,Qe=hi}if(zt.done)return c(ne,Qe),Ft&&Ya(ne,st),Ke;if(Qe===null){for(;!zt.done;st++,zt=re.next())zt=we(ne,zt.value,xe),zt!==null&&(Q=b(zt,Q,st),xt===null?Ke=zt:xt.sibling=zt,xt=zt);return Ft&&Ya(ne,st),Ke}for(Qe=d(Qe);!zt.done;st++,zt=re.next())zt=ue(Qe,ne,st,zt.value,xe),zt!==null&&(r&&zt.alternate!==null&&Qe.delete(zt.key===null?st:zt.key),Q=b(zt,Q,st),xt===null?Ke=zt:xt.sibling=zt,xt=zt);return r&&Qe.forEach(function(LN){return o(ne,LN)}),Ft&&Ya(ne,st),Ke}function nn(ne,Q,re,xe){if(typeof re=="object"&&re!==null&&re.type===C&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case x:e:{for(var Ke=re.key;Q!==null;){if(Q.key===Ke){if(Ke=re.type,Ke===C){if(Q.tag===7){c(ne,Q.sibling),xe=g(Q,re.props.children),xe.return=ne,ne=xe;break e}}else if(Q.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===I&&tx(Ke)===Q.type){c(ne,Q.sibling),xe=g(Q,re.props),ad(xe,re),xe.return=ne,ne=xe;break e}c(ne,Q);break}else o(ne,Q);Q=Q.sibling}re.type===C?(xe=wr(re.props.children,ne.mode,xe,re.key),xe.return=ne,ne=xe):(xe=lu(re.type,re.key,re.props,null,ne.mode,xe),ad(xe,re),xe.return=ne,ne=xe)}return A(ne);case T:e:{for(Ke=re.key;Q!==null;){if(Q.key===Ke)if(Q.tag===4&&Q.stateNode.containerInfo===re.containerInfo&&Q.stateNode.implementation===re.implementation){c(ne,Q.sibling),xe=g(Q,re.children||[]),xe.return=ne,ne=xe;break e}else{c(ne,Q);break}else o(ne,Q);Q=Q.sibling}xe=Ph(re,ne.mode,xe),xe.return=ne,ne=xe}return A(ne);case I:return Ke=re._init,re=Ke(re._payload),nn(ne,Q,re,xe)}if(_e(re))return ut(ne,Q,re,xe);if(B(re)){if(Ke=B(re),typeof Ke!="function")throw Error(i(150));return re=Ke.call(re),nt(ne,Q,re,xe)}if(typeof re.then=="function")return nn(ne,Q,mm(re),xe);if(re.$$typeof===G)return nn(ne,Q,Xo(ne,re),xe);pm(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Q!==null&&Q.tag===6?(c(ne,Q.sibling),xe=g(Q,re),xe.return=ne,ne=xe):(c(ne,Q),xe=Wo(re,ne.mode,xe),xe.return=ne,ne=xe),A(ne)):c(ne,Q)}return function(ne,Q,re,xe){try{rd=0;var Ke=nn(ne,Q,re,xe);return _u=null,Ke}catch(Qe){if(Qe===Zo||Qe===to)throw Qe;var xt=Ki(29,Qe,null,ne.mode);return xt.lanes=xe,xt.return=ne,xt}finally{}}}var bu=nx(!0),ix=nx(!1),sr=fe(null),sa=null;function Jo(r){var o=r.alternate;ge(ni,ni.current&1),ge(sr,r),sa===null&&(o===null||tt.current!==null||o.memoizedState!==null)&&(sa=r)}function sx(r){if(r.tag===22){if(ge(ni,ni.current),ge(sr,r),sa===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(sa=r)}}else el()}function el(){ge(ni,ni.current),ge(sr,sr.current)}function io(r){Ae(sr),sa===r&&(sa=null),Ae(ni)}var ni=fe(0);function gm(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||l_(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function by(r,o,c,d){o=r.memoizedState,c=c(d,o),c=c==null?o:y({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var vy={enqueueSetState:function(r,o,c){r=r._reactInternals;var d=Ds(),g=ve(d);g.payload=o,c!=null&&(g.callback=c),o=Oe(r,g,d),o!==null&&(Os(o,r,d),Be(o,r,d))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var d=Ds(),g=ve(d);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=Oe(r,g,d),o!==null&&(Os(o,r,d),Be(o,r,d))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=Ds(),d=ve(c);d.tag=2,o!=null&&(d.callback=o),o=Oe(r,d,c),o!==null&&(Os(o,r,c),Be(o,r,c))}};function rx(r,o,c,d,g,b,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,b,A):o.prototype&&o.prototype.isPureReactComponent?!Ha(c,d)||!Ha(g,b):!0}function ax(r,o,c,d){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==r&&vy.enqueueReplaceState(o,o.state,null)}function yc(r,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(r=r.defaultProps){c===o&&(c=y({},c));for(var g in r)c[g]===void 0&&(c[g]=r[g])}return c}var ym=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function ox(r){ym(r)}function lx(r){console.error(r)}function cx(r){ym(r)}function _m(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function ux(r,o,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function xy(r,o,c){return c=ve(c),c.tag=3,c.payload={element:null},c.callback=function(){_m(r,o)},c}function hx(r){return r=ve(r),r.tag=3,r}function dx(r,o,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;r.payload=function(){return g(b)},r.callback=function(){ux(o,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){ux(o,c,d),typeof g!="function"&&(al===null?al=new Set([this]):al.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function Lk(r,o,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&dc(o,c,g,!0),c=sr.current,c!==null){switch(c.tag){case 13:return sa===null?qy():c.alternate===null&&Tn===0&&(Tn=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===Gh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Wy(r,d,g)),!1;case 22:return c.flags|=65536,d===Gh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Wy(r,d,g)),!1}throw Error(i(435,c.tag))}return Wy(r,d,g),qy(),!1}if(Ft)return o=sr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,d!==Jr&&(r=Error(i(422),{cause:d}),Cs(Gi(r,c)))):(d!==Jr&&(o=Error(i(423),{cause:d}),Cs(Gi(o,c))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,d=Gi(d,c),g=xy(r.stateNode,d,g),He(r,g),Tn!==4&&(Tn=2)),!1;var b=Error(i(520),{cause:d});if(b=Gi(b,c),fd===null?fd=[b]:fd.push(b),Tn!==4&&(Tn=2),o===null)return!0;d=Gi(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=g&-g,c.lanes|=r,r=xy(c.stateNode,d,r),He(c,r),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(al===null||!al.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=hx(g),dx(g,r,c,d),He(c,g),!1}c=c.return}while(c!==null);return!1}var fx=Error(i(461)),ci=!1;function vi(r,o,c,d){o.child=r===null?ix(o,null,c,d):bu(o,r.child,c,d)}function mx(r,o,c,d,g){c=c.render;var b=o.ref;if("ref"in d){var A={};for(var M in d)M!=="ref"&&(A[M]=d[M])}else A=d;return Qa(o),d=os(r,o,c,A,b,g),M=ei(),r!==null&&!ci?(Ni(r,o,g),so(r,o,g)):(Ft&&M&&jh(o),o.flags|=1,vi(r,o,d,g),o.child)}function px(r,o,c,d,g){if(r===null){var b=c.type;return typeof b=="function"&&!Mh(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,gx(r,o,b,d,g)):(r=lu(c.type,null,d,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(b=r.child,!Iy(r,g)){var A=b.memoizedProps;if(c=c.compare,c=c!==null?c:Ha,c(A,d)&&r.ref===o.ref)return so(r,o,g)}return o.flags|=1,r=Er(b,d),r.ref=o.ref,r.return=o,o.child=r}function gx(r,o,c,d,g){if(r!==null){var b=r.memoizedProps;if(Ha(b,d)&&r.ref===o.ref)if(ci=!1,o.pendingProps=d=b,Iy(r,g))(r.flags&131072)!==0&&(ci=!0);else return o.lanes=r.lanes,so(r,o,g)}return Ey(r,o,c,d,g)}function yx(r,o,c){var d=o.pendingProps,g=d.children,b=r!==null?r.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=b!==null?b.baseLanes|c:c,r!==null){for(g=o.child=r.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~d}else o.childLanes=0,o.child=null;return _x(r,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&cu(o,b!==null?b.cachePool:null),b!==null?Wt(o,b):yt(),sx(o);else return o.lanes=o.childLanes=536870912,_x(r,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(cu(o,b.cachePool),Wt(o,b),el(),o.memoizedState=null):(r!==null&&cu(o,null),yt(),el());return vi(r,o,g,c),o.child}function _x(r,o,c,d){var g=qh();return g=g===null?null:{parent:wn._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},r!==null&&cu(o,null),yt(),sx(o),r!==null&&dc(r,o,d,!0),null}function bm(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function Ey(r,o,c,d,g){return Qa(o),c=os(r,o,c,d,void 0,g),d=ei(),r!==null&&!ci?(Ni(r,o,g),so(r,o,g)):(Ft&&d&&jh(o),o.flags|=1,vi(r,o,c,g),o.child)}function bx(r,o,c,d,g,b){return Qa(o),o.updateQueue=null,c=Dn(o,d,c,g),no(r),d=ei(),r!==null&&!ci?(Ni(r,o,b),so(r,o,b)):(Ft&&d&&jh(o),o.flags|=1,vi(r,o,c,b),o.child)}function vx(r,o,c,d,g){if(Qa(o),o.stateNode===null){var b=Go,A=c.contextType;typeof A=="object"&&A!==null&&(b=Zn(A)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=vy,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},te(o),A=c.contextType,b.context=typeof A=="object"&&A!==null?Zn(A):Go,b.state=o.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(by(o,c,A,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&vy.enqueueReplaceState(b,b.state,null),Ze(o,d,b,g),ht(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(r===null){b=o.stateNode;var M=o.memoizedProps,W=yc(c,M);b.props=W;var le=b.context,ye=c.contextType;A=Go,typeof ye=="object"&&ye!==null&&(A=Zn(ye));var we=c.getDerivedStateFromProps;ye=typeof we=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,ye||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||le!==A)&&ax(o,b,d,A),Z=!1;var ce=o.memoizedState;b.state=ce,Ze(o,d,b,g),ht(),le=o.memoizedState,M||ce!==le||Z?(typeof we=="function"&&(by(o,c,we,d),le=o.memoizedState),(W=Z||rx(o,c,W,d,ce,le,A))?(ye||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=le),b.props=d,b.state=le,b.context=A,d=W):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,de(r,o),A=o.memoizedProps,ye=yc(c,A),b.props=ye,we=o.pendingProps,ce=b.context,le=c.contextType,W=Go,typeof le=="object"&&le!==null&&(W=Zn(le)),M=c.getDerivedStateFromProps,(le=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==we||ce!==W)&&ax(o,b,d,W),Z=!1,ce=o.memoizedState,b.state=ce,Ze(o,d,b,g),ht();var ue=o.memoizedState;A!==we||ce!==ue||Z||r!==null&&r.dependencies!==null&&fc(r.dependencies)?(typeof M=="function"&&(by(o,c,M,d),ue=o.memoizedState),(ye=Z||rx(o,c,ye,d,ce,ue,W)||r!==null&&r.dependencies!==null&&fc(r.dependencies))?(le||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ue,W),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ue,W)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===r.memoizedProps&&ce===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ce===r.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ue),b.props=d,b.state=ue,b.context=W,d=ye):(typeof b.componentDidUpdate!="function"||A===r.memoizedProps&&ce===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ce===r.memoizedState||(o.flags|=1024),d=!1)}return b=d,bm(r,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,r!==null&&d?(o.child=bu(o,r.child,null,g),o.child=bu(o,null,c,g)):vi(r,o,c,g),o.memoizedState=b.state,r=o.child):r=so(r,o,g),r}function xx(r,o,c,d){return hc(),o.flags|=256,vi(r,o,c,d),o.child}var wy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ty(r){return{baseLanes:r,cachePool:sm()}}function Sy(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=rr),r}function Ex(r,o,c){var d=o.pendingProps,g=!1,b=(o.flags&128)!==0,A;if((A=b)||(A=r!==null&&r.memoizedState===null?!1:(ni.current&2)!==0),A&&(g=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if(Ft){if(g?Jo(o):el(),Ft){var M=cn,W;if(W=M){e:{for(W=M,M=nr;W.nodeType!==8;){if(!M){M=null;break e}if(W=Ir(W.nextSibling),W===null){M=null;break e}}M=W}M!==null?(o.memoizedState={dehydrated:M,treeContext:Ka!==null?{id:Tr,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},W=Ki(18,null,null,0),W.stateNode=M,W.return=o,o.child=W,$n=o,cn=null,W=!0):W=!1}W||Sr(o)}if(M=o.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return l_(M)?o.lanes=32:o.lanes=536870912,null;io(o)}return M=d.children,d=d.fallback,g?(el(),g=o.mode,M=vm({mode:"hidden",children:M},g),d=wr(d,g,c,null),M.return=o,d.return=o,M.sibling=d,o.child=M,g=o.child,g.memoizedState=Ty(c),g.childLanes=Sy(r,A,c),o.memoizedState=wy,d):(Jo(o),Ay(o,M))}if(W=r.memoizedState,W!==null&&(M=W.dehydrated,M!==null)){if(b)o.flags&256?(Jo(o),o.flags&=-257,o=Cy(r,o,c)):o.memoizedState!==null?(el(),o.child=r.child,o.flags|=128,o=null):(el(),g=d.fallback,M=o.mode,d=vm({mode:"visible",children:d.children},M),g=wr(g,M,c,null),g.flags|=2,d.return=o,g.return=o,d.sibling=g,o.child=d,bu(o,r.child,null,c),d=o.child,d.memoizedState=Ty(c),d.childLanes=Sy(r,A,c),o.memoizedState=wy,o=g);else if(Jo(o),l_(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var le=A.dgst;A=le,d=Error(i(419)),d.stack="",d.digest=A,Cs({value:d,source:null,stack:null}),o=Cy(r,o,c)}else if(ci||dc(r,o,c,!1),A=(c&r.childLanes)!==0,ci||A){if(A=un,A!==null&&(d=c&-c,d=(d&42)!==0?1:Ur(d),d=(d&(A.suspendedLanes|c))!==0?0:d,d!==0&&d!==W.retryLane))throw W.retryLane=d,Ri(r,d),Os(A,r,d),fx;M.data==="$?"||qy(),o=Cy(r,o,c)}else M.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=W.treeContext,cn=Ir(M.nextSibling),$n=o,Ft=!0,Zr=null,nr=!1,r!==null&&(Ii[is++]=Tr,Ii[is++]=bi,Ii[is++]=Ka,Tr=r.id,bi=r.overflow,Ka=o),o=Ay(o,d.children),o.flags|=4096);return o}return g?(el(),g=d.fallback,M=o.mode,W=r.child,le=W.sibling,d=Er(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,le!==null?g=Er(le,g):(g=wr(g,M,c,null),g.flags|=2),g.return=o,d.return=o,d.sibling=g,o.child=d,d=g,g=o.child,M=r.child.memoizedState,M===null?M=Ty(c):(W=M.cachePool,W!==null?(le=wn._currentValue,W=W.parent!==le?{parent:le,pool:le}:W):W=sm(),M={baseLanes:M.baseLanes|c,cachePool:W}),g.memoizedState=M,g.childLanes=Sy(r,A,c),o.memoizedState=wy,d):(Jo(o),c=r.child,r=c.sibling,c=Er(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=c,o.memoizedState=null,c)}function Ay(r,o){return o=vm({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function vm(r,o){return r=Ki(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Cy(r,o,c){return bu(o,r.child,null,c),r=Ay(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function wx(r,o,c){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o),Uh(r.return,o,c)}function Ry(r,o,c,d,g){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=g)}function Tx(r,o,c){var d=o.pendingProps,g=d.revealOrder,b=d.tail;if(vi(r,o,d.children,c),d=ni.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wx(r,c,o);else if(r.tag===19)wx(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(ge(ni,d),g){case"forwards":for(c=o.child,g=null;c!==null;)r=c.alternate,r!==null&&gm(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Ry(o,!1,g,c,b);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&gm(r)===null){o.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}Ry(o,!0,c,null,b);break;case"together":Ry(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function so(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),rl|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(dc(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,c=Er(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Er(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function Iy(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&fc(r)))}function Vk(r,o,c){switch(o.tag){case 3:Se(o,o.stateNode.containerInfo),ea(o,wn,r.memoizedState.cache),hc();break;case 27:case 5:gt(o);break;case 4:Se(o,o.stateNode.containerInfo);break;case 10:ea(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Jo(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Ex(r,o,c):(Jo(o),r=so(r,o,c),r!==null?r.sibling:null);Jo(o);break;case 19:var g=(r.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(dc(r,o,c,!1),d=(c&o.childLanes)!==0),g){if(d)return Tx(r,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ge(ni,ni.current),d)break;return null;case 22:case 23:return o.lanes=0,yx(r,o,c);case 24:ea(o,wn,r.memoizedState.cache)}return so(r,o,c)}function Sx(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)ci=!0;else{if(!Iy(r,c)&&(o.flags&128)===0)return ci=!1,Vk(r,o,c);ci=(r.flags&131072)!==0}else ci=!1,Ft&&(o.flags&1048576)!==0&&Jf(o,Ko,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var d=o.elementType,g=d._init;if(d=g(d._payload),o.type=d,typeof d=="function")Mh(d)?(r=yc(d,r),o.tag=1,o=vx(null,o,d,r,c)):(o.tag=0,o=Ey(null,o,d,r,c));else{if(d!=null){if(g=d.$$typeof,g===X){o.tag=11,o=mx(null,o,d,r,c);break e}else if(g===F){o.tag=14,o=px(null,o,d,r,c);break e}}throw o=je(d)||d,Error(i(306,o,""))}}return o;case 0:return Ey(r,o,o.type,o.pendingProps,c);case 1:return d=o.type,g=yc(d,o.pendingProps),vx(r,o,d,g,c);case 3:e:{if(Se(o,o.stateNode.containerInfo),r===null)throw Error(i(387));d=o.pendingProps;var b=o.memoizedState;g=b.element,de(r,o),Ze(o,d,null,c);var A=o.memoizedState;if(d=A.cache,ea(o,wn,d),d!==b.cache&&zh(o,[wn],c,!0),ht(),d=A.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=xx(r,o,d,c);break e}else if(d!==g){g=Gi(Error(i(424)),o),Cs(g),o=xx(r,o,d,c);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(cn=Ir(r.firstChild),$n=o,Ft=!0,Zr=null,nr=!0,c=ix(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(hc(),d===g){o=so(r,o,c);break e}vi(r,o,d,c)}o=o.child}return o;case 26:return bm(r,o),r===null?(c=IE(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ft||(c=o.type,r=o.pendingProps,d=Mm(Pe.current).createElement(c),d[Sn]=o,d[xn]=r,Ei(d,c,r),wt(d),o.stateNode=d):o.memoizedState=IE(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return gt(o),r===null&&Ft&&(d=o.stateNode=AE(o.type,o.pendingProps,Pe.current),$n=o,nr=!0,g=cn,cl(o.type)?(c_=g,cn=Ir(d.firstChild)):cn=g),vi(r,o,o.pendingProps.children,c),bm(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Ft&&((g=d=cn)&&(d=dN(d,o.type,o.pendingProps,nr),d!==null?(o.stateNode=d,$n=o,cn=Ir(d.firstChild),nr=!1,g=!0):g=!1),g||Sr(o)),gt(o),g=o.type,b=o.pendingProps,A=r!==null?r.memoizedProps:null,d=b.children,r_(g,b)?d=null:A!==null&&r_(g,A)&&(o.flags|=32),o.memoizedState!==null&&(g=os(r,o,Kt,null,null,c),Ed._currentValue=g),bm(r,o),vi(r,o,d,c),o.child;case 6:return r===null&&Ft&&((r=c=cn)&&(c=fN(c,o.pendingProps,nr),c!==null?(o.stateNode=c,$n=o,cn=null,r=!0):r=!1),r||Sr(o)),null;case 13:return Ex(r,o,c);case 4:return Se(o,o.stateNode.containerInfo),d=o.pendingProps,r===null?o.child=bu(o,null,d,c):vi(r,o,d,c),o.child;case 11:return mx(r,o,o.type,o.pendingProps,c);case 7:return vi(r,o,o.pendingProps,c),o.child;case 8:return vi(r,o,o.pendingProps.children,c),o.child;case 12:return vi(r,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,ea(o,o.type,d.value),vi(r,o,d.children,c),o.child;case 9:return g=o.type._context,d=o.pendingProps.children,Qa(o),g=Zn(g),d=d(g),o.flags|=1,vi(r,o,d,c),o.child;case 14:return px(r,o,o.type,o.pendingProps,c);case 15:return gx(r,o,o.type,o.pendingProps,c);case 19:return Tx(r,o,c);case 31:return d=o.pendingProps,c=o.mode,d={mode:d.mode,children:d.children},r===null?(c=vm(d,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Er(r.child,d),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return yx(r,o,c);case 24:return Qa(o),d=Zn(wn),r===null?(g=qh(),g===null&&(g=un,b=mc(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),o.memoizedState={parent:d,cache:g},te(o),ea(o,wn,g)):((r.lanes&c)!==0&&(de(r,o),Ze(o,null,null,c),ht()),g=r.memoizedState,b=o.memoizedState,g.parent!==d?(g={parent:d,cache:d},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ea(o,wn,d)):(d=b.cache,ea(o,wn,d),d!==g.cache&&zh(o,[wn],c,!0))),vi(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ro(r){r.flags|=4}function Ax(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!ME(o)){if(o=sr.current,o!==null&&((Lt&4194048)===Lt?sa!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||o!==sa))throw _=Gh,pc;r.flags|=8192}}function xm(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Wl():536870912,r.lanes|=o,wu|=o)}function od(r,o){if(!Ft)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function _n(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(o)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=d,r.childLanes=c,o}function Fk(r,o,c){var d=o.pendingProps;switch(Lh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(o),null;case 1:return _n(o),null;case 3:return c=o.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Cr(wn),Et(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(uc(o)?ro(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Yo())),_n(o),null;case 26:return c=o.memoizedState,r===null?(ro(o),c!==null?(_n(o),Ax(o,c)):(_n(o),o.flags&=-16777217)):c?c!==r.memoizedState?(ro(o),_n(o),Ax(o,c)):(_n(o),o.flags&=-16777217):(r.memoizedProps!==d&&ro(o),_n(o),o.flags&=-16777217),null;case 27:ee(o),c=Pe.current;var g=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==d&&ro(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return _n(o),null}r=ke.current,uc(o)?Vh(o):(r=AE(g,d,c),o.stateNode=r,ro(o))}return _n(o),null;case 5:if(ee(o),c=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&ro(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return _n(o),null}if(r=ke.current,uc(o))Vh(o);else{switch(g=Mm(Pe.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}r[Sn]=o,r[xn]=d;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=r;e:switch(Ei(r,c,d),c){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ro(o)}}return _n(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==d&&ro(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(i(166));if(r=Pe.current,uc(o)){if(r=o.stateNode,c=o.memoizedProps,d=null,g=$n,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}r[Sn]=o,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||bE(r.nodeValue,c)),r||Sr(o)}else r=Mm(r).createTextNode(d),r[Sn]=o,o.stateNode=r}return _n(o),null;case 13:if(d=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=uc(o),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Sn]=o}else hc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_n(o),g=!1}else g=Yo(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(io(o),o):(io(o),null)}if(io(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,r=r!==null&&r.memoizedState!==null,c){d=o.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)}return c!==r&&c&&(o.child.flags|=8192),xm(o,o.updateQueue),_n(o),null;case 4:return Et(),r===null&&e_(o.stateNode.containerInfo),_n(o),null;case 10:return Cr(o.type),_n(o),null;case 19:if(Ae(ni),g=o.memoizedState,g===null)return _n(o),null;if(d=(o.flags&128)!==0,b=g.rendering,b===null)if(d)od(g,!1);else{if(Tn!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(b=gm(r),b!==null){for(o.flags|=128,od(g,!1),r=b.updateQueue,o.updateQueue=r,xm(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)Zf(c,r),c=c.sibling;return ge(ni,ni.current&1|2),o.child}r=r.sibling}g.tail!==null&&Ht()>Tm&&(o.flags|=128,d=!0,od(g,!1),o.lanes=4194304)}else{if(!d)if(r=gm(b),r!==null){if(o.flags|=128,d=!0,r=r.updateQueue,o.updateQueue=r,xm(o,r),od(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Ft)return _n(o),null}else 2*Ht()-g.renderingStartTime>Tm&&c!==536870912&&(o.flags|=128,d=!0,od(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(r=g.last,r!==null?r.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Ht(),o.sibling=null,r=ni.current,ge(ni,d?r&1|2:r&1),o):(_n(o),null);case 22:case 23:return io(o),Mt(),d=o.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(_n(o),o.subtreeFlags&6&&(o.flags|=8192)):_n(o),c=o.updateQueue,c!==null&&xm(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),r!==null&&Ae(eo),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Cr(wn),_n(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Uk(r,o){switch(Lh(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Cr(wn),Et(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ee(o),null;case 13:if(io(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));hc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Ae(ni),null;case 4:return Et(),null;case 10:return Cr(o.type),null;case 22:case 23:return io(o),Mt(),r!==null&&Ae(eo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Cr(wn),null;case 25:return null;default:return null}}function Cx(r,o){switch(Lh(o),o.tag){case 3:Cr(wn),Et();break;case 26:case 27:case 5:ee(o);break;case 4:Et();break;case 13:io(o);break;case 19:Ae(ni);break;case 10:Cr(o.type);break;case 22:case 23:io(o),Mt(),r!==null&&Ae(eo);break;case 24:Cr(wn)}}function ld(r,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&r)===r){d=void 0;var b=c.create,A=c.inst;d=b(),A.destroy=d}c=c.next}while(c!==g)}}catch(M){an(o,o.return,M)}}function tl(r,o,c){try{var d=o.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&r)===r){var A=d.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,g=o;var W=c,le=M;try{le()}catch(ye){an(g,W,ye)}}}d=d.next}while(d!==b)}}catch(ye){an(o,o.return,ye)}}function Rx(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{rt(o,c)}catch(d){an(r,r.return,d)}}}function Ix(r,o,c){c.props=yc(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){an(r,o,d)}}function cd(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(g){an(r,o,g)}}function ra(r,o){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){an(r,o,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){an(r,o,g)}else c.current=null}function kx(r){var o=r.type,c=r.memoizedProps,d=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){an(r,r.return,g)}}function ky(r,o,c){try{var d=r.stateNode;oN(d,r.type,c,o),d[xn]=o}catch(g){an(r,r.return,g)}}function Nx(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&cl(r.type)||r.tag===4}function Ny(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Nx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&cl(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Dy(r,o,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Om));else if(d!==4&&(d===27&&cl(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(Dy(r,o,c),r=r.sibling;r!==null;)Dy(r,o,c),r=r.sibling}function Em(r,o,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(d!==4&&(d===27&&cl(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Em(r,o,c),r=r.sibling;r!==null;)Em(r,o,c),r=r.sibling}function Dx(r){var o=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Ei(o,d,c),o[Sn]=r,o[xn]=c}catch(b){an(r,r.return,b)}}var ao=!1,On=!1,Oy=!1,Ox=typeof WeakSet=="function"?WeakSet:Set,ui=null;function zk(r,o){if(r=r.containerInfo,i_=Um,r=Th(r),su(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var A=0,M=-1,W=-1,le=0,ye=0,we=r,ce=null;t:for(;;){for(var ue;we!==c||g!==0&&we.nodeType!==3||(M=A+g),we!==b||d!==0&&we.nodeType!==3||(W=A+d),we.nodeType===3&&(A+=we.nodeValue.length),(ue=we.firstChild)!==null;)ce=we,we=ue;for(;;){if(we===r)break t;if(ce===c&&++le===g&&(M=A),ce===b&&++ye===d&&(W=A),(ue=we.nextSibling)!==null)break;we=ce,ce=we.parentNode}we=ue}c=M===-1||W===-1?null:{start:M,end:W}}else c=null}c=c||{start:0,end:0}}else c=null;for(s_={focusedElem:r,selectionRange:c},Um=!1,ui=o;ui!==null;)if(o=ui,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,ui=r;else for(;ui!==null;){switch(o=ui,b=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=o,g=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var ut=yc(c.type,g,c.elementType===c.type);r=d.getSnapshotBeforeUpdate(ut,b),d.__reactInternalSnapshotBeforeUpdate=r}catch(nt){an(c,c.return,nt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)o_(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":o_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,ui=r;break}ui=o.return}}function Mx(r,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:nl(r,c),d&4&&ld(5,c);break;case 1:if(nl(r,c),d&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(A){an(c,c.return,A)}else{var g=yc(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(g,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){an(c,c.return,A)}}d&64&&Rx(c),d&512&&cd(c,c.return);break;case 3:if(nl(r,c),d&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{rt(r,o)}catch(A){an(c,c.return,A)}}break;case 27:o===null&&d&4&&Dx(c);case 26:case 5:nl(r,c),o===null&&d&4&&kx(c),d&512&&cd(c,c.return);break;case 12:nl(r,c);break;case 13:nl(r,c),d&4&&Lx(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Xk.bind(null,c),mN(r,c))));break;case 22:if(d=c.memoizedState!==null||ao,!d){o=o!==null&&o.memoizedState!==null||On,g=ao;var b=On;ao=d,(On=o)&&!b?il(r,c,(c.subtreeFlags&8772)!==0):nl(r,c),ao=g,On=b}break;case 30:break;default:nl(r,c)}}function Px(r){var o=r.alternate;o!==null&&(r.alternate=null,Px(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Br(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var pn=null,ls=!1;function oo(r,o,c){for(c=c.child;c!==null;)jx(r,o,c),c=c.sibling}function jx(r,o,c){if($&&typeof $.onCommitFiberUnmount=="function")try{$.onCommitFiberUnmount(ze,c)}catch{}switch(c.tag){case 26:On||ra(c,o),oo(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:On||ra(c,o);var d=pn,g=ls;cl(c.type)&&(pn=c.stateNode,ls=!1),oo(r,o,c),_d(c.stateNode),pn=d,ls=g;break;case 5:On||ra(c,o);case 6:if(d=pn,g=ls,pn=null,oo(r,o,c),pn=d,ls=g,pn!==null)if(ls)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(c.stateNode)}catch(b){an(c,o,b)}else try{pn.removeChild(c.stateNode)}catch(b){an(c,o,b)}break;case 18:pn!==null&&(ls?(r=pn,TE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Ad(r)):TE(pn,c.stateNode));break;case 4:d=pn,g=ls,pn=c.stateNode.containerInfo,ls=!0,oo(r,o,c),pn=d,ls=g;break;case 0:case 11:case 14:case 15:On||tl(2,c,o),On||tl(4,c,o),oo(r,o,c);break;case 1:On||(ra(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Ix(c,o,d)),oo(r,o,c);break;case 21:oo(r,o,c);break;case 22:On=(d=On)||c.memoizedState!==null,oo(r,o,c),On=d;break;default:oo(r,o,c)}}function Lx(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ad(r)}catch(c){an(o,o.return,c)}}function Bk(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Ox),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Ox),o;default:throw Error(i(435,r.tag))}}function My(r,o){var c=Bk(r);o.forEach(function(d){var g=Qk.bind(null,r,d);c.has(d)||(c.add(d),d.then(g,g))})}function Is(r,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],b=r,A=o,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(cl(M.type)){pn=M.stateNode,ls=!1;break e}break;case 5:pn=M.stateNode,ls=!1;break e;case 3:case 4:pn=M.stateNode.containerInfo,ls=!0;break e}M=M.return}if(pn===null)throw Error(i(160));jx(b,A,g),pn=null,ls=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Vx(o,r),o=o.sibling}var Rr=null;function Vx(r,o){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Is(o,r),ks(r),d&4&&(tl(3,r,r.return),ld(3,r),tl(5,r,r.return));break;case 1:Is(o,r),ks(r),d&512&&(On||c===null||ra(c,c.return)),d&64&&ao&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Rr;if(Is(o,r),ks(r),d&512&&(On||c===null||ra(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){e:{d=r.type,c=r.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[zs]||b[Sn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),Ei(b,d,c),b[Sn]=r,wt(b),d=b;break e;case"link":var A=DE("link","href",g).get(d+(c.href||""));if(A){for(var M=0;M<A.length;M++)if(b=A[M],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(M,1);break t}}b=g.createElement(d),Ei(b,d,c),g.head.appendChild(b);break;case"meta":if(A=DE("meta","content",g).get(d+(c.content||""))){for(M=0;M<A.length;M++)if(b=A[M],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(M,1);break t}}b=g.createElement(d),Ei(b,d,c),g.head.appendChild(b);break;default:throw Error(i(468,d))}b[Sn]=r,wt(b),d=b}r.stateNode=d}else OE(g,r.type,r.stateNode);else r.stateNode=NE(g,d,r.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?OE(g,r.type,r.stateNode):NE(g,d,r.memoizedProps)):d===null&&r.stateNode!==null&&ky(r,r.memoizedProps,c.memoizedProps)}break;case 27:Is(o,r),ks(r),d&512&&(On||c===null||ra(c,c.return)),c!==null&&d&4&&ky(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Is(o,r),ks(r),d&512&&(On||c===null||ra(c,c.return)),r.flags&32){g=r.stateNode;try{Yn(g,"")}catch(ue){an(r,r.return,ue)}}d&4&&r.stateNode!=null&&(g=r.memoizedProps,ky(r,g,c!==null?c.memoizedProps:g)),d&1024&&(Oy=!0);break;case 6:if(Is(o,r),ks(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(ue){an(r,r.return,ue)}}break;case 3:if(Lm=null,g=Rr,Rr=Pm(o.containerInfo),Is(o,r),Rr=g,ks(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ad(o.containerInfo)}catch(ue){an(r,r.return,ue)}Oy&&(Oy=!1,Fx(r));break;case 4:d=Rr,Rr=Pm(r.stateNode.containerInfo),Is(o,r),ks(r),Rr=d;break;case 12:Is(o,r),ks(r);break;case 13:Is(o,r),ks(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Uy=Ht()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,My(r,d)));break;case 22:g=r.memoizedState!==null;var W=c!==null&&c.memoizedState!==null,le=ao,ye=On;if(ao=le||g,On=ye||W,Is(o,r),On=ye,ao=le,ks(r),d&8192)e:for(o=r.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||W||ao||On||_c(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){W=c=o;try{if(b=W.stateNode,g)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=W.stateNode;var we=W.memoizedProps.style,ce=we!=null&&we.hasOwnProperty("display")?we.display:null;M.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){an(W,W.return,ue)}}}else if(o.tag===6){if(c===null){W=o;try{W.stateNode.nodeValue=g?"":W.memoizedProps}catch(ue){an(W,W.return,ue)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,My(r,c))));break;case 19:Is(o,r),ks(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,My(r,d)));break;case 30:break;case 21:break;default:Is(o,r),ks(r)}}function ks(r){var o=r.flags;if(o&2){try{for(var c,d=r.return;d!==null;){if(Nx(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,b=Ny(r);Em(r,b,g);break;case 5:var A=c.stateNode;c.flags&32&&(Yn(A,""),c.flags&=-33);var M=Ny(r);Em(r,M,A);break;case 3:case 4:var W=c.stateNode.containerInfo,le=Ny(r);Dy(r,le,W);break;default:throw Error(i(161))}}catch(ye){an(r,r.return,ye)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Fx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;Fx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function nl(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Mx(r,o.alternate,o),o=o.sibling}function _c(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:tl(4,o,o.return),_c(o);break;case 1:ra(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Ix(o,o.return,c),_c(o);break;case 27:_d(o.stateNode);case 26:case 5:ra(o,o.return),_c(o);break;case 22:o.memoizedState===null&&_c(o);break;case 30:_c(o);break;default:_c(o)}r=r.sibling}}function il(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,g=r,b=o,A=b.flags;switch(b.tag){case 0:case 11:case 15:il(g,b,c),ld(4,b);break;case 1:if(il(g,b,c),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(le){an(d,d.return,le)}if(d=b,g=d.updateQueue,g!==null){var M=d.stateNode;try{var W=g.shared.hiddenCallbacks;if(W!==null)for(g.shared.hiddenCallbacks=null,g=0;g<W.length;g++)dt(W[g],M)}catch(le){an(d,d.return,le)}}c&&A&64&&Rx(b),cd(b,b.return);break;case 27:Dx(b);case 26:case 5:il(g,b,c),c&&d===null&&A&4&&kx(b),cd(b,b.return);break;case 12:il(g,b,c);break;case 13:il(g,b,c),c&&A&4&&Lx(g,b);break;case 22:b.memoizedState===null&&il(g,b,c),cd(b,b.return);break;case 30:break;default:il(g,b,c)}o=o.sibling}}function Py(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Qo(c))}function jy(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Qo(r))}function aa(r,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ux(r,o,c,d),o=o.sibling}function Ux(r,o,c,d){var g=o.flags;switch(o.tag){case 0:case 11:case 15:aa(r,o,c,d),g&2048&&ld(9,o);break;case 1:aa(r,o,c,d);break;case 3:aa(r,o,c,d),g&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Qo(r)));break;case 12:if(g&2048){aa(r,o,c,d),r=o.stateNode;try{var b=o.memoizedProps,A=b.id,M=b.onPostCommit;typeof M=="function"&&M(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(W){an(o,o.return,W)}}else aa(r,o,c,d);break;case 13:aa(r,o,c,d);break;case 23:break;case 22:b=o.stateNode,A=o.alternate,o.memoizedState!==null?b._visibility&2?aa(r,o,c,d):ud(r,o):b._visibility&2?aa(r,o,c,d):(b._visibility|=2,vu(r,o,c,d,(o.subtreeFlags&10256)!==0)),g&2048&&Py(A,o);break;case 24:aa(r,o,c,d),g&2048&&jy(o.alternate,o);break;default:aa(r,o,c,d)}}function vu(r,o,c,d,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=r,A=o,M=c,W=d,le=A.flags;switch(A.tag){case 0:case 11:case 15:vu(b,A,M,W,g),ld(8,A);break;case 23:break;case 22:var ye=A.stateNode;A.memoizedState!==null?ye._visibility&2?vu(b,A,M,W,g):ud(b,A):(ye._visibility|=2,vu(b,A,M,W,g)),g&&le&2048&&Py(A.alternate,A);break;case 24:vu(b,A,M,W,g),g&&le&2048&&jy(A.alternate,A);break;default:vu(b,A,M,W,g)}o=o.sibling}}function ud(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,d=o,g=d.flags;switch(d.tag){case 22:ud(c,d),g&2048&&Py(d.alternate,d);break;case 24:ud(c,d),g&2048&&jy(d.alternate,d);break;default:ud(c,d)}o=o.sibling}}var hd=8192;function xu(r){if(r.subtreeFlags&hd)for(r=r.child;r!==null;)zx(r),r=r.sibling}function zx(r){switch(r.tag){case 26:xu(r),r.flags&hd&&r.memoizedState!==null&&CN(Rr,r.memoizedState,r.memoizedProps);break;case 5:xu(r);break;case 3:case 4:var o=Rr;Rr=Pm(r.stateNode.containerInfo),xu(r),Rr=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=hd,hd=16777216,xu(r),hd=o):xu(r));break;default:xu(r)}}function Bx(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function dd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];ui=d,$x(d,r)}Bx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Hx(r),r=r.sibling}function Hx(r){switch(r.tag){case 0:case 11:case 15:dd(r),r.flags&2048&&tl(9,r,r.return);break;case 3:dd(r);break;case 12:dd(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,wm(r)):dd(r);break;default:dd(r)}}function wm(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];ui=d,$x(d,r)}Bx(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:tl(8,o,o.return),wm(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,wm(o));break;default:wm(o)}r=r.sibling}}function $x(r,o){for(;ui!==null;){var c=ui;switch(c.tag){case 0:case 11:case 15:tl(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Qo(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ui=d;else e:for(c=r;ui!==null;){d=ui;var g=d.sibling,b=d.return;if(Px(d),d===c){ui=null;break e}if(g!==null){g.return=b,ui=g;break e}ui=b}}}var Hk={getCacheForType:function(r){var o=Zn(wn),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c}},$k=typeof WeakMap=="function"?WeakMap:Map,Yt=0,un=null,Tt=null,Lt=0,Xt=0,Ns=null,sl=!1,Eu=!1,Ly=!1,lo=0,Tn=0,rl=0,bc=0,Vy=0,rr=0,wu=0,fd=null,cs=null,Fy=!1,Uy=0,Tm=1/0,Sm=null,al=null,xi=0,ol=null,Tu=null,Su=0,zy=0,By=null,qx=null,md=0,Hy=null;function Ds(){if((Yt&2)!==0&&Lt!==0)return Lt&-Lt;if(K.T!==null){var r=ss;return r!==0?r:Xy()}return zr()}function Gx(){rr===0&&(rr=(Lt&536870912)===0||Ft?Gl():536870912);var r=sr.current;return r!==null&&(r.flags|=32),rr}function Os(r,o,c){(r===un&&(Xt===2||Xt===9)||r.cancelPendingCommit!==null)&&(Au(r,0),ll(r,Lt,rr,!1)),Qi(r,c),((Yt&2)===0||r!==un)&&(r===un&&((Yt&2)===0&&(bc|=c),Tn===4&&ll(r,Lt,rr,!1)),oa(r))}function Wx(r,o,c){if((Yt&6)!==0)throw Error(i(327));var d=!c&&(o&124)===0&&(o&r.expiredLanes)===0||mi(r,o),g=d?Wk(r,o):Gy(r,o,!0),b=d;do{if(g===0){Eu&&!d&&ll(r,o,0,!1);break}else{if(c=r.current.alternate,b&&!qk(c)){g=Gy(r,o,!1),b=!1;continue}if(g===2){if(b=o,r.errorRecoveryDisabledLanes&b)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var M=r;g=fd;var W=M.current.memoizedState.isDehydrated;if(W&&(Au(M,A).flags|=256),A=Gy(M,A,!1),A!==2){if(Ly&&!W){M.errorRecoveryDisabledLanes|=b,bc|=b,g=4;break e}b=cs,cs=g,b!==null&&(cs===null?cs=b:cs.push.apply(cs,b))}g=A}if(b=!1,g!==2)continue}}if(g===1){Au(r,0),ll(r,o,0,!0);break}e:{switch(d=r,b=g,b){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ll(d,o,rr,!sl);break e;case 2:cs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=Uy+300-Ht(),10<g)){if(ll(d,o,rr,!sl),bt(d,0,!0)!==0)break e;d.timeoutHandle=EE(Kx.bind(null,d,c,cs,Sm,Fy,o,rr,bc,wu,sl,b,2,-0,0),g);break e}Kx(d,c,cs,Sm,Fy,o,rr,bc,wu,sl,b,0,-0,0)}}break}while(!0);oa(r)}function Kx(r,o,c,d,g,b,A,M,W,le,ye,we,ce,ue){if(r.timeoutHandle=-1,we=o.subtreeFlags,(we&8192||(we&16785408)===16785408)&&(xd={stylesheets:null,count:0,unsuspend:AN},zx(o),we=RN(),we!==null)){r.cancelPendingCommit=we(tE.bind(null,r,o,b,c,d,g,A,M,W,ye,1,ce,ue)),ll(r,b,A,!le);return}tE(r,o,b,c,d,g,A,M,W)}function qk(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],b=g.getSnapshot;g=g.value;try{if(!Ci(b(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ll(r,o,c,d){o&=~Vy,o&=~bc,r.suspendedLanes|=o,r.pingedLanes&=~o,d&&(r.warmLanes|=o),d=r.expirationTimes;for(var g=o;0<g;){var b=31-oe(g),A=1<<b;d[b]=-1,g&=~A}c!==0&&_s(r,c,o)}function Am(){return(Yt&6)===0?(pd(0),!1):!0}function $y(){if(Tt!==null){if(Xt===0)var r=Tt.return;else r=Tt,Ar=Xa=null,ir(r),_u=null,rd=0,r=Tt;for(;r!==null;)Cx(r.alternate,r),r=r.return;Tt=null}}function Au(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,cN(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),$y(),un=r,Tt=c=Er(r.current,null),Lt=o,Xt=0,Ns=null,sl=!1,Eu=mi(r,o),Ly=!1,wu=rr=Vy=bc=rl=Tn=0,cs=fd=null,Fy=!1,(o&8)!==0&&(o|=o&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=o;0<d;){var g=31-oe(d),b=1<<g;o|=r[g],d&=~b}return lo=o,ru(),c}function Yx(r,o){Ue=null,K.H=fm,o===Zo||o===to?(o=w(),Xt=3):o===pc?(o=w(),Xt=4):Xt=o===fx?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ns=o,Tt===null&&(Tn=1,_m(r,Gi(o,r.current)))}function Xx(){var r=K.H;return K.H=fm,r===null?fm:r}function Qx(){var r=K.A;return K.A=Hk,r}function qy(){Tn=4,sl||(Lt&4194048)!==Lt&&sr.current!==null||(Eu=!0),(rl&134217727)===0&&(bc&134217727)===0||un===null||ll(un,Lt,rr,!1)}function Gy(r,o,c){var d=Yt;Yt|=2;var g=Xx(),b=Qx();(un!==r||Lt!==o)&&(Sm=null,Au(r,o)),o=!1;var A=Tn;e:do try{if(Xt!==0&&Tt!==null){var M=Tt,W=Ns;switch(Xt){case 8:$y(),A=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(o=!0);var le=Xt;if(Xt=0,Ns=null,Cu(r,M,W,le),c&&Eu){A=0;break e}break;default:le=Xt,Xt=0,Ns=null,Cu(r,M,W,le)}}Gk(),A=Tn;break}catch(ye){Yx(r,ye)}while(!0);return o&&r.shellSuspendCounter++,Ar=Xa=null,Yt=d,K.H=g,K.A=b,Tt===null&&(un=null,Lt=0,ru()),A}function Gk(){for(;Tt!==null;)Zx(Tt)}function Wk(r,o){var c=Yt;Yt|=2;var d=Xx(),g=Qx();un!==r||Lt!==o?(Sm=null,Tm=Ht()+500,Au(r,o)):Eu=mi(r,o);e:do try{if(Xt!==0&&Tt!==null){o=Tt;var b=Ns;t:switch(Xt){case 1:Xt=0,Ns=null,Cu(r,o,b,1);break;case 2:case 9:if(rm(b)){Xt=0,Ns=null,Jx(o);break}o=function(){Xt!==2&&Xt!==9||un!==r||(Xt=7),oa(r)},b.then(o,o);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:rm(b)?(Xt=0,Ns=null,Jx(o)):(Xt=0,Ns=null,Cu(r,o,b,7));break;case 5:var A=null;switch(Tt.tag){case 26:A=Tt.memoizedState;case 5:case 27:var M=Tt;if(!A||ME(A)){Xt=0,Ns=null;var W=M.sibling;if(W!==null)Tt=W;else{var le=M.return;le!==null?(Tt=le,Cm(le)):Tt=null}break t}}Xt=0,Ns=null,Cu(r,o,b,5);break;case 6:Xt=0,Ns=null,Cu(r,o,b,6);break;case 8:$y(),Tn=6;break e;default:throw Error(i(462))}}Kk();break}catch(ye){Yx(r,ye)}while(!0);return Ar=Xa=null,K.H=d,K.A=g,Yt=c,Tt!==null?0:(un=null,Lt=0,ru(),Tn)}function Kk(){for(;Tt!==null&&!it();)Zx(Tt)}function Zx(r){var o=Sx(r.alternate,r,lo);r.memoizedProps=r.pendingProps,o===null?Cm(r):Tt=o}function Jx(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=bx(c,o,o.pendingProps,o.type,void 0,Lt);break;case 11:o=bx(c,o,o.pendingProps,o.type.render,o.ref,Lt);break;case 5:ir(o);default:Cx(c,o),o=Tt=Zf(o,lo),o=Sx(c,o,lo)}r.memoizedProps=r.pendingProps,o===null?Cm(r):Tt=o}function Cu(r,o,c,d){Ar=Xa=null,ir(o),_u=null,rd=0;var g=o.return;try{if(Lk(r,g,o,c,Lt)){Tn=1,_m(r,Gi(c,r.current)),Tt=null;return}}catch(b){if(g!==null)throw Tt=g,b;Tn=1,_m(r,Gi(c,r.current)),Tt=null;return}o.flags&32768?(Ft||d===1?r=!0:Eu||(Lt&536870912)!==0?r=!1:(sl=r=!0,(d===2||d===9||d===3||d===6)&&(d=sr.current,d!==null&&d.tag===13&&(d.flags|=16384))),eE(o,r)):Cm(o)}function Cm(r){var o=r;do{if((o.flags&32768)!==0){eE(o,sl);return}r=o.return;var c=Fk(o.alternate,o,lo);if(c!==null){Tt=c;return}if(o=o.sibling,o!==null){Tt=o;return}Tt=o=r}while(o!==null);Tn===0&&(Tn=5)}function eE(r,o){do{var c=Uk(r.alternate,r);if(c!==null){c.flags&=32767,Tt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Tt=r;return}Tt=r=c}while(r!==null);Tn=6,Tt=null}function tE(r,o,c,d,g,b,A,M,W){r.cancelPendingCommit=null;do Rm();while(xi!==0);if((Yt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(b=o.lanes|o.childLanes,b|=Nh,No(r,c,b,A,M,W),r===un&&(Tt=un=null,Lt=0),Tu=o,ol=r,Su=c,zy=b,By=g,qx=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Zk(Bi,function(){return aE(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=K.T,K.T=null,g=se.p,se.p=2,A=Yt,Yt|=4;try{zk(r,o,c)}finally{Yt=A,se.p=g,K.T=d}}xi=1,nE(),iE(),sE()}}function nE(){if(xi===1){xi=0;var r=ol,o=Tu,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=K.T,K.T=null;var d=se.p;se.p=2;var g=Yt;Yt|=4;try{Vx(o,r);var b=s_,A=Th(r.containerInfo),M=b.focusedElem,W=b.selectionRange;if(A!==M&&M&&M.ownerDocument&&Gf(M.ownerDocument.documentElement,M)){if(W!==null&&su(M)){var le=W.start,ye=W.end;if(ye===void 0&&(ye=le),"selectionStart"in M)M.selectionStart=le,M.selectionEnd=Math.min(ye,M.value.length);else{var we=M.ownerDocument||document,ce=we&&we.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),ut=M.textContent.length,nt=Math.min(W.start,ut),nn=W.end===void 0?nt:Math.min(W.end,ut);!ue.extend&&nt>nn&&(A=nn,nn=nt,nt=A);var ne=qf(M,nt),Q=qf(M,nn);if(ne&&Q&&(ue.rangeCount!==1||ue.anchorNode!==ne.node||ue.anchorOffset!==ne.offset||ue.focusNode!==Q.node||ue.focusOffset!==Q.offset)){var re=we.createRange();re.setStart(ne.node,ne.offset),ue.removeAllRanges(),nt>nn?(ue.addRange(re),ue.extend(Q.node,Q.offset)):(re.setEnd(Q.node,Q.offset),ue.addRange(re))}}}}for(we=[],ue=M;ue=ue.parentNode;)ue.nodeType===1&&we.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<we.length;M++){var xe=we[M];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Um=!!i_,s_=i_=null}finally{Yt=g,se.p=d,K.T=c}}r.current=o,xi=2}}function iE(){if(xi===2){xi=0;var r=ol,o=Tu,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=K.T,K.T=null;var d=se.p;se.p=2;var g=Yt;Yt|=4;try{Mx(r,o.alternate,o)}finally{Yt=g,se.p=d,K.T=c}}xi=3}}function sE(){if(xi===4||xi===3){xi=0,mn();var r=ol,o=Tu,c=Su,d=qx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?xi=5:(xi=0,Tu=ol=null,rE(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(al=null),Do(c),o=o.stateNode,$&&typeof $.onCommitFiberRoot=="function")try{$.onCommitFiberRoot(ze,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=K.T,g=se.p,se.p=2,K.T=null;try{for(var b=r.onRecoverableError,A=0;A<d.length;A++){var M=d[A];b(M.value,{componentStack:M.stack})}}finally{K.T=o,se.p=g}}(Su&3)!==0&&Rm(),oa(r),g=r.pendingLanes,(c&4194090)!==0&&(g&42)!==0?r===Hy?md++:(md=0,Hy=r):md=0,pd(0)}}function rE(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Qo(o)))}function Rm(r){return nE(),iE(),sE(),aE()}function aE(){if(xi!==5)return!1;var r=ol,o=zy;zy=0;var c=Do(Su),d=K.T,g=se.p;try{se.p=32>c?32:c,K.T=null,c=By,By=null;var b=ol,A=Su;if(xi=0,Tu=ol=null,Su=0,(Yt&6)!==0)throw Error(i(331));var M=Yt;if(Yt|=4,Hx(b.current),Ux(b,b.current,A,c),Yt=M,pd(0,!1),$&&typeof $.onPostCommitFiberRoot=="function")try{$.onPostCommitFiberRoot(ze,b)}catch{}return!0}finally{se.p=g,K.T=d,rE(r,o)}}function oE(r,o,c){o=Gi(c,o),o=xy(r.stateNode,o,2),r=Oe(r,o,2),r!==null&&(Qi(r,2),oa(r))}function an(r,o,c){if(r.tag===3)oE(r,r,c);else for(;o!==null;){if(o.tag===3){oE(o,r,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(al===null||!al.has(d))){r=Gi(c,r),c=hx(2),d=Oe(o,c,2),d!==null&&(dx(c,d,o,r),Qi(d,2),oa(d));break}}o=o.return}}function Wy(r,o,c){var d=r.pingCache;if(d===null){d=r.pingCache=new $k;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(c)||(Ly=!0,g.add(c),r=Yk.bind(null,r,o,c),o.then(r,r))}function Yk(r,o,c){var d=r.pingCache;d!==null&&d.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,un===r&&(Lt&c)===c&&(Tn===4||Tn===3&&(Lt&62914560)===Lt&&300>Ht()-Uy?(Yt&2)===0&&Au(r,0):Vy|=c,wu===Lt&&(wu=0)),oa(r)}function lE(r,o){o===0&&(o=Wl()),r=Ri(r,o),r!==null&&(Qi(r,o),oa(r))}function Xk(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),lE(r,c)}function Qk(r,o){var c=0;switch(r.tag){case 13:var d=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(o),lE(r,c)}function Zk(r,o){return Re(r,o)}var Im=null,Ru=null,Ky=!1,km=!1,Yy=!1,vc=0;function oa(r){r!==Ru&&r.next===null&&(Ru===null?Im=Ru=r:Ru=Ru.next=r),km=!0,Ky||(Ky=!0,eN())}function pd(r,o){if(!Yy&&km){Yy=!0;do for(var c=!1,d=Im;d!==null;){if(r!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var A=d.suspendedLanes,M=d.pingedLanes;b=(1<<31-oe(42|r)+1)-1,b&=g&~(A&~M),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,dE(d,b))}else b=Lt,b=bt(d,d===un?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||mi(d,b)||(c=!0,dE(d,b));d=d.next}while(c);Yy=!1}}function Jk(){cE()}function cE(){km=Ky=!1;var r=0;vc!==0&&(lN()&&(r=vc),vc=0);for(var o=Ht(),c=null,d=Im;d!==null;){var g=d.next,b=uE(d,o);b===0?(d.next=null,c===null?Im=g:c.next=g,g===null&&(Ru=c)):(c=d,(r!==0||(b&3)!==0)&&(km=!0)),d=g}pd(r)}function uE(r,o){for(var c=r.suspendedLanes,d=r.pingedLanes,g=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var A=31-oe(b),M=1<<A,W=g[A];W===-1?((M&c)===0||(M&d)!==0)&&(g[A]=ys(M,o)):W<=o&&(r.expiredLanes|=M),b&=~M}if(o=un,c=Lt,c=bt(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===o&&(Xt===2||Xt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&et(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||mi(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(d!==null&&et(d),Do(c)){case 2:case 8:c=gs;break;case 32:c=Bi;break;case 268435456:c=Vs;break;default:c=Bi}return d=hE.bind(null,r),c=Re(c,d),r.callbackPriority=o,r.callbackNode=c,o}return d!==null&&d!==null&&et(d),r.callbackPriority=2,r.callbackNode=null,2}function hE(r,o){if(xi!==0&&xi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Rm()&&r.callbackNode!==c)return null;var d=Lt;return d=bt(r,r===un?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(Wx(r,d,o),uE(r,Ht()),r.callbackNode!=null&&r.callbackNode===c?hE.bind(null,r):null)}function dE(r,o){if(Rm())return null;Wx(r,o,!0)}function eN(){uN(function(){(Yt&6)!==0?Re(Xi,Jk):cE()})}function Xy(){return vc===0&&(vc=Gl()),vc}function fE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Lo(""+r)}function mE(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function tN(r,o,c,d,g){if(o==="submit"&&c&&c.stateNode===g){var b=fE((g[xn]||null).action),A=d.submitter;A&&(o=(o=A[xn]||null)?fE(o.formAction):A.getAttribute("formAction"),o!==null&&(b=o,A=null));var M=new $r("action","action",null,d,g);r.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(vc!==0){var W=A?mE(g,A):new FormData(g);gy(c,{pending:!0,data:W,method:g.method,action:b},null,W)}}else typeof b=="function"&&(M.preventDefault(),W=A?mE(g,A):new FormData(g),gy(c,{pending:!0,data:W,method:g.method,action:b},b,W))},currentTarget:g}]})}}for(var Qy=0;Qy<kh.length;Qy++){var Zy=kh[Qy],nN=Zy.toLowerCase(),iN=Zy[0].toUpperCase()+Zy.slice(1);As(nN,"on"+iN)}As(Xr,"onAnimationEnd"),As(tr,"onAnimationIteration"),As(Ch,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(uy,"onTransitionRun"),As(Yf,"onTransitionStart"),As(Xf,"onTransitionCancel"),As(Rh,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rn("onBeforeInput",["compositionend","keypress","textInput","paste"]),rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gd));function pE(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],g=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var A=d.length-1;0<=A;A--){var M=d[A],W=M.instance,le=M.currentTarget;if(M=M.listener,W!==b&&g.isPropagationStopped())break e;b=M,g.currentTarget=le;try{b(g)}catch(ye){ym(ye)}g.currentTarget=null,b=W}else for(A=0;A<d.length;A++){if(M=d[A],W=M.instance,le=M.currentTarget,M=M.listener,W!==b&&g.isPropagationStopped())break e;b=M,g.currentTarget=le;try{b(g)}catch(ye){ym(ye)}g.currentTarget=null,b=W}}}}function St(r,o){var c=o[Yl];c===void 0&&(c=o[Yl]=new Set);var d=r+"__bubble";c.has(d)||(gE(o,r,2,!1),c.add(d))}function Jy(r,o,c){var d=0;o&&(d|=4),gE(c,r,d,o)}var Nm="_reactListening"+Math.random().toString(36).slice(2);function e_(r){if(!r[Nm]){r[Nm]=!0,Kn.forEach(function(c){c!=="selectionchange"&&(sN.has(c)||Jy(c,!1,r),Jy(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Nm]||(o[Nm]=!0,Jy("selectionchange",!1,o))}}function gE(r,o,c,d){switch(UE(o)){case 2:var g=NN;break;case 8:g=DN;break;default:g=m_}c=g.bind(null,o,c,r),g=void 0,!Xn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?r.addEventListener(o,c,{capture:!0,passive:g}):r.addEventListener(o,c,!0):g!==void 0?r.addEventListener(o,c,{passive:g}):r.addEventListener(o,c,!1)}function t_(r,o,c,d,g){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var M=d.stateNode.containerInfo;if(M===g)break;if(A===4)for(A=d.return;A!==null;){var W=A.tag;if((W===3||W===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;M!==null;){if(A=bs(M),A===null)return;if(W=A.tag,W===5||W===6||W===26||W===27){d=b=A;continue e}M=M.parentNode}}d=d.return}Zl(function(){var le=b,ye=yi(c),we=[];e:{var ce=Ih.get(r);if(ce!==void 0){var ue=$r,ut=r;switch(r){case"keypress":if(Zs(c)===0)break e;case"keydown":case"keyup":ue=Ba;break;case"focusin":ut="focus",ue=La;break;case"focusout":ut="blur",ue=La;break;case"beforeblur":case"afterblur":ue=La;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Jc;break;case Xr:case tr:case Ch:ue=Va;break;case Rh:ue=eu;break;case"scroll":case"scrollend":ue=ec;break;case"wheel":ue=zo;break;case"copy":case"cut":case"paste":ue=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ws;break;case"toggle":case"beforetoggle":ue=ac}var nt=(o&4)!==0,nn=!nt&&(r==="scroll"||r==="scrollend"),ne=nt?ce!==null?ce+"Capture":null:ce;nt=[];for(var Q=le,re;Q!==null;){var xe=Q;if(re=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||re===null||ne===null||(xe=Hr(Q,ne),xe!=null&&nt.push(yd(Q,xe,re))),nn)break;Q=Q.return}0<nt.length&&(ce=new ue(ce,ut,null,c,ye),we.push({event:ce,listeners:nt}))}}if((o&7)===0){e:{if(ce=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",ce&&c!==li&&(ut=c.relatedTarget||c.fromElement)&&(bs(ut)||ut[Zi]))break e;if((ue||ce)&&(ce=ye.window===ye?ye:(ce=ye.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?(ut=c.relatedTarget||c.toElement,ue=le,ut=ut?bs(ut):null,ut!==null&&(nn=a(ut),nt=ut.tag,ut!==nn||nt!==5&&nt!==27&&nt!==6)&&(ut=null)):(ue=null,ut=le),ue!==ut)){if(nt=Qn,xe="onMouseLeave",ne="onMouseEnter",Q="mouse",(r==="pointerout"||r==="pointerover")&&(nt=ws,xe="onPointerLeave",ne="onPointerEnter",Q="pointer"),nn=ue==null?ce:Hs(ue),re=ut==null?ce:Hs(ut),ce=new nt(xe,Q+"leave",ue,c,ye),ce.target=nn,ce.relatedTarget=re,xe=null,bs(ye)===le&&(nt=new nt(ne,Q+"enter",ut,c,ye),nt.target=re,nt.relatedTarget=nn,xe=nt),nn=xe,ue&&ut)t:{for(nt=ue,ne=ut,Q=0,re=nt;re;re=Iu(re))Q++;for(re=0,xe=ne;xe;xe=Iu(xe))re++;for(;0<Q-re;)nt=Iu(nt),Q--;for(;0<re-Q;)ne=Iu(ne),re--;for(;Q--;){if(nt===ne||ne!==null&&nt===ne.alternate)break t;nt=Iu(nt),ne=Iu(ne)}nt=null}else nt=null;ue!==null&&yE(we,ce,ue,nt,!1),ut!==null&&nn!==null&&yE(we,nn,ut,nt,!0)}}e:{if(ce=le?Hs(le):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var Ke=Ff;else if(Rn(ce))if(xh)Ke=$f;else{Ke=Bf;var xt=ly}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&Oa(le.elementType)&&(Ke=Ff):Ke=Hf;if(Ke&&(Ke=Ke(r,le))){In(we,Ke,c,ye);break e}xt&&xt(r,ce,le),r==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Ws(ce,"number",ce.value)}switch(xt=le?Hs(le):window,r){case"focusin":(Rn(xt)||xt.contentEditable==="true")&&($o=xt,Sh=le,lc=null);break;case"focusout":lc=Sh=$o=null;break;case"mousedown":Ah=!0;break;case"contextmenu":case"mouseup":case"dragend":Ah=!1,Wf(we,c,ye);break;case"selectionchange":if(cy)break;case"keydown":case"keyup":Wf(we,c,ye)}var Qe;if(er)e:{switch(r){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Rt?he(r,c)&&(st="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(st="onCompositionStart");st&&(S&&c.locale!=="ko"&&(Rt||st!=="onCompositionStart"?st==="onCompositionEnd"&&Rt&&(Qe=ja()):(xs=ye,Qs="value"in xs?xs.value:xs.textContent,Rt=!0)),xt=Dm(le,st),0<xt.length&&(st=new tc(st,r,null,c,ye),we.push({event:st,listeners:xt}),Qe?st.data=Qe:(Qe=Me(c),Qe!==null&&(st.data=Qe)))),(Qe=E?Cn(r,c):It(r,c))&&(st=Dm(le,"onBeforeInput"),0<st.length&&(xt=new tc("onBeforeInput","beforeinput",null,c,ye),we.push({event:xt,listeners:st}),xt.data=Qe)),tN(we,r,le,c,ye)}pE(we,o)})}function yd(r,o,c){return{instance:r,listener:o,currentTarget:c}}function Dm(r,o){for(var c=o+"Capture",d=[];r!==null;){var g=r,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Hr(r,c),g!=null&&d.unshift(yd(r,g,b)),g=Hr(r,o),g!=null&&d.push(yd(r,g,b))),r.tag===3)return d;r=r.return}return[]}function Iu(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function yE(r,o,c,d,g){for(var b=o._reactName,A=[];c!==null&&c!==d;){var M=c,W=M.alternate,le=M.stateNode;if(M=M.tag,W!==null&&W===d)break;M!==5&&M!==26&&M!==27||le===null||(W=le,g?(le=Hr(c,b),le!=null&&A.unshift(yd(c,le,W))):g||(le=Hr(c,b),le!=null&&A.push(yd(c,le,W)))),c=c.return}A.length!==0&&r.push({event:o,listeners:A})}var rN=/\r\n?/g,aN=/\u0000|\uFFFD/g;function _E(r){return(typeof r=="string"?r:""+r).replace(rN,`
`).replace(aN,"")}function bE(r,o){return o=_E(o),_E(r)===o}function Om(){}function tn(r,o,c,d,g,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Yn(r,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Yn(r,""+d);break;case"className":pi(r,"class",d);break;case"tabIndex":pi(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":pi(r,c,d);break;case"style":Ys(r,d,b);break;case"data":if(o!=="object"){pi(r,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=Lo(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&tn(r,o,"name",g.name,g,null),tn(r,o,"formEncType",g.formEncType,g,null),tn(r,o,"formMethod",g.formMethod,g,null),tn(r,o,"formTarget",g.formTarget,g,null)):(tn(r,o,"encType",g.encType,g,null),tn(r,o,"method",g.method,g,null),tn(r,o,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=Lo(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=Om);break;case"onScroll":d!=null&&St("scroll",r);break;case"onScrollEnd":d!=null&&St("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=Lo(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":St("beforetoggle",r),St("toggle",r),qs(r,"popover",d);break;case"xlinkActuate":Un(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Un(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Un(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Un(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Un(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Un(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Un(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Un(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Un(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":qs(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Xc.get(c)||c,qs(r,c,d))}}function n_(r,o,c,d,g,b){switch(c){case"style":Ys(r,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof d=="string"?Yn(r,d):(typeof d=="number"||typeof d=="bigint")&&Yn(r,""+d);break;case"onScroll":d!=null&&St("scroll",r);break;case"onScrollEnd":d!=null&&St("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fn.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),b=r[xn]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(o,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,d,g);break e}c in r?r[c]=d:d===!0?r.setAttribute(c,""):qs(r,c,d)}}}function Ei(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",r),St("load",r);var d=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var A=c[b];if(A!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:tn(r,o,b,A,c,null)}}g&&tn(r,o,"srcSet",c.srcSet,c,null),d&&tn(r,o,"src",c.src,c,null);return;case"input":St("invalid",r);var M=b=A=g=null,W=null,le=null;for(d in c)if(c.hasOwnProperty(d)){var ye=c[d];if(ye!=null)switch(d){case"name":g=ye;break;case"type":A=ye;break;case"checked":W=ye;break;case"defaultChecked":le=ye;break;case"value":b=ye;break;case"defaultValue":M=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,o));break;default:tn(r,o,d,ye,c,null)}}br(r,b,M,W,le,A,g,!1),Da(r);return;case"select":St("invalid",r),d=A=b=null;for(g in c)if(c.hasOwnProperty(g)&&(M=c[g],M!=null))switch(g){case"value":b=M;break;case"defaultValue":A=M;break;case"multiple":d=M;default:tn(r,o,g,M,c,null)}o=b,c=A,r.multiple=!!d,o!=null?zn(r,!!d,o,!1):c!=null&&zn(r,!!d,c,!0);return;case"textarea":St("invalid",r),b=g=d=null;for(A in c)if(c.hasOwnProperty(A)&&(M=c[A],M!=null))switch(A){case"value":d=M;break;case"defaultValue":g=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:tn(r,o,A,M,c,null)}Ks(r,d,g,b),Da(r);return;case"option":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:tn(r,o,W,d,c,null)}return;case"dialog":St("beforetoggle",r),St("toggle",r),St("cancel",r),St("close",r);break;case"iframe":case"object":St("load",r);break;case"video":case"audio":for(d=0;d<gd.length;d++)St(gd[d],r);break;case"image":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"embed":case"source":case"link":St("error",r),St("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in c)if(c.hasOwnProperty(le)&&(d=c[le],d!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:tn(r,o,le,d,c,null)}return;default:if(Oa(o)){for(ye in c)c.hasOwnProperty(ye)&&(d=c[ye],d!==void 0&&n_(r,o,ye,d,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(d=c[M],d!=null&&tn(r,o,M,d,c,null))}function oN(r,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,A=null,M=null,W=null,le=null,ye=null;for(ue in c){var we=c[ue];if(c.hasOwnProperty(ue)&&we!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":W=we;default:d.hasOwnProperty(ue)||tn(r,o,ue,null,d,we)}}for(var ce in d){var ue=d[ce];if(we=c[ce],d.hasOwnProperty(ce)&&(ue!=null||we!=null))switch(ce){case"type":b=ue;break;case"name":g=ue;break;case"checked":le=ue;break;case"defaultChecked":ye=ue;break;case"value":A=ue;break;case"defaultValue":M=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,o));break;default:ue!==we&&tn(r,o,ce,ue,d,we)}}ln(r,A,M,W,le,ye,b,g);return;case"select":ue=A=M=ce=null;for(b in c)if(W=c[b],c.hasOwnProperty(b)&&W!=null)switch(b){case"value":break;case"multiple":ue=W;default:d.hasOwnProperty(b)||tn(r,o,b,null,d,W)}for(g in d)if(b=d[g],W=c[g],d.hasOwnProperty(g)&&(b!=null||W!=null))switch(g){case"value":ce=b;break;case"defaultValue":M=b;break;case"multiple":A=b;default:b!==W&&tn(r,o,g,b,d,W)}o=M,c=A,d=ue,ce!=null?zn(r,!!c,ce,!1):!!d!=!!c&&(o!=null?zn(r,!!c,o,!0):zn(r,!!c,c?[]:"",!1));return;case"textarea":ue=ce=null;for(M in c)if(g=c[M],c.hasOwnProperty(M)&&g!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:tn(r,o,M,null,d,g)}for(A in d)if(g=d[A],b=c[A],d.hasOwnProperty(A)&&(g!=null||b!=null))switch(A){case"value":ce=g;break;case"defaultValue":ue=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==b&&tn(r,o,A,g,d,b)}Ct(r,ce,ue);return;case"option":for(var ut in c)if(ce=c[ut],c.hasOwnProperty(ut)&&ce!=null&&!d.hasOwnProperty(ut))switch(ut){case"selected":r.selected=!1;break;default:tn(r,o,ut,null,d,ce)}for(W in d)if(ce=d[W],ue=c[W],d.hasOwnProperty(W)&&ce!==ue&&(ce!=null||ue!=null))switch(W){case"selected":r.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:tn(r,o,W,ce,d,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)ce=c[nt],c.hasOwnProperty(nt)&&ce!=null&&!d.hasOwnProperty(nt)&&tn(r,o,nt,null,d,ce);for(le in d)if(ce=d[le],ue=c[le],d.hasOwnProperty(le)&&ce!==ue&&(ce!=null||ue!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,o));break;default:tn(r,o,le,ce,d,ue)}return;default:if(Oa(o)){for(var nn in c)ce=c[nn],c.hasOwnProperty(nn)&&ce!==void 0&&!d.hasOwnProperty(nn)&&n_(r,o,nn,void 0,d,ce);for(ye in d)ce=d[ye],ue=c[ye],!d.hasOwnProperty(ye)||ce===ue||ce===void 0&&ue===void 0||n_(r,o,ye,ce,d,ue);return}}for(var ne in c)ce=c[ne],c.hasOwnProperty(ne)&&ce!=null&&!d.hasOwnProperty(ne)&&tn(r,o,ne,null,d,ce);for(we in d)ce=d[we],ue=c[we],!d.hasOwnProperty(we)||ce===ue||ce==null&&ue==null||tn(r,o,we,ce,d,ue)}var i_=null,s_=null;function Mm(r){return r.nodeType===9?r:r.ownerDocument}function vE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xE(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function r_(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var a_=null;function lN(){var r=window.event;return r&&r.type==="popstate"?r===a_?!1:(a_=r,!0):(a_=null,!1)}var EE=typeof setTimeout=="function"?setTimeout:void 0,cN=typeof clearTimeout=="function"?clearTimeout:void 0,wE=typeof Promise=="function"?Promise:void 0,uN=typeof queueMicrotask=="function"?queueMicrotask:typeof wE<"u"?function(r){return wE.resolve(null).then(r).catch(hN)}:EE;function hN(r){setTimeout(function(){throw r})}function cl(r){return r==="head"}function TE(r,o){var c=o,d=0,g=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<d&&8>d){c=d;var A=r.ownerDocument;if(c&1&&_d(A.documentElement),c&2&&_d(A.body),c&4)for(c=A.head,_d(c),A=c.firstChild;A;){var M=A.nextSibling,W=A.nodeName;A[zs]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=M}}if(g===0){r.removeChild(b),Ad(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:d=c.charCodeAt(0)-48;else d=0;c=b}while(c);Ad(o)}function o_(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":o_(c),Br(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function dN(r,o,c,d){for(;r.nodeType===1;){var g=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[zs])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Ir(r.nextSibling),r===null)break}return null}function fN(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Ir(r.nextSibling),r===null))return null;return r}function l_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function mN(r,o){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Ir(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var c_=null;function SE(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}function AE(r,o,c){switch(o=Mm(c),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function _d(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Br(r)}var ar=new Map,CE=new Set;function Pm(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var co=se.d;se.d={f:pN,r:gN,D:yN,C:_N,L:bN,m:vN,X:EN,S:xN,M:wN};function pN(){var r=co.f(),o=Am();return r||o}function gN(r){var o=Bs(r);o!==null&&o.tag===5&&o.type==="form"?W0(o):co.r(r)}var ku=typeof document>"u"?null:document;function RE(r,o,c){var d=ku;if(d&&typeof o=="string"&&o){var g=Jt(o);g='link[rel="'+r+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),CE.has(g)||(CE.add(g),r={rel:r,crossOrigin:c,href:o},d.querySelector(g)===null&&(o=d.createElement("link"),Ei(o,"link",r),wt(o),d.head.appendChild(o)))}}function yN(r){co.D(r),RE("dns-prefetch",r,null)}function _N(r,o){co.C(r,o),RE("preconnect",r,o)}function bN(r,o,c){co.L(r,o,c);var d=ku;if(d&&r&&o){var g='link[rel="preload"][as="'+Jt(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Jt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Jt(c.imageSizes)+'"]')):g+='[href="'+Jt(r)+'"]';var b=g;switch(o){case"style":b=Nu(r);break;case"script":b=Du(r)}ar.has(b)||(r=y({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),ar.set(b,r),d.querySelector(g)!==null||o==="style"&&d.querySelector(bd(b))||o==="script"&&d.querySelector(vd(b))||(o=d.createElement("link"),Ei(o,"link",r),wt(o),d.head.appendChild(o)))}}function vN(r,o){co.m(r,o);var c=ku;if(c&&r){var d=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Jt(d)+'"][href="'+Jt(r)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Du(r)}if(!ar.has(b)&&(r=y({rel:"modulepreload",href:r},o),ar.set(b,r),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(vd(b)))return}d=c.createElement("link"),Ei(d,"link",r),wt(d),c.head.appendChild(d)}}}function xN(r,o,c){co.S(r,o,c);var d=ku;if(d&&r){var g=En(d).hoistableStyles,b=Nu(r);o=o||"default";var A=g.get(b);if(!A){var M={loading:0,preload:null};if(A=d.querySelector(bd(b)))M.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":o},c),(c=ar.get(b))&&u_(r,c);var W=A=d.createElement("link");wt(W),Ei(W,"link",r),W._p=new Promise(function(le,ye){W.onload=le,W.onerror=ye}),W.addEventListener("load",function(){M.loading|=1}),W.addEventListener("error",function(){M.loading|=2}),M.loading|=4,jm(A,o,d)}A={type:"stylesheet",instance:A,count:1,state:M},g.set(b,A)}}}function EN(r,o){co.X(r,o);var c=ku;if(c&&r){var d=En(c).hoistableScripts,g=Du(r),b=d.get(g);b||(b=c.querySelector(vd(g)),b||(r=y({src:r,async:!0},o),(o=ar.get(g))&&h_(r,o),b=c.createElement("script"),wt(b),Ei(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function wN(r,o){co.M(r,o);var c=ku;if(c&&r){var d=En(c).hoistableScripts,g=Du(r),b=d.get(g);b||(b=c.querySelector(vd(g)),b||(r=y({src:r,async:!0,type:"module"},o),(o=ar.get(g))&&h_(r,o),b=c.createElement("script"),wt(b),Ei(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function IE(r,o,c,d){var g=(g=Pe.current)?Pm(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Nu(c.href),c=En(g).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Nu(c.href);var b=En(g).hoistableStyles,A=b.get(r);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,A),(b=g.querySelector(bd(r)))&&!b._p&&(A.instance=b,A.state.loading=5),ar.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ar.set(r,c),b||TN(g,r,c,A.state))),o&&d===null)throw Error(i(528,""));return A}if(o&&d!==null)throw Error(i(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Du(c),c=En(g).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Nu(r){return'href="'+Jt(r)+'"'}function bd(r){return'link[rel="stylesheet"]['+r+"]"}function kE(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function TN(r,o,c,d){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=r.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Ei(o,"link",c),wt(o),r.head.appendChild(o))}function Du(r){return'[src="'+Jt(r)+'"]'}function vd(r){return"script[async]"+r}function NE(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=r.querySelector('style[data-href~="'+Jt(c.href)+'"]');if(d)return o.instance=d,wt(d),d;var g=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),wt(d),Ei(d,"style",g),jm(d,c.precedence,r),o.instance=d;case"stylesheet":g=Nu(c.href);var b=r.querySelector(bd(g));if(b)return o.state.loading|=4,o.instance=b,wt(b),b;d=kE(c),(g=ar.get(g))&&u_(d,g),b=(r.ownerDocument||r).createElement("link"),wt(b);var A=b;return A._p=new Promise(function(M,W){A.onload=M,A.onerror=W}),Ei(b,"link",d),o.state.loading|=4,jm(b,c.precedence,r),o.instance=b;case"script":return b=Du(c.src),(g=r.querySelector(vd(b)))?(o.instance=g,wt(g),g):(d=c,(g=ar.get(b))&&(d=y({},c),h_(d,g)),r=r.ownerDocument||r,g=r.createElement("script"),wt(g),Ei(g,"link",d),r.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,jm(d,c.precedence,r));return o.instance}function jm(r,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,A=0;A<d.length;A++){var M=d[A];if(M.dataset.precedence===o)b=M;else if(b!==g)break}b?b.parentNode.insertBefore(r,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function u_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function h_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Lm=null;function DE(r,o,c){if(Lm===null){var d=new Map,g=Lm=new Map;g.set(c,d)}else g=Lm,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),g=0;g<c.length;g++){var b=c[g];if(!(b[zs]||b[Sn]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(o)||"";A=r+A;var M=d.get(A);M?M.push(b):d.set(A,[b])}}return d}function OE(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function SN(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function ME(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var xd=null;function AN(){}function CN(r,o,c){if(xd===null)throw Error(i(475));var d=xd;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Nu(c.href),b=r.querySelector(bd(g));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=Vm.bind(d),r.then(d,d)),o.state.loading|=4,o.instance=b,wt(b);return}b=r.ownerDocument||r,c=kE(c),(g=ar.get(g))&&u_(c,g),b=b.createElement("link"),wt(b);var A=b;A._p=new Promise(function(M,W){A.onload=M,A.onerror=W}),Ei(b,"link",c),o.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=Vm.bind(d),r.addEventListener("load",o),r.addEventListener("error",o))}}function RN(){if(xd===null)throw Error(i(475));var r=xd;return r.stylesheets&&r.count===0&&d_(r,r.stylesheets),0<r.count?function(o){var c=setTimeout(function(){if(r.stylesheets&&d_(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c)}}:null}function Vm(){if(this.count--,this.count===0){if(this.stylesheets)d_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Fm=null;function d_(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Fm=new Map,o.forEach(IN,r),Fm=null,Vm.call(r))}function IN(r,o){if(!(o.state.loading&4)){var c=Fm.get(r);if(c)var d=c.get(null);else{c=new Map,Fm.set(r,c);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var A=g[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}g=o.instance,A=g.getAttribute("data-precedence"),b=c.get(A)||d,b===d&&c.set(null,g),c.set(A,g),this.count++,d=Vm.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),o.state.loading|=4}}var Ed={$$typeof:G,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function kN(r,o,c,d,g,b,A,M){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fs(0),this.hiddenUpdates=Fs(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function PE(r,o,c,d,g,b,A,M,W,le,ye,we){return r=new kN(r,o,c,A,M,W,le,we),o=1,b===!0&&(o|=24),b=Ki(3,null,null,o),r.current=b,b.stateNode=r,o=mc(),o.refCount++,r.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},te(b),r}function jE(r){return r?(r=Go,r):Go}function LE(r,o,c,d,g,b){g=jE(g),d.context===null?d.context=g:d.pendingContext=g,d=ve(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Oe(r,d,o),c!==null&&(Os(c,r,o),Be(c,r,o))}function VE(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function f_(r,o){VE(r,o),(r=r.alternate)&&VE(r,o)}function FE(r){if(r.tag===13){var o=Ri(r,67108864);o!==null&&Os(o,r,67108864),f_(r,67108864)}}var Um=!0;function NN(r,o,c,d){var g=K.T;K.T=null;var b=se.p;try{se.p=2,m_(r,o,c,d)}finally{se.p=b,K.T=g}}function DN(r,o,c,d){var g=K.T;K.T=null;var b=se.p;try{se.p=8,m_(r,o,c,d)}finally{se.p=b,K.T=g}}function m_(r,o,c,d){if(Um){var g=p_(d);if(g===null)t_(r,o,d,zm,c),zE(r,d);else if(MN(g,r,o,c,d))d.stopPropagation();else if(zE(r,d),o&4&&-1<ON.indexOf(r)){for(;g!==null;){var b=Bs(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=We(b.pendingLanes);if(A!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var W=1<<31-oe(A);M.entanglements[1]|=W,A&=~W}oa(b),(Yt&6)===0&&(Tm=Ht()+500,pd(0))}}break;case 13:M=Ri(b,2),M!==null&&Os(M,b,2),Am(),f_(b,2)}if(b=p_(d),b===null&&t_(r,o,d,zm,c),b===g)break;g=b}g!==null&&d.stopPropagation()}else t_(r,o,d,null,c)}}function p_(r){return r=yi(r),g_(r)}var zm=null;function g_(r){if(zm=null,r=bs(r),r!==null){var o=a(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=l(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return zm=r,null}function UE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zi()){case Xi:return 2;case gs:return 8;case Bi:case Ra:return 32;case Vs:return 268435456;default:return 32}default:return 32}}var y_=!1,ul=null,hl=null,dl=null,wd=new Map,Td=new Map,fl=[],ON="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zE(r,o){switch(r){case"focusin":case"focusout":ul=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":wd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(o.pointerId)}}function Sd(r,o,c,d,g,b){return r===null||r.nativeEvent!==b?(r={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},o!==null&&(o=Bs(o),o!==null&&FE(o)),r):(r.eventSystemFlags|=d,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function MN(r,o,c,d,g){switch(o){case"focusin":return ul=Sd(ul,r,o,c,d,g),!0;case"dragenter":return hl=Sd(hl,r,o,c,d,g),!0;case"mouseover":return dl=Sd(dl,r,o,c,d,g),!0;case"pointerover":var b=g.pointerId;return wd.set(b,Sd(wd.get(b)||null,r,o,c,d,g)),!0;case"gotpointercapture":return b=g.pointerId,Td.set(b,Sd(Td.get(b)||null,r,o,c,d,g)),!0}return!1}function BE(r){var o=bs(r.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){r.blockedOn=o,pr(r.priority,function(){if(c.tag===13){var d=Ds();d=Ur(d);var g=Ri(c,d);g!==null&&Os(g,c,d),f_(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Bm(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=p_(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);li=d,c.target.dispatchEvent(d),li=null}else return o=Bs(c),o!==null&&FE(o),r.blockedOn=c,!1;o.shift()}return!0}function HE(r,o,c){Bm(r)&&c.delete(o)}function PN(){y_=!1,ul!==null&&Bm(ul)&&(ul=null),hl!==null&&Bm(hl)&&(hl=null),dl!==null&&Bm(dl)&&(dl=null),wd.forEach(HE),Td.forEach(HE)}function Hm(r,o){r.blockedOn===o&&(r.blockedOn=null,y_||(y_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,PN)))}var $m=null;function $E(r){$m!==r&&($m=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){$m===r&&($m=null);for(var o=0;o<r.length;o+=3){var c=r[o],d=r[o+1],g=r[o+2];if(typeof d!="function"){if(g_(d||c)===null)continue;break}var b=Bs(c);b!==null&&(r.splice(o,3),o-=3,gy(b,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function Ad(r){function o(W){return Hm(W,r)}ul!==null&&Hm(ul,r),hl!==null&&Hm(hl,r),dl!==null&&Hm(dl,r),wd.forEach(o),Td.forEach(o);for(var c=0;c<fl.length;c++){var d=fl[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<fl.length&&(c=fl[0],c.blockedOn===null);)BE(c),c.blockedOn===null&&fl.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],b=c[d+1],A=g[xn]||null;if(typeof b=="function")A||$E(c);else if(A){var M=null;if(b&&b.hasAttribute("formAction")){if(g=b,A=b[xn]||null)M=A.formAction;else if(g_(g)!==null)continue}else M=A.action;typeof M=="function"?c[d+1]=M:(c.splice(d,3),d-=3),$E(c)}}}function __(r){this._internalRoot=r}qm.prototype.render=__.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var c=o.current,d=Ds();LE(c,d,r,o,null,null)},qm.prototype.unmount=__.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;LE(r.current,2,null,r,null,null),Am(),o[Zi]=null}};function qm(r){this._internalRoot=r}qm.prototype.unstable_scheduleHydration=function(r){if(r){var o=zr();r={blockedOn:null,target:r,priority:o};for(var c=0;c<fl.length&&o!==0&&o<fl[c].priority;c++);fl.splice(c,0,r),c===0&&BE(r)}};var qE=e.version;if(qE!=="19.1.1")throw Error(i(527,qE,"19.1.1"));se.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var jN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gm.isDisabled&&Gm.supportsFiber)try{ze=Gm.inject(jN),$=Gm}catch{}}return Rd.createRoot=function(r,o){if(!s(r))throw Error(i(299));var c=!1,d="",g=ox,b=lx,A=cx,M=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks)),o=PE(r,1,!1,null,null,c,d,g,b,A,M,null),r[Zi]=o.current,e_(r),new __(o)},Rd.hydrateRoot=function(r,o,c){if(!s(r))throw Error(i(299));var d=!1,g="",b=ox,A=lx,M=cx,W=null,le=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(W=c.unstable_transitionCallbacks),c.formState!==void 0&&(le=c.formState)),o=PE(r,1,!0,o,c??null,d,g,b,A,M,W,le),o.context=jE(null),c=o.current,d=Ds(),d=Ur(d),g=ve(d),g.callback=null,Oe(c,g,d),c=d,o.current.lanes=c,Qi(o,c),oa(o),r[Zi]=o.current,e_(r),new qm(o)},Rd.version="19.1.1",Rd}var tw;function qN(){if(tw)return x_.exports;tw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),x_.exports=$N(),x_.exports}var GN=qN();const WN=Tf(GN);var _p={exports:{}};/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var KN=_p.exports,nw;function YN(){return nw||(nw=1,function(n,e){(function(t,i){n.exports=i()})(KN,function(){const t=new Map,i={set(N,_,w){t.has(N)||t.set(N,new Map);const L=t.get(N);L.has(_)||L.size===0?L.set(_,w):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(L.keys())[0]}.`)},get:(N,_)=>t.has(N)&&t.get(N).get(_)||null,remove(N,_){if(!t.has(N))return;const w=t.get(N);w.delete(_),w.size===0&&t.delete(N)}},s="transitionend",a=N=>(N&&window.CSS&&window.CSS.escape&&(N=N.replace(/#([^\s"#']+)/g,(_,w)=>`#${CSS.escape(w)}`)),N),l=N=>{N.dispatchEvent(new Event(s))},u=N=>!(!N||typeof N!="object")&&(N.jquery!==void 0&&(N=N[0]),N.nodeType!==void 0),h=N=>u(N)?N.jquery?N[0]:N:typeof N=="string"&&N.length>0?document.querySelector(a(N)):null,f=N=>{if(!u(N)||N.getClientRects().length===0)return!1;const _=getComputedStyle(N).getPropertyValue("visibility")==="visible",w=N.closest("details:not([open])");if(!w)return _;if(w!==N){const L=N.closest("summary");if(L&&L.parentNode!==w||L===null)return!1}return _},y=N=>!N||N.nodeType!==Node.ELEMENT_NODE||!!N.classList.contains("disabled")||(N.disabled!==void 0?N.disabled:N.hasAttribute("disabled")&&N.getAttribute("disabled")!=="false"),v=N=>{if(!document.documentElement.attachShadow)return null;if(typeof N.getRootNode=="function"){const _=N.getRootNode();return _ instanceof ShadowRoot?_:null}return N instanceof ShadowRoot?N:N.parentNode?v(N.parentNode):null},x=()=>{},T=N=>{N.offsetHeight},C=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,k=[],R=()=>document.documentElement.dir==="rtl",j=N=>{var _;_=()=>{const w=C();if(w){const L=N.NAME,Z=w.fn[L];w.fn[L]=N.jQueryInterface,w.fn[L].Constructor=N,w.fn[L].noConflict=()=>(w.fn[L]=Z,N.jQueryInterface)}},document.readyState==="loading"?(k.length||document.addEventListener("DOMContentLoaded",()=>{for(const w of k)w()}),k.push(_)):_()},q=(N,_=[],w=N)=>typeof N=="function"?N.call(..._):w,G=(N,_,w=!0)=>{if(!w)return void q(N);const L=(de=>{if(!de)return 0;let{transitionDuration:ve,transitionDelay:Oe}=window.getComputedStyle(de);const Be=Number.parseFloat(ve),He=Number.parseFloat(Oe);return Be||He?(ve=ve.split(",")[0],Oe=Oe.split(",")[0],1e3*(Number.parseFloat(ve)+Number.parseFloat(Oe))):0})(_)+5;let Z=!1;const te=({target:de})=>{de===_&&(Z=!0,_.removeEventListener(s,te),q(N))};_.addEventListener(s,te),setTimeout(()=>{Z||l(_)},L)},X=(N,_,w,L)=>{const Z=N.length;let te=N.indexOf(_);return te===-1?!w&&L?N[Z-1]:N[0]:(te+=w?1:-1,L&&(te=(te+Z)%Z),N[Math.max(0,Math.min(te,Z-1))])},Y=/[^.]*(?=\..*)\.|.*/,J=/\..*/,F=/::\d+$/,I={};let O=1;const U={mouseenter:"mouseover",mouseleave:"mouseout"},H=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function B(N,_){return _&&`${_}::${O++}`||N.uidEvent||O++}function z(N){const _=B(N);return N.uidEvent=_,I[_]=I[_]||{},I[_]}function je(N,_,w=null){return Object.values(N).find(L=>L.callable===_&&L.delegationSelector===w)}function _e(N,_,w){const L=typeof _=="string",Z=L?w:_||w;let te=Le(N);return H.has(te)||(te=N),[L,Z,te]}function K(N,_,w,L,Z){if(typeof _!="string"||!N)return;let[te,de,ve]=_e(_,w,L);_ in U&&(de=(dt=>function(rt){if(!rt.relatedTarget||rt.relatedTarget!==rt.delegateTarget&&!rt.delegateTarget.contains(rt.relatedTarget))return dt.call(this,rt)})(de));const Oe=z(N),Be=Oe[ve]||(Oe[ve]={}),He=je(Be,de,te?w:null);if(He)return void(He.oneOff=He.oneOff&&Z);const Fe=B(de,_.replace(Y,"")),ht=te?function(Ze,dt,rt){return function tt(Ut){const Wt=Ze.querySelectorAll(dt);for(let{target:yt}=Ut;yt&&yt!==this;yt=yt.parentNode)for(const Mt of Wt)if(Mt===yt)return fe(Ut,{delegateTarget:yt}),tt.oneOff&&P.off(Ze,Ut.type,dt,rt),rt.apply(yt,[Ut])}}(N,w,de):function(Ze,dt){return function rt(tt){return fe(tt,{delegateTarget:Ze}),rt.oneOff&&P.off(Ze,tt.type,dt),dt.apply(Ze,[tt])}}(N,de);ht.delegationSelector=te?w:null,ht.callable=de,ht.oneOff=Z,ht.uidEvent=Fe,Be[Fe]=ht,N.addEventListener(ve,ht,te)}function se(N,_,w,L,Z){const te=je(_[w],L,Z);te&&(N.removeEventListener(w,te,!!Z),delete _[w][te.uidEvent])}function Ee(N,_,w,L){const Z=_[w]||{};for(const[te,de]of Object.entries(Z))te.includes(L)&&se(N,_,w,de.callable,de.delegationSelector)}function Le(N){return N=N.replace(J,""),U[N]||N}const P={on(N,_,w,L){K(N,_,w,L,!1)},one(N,_,w,L){K(N,_,w,L,!0)},off(N,_,w,L){if(typeof _!="string"||!N)return;const[Z,te,de]=_e(_,w,L),ve=de!==_,Oe=z(N),Be=Oe[de]||{},He=_.startsWith(".");if(te===void 0){if(He)for(const Fe of Object.keys(Oe))Ee(N,Oe,Fe,_.slice(1));for(const[Fe,ht]of Object.entries(Be)){const Ze=Fe.replace(F,"");ve&&!_.includes(Ze)||se(N,Oe,de,ht.callable,ht.delegationSelector)}}else{if(!Object.keys(Be).length)return;se(N,Oe,de,te,Z?w:null)}},trigger(N,_,w){if(typeof _!="string"||!N)return null;const L=C();let Z=null,te=!0,de=!0,ve=!1;_!==Le(_)&&L&&(Z=L.Event(_,w),L(N).trigger(Z),te=!Z.isPropagationStopped(),de=!Z.isImmediatePropagationStopped(),ve=Z.isDefaultPrevented());const Oe=fe(new Event(_,{bubbles:te,cancelable:!0}),w);return ve&&Oe.preventDefault(),de&&N.dispatchEvent(Oe),Oe.defaultPrevented&&Z&&Z.preventDefault(),Oe}};function fe(N,_={}){for(const[w,L]of Object.entries(_))try{N[w]=L}catch{Object.defineProperty(N,w,{configurable:!0,get:()=>L})}return N}function Ae(N){if(N==="true")return!0;if(N==="false")return!1;if(N===Number(N).toString())return Number(N);if(N===""||N==="null")return null;if(typeof N!="string")return N;try{return JSON.parse(decodeURIComponent(N))}catch{return N}}function ge(N){return N.replace(/[A-Z]/g,_=>`-${_.toLowerCase()}`)}const ke={setDataAttribute(N,_,w){N.setAttribute(`data-bs-${ge(_)}`,w)},removeDataAttribute(N,_){N.removeAttribute(`data-bs-${ge(_)}`)},getDataAttributes(N){if(!N)return{};const _={},w=Object.keys(N.dataset).filter(L=>L.startsWith("bs")&&!L.startsWith("bsConfig"));for(const L of w){let Z=L.replace(/^bs/,"");Z=Z.charAt(0).toLowerCase()+Z.slice(1),_[Z]=Ae(N.dataset[L])}return _},getDataAttribute:(N,_)=>Ae(N.getAttribute(`data-bs-${ge(_)}`))};class $e{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(_){return _=this._mergeConfigObj(_),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}_configAfterMerge(_){return _}_mergeConfigObj(_,w){const L=u(w)?ke.getDataAttribute(w,"config"):{};return{...this.constructor.Default,...typeof L=="object"?L:{},...u(w)?ke.getDataAttributes(w):{},...typeof _=="object"?_:{}}}_typeCheckConfig(_,w=this.constructor.DefaultType){for(const[Z,te]of Object.entries(w)){const de=_[Z],ve=u(de)?"element":(L=de)==null?`${L}`:Object.prototype.toString.call(L).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(te).test(ve))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Z}" provided type "${ve}" but expected type "${te}".`)}var L}}class Pe extends $e{constructor(_,w){super(),(_=h(_))&&(this._element=_,this._config=this._getConfig(w),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const _ of Object.getOwnPropertyNames(this))this[_]=null}_queueCallback(_,w,L=!0){G(_,w,L)}_getConfig(_){return _=this._mergeConfigObj(_,this._element),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}static getInstance(_){return i.get(h(_),this.DATA_KEY)}static getOrCreateInstance(_,w={}){return this.getInstance(_)||new this(_,typeof w=="object"?w:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(_){return`${_}${this.EVENT_KEY}`}}const Ge=N=>{let _=N.getAttribute("data-bs-target");if(!_||_==="#"){let w=N.getAttribute("href");if(!w||!w.includes("#")&&!w.startsWith("."))return null;w.includes("#")&&!w.startsWith("#")&&(w=`#${w.split("#")[1]}`),_=w&&w!=="#"?w.trim():null}return _?_.split(",").map(w=>a(w)).join(","):null},Se={find:(N,_=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(_,N)),findOne:(N,_=document.documentElement)=>Element.prototype.querySelector.call(_,N),children:(N,_)=>[].concat(...N.children).filter(w=>w.matches(_)),parents(N,_){const w=[];let L=N.parentNode.closest(_);for(;L;)w.push(L),L=L.parentNode.closest(_);return w},prev(N,_){let w=N.previousElementSibling;for(;w;){if(w.matches(_))return[w];w=w.previousElementSibling}return[]},next(N,_){let w=N.nextElementSibling;for(;w;){if(w.matches(_))return[w];w=w.nextElementSibling}return[]},focusableChildren(N){const _=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(w=>`${w}:not([tabindex^="-"])`).join(",");return this.find(_,N).filter(w=>!y(w)&&f(w))},getSelectorFromElement(N){const _=Ge(N);return _&&Se.findOne(_)?_:null},getElementFromSelector(N){const _=Ge(N);return _?Se.findOne(_):null},getMultipleElementsFromSelector(N){const _=Ge(N);return _?Se.find(_):[]}},Et=(N,_="hide")=>{const w=`click.dismiss${N.EVENT_KEY}`,L=N.NAME;P.on(document,w,`[data-bs-dismiss="${L}"]`,function(Z){if(["A","AREA"].includes(this.tagName)&&Z.preventDefault(),y(this))return;const te=Se.getElementFromSelector(this)||this.closest(`.${L}`);N.getOrCreateInstance(te)[_]()})},gt=".bs.alert",ee=`close${gt}`,me=`closed${gt}`;class Re extends Pe{static get NAME(){return"alert"}close(){if(P.trigger(this._element,ee).defaultPrevented)return;this._element.classList.remove("show");const _=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,_)}_destroyElement(){this._element.remove(),P.trigger(this._element,me),this.dispose()}static jQueryInterface(_){return this.each(function(){const w=Re.getOrCreateInstance(this);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_](this)}})}}Et(Re,"close"),j(Re);const et='[data-bs-toggle="button"]';class it extends Pe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(_){return this.each(function(){const w=it.getOrCreateInstance(this);_==="toggle"&&w[_]()})}}P.on(document,"click.bs.button.data-api",et,N=>{N.preventDefault();const _=N.target.closest(et);it.getOrCreateInstance(_).toggle()}),j(it);const mn=".bs.swipe",Ht=`touchstart${mn}`,zi=`touchmove${mn}`,Xi=`touchend${mn}`,gs=`pointerdown${mn}`,Bi=`pointerup${mn}`,Ra={endCallback:null,leftCallback:null,rightCallback:null},Vs={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Vn extends $e{constructor(_,w){super(),this._element=_,_&&Vn.isSupported()&&(this._config=this._getConfig(w),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ra}static get DefaultType(){return Vs}static get NAME(){return"swipe"}dispose(){P.off(this._element,mn)}_start(_){this._supportPointerEvents?this._eventIsPointerPenTouch(_)&&(this._deltaX=_.clientX):this._deltaX=_.touches[0].clientX}_end(_){this._eventIsPointerPenTouch(_)&&(this._deltaX=_.clientX-this._deltaX),this._handleSwipe(),q(this._config.endCallback)}_move(_){this._deltaX=_.touches&&_.touches.length>1?0:_.touches[0].clientX-this._deltaX}_handleSwipe(){const _=Math.abs(this._deltaX);if(_<=40)return;const w=_/this._deltaX;this._deltaX=0,w&&q(w>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,gs,_=>this._start(_)),P.on(this._element,Bi,_=>this._end(_)),this._element.classList.add("pointer-event")):(P.on(this._element,Ht,_=>this._start(_)),P.on(this._element,zi,_=>this._move(_)),P.on(this._element,Xi,_=>this._end(_)))}_eventIsPointerPenTouch(_){return this._supportPointerEvents&&(_.pointerType==="pen"||_.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const pe=".bs.carousel",ze=".data-api",$="ArrowLeft",ae="ArrowRight",oe="next",be="prev",Ie="left",De="right",Ne=`slide${pe}`,Ve=`slid${pe}`,We=`keydown${pe}`,bt=`mouseenter${pe}`,mi=`mouseleave${pe}`,ys=`dragstart${pe}`,Gl=`load${pe}${ze}`,Wl=`click${pe}${ze}`,Fs="carousel",Qi="active",No=".active",_s=".carousel-item",Kl=No+_s,Ur={[$]:De,[ae]:Ie},Do={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},zr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class pr extends Pe{constructor(_,w){super(_,w),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Se.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Fs&&this.cycle()}static get Default(){return Do}static get DefaultType(){return zr}static get NAME(){return"carousel"}next(){this._slide(oe)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(be)}pause(){this._isSliding&&l(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,Ve,()=>this.cycle()):this.cycle())}to(_){const w=this._getItems();if(_>w.length-1||_<0)return;if(this._isSliding)return void P.one(this._element,Ve,()=>this.to(_));const L=this._getItemIndex(this._getActive());if(L===_)return;const Z=_>L?oe:be;this._slide(Z,w[_])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(_){return _.defaultInterval=_.interval,_}_addEventListeners(){this._config.keyboard&&P.on(this._element,We,_=>this._keydown(_)),this._config.pause==="hover"&&(P.on(this._element,bt,()=>this.pause()),P.on(this._element,mi,()=>this._maybeEnableCycle())),this._config.touch&&Vn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const w of Se.find(".carousel-item img",this._element))P.on(w,ys,L=>L.preventDefault());const _={leftCallback:()=>this._slide(this._directionToOrder(Ie)),rightCallback:()=>this._slide(this._directionToOrder(De)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Vn(this._element,_)}_keydown(_){if(/input|textarea/i.test(_.target.tagName))return;const w=Ur[_.key];w&&(_.preventDefault(),this._slide(this._directionToOrder(w)))}_getItemIndex(_){return this._getItems().indexOf(_)}_setActiveIndicatorElement(_){if(!this._indicatorsElement)return;const w=Se.findOne(No,this._indicatorsElement);w.classList.remove(Qi),w.removeAttribute("aria-current");const L=Se.findOne(`[data-bs-slide-to="${_}"]`,this._indicatorsElement);L&&(L.classList.add(Qi),L.setAttribute("aria-current","true"))}_updateInterval(){const _=this._activeElement||this._getActive();if(!_)return;const w=Number.parseInt(_.getAttribute("data-bs-interval"),10);this._config.interval=w||this._config.defaultInterval}_slide(_,w=null){if(this._isSliding)return;const L=this._getActive(),Z=_===oe,te=w||X(this._getItems(),L,Z,this._config.wrap);if(te===L)return;const de=this._getItemIndex(te),ve=Fe=>P.trigger(this._element,Fe,{relatedTarget:te,direction:this._orderToDirection(_),from:this._getItemIndex(L),to:de});if(ve(Ne).defaultPrevented||!L||!te)return;const Oe=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(de),this._activeElement=te;const Be=Z?"carousel-item-start":"carousel-item-end",He=Z?"carousel-item-next":"carousel-item-prev";te.classList.add(He),T(te),L.classList.add(Be),te.classList.add(Be),this._queueCallback(()=>{te.classList.remove(Be,He),te.classList.add(Qi),L.classList.remove(Qi,He,Be),this._isSliding=!1,ve(Ve)},L,this._isAnimated()),Oe&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Se.findOne(Kl,this._element)}_getItems(){return Se.find(_s,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(_){return R()?_===Ie?be:oe:_===Ie?oe:be}_orderToDirection(_){return R()?_===be?Ie:De:_===be?De:Ie}static jQueryInterface(_){return this.each(function(){const w=pr.getOrCreateInstance(this,_);if(typeof _!="number"){if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_]()}}else w.to(_)})}}P.on(document,Wl,"[data-bs-slide], [data-bs-slide-to]",function(N){const _=Se.getElementFromSelector(this);if(!_||!_.classList.contains(Fs))return;N.preventDefault();const w=pr.getOrCreateInstance(_),L=this.getAttribute("data-bs-slide-to");return L?(w.to(L),void w._maybeEnableCycle()):ke.getDataAttribute(this,"slide")==="next"?(w.next(),void w._maybeEnableCycle()):(w.prev(),void w._maybeEnableCycle())}),P.on(window,Gl,()=>{const N=Se.find('[data-bs-ride="carousel"]');for(const _ of N)pr.getOrCreateInstance(_)}),j(pr);const $t=".bs.collapse",Sn=`show${$t}`,xn=`shown${$t}`,Zi=`hide${$t}`,Yl=`hidden${$t}`,bh=`click${$t}.data-api`,Us="show",gr="collapse",zs="collapsing",Br=`:scope .${gr} .${gr}`,bs='[data-bs-toggle="collapse"]',Bs={parent:null,toggle:!0},Hs={parent:"(null|element)",toggle:"boolean"};class En extends Pe{constructor(_,w){super(_,w),this._isTransitioning=!1,this._triggerArray=[];const L=Se.find(bs);for(const Z of L){const te=Se.getSelectorFromElement(Z),de=Se.find(te).filter(ve=>ve===this._element);te!==null&&de.length&&this._triggerArray.push(Z)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Bs}static get DefaultType(){return Hs}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let _=[];if(this._config.parent&&(_=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(Z=>Z!==this._element).map(Z=>En.getOrCreateInstance(Z,{toggle:!1}))),_.length&&_[0]._isTransitioning||P.trigger(this._element,Sn).defaultPrevented)return;for(const Z of _)Z.hide();const w=this._getDimension();this._element.classList.remove(gr),this._element.classList.add(zs),this._element.style[w]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const L=`scroll${w[0].toUpperCase()+w.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zs),this._element.classList.add(gr,Us),this._element.style[w]="",P.trigger(this._element,xn)},this._element,!0),this._element.style[w]=`${this._element[L]}px`}hide(){if(this._isTransitioning||!this._isShown()||P.trigger(this._element,Zi).defaultPrevented)return;const _=this._getDimension();this._element.style[_]=`${this._element.getBoundingClientRect()[_]}px`,T(this._element),this._element.classList.add(zs),this._element.classList.remove(gr,Us);for(const w of this._triggerArray){const L=Se.getElementFromSelector(w);L&&!this._isShown(L)&&this._addAriaAndCollapsedClass([w],!1)}this._isTransitioning=!0,this._element.style[_]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zs),this._element.classList.add(gr),P.trigger(this._element,Yl)},this._element,!0)}_isShown(_=this._element){return _.classList.contains(Us)}_configAfterMerge(_){return _.toggle=!!_.toggle,_.parent=h(_.parent),_}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const _=this._getFirstLevelChildren(bs);for(const w of _){const L=Se.getElementFromSelector(w);L&&this._addAriaAndCollapsedClass([w],this._isShown(L))}}_getFirstLevelChildren(_){const w=Se.find(Br,this._config.parent);return Se.find(_,this._config.parent).filter(L=>!w.includes(L))}_addAriaAndCollapsedClass(_,w){if(_.length)for(const L of _)L.classList.toggle("collapsed",!w),L.setAttribute("aria-expanded",w)}static jQueryInterface(_){const w={};return typeof _=="string"&&/show|hide/.test(_)&&(w.toggle=!1),this.each(function(){const L=En.getOrCreateInstance(this,w);if(typeof _=="string"){if(L[_]===void 0)throw new TypeError(`No method named "${_}"`);L[_]()}})}}P.on(document,bh,bs,function(N){(N.target.tagName==="A"||N.delegateTarget&&N.delegateTarget.tagName==="A")&&N.preventDefault();for(const _ of Se.getMultipleElementsFromSelector(this))En.getOrCreateInstance(_,{toggle:!1}).toggle()}),j(En);var wt="top",Kn="bottom",Fn="right",rn="left",Ji="auto",yr=[wt,Kn,Fn,rn],$s="start",es="end",Xl="clippingParents",qs="viewport",pi="popper",Un="reference",_r=yr.reduce(function(N,_){return N.concat([_+"-"+$s,_+"-"+es])},[]),Oo=[].concat(yr,[Ji]).reduce(function(N,_){return N.concat([_,_+"-"+$s,_+"-"+es])},[]),Gs="beforeRead",Ia="read",ka="afterRead",Mo="beforeMain",Na="main",ai="afterMain",Po="beforeWrite",Yc="write",Da="afterWrite",jo=[Gs,Ia,ka,Mo,Na,ai,Po,Yc,Da];function oi(N){return N?(N.nodeName||"").toLowerCase():null}function gi(N){if(N==null)return window;if(N.toString()!=="[object Window]"){var _=N.ownerDocument;return _&&_.defaultView||window}return N}function Jt(N){return N instanceof gi(N).Element||N instanceof Element}function ln(N){return N instanceof gi(N).HTMLElement||N instanceof HTMLElement}function br(N){return typeof ShadowRoot<"u"&&(N instanceof gi(N).ShadowRoot||N instanceof ShadowRoot)}const Ws={name:"applyStyles",enabled:!0,phase:"write",fn:function(N){var _=N.state;Object.keys(_.elements).forEach(function(w){var L=_.styles[w]||{},Z=_.attributes[w]||{},te=_.elements[w];ln(te)&&oi(te)&&(Object.assign(te.style,L),Object.keys(Z).forEach(function(de){var ve=Z[de];ve===!1?te.removeAttribute(de):te.setAttribute(de,ve===!0?"":ve)}))})},effect:function(N){var _=N.state,w={popper:{position:_.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(_.elements.popper.style,w.popper),_.styles=w,_.elements.arrow&&Object.assign(_.elements.arrow.style,w.arrow),function(){Object.keys(_.elements).forEach(function(L){var Z=_.elements[L],te=_.attributes[L]||{},de=Object.keys(_.styles.hasOwnProperty(L)?_.styles[L]:w[L]).reduce(function(ve,Oe){return ve[Oe]="",ve},{});ln(Z)&&oi(Z)&&(Object.assign(Z.style,de),Object.keys(te).forEach(function(ve){Z.removeAttribute(ve)}))})}},requires:["computeStyles"]};function zn(N){return N.split("-")[0]}var Ct=Math.max,Ks=Math.min,Yn=Math.round;function vr(){var N=navigator.userAgentData;return N!=null&&N.brands&&Array.isArray(N.brands)?N.brands.map(function(_){return _.brand+"/"+_.version}).join(" "):navigator.userAgent}function Ql(){return!/^((?!chrome|android).)*safari/i.test(vr())}function Ys(N,_,w){_===void 0&&(_=!1),w===void 0&&(w=!1);var L=N.getBoundingClientRect(),Z=1,te=1;_&&ln(N)&&(Z=N.offsetWidth>0&&Yn(L.width)/N.offsetWidth||1,te=N.offsetHeight>0&&Yn(L.height)/N.offsetHeight||1);var de=(Jt(N)?gi(N):window).visualViewport,ve=!Ql()&&w,Oe=(L.left+(ve&&de?de.offsetLeft:0))/Z,Be=(L.top+(ve&&de?de.offsetTop:0))/te,He=L.width/Z,Fe=L.height/te;return{width:He,height:Fe,top:Be,right:Oe+He,bottom:Be+Fe,left:Oe,x:Oe,y:Be}}function Oa(N){var _=Ys(N),w=N.offsetWidth,L=N.offsetHeight;return Math.abs(_.width-w)<=1&&(w=_.width),Math.abs(_.height-L)<=1&&(L=_.height),{x:N.offsetLeft,y:N.offsetTop,width:w,height:L}}function Xc(N,_){var w=_.getRootNode&&_.getRootNode();if(N.contains(_))return!0;if(w&&br(w)){var L=_;do{if(L&&N.isSameNode(L))return!0;L=L.parentNode||L.host}while(L)}return!1}function vs(N){return gi(N).getComputedStyle(N)}function Lo(N){return["table","td","th"].indexOf(oi(N))>=0}function li(N){return((Jt(N)?N.ownerDocument:N.document)||window.document).documentElement}function yi(N){return oi(N)==="html"?N:N.assignedSlot||N.parentNode||(br(N)?N.host:null)||li(N)}function Xs(N){return ln(N)&&vs(N).position!=="fixed"?N.offsetParent:null}function Hi(N){for(var _=gi(N),w=Xs(N);w&&Lo(w)&&vs(w).position==="static";)w=Xs(w);return w&&(oi(w)==="html"||oi(w)==="body"&&vs(w).position==="static")?_:w||function(L){var Z=/firefox/i.test(vr());if(/Trident/i.test(vr())&&ln(L)&&vs(L).position==="fixed")return null;var te=yi(L);for(br(te)&&(te=te.host);ln(te)&&["html","body"].indexOf(oi(te))<0;){var de=vs(te);if(de.transform!=="none"||de.perspective!=="none"||de.contain==="paint"||["transform","perspective"].indexOf(de.willChange)!==-1||Z&&de.willChange==="filter"||Z&&de.filter&&de.filter!=="none")return te;te=te.parentNode}return null}(N)||_}function Ma(N){return["top","bottom"].indexOf(N)>=0?"x":"y"}function Ai(N,_,w){return Ct(N,Ks(_,w))}function Zl(N){return Object.assign({},{top:0,right:0,bottom:0,left:0},N)}function Hr(N,_){return _.reduce(function(w,L){return w[L]=N,w},{})}const ts={name:"arrow",enabled:!0,phase:"main",fn:function(N){var _,w=N.state,L=N.name,Z=N.options,te=w.elements.arrow,de=w.modifiersData.popperOffsets,ve=zn(w.placement),Oe=Ma(ve),Be=[rn,Fn].indexOf(ve)>=0?"height":"width";if(te&&de){var He=function(ot,jt){return Zl(typeof(ot=typeof ot=="function"?ot(Object.assign({},jt.rects,{placement:jt.placement})):ot)!="number"?ot:Hr(ot,yr))}(Z.padding,w),Fe=Oa(te),ht=Oe==="y"?wt:rn,Ze=Oe==="y"?Kn:Fn,dt=w.rects.reference[Be]+w.rects.reference[Oe]-de[Oe]-w.rects.popper[Be],rt=de[Oe]-w.rects.reference[Oe],tt=Hi(te),Ut=tt?Oe==="y"?tt.clientHeight||0:tt.clientWidth||0:0,Wt=dt/2-rt/2,yt=He[ht],Mt=Ut-Fe[Be]-He[Ze],at=Ut/2-Fe[Be]/2+Wt,Ue=Ai(yt,at,Mt),Xe=Oe;w.modifiersData[L]=((_={})[Xe]=Ue,_.centerOffset=Ue-at,_)}},effect:function(N){var _=N.state,w=N.options.element,L=w===void 0?"[data-popper-arrow]":w;L!=null&&(typeof L!="string"||(L=_.elements.popper.querySelector(L)))&&Xc(_.elements.popper,L)&&(_.elements.arrow=L)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xn(N){return N.split("-")[1]}var Pa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xs(N){var _,w=N.popper,L=N.popperRect,Z=N.placement,te=N.variation,de=N.offsets,ve=N.position,Oe=N.gpuAcceleration,Be=N.adaptive,He=N.roundOffsets,Fe=N.isFixed,ht=de.x,Ze=ht===void 0?0:ht,dt=de.y,rt=dt===void 0?0:dt,tt=typeof He=="function"?He({x:Ze,y:rt}):{x:Ze,y:rt};Ze=tt.x,rt=tt.y;var Ut=de.hasOwnProperty("x"),Wt=de.hasOwnProperty("y"),yt=rn,Mt=wt,at=window;if(Be){var Ue=Hi(w),Xe="clientHeight",ot="clientWidth";Ue===gi(w)&&vs(Ue=li(w)).position!=="static"&&ve==="absolute"&&(Xe="scrollHeight",ot="scrollWidth"),(Z===wt||(Z===rn||Z===Fn)&&te===es)&&(Mt=Kn,rt-=(Fe&&Ue===at&&at.visualViewport?at.visualViewport.height:Ue[Xe])-L.height,rt*=Oe?1:-1),Z!==rn&&(Z!==wt&&Z!==Kn||te!==es)||(yt=Fn,Ze-=(Fe&&Ue===at&&at.visualViewport?at.visualViewport.width:Ue[ot])-L.width,Ze*=Oe?1:-1)}var jt,en=Object.assign({position:ve},Be&&Pa),kn=He===!0?function(ki,Nn){var Jn=ki.x,rs=ki.y,mt=Nn.devicePixelRatio||1;return{x:Yn(Jn*mt)/mt||0,y:Yn(rs*mt)/mt||0}}({x:Ze,y:rt},gi(w)):{x:Ze,y:rt};return Ze=kn.x,rt=kn.y,Oe?Object.assign({},en,((jt={})[Mt]=Wt?"0":"",jt[yt]=Ut?"0":"",jt.transform=(at.devicePixelRatio||1)<=1?"translate("+Ze+"px, "+rt+"px)":"translate3d("+Ze+"px, "+rt+"px, 0)",jt)):Object.assign({},en,((_={})[Mt]=Wt?rt+"px":"",_[yt]=Ut?Ze+"px":"",_.transform="",_))}const Qs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(N){var _=N.state,w=N.options,L=w.gpuAcceleration,Z=L===void 0||L,te=w.adaptive,de=te===void 0||te,ve=w.roundOffsets,Oe=ve===void 0||ve,Be={placement:zn(_.placement),variation:Xn(_.placement),popper:_.elements.popper,popperRect:_.rects.popper,gpuAcceleration:Z,isFixed:_.options.strategy==="fixed"};_.modifiersData.popperOffsets!=null&&(_.styles.popper=Object.assign({},_.styles.popper,xs(Object.assign({},Be,{offsets:_.modifiersData.popperOffsets,position:_.options.strategy,adaptive:de,roundOffsets:Oe})))),_.modifiersData.arrow!=null&&(_.styles.arrow=Object.assign({},_.styles.arrow,xs(Object.assign({},Be,{offsets:_.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Oe})))),_.attributes.popper=Object.assign({},_.attributes.popper,{"data-popper-placement":_.placement})},data:{}};var ns={passive:!0};const ja={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(N){var _=N.state,w=N.instance,L=N.options,Z=L.scroll,te=Z===void 0||Z,de=L.resize,ve=de===void 0||de,Oe=gi(_.elements.popper),Be=[].concat(_.scrollParents.reference,_.scrollParents.popper);return te&&Be.forEach(function(He){He.addEventListener("scroll",w.update,ns)}),ve&&Oe.addEventListener("resize",w.update,ns),function(){te&&Be.forEach(function(He){He.removeEventListener("scroll",w.update,ns)}),ve&&Oe.removeEventListener("resize",w.update,ns)}},data:{}};var Zs={left:"right",right:"left",bottom:"top",top:"bottom"};function $i(N){return N.replace(/left|right|bottom|top/g,function(_){return Zs[_]})}var Jl={start:"end",end:"start"};function An(N){return N.replace(/start|end/g,function(_){return Jl[_]})}function Pt(N){var _=gi(N);return{scrollLeft:_.pageXOffset,scrollTop:_.pageYOffset}}function $r(N){return Ys(li(N)).left+Pt(N).scrollLeft}function xr(N){var _=vs(N),w=_.overflow,L=_.overflowX,Z=_.overflowY;return/auto|scroll|overlay|hidden/.test(w+Z+L)}function ec(N){return["html","body","#document"].indexOf(oi(N))>=0?N.ownerDocument.body:ln(N)&&xr(N)?N:ec(yi(N))}function Js(N,_){var w;_===void 0&&(_=[]);var L=ec(N),Z=L===((w=N.ownerDocument)==null?void 0:w.body),te=gi(L),de=Z?[te].concat(te.visualViewport||[],xr(L)?L:[]):L,ve=_.concat(de);return Z?ve:ve.concat(Js(yi(de)))}function qr(N){return Object.assign({},N,{left:N.x,top:N.y,right:N.x+N.width,bottom:N.y+N.height})}function Es(N,_,w){return _===qs?qr(function(L,Z){var te=gi(L),de=li(L),ve=te.visualViewport,Oe=de.clientWidth,Be=de.clientHeight,He=0,Fe=0;if(ve){Oe=ve.width,Be=ve.height;var ht=Ql();(ht||!ht&&Z==="fixed")&&(He=ve.offsetLeft,Fe=ve.offsetTop)}return{width:Oe,height:Be,x:He+$r(L),y:Fe}}(N,w)):Jt(_)?function(L,Z){var te=Ys(L,!1,Z==="fixed");return te.top=te.top+L.clientTop,te.left=te.left+L.clientLeft,te.bottom=te.top+L.clientHeight,te.right=te.left+L.clientWidth,te.width=L.clientWidth,te.height=L.clientHeight,te.x=te.left,te.y=te.top,te}(_,w):qr(function(L){var Z,te=li(L),de=Pt(L),ve=(Z=L.ownerDocument)==null?void 0:Z.body,Oe=Ct(te.scrollWidth,te.clientWidth,ve?ve.scrollWidth:0,ve?ve.clientWidth:0),Be=Ct(te.scrollHeight,te.clientHeight,ve?ve.scrollHeight:0,ve?ve.clientHeight:0),He=-de.scrollLeft+$r(L),Fe=-de.scrollTop;return vs(ve||te).direction==="rtl"&&(He+=Ct(te.clientWidth,ve?ve.clientWidth:0)-Oe),{width:Oe,height:Be,x:He,y:Fe}}(li(N)))}function Gr(N){var _,w=N.reference,L=N.element,Z=N.placement,te=Z?zn(Z):null,de=Z?Xn(Z):null,ve=w.x+w.width/2-L.width/2,Oe=w.y+w.height/2-L.height/2;switch(te){case wt:_={x:ve,y:w.y-L.height};break;case Kn:_={x:ve,y:w.y+w.height};break;case Fn:_={x:w.x+w.width,y:Oe};break;case rn:_={x:w.x-L.width,y:Oe};break;default:_={x:w.x,y:w.y}}var Be=te?Ma(te):null;if(Be!=null){var He=Be==="y"?"height":"width";switch(de){case $s:_[Be]=_[Be]-(w[He]/2-L[He]/2);break;case es:_[Be]=_[Be]+(w[He]/2-L[He]/2)}}return _}function Qn(N,_){_===void 0&&(_={});var w=_,L=w.placement,Z=L===void 0?N.placement:L,te=w.strategy,de=te===void 0?N.strategy:te,ve=w.boundary,Oe=ve===void 0?Xl:ve,Be=w.rootBoundary,He=Be===void 0?qs:Be,Fe=w.elementContext,ht=Fe===void 0?pi:Fe,Ze=w.altBoundary,dt=Ze!==void 0&&Ze,rt=w.padding,tt=rt===void 0?0:rt,Ut=Zl(typeof tt!="number"?tt:Hr(tt,yr)),Wt=ht===pi?Un:pi,yt=N.rects.popper,Mt=N.elements[dt?Wt:ht],at=function(Nn,Jn,rs,mt){var as=Jn==="clippingParents"?function(Kt){var ei=Js(yi(Kt)),Ni=["absolute","fixed"].indexOf(vs(Kt).position)>=0&&ln(Kt)?Hi(Kt):Kt;return Jt(Ni)?ei.filter(function(ir){return Jt(ir)&&Xc(ir,Ni)&&oi(ir)!=="body"}):[]}(Nn):[].concat(Jn),os=[].concat(as,[rs]),no=os[0],Dn=os.reduce(function(Kt,ei){var Ni=Es(Nn,ei,mt);return Kt.top=Ct(Ni.top,Kt.top),Kt.right=Ks(Ni.right,Kt.right),Kt.bottom=Ks(Ni.bottom,Kt.bottom),Kt.left=Ct(Ni.left,Kt.left),Kt},Es(Nn,no,mt));return Dn.width=Dn.right-Dn.left,Dn.height=Dn.bottom-Dn.top,Dn.x=Dn.left,Dn.y=Dn.top,Dn}(Jt(Mt)?Mt:Mt.contextElement||li(N.elements.popper),Oe,He,de),Ue=Ys(N.elements.reference),Xe=Gr({reference:Ue,element:yt,placement:Z}),ot=qr(Object.assign({},yt,Xe)),jt=ht===pi?ot:Ue,en={top:at.top-jt.top+Ut.top,bottom:jt.bottom-at.bottom+Ut.bottom,left:at.left-jt.left+Ut.left,right:jt.right-at.right+Ut.right},kn=N.modifiersData.offset;if(ht===pi&&kn){var ki=kn[Z];Object.keys(en).forEach(function(Nn){var Jn=[Fn,Kn].indexOf(Nn)>=0?1:-1,rs=[wt,Kn].indexOf(Nn)>=0?"y":"x";en[Nn]+=ki[rs]*Jn})}return en}function Qc(N,_){_===void 0&&(_={});var w=_,L=w.placement,Z=w.boundary,te=w.rootBoundary,de=w.padding,ve=w.flipVariations,Oe=w.allowedAutoPlacements,Be=Oe===void 0?Oo:Oe,He=Xn(L),Fe=He?ve?_r:_r.filter(function(dt){return Xn(dt)===He}):yr,ht=Fe.filter(function(dt){return Be.indexOf(dt)>=0});ht.length===0&&(ht=Fe);var Ze=ht.reduce(function(dt,rt){return dt[rt]=Qn(N,{placement:rt,boundary:Z,rootBoundary:te,padding:de})[zn(rt)],dt},{});return Object.keys(Ze).sort(function(dt,rt){return Ze[dt]-Ze[rt]})}const Zc={name:"flip",enabled:!0,phase:"main",fn:function(N){var _=N.state,w=N.options,L=N.name;if(!_.modifiersData[L]._skip){for(var Z=w.mainAxis,te=Z===void 0||Z,de=w.altAxis,ve=de===void 0||de,Oe=w.fallbackPlacements,Be=w.padding,He=w.boundary,Fe=w.rootBoundary,ht=w.altBoundary,Ze=w.flipVariations,dt=Ze===void 0||Ze,rt=w.allowedAutoPlacements,tt=_.options.placement,Ut=zn(tt),Wt=Oe||(Ut!==tt&&dt?function(Kt){if(zn(Kt)===Ji)return[];var ei=$i(Kt);return[An(Kt),ei,An(ei)]}(tt):[$i(tt)]),yt=[tt].concat(Wt).reduce(function(Kt,ei){return Kt.concat(zn(ei)===Ji?Qc(_,{placement:ei,boundary:He,rootBoundary:Fe,padding:Be,flipVariations:dt,allowedAutoPlacements:rt}):ei)},[]),Mt=_.rects.reference,at=_.rects.popper,Ue=new Map,Xe=!0,ot=yt[0],jt=0;jt<yt.length;jt++){var en=yt[jt],kn=zn(en),ki=Xn(en)===$s,Nn=[wt,Kn].indexOf(kn)>=0,Jn=Nn?"width":"height",rs=Qn(_,{placement:en,boundary:He,rootBoundary:Fe,altBoundary:ht,padding:Be}),mt=Nn?ki?Fn:rn:ki?Kn:wt;Mt[Jn]>at[Jn]&&(mt=$i(mt));var as=$i(mt),os=[];if(te&&os.push(rs[kn]<=0),ve&&os.push(rs[mt]<=0,rs[as]<=0),os.every(function(Kt){return Kt})){ot=en,Xe=!1;break}Ue.set(en,os)}if(Xe)for(var no=function(Kt){var ei=yt.find(function(Ni){var ir=Ue.get(Ni);if(ir)return ir.slice(0,Kt).every(function(ti){return ti})});if(ei)return ot=ei,"break"},Dn=dt?3:1;Dn>0&&no(Dn)!=="break";Dn--);_.placement!==ot&&(_.modifiersData[L]._skip=!0,_.placement=ot,_.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Wr(N,_,w){return w===void 0&&(w={x:0,y:0}),{top:N.top-_.height-w.y,right:N.right-_.width+w.x,bottom:N.bottom-_.height+w.y,left:N.left-_.width-w.x}}function La(N){return[wt,Fn,Kn,rn].some(function(_){return N[_]>=0})}const Vo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(N){var _=N.state,w=N.name,L=_.rects.reference,Z=_.rects.popper,te=_.modifiersData.preventOverflow,de=Qn(_,{elementContext:"reference"}),ve=Qn(_,{altBoundary:!0}),Oe=Wr(de,L),Be=Wr(ve,Z,te),He=La(Oe),Fe=La(Be);_.modifiersData[w]={referenceClippingOffsets:Oe,popperEscapeOffsets:Be,isReferenceHidden:He,hasPopperEscaped:Fe},_.attributes.popper=Object.assign({},_.attributes.popper,{"data-popper-reference-hidden":He,"data-popper-escaped":Fe})}},Va={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(N){var _=N.state,w=N.options,L=N.name,Z=w.offset,te=Z===void 0?[0,0]:Z,de=Oo.reduce(function(He,Fe){return He[Fe]=function(ht,Ze,dt){var rt=zn(ht),tt=[rn,wt].indexOf(rt)>=0?-1:1,Ut=typeof dt=="function"?dt(Object.assign({},Ze,{placement:ht})):dt,Wt=Ut[0],yt=Ut[1];return Wt=Wt||0,yt=(yt||0)*tt,[rn,Fn].indexOf(rt)>=0?{x:yt,y:Wt}:{x:Wt,y:yt}}(Fe,_.rects,te),He},{}),ve=de[_.placement],Oe=ve.x,Be=ve.y;_.modifiersData.popperOffsets!=null&&(_.modifiersData.popperOffsets.x+=Oe,_.modifiersData.popperOffsets.y+=Be),_.modifiersData[L]=de}},Fo={name:"popperOffsets",enabled:!0,phase:"read",fn:function(N){var _=N.state,w=N.name;_.modifiersData[w]=Gr({reference:_.rects.reference,element:_.rects.popper,placement:_.placement})},data:{}},Fa={name:"preventOverflow",enabled:!0,phase:"main",fn:function(N){var _=N.state,w=N.options,L=N.name,Z=w.mainAxis,te=Z===void 0||Z,de=w.altAxis,ve=de!==void 0&&de,Oe=w.boundary,Be=w.rootBoundary,He=w.altBoundary,Fe=w.padding,ht=w.tether,Ze=ht===void 0||ht,dt=w.tetherOffset,rt=dt===void 0?0:dt,tt=Qn(_,{boundary:Oe,rootBoundary:Be,padding:Fe,altBoundary:He}),Ut=zn(_.placement),Wt=Xn(_.placement),yt=!Wt,Mt=Ma(Ut),at=Mt==="x"?"y":"x",Ue=_.modifiersData.popperOffsets,Xe=_.rects.reference,ot=_.rects.popper,jt=typeof rt=="function"?rt(Object.assign({},_.rects,{placement:_.placement})):rt,en=typeof jt=="number"?{mainAxis:jt,altAxis:jt}:Object.assign({mainAxis:0,altAxis:0},jt),kn=_.modifiersData.offset?_.modifiersData.offset[_.placement]:null,ki={x:0,y:0};if(Ue){if(te){var Nn,Jn=Mt==="y"?wt:rn,rs=Mt==="y"?Kn:Fn,mt=Mt==="y"?"height":"width",as=Ue[Mt],os=as+tt[Jn],no=as-tt[rs],Dn=Ze?-ot[mt]/2:0,Kt=Wt===$s?Xe[mt]:ot[mt],ei=Wt===$s?-ot[mt]:-Xe[mt],Ni=_.elements.arrow,ir=Ze&&Ni?Oa(Ni):{width:0,height:0},ti=_.modifiersData["arrow#persistent"]?_.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},yn=ti[Jn],uu=ti[rs],na=Ai(0,Xe[mt],ir[mt]),hu=yt?Xe[mt]/2-Dn-na-yn-en.mainAxis:Kt-na-yn-en.mainAxis,Wh=yt?-Xe[mt]/2+Dn+na+uu+en.mainAxis:ei+na+uu+en.mainAxis,Rs=_.elements.arrow&&Hi(_.elements.arrow),du=Rs?Mt==="y"?Rs.clientTop||0:Rs.clientLeft||0:0,fu=(Nn=kn?.[Mt])!=null?Nn:0,Kh=as+Wh-fu,Yh=Ai(Ze?Ks(os,as+hu-fu-du):os,as,Ze?Ct(no,Kh):no);Ue[Mt]=Yh,ki[Mt]=Yh-as}if(ve){var Xh,am=Mt==="x"?wt:rn,om=Mt==="x"?Kn:Fn,ia=Ue[at],gc=at==="y"?"height":"width",mu=ia+tt[am],Qh=ia-tt[om],Zh=[wt,rn].indexOf(Ut)!==-1,Jh=(Xh=kn?.[at])!=null?Xh:0,ed=Zh?mu:ia-Xe[gc]-ot[gc]-Jh+en.altAxis,td=Zh?ia+Xe[gc]+ot[gc]-Jh-en.altAxis:Qh,pu=Ze&&Zh?function(lm,cm,gu){var nd=Ai(lm,cm,gu);return nd>gu?gu:nd}(ed,ia,td):Ai(Ze?ed:mu,ia,Ze?td:Qh);Ue[at]=pu,ki[at]=pu-ia}_.modifiersData[L]=ki}},requiresIfExists:["offset"]};function vh(N,_,w){w===void 0&&(w=!1);var L,Z,te=ln(_),de=ln(_)&&function(Fe){var ht=Fe.getBoundingClientRect(),Ze=Yn(ht.width)/Fe.offsetWidth||1,dt=Yn(ht.height)/Fe.offsetHeight||1;return Ze!==1||dt!==1}(_),ve=li(_),Oe=Ys(N,de,w),Be={scrollLeft:0,scrollTop:0},He={x:0,y:0};return(te||!te&&!w)&&((oi(_)!=="body"||xr(ve))&&(Be=(L=_)!==gi(L)&&ln(L)?{scrollLeft:(Z=L).scrollLeft,scrollTop:Z.scrollTop}:Pt(L)),ln(_)?((He=Ys(_,!0)).x+=_.clientLeft,He.y+=_.clientTop):ve&&(He.x=$r(ve))),{x:Oe.left+Be.scrollLeft-He.x,y:Oe.top+Be.scrollTop-He.y,width:Oe.width,height:Oe.height}}function tc(N){var _=new Map,w=new Set,L=[];function Z(te){w.add(te.name),[].concat(te.requires||[],te.requiresIfExists||[]).forEach(function(de){if(!w.has(de)){var ve=_.get(de);ve&&Z(ve)}}),L.push(te)}return N.forEach(function(te){_.set(te.name,te)}),N.forEach(function(te){w.has(te.name)||Z(te)}),L}var Kr={placement:"bottom",modifiers:[],strategy:"absolute"};function nc(){for(var N=arguments.length,_=new Array(N),w=0;w<N;w++)_[w]=arguments[w];return!_.some(function(L){return!(L&&typeof L.getBoundingClientRect=="function")})}function Ua(N){N===void 0&&(N={});var _=N,w=_.defaultModifiers,L=w===void 0?[]:w,Z=_.defaultOptions,te=Z===void 0?Kr:Z;return function(de,ve,Oe){Oe===void 0&&(Oe=te);var Be,He,Fe={placement:"bottom",orderedModifiers:[],options:Object.assign({},Kr,te),modifiersData:{},elements:{reference:de,popper:ve},attributes:{},styles:{}},ht=[],Ze=!1,dt={state:Fe,setOptions:function(tt){var Ut=typeof tt=="function"?tt(Fe.options):tt;rt(),Fe.options=Object.assign({},te,Fe.options,Ut),Fe.scrollParents={reference:Jt(de)?Js(de):de.contextElement?Js(de.contextElement):[],popper:Js(ve)};var Wt,yt,Mt=function(at){var Ue=tc(at);return jo.reduce(function(Xe,ot){return Xe.concat(Ue.filter(function(jt){return jt.phase===ot}))},[])}((Wt=[].concat(L,Fe.options.modifiers),yt=Wt.reduce(function(at,Ue){var Xe=at[Ue.name];return at[Ue.name]=Xe?Object.assign({},Xe,Ue,{options:Object.assign({},Xe.options,Ue.options),data:Object.assign({},Xe.data,Ue.data)}):Ue,at},{}),Object.keys(yt).map(function(at){return yt[at]})));return Fe.orderedModifiers=Mt.filter(function(at){return at.enabled}),Fe.orderedModifiers.forEach(function(at){var Ue=at.name,Xe=at.options,ot=Xe===void 0?{}:Xe,jt=at.effect;if(typeof jt=="function"){var en=jt({state:Fe,name:Ue,instance:dt,options:ot});ht.push(en||function(){})}}),dt.update()},forceUpdate:function(){if(!Ze){var tt=Fe.elements,Ut=tt.reference,Wt=tt.popper;if(nc(Ut,Wt)){Fe.rects={reference:vh(Ut,Hi(Wt),Fe.options.strategy==="fixed"),popper:Oa(Wt)},Fe.reset=!1,Fe.placement=Fe.options.placement,Fe.orderedModifiers.forEach(function(jt){return Fe.modifiersData[jt.name]=Object.assign({},jt.data)});for(var yt=0;yt<Fe.orderedModifiers.length;yt++)if(Fe.reset!==!0){var Mt=Fe.orderedModifiers[yt],at=Mt.fn,Ue=Mt.options,Xe=Ue===void 0?{}:Ue,ot=Mt.name;typeof at=="function"&&(Fe=at({state:Fe,options:Xe,name:ot,instance:dt})||Fe)}else Fe.reset=!1,yt=-1}}},update:(Be=function(){return new Promise(function(tt){dt.forceUpdate(),tt(Fe)})},function(){return He||(He=new Promise(function(tt){Promise.resolve().then(function(){He=void 0,tt(Be())})})),He}),destroy:function(){rt(),Ze=!0}};if(!nc(de,ve))return dt;function rt(){ht.forEach(function(tt){return tt()}),ht=[]}return dt.setOptions(Oe).then(function(tt){!Ze&&Oe.onFirstUpdate&&Oe.onFirstUpdate(tt)}),dt}}var ic=Ua(),za=Ua({defaultModifiers:[ja,Fo,Qs,Ws]}),Uo=Ua({defaultModifiers:[ja,Fo,Qs,Ws,Va,Zc,Fa,ts,Vo]});const Ba=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ai,afterRead:ka,afterWrite:Da,applyStyles:Ws,arrow:ts,auto:Ji,basePlacements:yr,beforeMain:Mo,beforeRead:Gs,beforeWrite:Po,bottom:Kn,clippingParents:Xl,computeStyles:Qs,createPopper:Uo,createPopperBase:ic,createPopperLite:za,detectOverflow:Qn,end:es,eventListeners:ja,flip:Zc,hide:Vo,left:rn,main:Na,modifierPhases:jo,offset:Va,placements:Oo,popper:pi,popperGenerator:Ua,popperOffsets:Fo,preventOverflow:Fa,read:Ia,reference:Un,right:Fn,start:$s,top:wt,variationPlacements:_r,viewport:qs,write:Yc},Symbol.toStringTag,{value:"Module"})),sc="dropdown",ws=".bs.dropdown",Ts=".data-api",Jc="ArrowUp",rc="ArrowDown",eu=`hide${ws}`,tu=`hidden${ws}`,zo=`show${ws}`,_i=`shown${ws}`,ac=`click${ws}${Ts}`,oc=`keydown${ws}${Ts}`,er=`keyup${ws}${Ts}`,m="show",E='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',S=`${E}.${m}`,V=".dropdown-menu",ie=R()?"top-end":"top-start",he=R()?"top-start":"top-end",Me=R()?"bottom-end":"bottom-start",Rt=R()?"bottom-start":"bottom-end",Cn=R()?"left-start":"right-start",It=R()?"right-start":"left-start",Bn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Rn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class In extends Pe{constructor(_,w){super(_,w),this._popper=null,this._parent=this._element.parentNode,this._menu=Se.next(this._element,V)[0]||Se.prev(this._element,V)[0]||Se.findOne(V,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Bn}static get DefaultType(){return Rn}static get NAME(){return sc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const _={relatedTarget:this._element};if(!P.trigger(this._element,zo,_).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const w of[].concat(...document.body.children))P.on(w,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(m),this._element.classList.add(m),P.trigger(this._element,_i,_)}}hide(){if(y(this._element)||!this._isShown())return;const _={relatedTarget:this._element};this._completeHide(_)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(_){if(!P.trigger(this._element,eu,_).defaultPrevented){if("ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))P.off(w,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(m),this._element.classList.remove(m),this._element.setAttribute("aria-expanded","false"),ke.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,tu,_),this._element.focus()}}_getConfig(_){if(typeof(_=super._getConfig(_)).reference=="object"&&!u(_.reference)&&typeof _.reference.getBoundingClientRect!="function")throw new TypeError(`${sc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return _}_createPopper(){if(Ba===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let _=this._element;this._config.reference==="parent"?_=this._parent:u(this._config.reference)?_=h(this._config.reference):typeof this._config.reference=="object"&&(_=this._config.reference);const w=this._getPopperConfig();this._popper=Uo(_,this._menu,w)}_isShown(){return this._menu.classList.contains(m)}_getPlacement(){const _=this._parent;if(_.classList.contains("dropend"))return Cn;if(_.classList.contains("dropstart"))return It;if(_.classList.contains("dropup-center"))return"top";if(_.classList.contains("dropdown-center"))return"bottom";const w=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return _.classList.contains("dropup")?w?he:ie:w?Rt:Me}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:_}=this._config;return typeof _=="string"?_.split(",").map(w=>Number.parseInt(w,10)):typeof _=="function"?w=>_(w,this._element):_}_getPopperConfig(){const _={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ke.setDataAttribute(this._menu,"popper","static"),_.modifiers=[{name:"applyStyles",enabled:!1}]),{..._,...q(this._config.popperConfig,[void 0,_])}}_selectMenuItem({key:_,target:w}){const L=Se.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Z=>f(Z));L.length&&X(L,w,_===rc,!L.includes(w)).focus()}static jQueryInterface(_){return this.each(function(){const w=In.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_]()}})}static clearMenus(_){if(_.button===2||_.type==="keyup"&&_.key!=="Tab")return;const w=Se.find(S);for(const L of w){const Z=In.getInstance(L);if(!Z||Z._config.autoClose===!1)continue;const te=_.composedPath(),de=te.includes(Z._menu);if(te.includes(Z._element)||Z._config.autoClose==="inside"&&!de||Z._config.autoClose==="outside"&&de||Z._menu.contains(_.target)&&(_.type==="keyup"&&_.key==="Tab"||/input|select|option|textarea|form/i.test(_.target.tagName)))continue;const ve={relatedTarget:Z._element};_.type==="click"&&(ve.clickEvent=_),Z._completeHide(ve)}}static dataApiKeydownHandler(_){const w=/input|textarea/i.test(_.target.tagName),L=_.key==="Escape",Z=[Jc,rc].includes(_.key);if(!Z&&!L||w&&!L)return;_.preventDefault();const te=this.matches(E)?this:Se.prev(this,E)[0]||Se.next(this,E)[0]||Se.findOne(E,_.delegateTarget.parentNode),de=In.getOrCreateInstance(te);if(Z)return _.stopPropagation(),de.show(),void de._selectMenuItem(_);de._isShown()&&(_.stopPropagation(),de.hide(),te.focus())}}P.on(document,oc,E,In.dataApiKeydownHandler),P.on(document,oc,V,In.dataApiKeydownHandler),P.on(document,ac,In.clearMenus),P.on(document,er,In.clearMenus),P.on(document,ac,E,function(N){N.preventDefault(),In.getOrCreateInstance(this).toggle()}),j(In);const Hn="backdrop",Ss="show",Bo=`mousedown.bs.${Hn}`,nu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ff={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class xh extends $e{constructor(_){super(),this._config=this._getConfig(_),this._isAppended=!1,this._element=null}static get Default(){return nu}static get DefaultType(){return Ff}static get NAME(){return Hn}show(_){if(!this._config.isVisible)return void q(_);this._append();const w=this._getElement();this._config.isAnimated&&T(w),w.classList.add(Ss),this._emulateAnimation(()=>{q(_)})}hide(_){this._config.isVisible?(this._getElement().classList.remove(Ss),this._emulateAnimation(()=>{this.dispose(),q(_)})):q(_)}dispose(){this._isAppended&&(P.off(this._element,Bo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const _=document.createElement("div");_.className=this._config.className,this._config.isAnimated&&_.classList.add("fade"),this._element=_}return this._element}_configAfterMerge(_){return _.rootElement=h(_.rootElement),_}_append(){if(this._isAppended)return;const _=this._getElement();this._config.rootElement.append(_),P.on(_,Bo,()=>{q(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(_){G(_,this._getElement(),this._config.isAnimated)}}const Ho=".bs.focustrap",Eh=`focusin${Ho}`,Uf=`keydown.tab${Ho}`,wh="backward",zf={autofocus:!0,trapElement:null},ly={autofocus:"boolean",trapElement:"element"};class Bf extends $e{constructor(_){super(),this._config=this._getConfig(_),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return zf}static get DefaultType(){return ly}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,Ho),P.on(document,Eh,_=>this._handleFocusin(_)),P.on(document,Uf,_=>this._handleKeydown(_)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,Ho))}_handleFocusin(_){const{trapElement:w}=this._config;if(_.target===document||_.target===w||w.contains(_.target))return;const L=Se.focusableChildren(w);L.length===0?w.focus():this._lastTabNavDirection===wh?L[L.length-1].focus():L[0].focus()}_handleKeydown(_){_.key==="Tab"&&(this._lastTabNavDirection=_.shiftKey?wh:"forward")}}const Hf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$f=".sticky-top",iu="padding-right",Ci="margin-right";class Ha{constructor(){this._element=document.body}getWidth(){const _=document.documentElement.clientWidth;return Math.abs(window.innerWidth-_)}hide(){const _=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,iu,w=>w+_),this._setElementAttributes(Hf,iu,w=>w+_),this._setElementAttributes($f,Ci,w=>w-_)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,iu),this._resetElementAttributes(Hf,iu),this._resetElementAttributes($f,Ci)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(_,w,L){const Z=this.getWidth();this._applyManipulationCallback(_,te=>{if(te!==this._element&&window.innerWidth>te.clientWidth+Z)return;this._saveInitialAttribute(te,w);const de=window.getComputedStyle(te).getPropertyValue(w);te.style.setProperty(w,`${L(Number.parseFloat(de))}px`)})}_saveInitialAttribute(_,w){const L=_.style.getPropertyValue(w);L&&ke.setDataAttribute(_,w,L)}_resetElementAttributes(_,w){this._applyManipulationCallback(_,L=>{const Z=ke.getDataAttribute(L,w);Z!==null?(ke.removeDataAttribute(L,w),L.style.setProperty(w,Z)):L.style.removeProperty(w)})}_applyManipulationCallback(_,w){if(u(_))w(_);else for(const L of Se.find(_,this._element))w(L)}}const qi=".bs.modal",qf=`hide${qi}`,Gf=`hidePrevented${qi}`,Th=`hidden${qi}`,su=`show${qi}`,cy=`shown${qi}`,$o=`resize${qi}`,Sh=`click.dismiss${qi}`,lc=`mousedown.dismiss${qi}`,Ah=`keydown.dismiss${qi}`,Wf=`click${qi}.data-api`,Yr="modal-open",$a="show",cc="modal-static",Kf={backdrop:!0,focus:!0,keyboard:!0},qa={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Xr extends Pe{constructor(_,w){super(_,w),this._dialog=Se.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ha,this._addEventListeners()}static get Default(){return Kf}static get DefaultType(){return qa}static get NAME(){return"modal"}toggle(_){return this._isShown?this.hide():this.show(_)}show(_){this._isShown||this._isTransitioning||P.trigger(this._element,su,{relatedTarget:_}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Yr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(_)))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,qf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($a),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){P.off(window,qi),P.off(this._dialog,qi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new xh({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Bf({trapElement:this._element})}_showElement(_){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const w=Se.findOne(".modal-body",this._dialog);w&&(w.scrollTop=0),T(this._element),this._element.classList.add($a),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,cy,{relatedTarget:_})},this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,Ah,_=>{_.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),P.on(window,$o,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),P.on(this._element,lc,_=>{P.one(this._element,Sh,w=>{this._element===_.target&&this._element===w.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Yr),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Th)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,Gf).defaultPrevented)return;const _=this._element.scrollHeight>document.documentElement.clientHeight,w=this._element.style.overflowY;w==="hidden"||this._element.classList.contains(cc)||(_||(this._element.style.overflowY="hidden"),this._element.classList.add(cc),this._queueCallback(()=>{this._element.classList.remove(cc),this._queueCallback(()=>{this._element.style.overflowY=w},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const _=this._element.scrollHeight>document.documentElement.clientHeight,w=this._scrollBar.getWidth(),L=w>0;if(L&&!_){const Z=R()?"paddingLeft":"paddingRight";this._element.style[Z]=`${w}px`}if(!L&&_){const Z=R()?"paddingRight":"paddingLeft";this._element.style[Z]=`${w}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(_,w){return this.each(function(){const L=Xr.getOrCreateInstance(this,_);if(typeof _=="string"){if(L[_]===void 0)throw new TypeError(`No method named "${_}"`);L[_](w)}})}}P.on(document,Wf,'[data-bs-toggle="modal"]',function(N){const _=Se.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&N.preventDefault(),P.one(_,su,L=>{L.defaultPrevented||P.one(_,Th,()=>{f(this)&&this.focus()})});const w=Se.findOne(".modal.show");w&&Xr.getInstance(w).hide(),Xr.getOrCreateInstance(_).toggle(this)}),Et(Xr),j(Xr);const tr=".bs.offcanvas",Ch=".data-api",uy=`load${tr}${Ch}`,Yf="show",Xf="showing",Rh="hiding",Ih=".offcanvas.show",kh=`show${tr}`,As=`shown${tr}`,Qf=`hide${tr}`,Gi=`hidePrevented${tr}`,Wi=`hidden${tr}`,qo=`resize${tr}`,Nh=`click${tr}${Ch}`,ru=`keydown.dismiss${tr}`,au={backdrop:!0,keyboard:!0,scroll:!1},Dh={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ri extends Pe{constructor(_,w){super(_,w),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return au}static get DefaultType(){return Dh}static get NAME(){return"offcanvas"}toggle(_){return this._isShown?this.hide():this.show(_)}show(_){this._isShown||P.trigger(this._element,kh,{relatedTarget:_}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ha().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Xf),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Yf),this._element.classList.remove(Xf),P.trigger(this._element,As,{relatedTarget:_})},this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,Qf).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Rh),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Yf,Rh),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ha().reset(),P.trigger(this._element,Wi)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const _=!!this._config.backdrop;return new xh({className:"offcanvas-backdrop",isVisible:_,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:_?()=>{this._config.backdrop!=="static"?this.hide():P.trigger(this._element,Gi)}:null})}_initializeFocusTrap(){return new Bf({trapElement:this._element})}_addEventListeners(){P.on(this._element,ru,_=>{_.key==="Escape"&&(this._config.keyboard?this.hide():P.trigger(this._element,Gi))})}static jQueryInterface(_){return this.each(function(){const w=Ri.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_](this)}})}}P.on(document,Nh,'[data-bs-toggle="offcanvas"]',function(N){const _=Se.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&N.preventDefault(),y(this))return;P.one(_,Wi,()=>{f(this)&&this.focus()});const w=Se.findOne(Ih);w&&w!==_&&Ri.getInstance(w).hide(),Ri.getOrCreateInstance(_).toggle(this)}),P.on(window,uy,()=>{for(const N of Se.find(Ih))Ri.getOrCreateInstance(N).show()}),P.on(window,qo,()=>{for(const N of Se.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(N).position!=="fixed"&&Ri.getOrCreateInstance(N).hide()}),Et(Ri),j(Ri);const Oh={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ou=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Go=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,hy=(N,_)=>{const w=N.nodeName.toLowerCase();return _.includes(w)?!ou.has(w)||!!Go.test(N.nodeValue):_.filter(L=>L instanceof RegExp).some(L=>L.test(w))},Ki={allowList:Oh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Mh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Er={entry:"(string|element|function|null)",selector:"(string|element)"};class Zf extends $e{constructor(_){super(),this._config=this._getConfig(_)}static get Default(){return Ki}static get DefaultType(){return Mh}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(_=>this._resolvePossibleFunction(_)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(_){return this._checkContent(_),this._config.content={...this._config.content,..._},this}toHtml(){const _=document.createElement("div");_.innerHTML=this._maybeSanitize(this._config.template);for(const[Z,te]of Object.entries(this._config.content))this._setContent(_,te,Z);const w=_.children[0],L=this._resolvePossibleFunction(this._config.extraClass);return L&&w.classList.add(...L.split(" ")),w}_typeCheckConfig(_){super._typeCheckConfig(_),this._checkContent(_.content)}_checkContent(_){for(const[w,L]of Object.entries(_))super._typeCheckConfig({selector:w,entry:L},Er)}_setContent(_,w,L){const Z=Se.findOne(L,_);Z&&((w=this._resolvePossibleFunction(w))?u(w)?this._putElementInTemplate(h(w),Z):this._config.html?Z.innerHTML=this._maybeSanitize(w):Z.textContent=w:Z.remove())}_maybeSanitize(_){return this._config.sanitize?function(w,L,Z){if(!w.length)return w;if(Z&&typeof Z=="function")return Z(w);const te=new window.DOMParser().parseFromString(w,"text/html"),de=[].concat(...te.body.querySelectorAll("*"));for(const ve of de){const Oe=ve.nodeName.toLowerCase();if(!Object.keys(L).includes(Oe)){ve.remove();continue}const Be=[].concat(...ve.attributes),He=[].concat(L["*"]||[],L[Oe]||[]);for(const Fe of Be)hy(Fe,He)||ve.removeAttribute(Fe.nodeName)}return te.body.innerHTML}(_,this._config.allowList,this._config.sanitizeFn):_}_resolvePossibleFunction(_){return q(_,[void 0,this])}_putElementInTemplate(_,w){if(this._config.html)return w.innerHTML="",void w.append(_);w.textContent=_.textContent}}const lu=new Set(["sanitize","allowList","sanitizeFn"]),wr="fade",Wo="show",Ph=".tooltip-inner",Ga=".modal",Wa="hide.bs.modal",Qr="hover",Ko="focus",Ii="click",is={AUTO:"auto",TOP:"top",RIGHT:R()?"left":"right",BOTTOM:"bottom",LEFT:R()?"right":"left"},Ka={allowList:Oh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Tr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class bi extends Pe{constructor(_,w){if(Ba===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(_,w),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ka}static get DefaultType(){return Tr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(Ga),Wa,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const _=P.trigger(this._element,this.constructor.eventName("show")),w=(v(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(_.defaultPrevented||!w)return;this._disposePopper();const L=this._getTipElement();this._element.setAttribute("aria-describedby",L.getAttribute("id"));const{container:Z}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Z.append(L),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(L),L.classList.add(Wo),"ontouchstart"in document.documentElement)for(const te of[].concat(...document.body.children))P.on(te,"mouseover",x);this._queueCallback(()=>{P.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Wo),"ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))P.off(_,"mouseover",x);this._activeTrigger[Ii]=!1,this._activeTrigger[Ko]=!1,this._activeTrigger[Qr]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(_){const w=this._getTemplateFactory(_).toHtml();if(!w)return null;w.classList.remove(wr,Wo),w.classList.add(`bs-${this.constructor.NAME}-auto`);const L=(Z=>{do Z+=Math.floor(1e6*Math.random());while(document.getElementById(Z));return Z})(this.constructor.NAME).toString();return w.setAttribute("id",L),this._isAnimated()&&w.classList.add(wr),w}setContent(_){this._newContent=_,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(_){return this._templateFactory?this._templateFactory.changeContent(_):this._templateFactory=new Zf({...this._config,content:_,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ph]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(_){return this.constructor.getOrCreateInstance(_.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(wr)}_isShown(){return this.tip&&this.tip.classList.contains(Wo)}_createPopper(_){const w=q(this._config.placement,[this,_,this._element]),L=is[w.toUpperCase()];return Uo(this._element,_,this._getPopperConfig(L))}_getOffset(){const{offset:_}=this._config;return typeof _=="string"?_.split(",").map(w=>Number.parseInt(w,10)):typeof _=="function"?w=>_(w,this._element):_}_resolvePossibleFunction(_){return q(_,[this._element,this._element])}_getPopperConfig(_){const w={placement:_,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:L=>{this._getTipElement().setAttribute("data-popper-placement",L.state.placement)}}]};return{...w,...q(this._config.popperConfig,[void 0,w])}}_setListeners(){const _=this._config.trigger.split(" ");for(const w of _)if(w==="click")P.on(this._element,this.constructor.eventName("click"),this._config.selector,L=>{const Z=this._initializeOnDelegatedTarget(L);Z._activeTrigger[Ii]=!(Z._isShown()&&Z._activeTrigger[Ii]),Z.toggle()});else if(w!=="manual"){const L=w===Qr?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),Z=w===Qr?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,L,this._config.selector,te=>{const de=this._initializeOnDelegatedTarget(te);de._activeTrigger[te.type==="focusin"?Ko:Qr]=!0,de._enter()}),P.on(this._element,Z,this._config.selector,te=>{const de=this._initializeOnDelegatedTarget(te);de._activeTrigger[te.type==="focusout"?Ko:Qr]=de._element.contains(te.relatedTarget),de._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(Ga),Wa,this._hideModalHandler)}_fixTitle(){const _=this._element.getAttribute("title");_&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",_),this._element.setAttribute("data-bs-original-title",_),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(_,w){clearTimeout(this._timeout),this._timeout=setTimeout(_,w)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(_){const w=ke.getDataAttributes(this._element);for(const L of Object.keys(w))lu.has(L)&&delete w[L];return _={...w,...typeof _=="object"&&_?_:{}},_=this._mergeConfigObj(_),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}_configAfterMerge(_){return _.container=_.container===!1?document.body:h(_.container),typeof _.delay=="number"&&(_.delay={show:_.delay,hide:_.delay}),typeof _.title=="number"&&(_.title=_.title.toString()),typeof _.content=="number"&&(_.content=_.content.toString()),_}_getDelegateConfig(){const _={};for(const[w,L]of Object.entries(this._config))this.constructor.Default[w]!==L&&(_[w]=L);return _.selector=!1,_.trigger="manual",_}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(_){return this.each(function(){const w=bi.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_]()}})}}j(bi);const Ya=".popover-header",Jf=".popover-body",jh={...bi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Lh={...bi.DefaultType,content:"(null|string|element|function)"};class $n extends bi{static get Default(){return jh}static get DefaultType(){return Lh}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ya]:this._getTitle(),[Jf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(_){return this.each(function(){const w=$n.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_]()}})}}j($n);const cn=".bs.scrollspy",Ft=`activate${cn}`,Zr=`click${cn}`,nr=`load${cn}.data-api`,Jr="active",Sr="[href]",Vh=".nav-link",em=`${Vh}, .nav-item > ${Vh}, .list-group-item`,uc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},hc={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Yo extends Pe{constructor(_,w){super(_,w),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return uc}static get DefaultType(){return hc}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const _ of this._observableSections.values())this._observer.observe(_)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(_){return _.target=h(_.target)||document.body,_.rootMargin=_.offset?`${_.offset}px 0px -30%`:_.rootMargin,typeof _.threshold=="string"&&(_.threshold=_.threshold.split(",").map(w=>Number.parseFloat(w))),_}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,Zr),P.on(this._config.target,Zr,Sr,_=>{const w=this._observableSections.get(_.target.hash);if(w){_.preventDefault();const L=this._rootElement||window,Z=w.offsetTop-this._element.offsetTop;if(L.scrollTo)return void L.scrollTo({top:Z,behavior:"smooth"});L.scrollTop=Z}}))}_getNewObserver(){const _={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(w=>this._observerCallback(w),_)}_observerCallback(_){const w=de=>this._targetLinks.get(`#${de.target.id}`),L=de=>{this._previousScrollData.visibleEntryTop=de.target.offsetTop,this._process(w(de))},Z=(this._rootElement||document.documentElement).scrollTop,te=Z>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Z;for(const de of _){if(!de.isIntersecting){this._activeTarget=null,this._clearActiveClass(w(de));continue}const ve=de.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(te&&ve){if(L(de),!Z)return}else te||ve||L(de)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const _=Se.find(Sr,this._config.target);for(const w of _){if(!w.hash||y(w))continue;const L=Se.findOne(decodeURI(w.hash),this._element);f(L)&&(this._targetLinks.set(decodeURI(w.hash),w),this._observableSections.set(w.hash,L))}}_process(_){this._activeTarget!==_&&(this._clearActiveClass(this._config.target),this._activeTarget=_,_.classList.add(Jr),this._activateParents(_),P.trigger(this._element,Ft,{relatedTarget:_}))}_activateParents(_){if(_.classList.contains("dropdown-item"))Se.findOne(".dropdown-toggle",_.closest(".dropdown")).classList.add(Jr);else for(const w of Se.parents(_,".nav, .list-group"))for(const L of Se.prev(w,em))L.classList.add(Jr)}_clearActiveClass(_){_.classList.remove(Jr);const w=Se.find(`${Sr}.${Jr}`,_);for(const L of w)L.classList.remove(Jr)}static jQueryInterface(_){return this.each(function(){const w=Yo.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_]()}})}}P.on(window,nr,()=>{for(const N of Se.find('[data-bs-spy="scroll"]'))Yo.getOrCreateInstance(N)}),j(Yo);const Cs=".bs.tab",Fh=`hide${Cs}`,Xa=`hidden${Cs}`,Ar=`show${Cs}`,ea=`shown${Cs}`,Cr=`click${Cs}`,Uh=`keydown${Cs}`,zh=`load${Cs}`,dc="ArrowLeft",fc="ArrowRight",Qa="ArrowUp",Zn="ArrowDown",Xo="Home",Bh="End",Za="active",tm="fade",Hh="show",wn=".dropdown-toggle",mc=`:not(${wn})`,Qo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ja=`.nav-link${mc}, .list-group-item${mc}, [role="tab"]${mc}, ${Qo}`,$h=`.${Za}[data-bs-toggle="tab"], .${Za}[data-bs-toggle="pill"], .${Za}[data-bs-toggle="list"]`;class ss extends Pe{constructor(_){super(_),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,Uh,w=>this._keydown(w)))}static get NAME(){return"tab"}show(){const _=this._element;if(this._elemIsActive(_))return;const w=this._getActiveElem(),L=w?P.trigger(w,Fh,{relatedTarget:_}):null;P.trigger(_,Ar,{relatedTarget:w}).defaultPrevented||L&&L.defaultPrevented||(this._deactivate(w,_),this._activate(_,w))}_activate(_,w){_&&(_.classList.add(Za),this._activate(Se.getElementFromSelector(_)),this._queueCallback(()=>{_.getAttribute("role")==="tab"?(_.removeAttribute("tabindex"),_.setAttribute("aria-selected",!0),this._toggleDropDown(_,!0),P.trigger(_,ea,{relatedTarget:w})):_.classList.add(Hh)},_,_.classList.contains(tm)))}_deactivate(_,w){_&&(_.classList.remove(Za),_.blur(),this._deactivate(Se.getElementFromSelector(_)),this._queueCallback(()=>{_.getAttribute("role")==="tab"?(_.setAttribute("aria-selected",!1),_.setAttribute("tabindex","-1"),this._toggleDropDown(_,!1),P.trigger(_,Xa,{relatedTarget:w})):_.classList.remove(Hh)},_,_.classList.contains(tm)))}_keydown(_){if(![dc,fc,Qa,Zn,Xo,Bh].includes(_.key))return;_.stopPropagation(),_.preventDefault();const w=this._getChildren().filter(Z=>!y(Z));let L;if([Xo,Bh].includes(_.key))L=w[_.key===Xo?0:w.length-1];else{const Z=[fc,Zn].includes(_.key);L=X(w,_.target,Z,!0)}L&&(L.focus({preventScroll:!0}),ss.getOrCreateInstance(L).show())}_getChildren(){return Se.find(Ja,this._parent)}_getActiveElem(){return this._getChildren().find(_=>this._elemIsActive(_))||null}_setInitialAttributes(_,w){this._setAttributeIfNotExists(_,"role","tablist");for(const L of w)this._setInitialAttributesOnChild(L)}_setInitialAttributesOnChild(_){_=this._getInnerElement(_);const w=this._elemIsActive(_),L=this._getOuterElement(_);_.setAttribute("aria-selected",w),L!==_&&this._setAttributeIfNotExists(L,"role","presentation"),w||_.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(_,"role","tab"),this._setInitialAttributesOnTargetPanel(_)}_setInitialAttributesOnTargetPanel(_){const w=Se.getElementFromSelector(_);w&&(this._setAttributeIfNotExists(w,"role","tabpanel"),_.id&&this._setAttributeIfNotExists(w,"aria-labelledby",`${_.id}`))}_toggleDropDown(_,w){const L=this._getOuterElement(_);if(!L.classList.contains("dropdown"))return;const Z=(te,de)=>{const ve=Se.findOne(te,L);ve&&ve.classList.toggle(de,w)};Z(wn,Za),Z(".dropdown-menu",Hh),L.setAttribute("aria-expanded",w)}_setAttributeIfNotExists(_,w,L){_.hasAttribute(w)||_.setAttribute(w,L)}_elemIsActive(_){return _.classList.contains(Za)}_getInnerElement(_){return _.matches(Ja)?_:Se.findOne(Ja,_)}_getOuterElement(_){return _.closest(".nav-item, .list-group-item")||_}static jQueryInterface(_){return this.each(function(){const w=ss.getOrCreateInstance(this);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_]()}})}}P.on(document,Cr,Qo,function(N){["A","AREA"].includes(this.tagName)&&N.preventDefault(),y(this)||ss.getOrCreateInstance(this).show()}),P.on(window,zh,()=>{for(const N of Se.find($h))ss.getOrCreateInstance(N)}),j(ss);const Yi=".bs.toast",dy=`mouseover${Yi}`,nm=`mouseout${Yi}`,fy=`focusin${Yi}`,im=`focusout${Yi}`,eo=`hide${Yi}`,qh=`hidden${Yi}`,cu=`show${Yi}`,sm=`shown${Yi}`,Zo="hide",pc="show",to="showing",Gh={animation:"boolean",autohide:"boolean",delay:"number"},rm={animation:!0,autohide:!0,delay:5e3};class ta extends Pe{constructor(_,w){super(_,w),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return rm}static get DefaultType(){return Gh}static get NAME(){return"toast"}show(){P.trigger(this._element,cu).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Zo),T(this._element),this._element.classList.add(pc,to),this._queueCallback(()=>{this._element.classList.remove(to),P.trigger(this._element,sm),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,eo).defaultPrevented||(this._element.classList.add(to),this._queueCallback(()=>{this._element.classList.add(Zo),this._element.classList.remove(to,pc),P.trigger(this._element,qh)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(pc),super.dispose()}isShown(){return this._element.classList.contains(pc)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(_,w){switch(_.type){case"mouseover":case"mouseout":this._hasMouseInteraction=w;break;case"focusin":case"focusout":this._hasKeyboardInteraction=w}if(w)return void this._clearTimeout();const L=_.relatedTarget;this._element===L||this._element.contains(L)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,dy,_=>this._onInteraction(_,!0)),P.on(this._element,nm,_=>this._onInteraction(_,!1)),P.on(this._element,fy,_=>this._onInteraction(_,!0)),P.on(this._element,im,_=>this._onInteraction(_,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(_){return this.each(function(){const w=ta.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_](this)}})}}return Et(ta),j(ta),{Alert:Re,Button:it,Carousel:pr,Collapse:En,Dropdown:In,Modal:Xr,Offcanvas:Ri,Popover:$n,ScrollSpy:Yo,Tab:ss,Toast:ta,Tooltip:bi}})}(_p)),_p.exports}YN();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var iw="popstate";function XN(n={}){function e(i,s){let{pathname:a,search:l,hash:u}=i.location;return mb("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:rf(s)}return ZN(e,t,null,n)}function gn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QN(){return Math.random().toString(36).substring(2,10)}function sw(n,e){return{usr:n.state,key:n.key,idx:e}}function mb(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ah(e):e,state:t,key:e&&e.key||i||QN()}}function rf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ah(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function ZN(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,u="POP",h=null,f=y();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function y(){return(l.state||{idx:null}).idx}function v(){u="POP";let R=y(),j=R==null?null:R-f;f=R,h&&h({action:u,location:k.location,delta:j})}function x(R,j){u="PUSH";let q=mb(k.location,R,j);f=y()+1;let G=sw(q,f),X=k.createHref(q);try{l.pushState(G,"",X)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(X)}a&&h&&h({action:u,location:k.location,delta:1})}function T(R,j){u="REPLACE";let q=mb(k.location,R,j);f=y();let G=sw(q,f),X=k.createHref(q);l.replaceState(G,"",X),a&&h&&h({action:u,location:k.location,delta:0})}function C(R){return JN(R)}let k={get action(){return u},get location(){return n(s,l)},listen(R){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(iw,v),h=R,()=>{s.removeEventListener(iw,v),h=null}},createHref(R){return e(s,R)},createURL:C,encodeLocation(R){let j=C(R);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:T,go(R){return l.go(R)}};return k}function JN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gn(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:rf(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function MA(n,e,t="/"){return eD(n,e,t,!1)}function eD(n,e,t,i){let s=typeof e=="string"?ah(e):e,a=To(s.pathname||"/",t);if(a==null)return null;let l=PA(n);tD(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=dD(a);u=uD(l[h],f,i)}return u}function PA(n,e=[],t=[],i=""){let s=(a,l,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(gn(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length));let f=Eo([i,h.relativePath]),y=t.concat(h);a.children&&a.children.length>0&&(gn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),PA(a.children,e,y,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:lD(f,a.index),routesMeta:y})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let u of jA(a.path))s(a,l,u)}),e}function jA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=jA(i.join("/")),u=[];return u.push(...l.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...l),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function tD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:cD(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var nD=/^:[\w-]+$/,iD=3,sD=2,rD=1,aD=10,oD=-2,rw=n=>n==="*";function lD(n,e){let t=n.split("/"),i=t.length;return t.some(rw)&&(i+=oD),e&&(i+=sD),t.filter(s=>!rw(s)).reduce((s,a)=>s+(nD.test(a)?iD:a===""?rD:aD),i)}function cD(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function uD(n,e,t=!1){let{routesMeta:i}=n,s={},a="/",l=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,y=a==="/"?e:e.slice(a.length)||"/",v=Mp({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},y),x=h.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=Mp({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Eo([a,v.pathname]),pathnameBase:gD(Eo([a,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(a=Eo([a,v.pathnameBase]))}return l}function Mp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=hD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:y,isOptional:v},x)=>{if(y==="*"){let C=u[x]||"";l=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const T=u[x];return v&&!T?f[y]=void 0:f[y]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function hD(n,e=!1,t=!0){jr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function dD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function To(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function fD(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?ah(n):n;return{pathname:t?t.startsWith("/")?t:mD(t,e):e,search:yD(i),hash:_D(s)}}function mD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function S_(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sv(n){let e=pD(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function rv(n,e,t,i=!1){let s;typeof n=="string"?s=ah(n):(s={...n},gn(!s.pathname||!s.pathname.includes("?"),S_("?","pathname","search",s)),gn(!s.pathname||!s.pathname.includes("#"),S_("#","pathname","hash",s)),gn(!s.search||!s.search.includes("#"),S_("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}u=v>=0?e[v]:"/"}let h=fD(s,u),f=l&&l!=="/"&&l.endsWith("/"),y=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||y)&&(h.pathname+="/"),h}var Eo=n=>n.join("/").replace(/\/\/+/g,"/"),gD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_D=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var LA=["POST","PUT","PATCH","DELETE"];new Set(LA);var vD=["GET",...LA];new Set(vD);var oh=D.createContext(null);oh.displayName="DataRouter";var _g=D.createContext(null);_g.displayName="DataRouterState";D.createContext(!1);var VA=D.createContext({isTransitioning:!1});VA.displayName="ViewTransition";var xD=D.createContext(new Map);xD.displayName="Fetchers";var ED=D.createContext(null);ED.displayName="Await";var Fr=D.createContext(null);Fr.displayName="Navigation";var Sf=D.createContext(null);Sf.displayName="Location";var Sa=D.createContext({outlet:null,matches:[],isDataRoute:!1});Sa.displayName="Route";var av=D.createContext(null);av.displayName="RouteError";function wD(n,{relative:e}={}){gn(lh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=D.useContext(Fr),{hash:s,pathname:a,search:l}=Af(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Eo([t,a])),i.createHref({pathname:u,search:l,hash:s})}function lh(){return D.useContext(Sf)!=null}function Aa(){return gn(lh(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Sf).location}var FA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UA(n){D.useContext(Fr).static||D.useLayoutEffect(n)}function ch(){let{isDataRoute:n}=D.useContext(Sa);return n?jD():TD()}function TD(){gn(lh(),"useNavigate() may be used only in the context of a <Router> component.");let n=D.useContext(oh),{basename:e,navigator:t}=D.useContext(Fr),{matches:i}=D.useContext(Sa),{pathname:s}=Aa(),a=JSON.stringify(sv(i)),l=D.useRef(!1);return UA(()=>{l.current=!0}),D.useCallback((h,f={})=>{if(jr(l.current,FA),!l.current)return;if(typeof h=="number"){t.go(h);return}let y=rv(h,JSON.parse(a),s,f.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Eo([e,y.pathname])),(f.replace?t.replace:t.push)(y,f.state,f)},[e,t,a,s,n])}D.createContext(null);function Af(n,{relative:e}={}){let{matches:t}=D.useContext(Sa),{pathname:i}=Aa(),s=JSON.stringify(sv(t));return D.useMemo(()=>rv(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function SD(n,e){return zA(n,e)}function zA(n,e,t,i){gn(lh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(Fr),{matches:a}=D.useContext(Sa),l=a[a.length-1],u=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",y=l&&l.route;{let j=y&&y.path||"";BA(h,!y||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let v=Aa(),x;if(e){let j=typeof e=="string"?ah(e):e;gn(f==="/"||j.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${j.pathname}" was given in the \`location\` prop.`),x=j}else x=v;let T=x.pathname||"/",C=T;if(f!=="/"){let j=f.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(j.length).join("/")}let k=MA(n,{pathname:C});jr(y||k!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),jr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=kD(k&&k.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:Eo([f,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?f:Eo([f,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,t,i);return e&&R?D.createElement(Sf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},R):R}function AD(){let n=PD(),e=bD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:s},t):null,l)}var CD=D.createElement(AD,null),RD=class extends D.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?D.createElement(Sa.Provider,{value:this.props.routeContext},D.createElement(av.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ID({routeContext:n,match:e,children:t}){let i=D.useContext(oh);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Sa.Provider,{value:n},t)}function kD(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let h=s.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);gn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,u=-1;if(t)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:y,errors:v}=t,x=f.route.loader&&!y.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((h,f,y)=>{let v,x=!1,T=null,C=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,T=f.route.errorElement||CD,l&&(u<0&&y===0?(BA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,C=null):u===y&&(x=!0,C=f.route.hydrateFallbackElement||null)));let k=e.concat(s.slice(0,y+1)),R=()=>{let j;return v?j=T:x?j=C:f.route.Component?j=D.createElement(f.route.Component,null):f.route.element?j=f.route.element:j=h,D.createElement(ID,{match:f,routeContext:{outlet:h,matches:k,isDataRoute:t!=null},children:j})};return t&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?D.createElement(RD,{location:t.location,revalidation:t.revalidation,component:T,error:v,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):R()},null)}function ov(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ND(n){let e=D.useContext(oh);return gn(e,ov(n)),e}function DD(n){let e=D.useContext(_g);return gn(e,ov(n)),e}function OD(n){let e=D.useContext(Sa);return gn(e,ov(n)),e}function lv(n){let e=OD(n),t=e.matches[e.matches.length-1];return gn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MD(){return lv("useRouteId")}function PD(){let n=D.useContext(av),e=DD("useRouteError"),t=lv("useRouteError");return n!==void 0?n:e.errors?.[t]}function jD(){let{router:n}=ND("useNavigate"),e=lv("useNavigate"),t=D.useRef(!1);return UA(()=>{t.current=!0}),D.useCallback(async(s,a={})=>{jr(t.current,FA),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var aw={};function BA(n,e,t){!e&&!aw[n]&&(aw[n]=!0,jr(!1,t))}D.memo(LD);function LD({routes:n,future:e,state:t}){return zA(n,void 0,t,e)}function HA({to:n,replace:e,state:t,relative:i}){gn(lh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=D.useContext(Fr);jr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=D.useContext(Sa),{pathname:l}=Aa(),u=ch(),h=rv(n,sv(a),l,i==="path"),f=JSON.stringify(h);return D.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:i})},[u,f,i,e,t]),null}function Nr(n){gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1}){gn(!lh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=ah(t));let{pathname:h="/",search:f="",hash:y="",state:v=null,key:x="default"}=t,T=D.useMemo(()=>{let C=To(h,l);return C==null?null:{location:{pathname:C,search:f,hash:y,state:v,key:x},navigationType:i}},[l,h,f,y,v,x,i]);return jr(T!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:D.createElement(Fr.Provider,{value:u},D.createElement(Sf.Provider,{children:e,value:T}))}function FD({children:n,location:e}){return SD(pb(n),e)}function pb(n,e=[]){let t=[];return D.Children.forEach(n,(i,s)=>{if(!D.isValidElement(i))return;let a=[...e,s];if(i.type===D.Fragment){t.push.apply(t,pb(i.props.children,a));return}gn(i.type===Nr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=pb(i.props.children,a)),t.push(l)}),t}var bp="get",vp="application/x-www-form-urlencoded";function bg(n){return n!=null&&typeof n.tagName=="string"}function UD(n){return bg(n)&&n.tagName.toLowerCase()==="button"}function zD(n){return bg(n)&&n.tagName.toLowerCase()==="form"}function BD(n){return bg(n)&&n.tagName.toLowerCase()==="input"}function HD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $D(n,e){return n.button===0&&(!e||e==="_self")&&!HD(n)}var Wm=null;function qD(){if(Wm===null)try{new FormData(document.createElement("form"),0),Wm=!1}catch{Wm=!0}return Wm}var GD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function A_(n){return n!=null&&!GD.has(n)?(jr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vp}"`),null):n}function WD(n,e){let t,i,s,a,l;if(zD(n)){let u=n.getAttribute("action");i=u?To(u,e):null,t=n.getAttribute("method")||bp,s=A_(n.getAttribute("enctype"))||vp,a=new FormData(n)}else if(UD(n)||BD(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(i=h?To(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||bp,s=A_(n.getAttribute("formenctype"))||A_(u.getAttribute("enctype"))||vp,a=new FormData(u,n),!qD()){let{name:f,type:y,value:v}=n;if(y==="image"){let x=f?`${f}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else f&&a.append(f,v)}}else{if(bg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bp,i=null,s=vp,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function KD(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&To(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function YD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function QD(n,e,t){let i=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await YD(a,t);return l.links?l.links():[]}return[]}));return tO(i.flat(1).filter(XD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ow(n,e,t,i,s,a){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return a==="assets"?e.filter((h,f)=>l(h,f)||u(h,f)):a==="data"?e.filter((h,f)=>{let y=i.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function ZD(n,e,{includeHydrateFallback:t}={}){return JD(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function JD(n){return[...new Set(n)]}function eO(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function tO(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let a=JSON.stringify(eO(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function $A(){let n=D.useContext(oh);return cv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function nO(){let n=D.useContext(_g);return cv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var uv=D.createContext(void 0);uv.displayName="FrameworkContext";function qA(){let n=D.useContext(uv);return cv(n,"You must render this element inside a <HydratedRouter> element"),n}function iO(n,e){let t=D.useContext(uv),[i,s]=D.useState(!1),[a,l]=D.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:y,onTouchStart:v}=e,x=D.useRef(null);D.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let k=j=>{j.forEach(q=>{l(q.isIntersecting)})},R=new IntersectionObserver(k,{threshold:.5});return x.current&&R.observe(x.current),()=>{R.disconnect()}}},[n]),D.useEffect(()=>{if(i){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[i]);let T=()=>{s(!0)},C=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:Id(u,T),onBlur:Id(h,C),onMouseEnter:Id(f,T),onMouseLeave:Id(y,C),onTouchStart:Id(v,T)}]:[!1,x,{}]}function Id(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function sO({page:n,...e}){let{router:t}=$A(),i=D.useMemo(()=>MA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?D.createElement(aO,{page:n,matches:i,...e}):null}function rO(n){let{manifest:e,routeModules:t}=qA(),[i,s]=D.useState([]);return D.useEffect(()=>{let a=!1;return QD(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),i}function aO({page:n,matches:e,...t}){let i=Aa(),{manifest:s,routeModules:a}=qA(),{basename:l}=$A(),{loaderData:u,matches:h}=nO(),f=D.useMemo(()=>ow(n,e,h,s,i,"data"),[n,e,h,s,i]),y=D.useMemo(()=>ow(n,e,h,s,i,"assets"),[n,e,h,s,i]),v=D.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,k=!1;if(e.forEach(j=>{let q=s.routes[j.route.id];!q||!q.hasLoader||(!f.some(G=>G.route.id===j.route.id)&&j.route.id in u&&a[j.route.id]?.shouldRevalidate||q.hasClientLoader?k=!0:C.add(j.route.id))}),C.size===0)return[];let R=KD(n,l,"data");return k&&C.size>0&&R.searchParams.set("_routes",e.filter(j=>C.has(j.route.id)).map(j=>j.route.id).join(",")),[R.pathname+R.search]},[l,u,i,s,f,e,n,a]),x=D.useMemo(()=>ZD(y,s),[y,s]),T=rO(y);return D.createElement(D.Fragment,null,v.map(C=>D.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),x.map(C=>D.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),T.map(({key:C,link:k})=>D.createElement("link",{key:C,...k})))}function oO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var GA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GA&&(window.__reactRouterVersion="7.7.1")}catch{}function lO({basename:n,children:e,window:t}){let i=D.useRef();i.current==null&&(i.current=XN({window:t,v5Compat:!0}));let s=i.current,[a,l]=D.useState({action:s.action,location:s.location}),u=D.useCallback(h=>{D.startTransition(()=>l(h))},[l]);return D.useLayoutEffect(()=>s.listen(u),[s,u]),D.createElement(VD,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var WA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KA=D.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:l,state:u,target:h,to:f,preventScrollReset:y,viewTransition:v,...x},T){let{basename:C}=D.useContext(Fr),k=typeof f=="string"&&WA.test(f),R,j=!1;if(typeof f=="string"&&k&&(R=f,GA))try{let O=new URL(window.location.href),U=f.startsWith("//")?new URL(O.protocol+f):new URL(f),H=To(U.pathname,C);U.origin===O.origin&&H!=null?f=H+U.search+U.hash:j=!0}catch{jr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=wD(f,{relative:s}),[G,X,Y]=iO(i,x),J=hO(f,{replace:l,state:u,target:h,preventScrollReset:y,relative:s,viewTransition:v});function F(O){e&&e(O),O.defaultPrevented||J(O)}let I=D.createElement("a",{...x,...Y,href:R||q,onClick:j||a?e:F,ref:oO(T,X),target:h,"data-discover":!k&&t==="render"?"true":void 0});return G&&!k?D.createElement(D.Fragment,null,I,D.createElement(sO,{page:q})):I});KA.displayName="Link";var ho=D.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:l,viewTransition:u,children:h,...f},y){let v=Af(l,{relative:f.relative}),x=Aa(),T=D.useContext(_g),{navigator:C,basename:k}=D.useContext(Fr),R=T!=null&&gO(v)&&u===!0,j=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,q=x.pathname,G=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(q=q.toLowerCase(),G=G?G.toLowerCase():null,j=j.toLowerCase()),G&&k&&(G=To(G,k)||G);const X=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let Y=q===j||!s&&q.startsWith(j)&&q.charAt(X)==="/",J=G!=null&&(G===j||!s&&G.startsWith(j)&&G.charAt(j.length)==="/"),F={isActive:Y,isPending:J,isTransitioning:R},I=Y?e:void 0,O;typeof i=="function"?O=i(F):O=[i,Y?"active":null,J?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let U=typeof a=="function"?a(F):a;return D.createElement(KA,{...f,"aria-current":I,className:O,ref:y,style:U,to:l,viewTransition:u},typeof h=="function"?h(F):h)});ho.displayName="NavLink";var cO=D.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:l=bp,action:u,onSubmit:h,relative:f,preventScrollReset:y,viewTransition:v,...x},T)=>{let C=mO(),k=pO(u,{relative:f}),R=l.toLowerCase()==="get"?"get":"post",j=typeof u=="string"&&WA.test(u),q=G=>{if(h&&h(G),G.defaultPrevented)return;G.preventDefault();let X=G.nativeEvent.submitter,Y=X?.getAttribute("formmethod")||l;C(X||G.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:s,state:a,relative:f,preventScrollReset:y,viewTransition:v})};return D.createElement("form",{ref:T,method:R,action:k,onSubmit:i?h:q,...x,"data-discover":!j&&n==="render"?"true":void 0})});cO.displayName="Form";function uO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YA(n){let e=D.useContext(oh);return gn(e,uO(n)),e}function hO(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=ch(),h=Aa(),f=Af(n,{relative:a});return D.useCallback(y=>{if($D(y,e)){y.preventDefault();let v=t!==void 0?t:rf(h)===rf(f);u(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[h,u,f,t,i,e,n,s,a,l])}var dO=0,fO=()=>`__${String(++dO)}__`;function mO(){let{router:n}=YA("useSubmit"),{basename:e}=D.useContext(Fr),t=MD();return D.useCallback(async(i,s={})=>{let{action:a,method:l,encType:u,formData:h,body:f}=WD(i,e);if(s.navigate===!1){let y=s.fetcherKey||fO();await n.fetch(y,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function pO(n,{relative:e}={}){let{basename:t}=D.useContext(Fr),i=D.useContext(Sa);gn(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Af(n||".",{relative:e})},l=Aa();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),h=u.getAll("index");if(h.some(y=>y==="")){u.delete("index"),h.filter(v=>v).forEach(v=>u.append("index",v));let y=u.toString();a.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Eo([t,a.pathname])),rf(a)}function gO(n,{relative:e}={}){let t=D.useContext(VA);gn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=YA("useViewTransitionState"),s=Af(n,{relative:e});if(!t.isTransitioning)return!1;let a=To(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=To(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Mp(s.pathname,l)!=null||Mp(s.pathname,a)!=null}var yO=OA();const zu=Tf(yO),_O=()=>{};var lw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},bO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],u=n[t++],h=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},QA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,u=l?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,y=a>>2,v=(a&3)<<4|u>>4;let x=(u&15)<<2|f>>6,T=f&63;h||(T=64,l||(x=64)),i.push(t[y],t[v],t[x],t[T])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||u==null||f==null||v==null)throw new vO;const x=a<<2|u>>4;if(i.push(x),f!==64){const T=u<<4&240|f>>2;if(i.push(T),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class vO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xO=function(n){const e=XA(n);return QA.encodeByteArray(e,!0)},Pp=function(n){return xO(n).replace(/\./g,"")},ZA=function(n){try{return QA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=()=>EO().__FIREBASE_DEFAULTS__,TO=()=>{if(typeof process>"u"||typeof lw>"u")return;const n=lw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},SO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ZA(n[1]);return e&&JSON.parse(e)},vg=()=>{try{return _O()||wO()||TO()||SO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JA=n=>vg()?.emulatorHosts?.[n],eC=n=>{const e=JA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},tC=()=>vg()?.config,nC=n=>vg()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Pp(JSON.stringify(t)),Pp(JSON.stringify(l)),""].join(".")}const Wd={};function CO(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wd))Wd[e]?n.emulator.push(e):n.prod.push(e);return n}function RO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let cw=!1;function dv(n,e){if(typeof window>"u"||typeof document>"u"||!Bc(window.location.host)||Wd[n]===e||Wd[n]||cw)return;Wd[n]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",a=CO().prod.length>0;function l(){const x=document.getElementById(i);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function h(x,T){x.setAttribute("width","24"),x.setAttribute("id",T),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{cw=!0,l()},x}function y(x,T){x.setAttribute("id",T),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function v(){const x=RO(i),T=t("text"),C=document.getElementById(T)||document.createElement("span"),k=t("learnmore"),R=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),q=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const G=x.element;u(G),y(R,k);const X=f();h(q,j),G.append(q,C,R,X),document.body.appendChild(G)}a?(C.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fi())}function kO(){const n=vg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function DO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OO(){const n=Fi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MO(){return!kO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rC(){try{return typeof indexedDB=="object"}catch{return!1}}function aC(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function PO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="FirebaseError";class mr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=jO,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hc.prototype.create)}}class Hc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?LO(a,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new mr(s,u,i)}}function LO(n,e){return n.replace(VO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const VO=/\{\$([^}]+)}/g;function FO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ol(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],l=e[s];if(uw(a)&&uw(l)){if(!Ol(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function uw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Fd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function UO(n,e){const t=new zO(n,e);return t.subscribe.bind(t)}class zO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");BO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=C_),s.error===void 0&&(s.error=C_),s.complete===void 0&&(s.complete=C_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function C_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=1e3,$O=2,qO=14400*1e3,GO=.5;function hw(n,e=HO,t=$O){const i=e*Math.pow(t,n),s=Math.round(GO*i*(Math.random()-.5)*2);return Math.min(qO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(n){return n&&n._delegate?n._delegate:n}class dr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WO=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new AO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YO(e))try{this.getOrInitializeService({instanceIdentifier:Sc})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sc){return this.instances.has(e)}getOptions(e=Sc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);i===u&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:KO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Sc){return this.component?this.component.multipleInstances?e:Sc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function KO(n){return n===Sc?void 0:n}function YO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(kt||(kt={}));const QO={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},ZO=kt.INFO,JO={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},eM=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=JO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xg{constructor(e){this.name=e,this._logLevel=ZO,this._logHandler=eM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}}const tM=(n,e)=>e.some(t=>n instanceof t);let dw,fw;function nM(){return dw||(dw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iM(){return fw||(fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oC=new WeakMap,gb=new WeakMap,lC=new WeakMap,R_=new WeakMap,fv=new WeakMap;function sM(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Al(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&oC.set(t,n)}).catch(()=>{}),fv.set(e,n),e}function rM(n){if(gb.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});gb.set(n,e)}let yb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||lC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Al(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aM(n){yb=n(yb)}function oM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(I_(this),e,...t);return lC.set(i,e.sort?e.sort():[e]),Al(i)}:iM().includes(n)?function(...e){return n.apply(I_(this),e),Al(oC.get(this))}:function(...e){return Al(n.apply(I_(this),e))}}function lM(n){return typeof n=="function"?oM(n):(n instanceof IDBTransaction&&rM(n),tM(n,nM())?new Proxy(n,yb):n)}function Al(n){if(n instanceof IDBRequest)return sM(n);if(R_.has(n))return R_.get(n);const e=lM(n);return e!==n&&(R_.set(n,e),fv.set(e,n)),e}const I_=n=>fv.get(n);function cC(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),u=Al(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Al(l.result),h.oldVersion,h.newVersion,Al(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const cM=["get","getKey","getAll","getAllKeys","count"],uM=["put","add","delete","clear"],k_=new Map;function mw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(k_.get(e))return k_.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=uM.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||cM.includes(t)))return;const a=async function(l,...u){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&h.done]))[0]};return k_.set(e,a),a}aM(n=>({...n,get:(e,t,i)=>mw(e,t)||n.get(e,t,i),has:(e,t)=>!!mw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dM(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dM(n){return n.getComponent()?.type==="VERSION"}const _b="@firebase/app",pw="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new xg("@firebase/app"),fM="@firebase/app-compat",mM="@firebase/analytics-compat",pM="@firebase/analytics",gM="@firebase/app-check-compat",yM="@firebase/app-check",_M="@firebase/auth",bM="@firebase/auth-compat",vM="@firebase/database",xM="@firebase/data-connect",EM="@firebase/database-compat",wM="@firebase/functions",TM="@firebase/functions-compat",SM="@firebase/installations",AM="@firebase/installations-compat",CM="@firebase/messaging",RM="@firebase/messaging-compat",IM="@firebase/performance",kM="@firebase/performance-compat",NM="@firebase/remote-config",DM="@firebase/remote-config-compat",OM="@firebase/storage",MM="@firebase/storage-compat",PM="@firebase/firestore",jM="@firebase/ai",LM="@firebase/firestore-compat",VM="firebase",FM="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="[DEFAULT]",UM={[_b]:"fire-core",[fM]:"fire-core-compat",[pM]:"fire-analytics",[mM]:"fire-analytics-compat",[yM]:"fire-app-check",[gM]:"fire-app-check-compat",[_M]:"fire-auth",[bM]:"fire-auth-compat",[vM]:"fire-rtdb",[xM]:"fire-data-connect",[EM]:"fire-rtdb-compat",[wM]:"fire-fn",[TM]:"fire-fn-compat",[SM]:"fire-iid",[AM]:"fire-iid-compat",[CM]:"fire-fcm",[RM]:"fire-fcm-compat",[IM]:"fire-perf",[kM]:"fire-perf-compat",[NM]:"fire-rc",[DM]:"fire-rc-compat",[OM]:"fire-gcs",[MM]:"fire-gcs-compat",[PM]:"fire-fst",[LM]:"fire-fst-compat",[jM]:"fire-vertex","fire-js":"fire-js",[VM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=new Map,zM=new Map,vb=new Map;function gw(n,e){try{n.container.addComponent(e)}catch(t){So.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lr(n){const e=n.name;if(vb.has(e))return So.debug(`There were multiple attempts to register component ${e}.`),!1;vb.set(e,n);for(const t of jp.values())gw(t,n);for(const t of zM.values())gw(t,n);return!0}function Bl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cl=new Hc("app","Firebase",BM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=FM;function uC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:bb,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Cl.create("bad-app-name",{appName:String(s)});if(t||(t=tC()),!t)throw Cl.create("no-options");const a=jp.get(s);if(a){if(Ol(t,a.options)&&Ol(i,a.config))return a;throw Cl.create("duplicate-app",{appName:s})}const l=new XO(s);for(const h of vb.values())l.addComponent(h);const u=new HM(t,i,l);return jp.set(s,u),u}function Eg(n=bb){const e=jp.get(n);if(!e&&n===bb&&tC())return uC();if(!e)throw Cl.create("no-app",{appName:n});return e}function ms(n,e,t){let i=UM[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),So.warn(l.join(" "));return}Lr(new dr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="firebase-heartbeat-database",qM=1,af="firebase-heartbeat-store";let N_=null;function hC(){return N_||(N_=cC($M,qM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(af)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cl.create("idb-open",{originalErrorMessage:n.message})})),N_}async function GM(n){try{const t=(await hC()).transaction(af),i=await t.objectStore(af).get(dC(n));return await t.done,i}catch(e){if(e instanceof mr)So.warn(e.message);else{const t=Cl.create("idb-get",{originalErrorMessage:e?.message});So.warn(t.message)}}}async function yw(n,e){try{const i=(await hC()).transaction(af,"readwrite");await i.objectStore(af).put(e,dC(n)),await i.done}catch(t){if(t instanceof mr)So.warn(t.message);else{const i=Cl.create("idb-set",{originalErrorMessage:t?.message});So.warn(i.message)}}}function dC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=1024,KM=30;class YM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new QM(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_w();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>KM){const s=ZM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){So.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_w(),{heartbeatsToSend:t,unsentEntries:i}=XM(this._heartbeatsCache.heartbeats),s=Pp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return So.warn(e),""}}}function _w(){return new Date().toISOString().substring(0,10)}function XM(n,e=WM){const t=[];let i=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),bw(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),bw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class QM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rC()?aC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bw(n){return Pp(JSON.stringify({version:2,heartbeats:n})).length}function ZM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(n){Lr(new dr("platform-logger",e=>new hM(e),"PRIVATE")),Lr(new dr("heartbeat",e=>new YM(e),"PRIVATE")),ms(_b,pw,n),ms(_b,pw,"esm2020"),ms("fire-js","")}JM("");var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rl,fC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,I){function O(){}O.prototype=I.prototype,F.D=I.prototype,F.prototype=new O,F.prototype.constructor=F,F.C=function(U,H,B){for(var z=Array(arguments.length-2),je=2;je<arguments.length;je++)z[je-2]=arguments[je];return I.prototype[H].apply(U,z)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(F,I,O){O||(O=0);var U=Array(16);if(typeof I=="string")for(var H=0;16>H;++H)U[H]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for(H=0;16>H;++H)U[H]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=F.g[0],O=F.g[1],H=F.g[2];var B=F.g[3],z=I+(B^O&(H^B))+U[0]+3614090360&4294967295;I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[1]+3905402710&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[2]+606105819&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[3]+3250441966&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(B^O&(H^B))+U[4]+4118548399&4294967295,I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[5]+1200080426&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[6]+2821735955&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[7]+4249261313&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(B^O&(H^B))+U[8]+1770035416&4294967295,I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[9]+2336552879&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[10]+4294925233&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[11]+2304563134&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(B^O&(H^B))+U[12]+1804603682&4294967295,I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[13]+4254626195&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[14]+2792965006&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[15]+1236535329&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(H^B&(O^H))+U[1]+4129170786&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[6]+3225465664&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[11]+643717713&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[0]+3921069994&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(H^B&(O^H))+U[5]+3593408605&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[10]+38016083&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[15]+3634488961&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[4]+3889429448&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(H^B&(O^H))+U[9]+568446438&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[14]+3275163606&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[3]+4107603335&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[8]+1163531501&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(H^B&(O^H))+U[13]+2850285829&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[2]+4243563512&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[7]+1735328473&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[12]+2368359562&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(O^H^B)+U[5]+4294588738&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[8]+2272392833&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[11]+1839030562&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[14]+4259657740&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(O^H^B)+U[1]+2763975236&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[4]+1272893353&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[7]+4139469664&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[10]+3200236656&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(O^H^B)+U[13]+681279174&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[0]+3936430074&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[3]+3572445317&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[6]+76029189&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(O^H^B)+U[9]+3654602809&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[12]+3873151461&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[15]+530742520&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[2]+3299628645&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(H^(O|~B))+U[0]+4096336452&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[7]+1126891415&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[14]+2878612391&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[5]+4237533241&4294967295,O=H+(z<<21&4294967295|z>>>11),z=I+(H^(O|~B))+U[12]+1700485571&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[3]+2399980690&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[10]+4293915773&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[1]+2240044497&4294967295,O=H+(z<<21&4294967295|z>>>11),z=I+(H^(O|~B))+U[8]+1873313359&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[15]+4264355552&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[6]+2734768916&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[13]+1309151649&4294967295,O=H+(z<<21&4294967295|z>>>11),z=I+(H^(O|~B))+U[4]+4149444226&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[11]+3174756917&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[2]+718787259&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[9]+3951481745&4294967295,F.g[0]=F.g[0]+I&4294967295,F.g[1]=F.g[1]+(H+(z<<21&4294967295|z>>>11))&4294967295,F.g[2]=F.g[2]+H&4294967295,F.g[3]=F.g[3]+B&4294967295}i.prototype.u=function(F,I){I===void 0&&(I=F.length);for(var O=I-this.blockSize,U=this.B,H=this.h,B=0;B<I;){if(H==0)for(;B<=O;)s(this,F,B),B+=this.blockSize;if(typeof F=="string"){for(;B<I;)if(U[H++]=F.charCodeAt(B++),H==this.blockSize){s(this,U),H=0;break}}else for(;B<I;)if(U[H++]=F[B++],H==this.blockSize){s(this,U),H=0;break}}this.h=H,this.o+=I},i.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var I=1;I<F.length-8;++I)F[I]=0;var O=8*this.o;for(I=F.length-8;I<F.length;++I)F[I]=O&255,O/=256;for(this.u(F),F=Array(16),I=O=0;4>I;++I)for(var U=0;32>U;U+=8)F[O++]=this.g[I]>>>U&255;return F};function a(F,I){var O=u;return Object.prototype.hasOwnProperty.call(O,F)?O[F]:O[F]=I(F)}function l(F,I){this.h=I;for(var O=[],U=!0,H=F.length-1;0<=H;H--){var B=F[H]|0;U&&B==I||(O[H]=B,U=!1)}this.g=O}var u={};function h(F){return-128<=F&&128>F?a(F,function(I){return new l([I|0],0>I?-1:0)}):new l([F|0],0>F?-1:0)}function f(F){if(isNaN(F)||!isFinite(F))return v;if(0>F)return R(f(-F));for(var I=[],O=1,U=0;F>=O;U++)I[U]=F/O|0,O*=4294967296;return new l(I,0)}function y(F,I){if(F.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(F.charAt(0)=="-")return R(y(F.substring(1),I));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=f(Math.pow(I,8)),U=v,H=0;H<F.length;H+=8){var B=Math.min(8,F.length-H),z=parseInt(F.substring(H,H+B),I);8>B?(B=f(Math.pow(I,B)),U=U.j(B).add(f(z))):(U=U.j(O),U=U.add(f(z)))}return U}var v=h(0),x=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(k(this))return-R(this).m();for(var F=0,I=1,O=0;O<this.g.length;O++){var U=this.i(O);F+=(0<=U?U:4294967296+U)*I,I*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(C(this))return"0";if(k(this))return"-"+R(this).toString(F);for(var I=f(Math.pow(F,6)),O=this,U="";;){var H=X(O,I).g;O=j(O,H.j(I));var B=((0<O.g.length?O.g[0]:O.h)>>>0).toString(F);if(O=H,C(O))return B+U;for(;6>B.length;)B="0"+B;U=B+U}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function C(F){if(F.h!=0)return!1;for(var I=0;I<F.g.length;I++)if(F.g[I]!=0)return!1;return!0}function k(F){return F.h==-1}n.l=function(F){return F=j(this,F),k(F)?-1:C(F)?0:1};function R(F){for(var I=F.g.length,O=[],U=0;U<I;U++)O[U]=~F.g[U];return new l(O,~F.h).add(x)}n.abs=function(){return k(this)?R(this):this},n.add=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0,H=0;H<=I;H++){var B=U+(this.i(H)&65535)+(F.i(H)&65535),z=(B>>>16)+(this.i(H)>>>16)+(F.i(H)>>>16);U=z>>>16,B&=65535,z&=65535,O[H]=z<<16|B}return new l(O,O[O.length-1]&-2147483648?-1:0)};function j(F,I){return F.add(R(I))}n.j=function(F){if(C(this)||C(F))return v;if(k(this))return k(F)?R(this).j(R(F)):R(R(this).j(F));if(k(F))return R(this.j(R(F)));if(0>this.l(T)&&0>F.l(T))return f(this.m()*F.m());for(var I=this.g.length+F.g.length,O=[],U=0;U<2*I;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<F.g.length;H++){var B=this.i(U)>>>16,z=this.i(U)&65535,je=F.i(H)>>>16,_e=F.i(H)&65535;O[2*U+2*H]+=z*_e,q(O,2*U+2*H),O[2*U+2*H+1]+=B*_e,q(O,2*U+2*H+1),O[2*U+2*H+1]+=z*je,q(O,2*U+2*H+1),O[2*U+2*H+2]+=B*je,q(O,2*U+2*H+2)}for(U=0;U<I;U++)O[U]=O[2*U+1]<<16|O[2*U];for(U=I;U<2*I;U++)O[U]=0;return new l(O,0)};function q(F,I){for(;(F[I]&65535)!=F[I];)F[I+1]+=F[I]>>>16,F[I]&=65535,I++}function G(F,I){this.g=F,this.h=I}function X(F,I){if(C(I))throw Error("division by zero");if(C(F))return new G(v,v);if(k(F))return I=X(R(F),I),new G(R(I.g),R(I.h));if(k(I))return I=X(F,R(I)),new G(R(I.g),I.h);if(30<F.g.length){if(k(F)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var O=x,U=I;0>=U.l(F);)O=Y(O),U=Y(U);var H=J(O,1),B=J(U,1);for(U=J(U,2),O=J(O,2);!C(U);){var z=B.add(U);0>=z.l(F)&&(H=H.add(O),B=z),U=J(U,1),O=J(O,1)}return I=j(F,H.j(I)),new G(H,I)}for(H=v;0<=F.l(I);){for(O=Math.max(1,Math.floor(F.m()/I.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),B=f(O),z=B.j(I);k(z)||0<z.l(F);)O-=U,B=f(O),z=B.j(I);C(B)&&(B=x),H=H.add(B),F=j(F,z)}return new G(H,F)}n.A=function(F){return X(this,F).h},n.and=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)&F.i(U);return new l(O,this.h&F.h)},n.or=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)|F.i(U);return new l(O,this.h|F.h)},n.xor=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)^F.i(U);return new l(O,this.h^F.h)};function Y(F){for(var I=F.g.length+1,O=[],U=0;U<I;U++)O[U]=F.i(U)<<1|F.i(U-1)>>>31;return new l(O,F.h)}function J(F,I){var O=I>>5;I%=32;for(var U=F.g.length-O,H=[],B=0;B<U;B++)H[B]=0<I?F.i(B+O)>>>I|F.i(B+O+1)<<32-I:F.i(B+O);return new l(H,F.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,fC=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=y,Rl=l}).apply(typeof vw<"u"?vw:typeof self<"u"?self:typeof window<"u"?window:{});var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mC,Ud,pC,xp,xb,gC,yC,_C;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,S){return m==Array.prototype||m==Object.prototype||(m[E]=S.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Km=="object"&&Km];for(var E=0;E<m.length;++E){var S=m[E];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function s(m,E){if(E)e:{var S=i;m=m.split(".");for(var V=0;V<m.length-1;V++){var ie=m[V];if(!(ie in S))break e;S=S[ie]}m=m[m.length-1],V=S[m],E=E(V),E!=V&&E!=null&&e(S,m,{configurable:!0,writable:!0,value:E})}}function a(m,E){m instanceof String&&(m+="");var S=0,V=!1,ie={next:function(){if(!V&&S<m.length){var he=S++;return{value:E(he,m[he]),done:!1}}return V=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(m){return m||function(){return a(this,function(E,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function y(m,E,S){return m.call.apply(m.bind,arguments)}function v(m,E,S){if(!m)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,V),m.apply(E,ie)}}return function(){return m.apply(E,arguments)}}function x(m,E,S){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,x.apply(null,arguments)}function T(m,E){var S=Array.prototype.slice.call(arguments,1);return function(){var V=S.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function C(m,E){function S(){}S.prototype=E.prototype,m.aa=E.prototype,m.prototype=new S,m.prototype.constructor=m,m.Qb=function(V,ie,he){for(var Me=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)Me[Rt-2]=arguments[Rt];return E.prototype[ie].apply(V,Me)}}function k(m){const E=m.length;if(0<E){const S=Array(E);for(let V=0;V<E;V++)S[V]=m[V];return S}return[]}function R(m,E){for(let S=1;S<arguments.length;S++){const V=arguments[S];if(h(V)){const ie=m.length||0,he=V.length||0;m.length=ie+he;for(let Me=0;Me<he;Me++)m[ie+Me]=V[Me]}else m.push(V)}}class j{constructor(E,S){this.i=E,this.j=S,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function q(m){return/^[\s\xa0]*$/.test(m)}function G(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function X(m){return X[" "](m),m}X[" "]=function(){};var Y=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function J(m,E,S){for(const V in m)E.call(S,m[V],V,m)}function F(m,E){for(const S in m)E.call(void 0,m[S],S,m)}function I(m){const E={};for(const S in m)E[S]=m[S];return E}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(m,E){let S,V;for(let ie=1;ie<arguments.length;ie++){V=arguments[ie];for(S in V)m[S]=V[S];for(let he=0;he<O.length;he++)S=O[he],Object.prototype.hasOwnProperty.call(V,S)&&(m[S]=V[S])}}function H(m){var E=1;m=m.split(":");const S=[];for(;0<E&&m.length;)S.push(m.shift()),E--;return m.length&&S.push(m.join(":")),S}function B(m){u.setTimeout(()=>{throw m},0)}function z(){var m=Le;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class je{constructor(){this.h=this.g=null}add(E,S){const V=_e.get();V.set(E,S),this.h?this.h.next=V:this.g=V,this.h=V}}var _e=new j(()=>new K,m=>m.reset());class K{constructor(){this.next=this.g=this.h=null}set(E,S){this.h=E,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let se,Ee=!1,Le=new je,P=()=>{const m=u.Promise.resolve(void 0);se=()=>{m.then(fe)}};var fe=()=>{for(var m;m=z();){try{m.h.call(m.g)}catch(S){B(S)}var E=_e;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}Ee=!1};function Ae(){this.s=this.s,this.C=this.C}Ae.prototype.s=!1,Ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};u.addEventListener("test",S,E),u.removeEventListener("test",S,E)}catch{}return m}();function $e(m,E){if(ge.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var S=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(Y){e:{try{X(E.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(E=null)}}else S=="mouseover"?E=m.fromElement:S=="mouseout"&&(E=m.toElement);this.relatedTarget=E,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Pe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&$e.aa.h.call(this)}}C($e,ge);var Pe={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Et(m,E,S,V,ie){this.listener=m,this.proxy=null,this.src=E,this.type=S,this.capture=!!V,this.ha=ie,this.key=++Se,this.da=this.fa=!1}function gt(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ee(m){this.src=m,this.g={},this.h=0}ee.prototype.add=function(m,E,S,V,ie){var he=m.toString();m=this.g[he],m||(m=this.g[he]=[],this.h++);var Me=Re(m,E,V,ie);return-1<Me?(E=m[Me],S||(E.fa=!1)):(E=new Et(E,this.src,he,!!V,ie),E.fa=S,m.push(E)),E};function me(m,E){var S=E.type;if(S in m.g){var V=m.g[S],ie=Array.prototype.indexOf.call(V,E,void 0),he;(he=0<=ie)&&Array.prototype.splice.call(V,ie,1),he&&(gt(E),m.g[S].length==0&&(delete m.g[S],m.h--))}}function Re(m,E,S,V){for(var ie=0;ie<m.length;++ie){var he=m[ie];if(!he.da&&he.listener==E&&he.capture==!!S&&he.ha==V)return ie}return-1}var et="closure_lm_"+(1e6*Math.random()|0),it={};function mn(m,E,S,V,ie){if(Array.isArray(E)){for(var he=0;he<E.length;he++)mn(m,E[he],S,V,ie);return null}return S=pe(S),m&&m[Ge]?m.K(E,S,f(V)?!!V.capture:!1,ie):Ht(m,E,S,!1,V,ie)}function Ht(m,E,S,V,ie,he){if(!E)throw Error("Invalid event type");var Me=f(ie)?!!ie.capture:!!ie,Rt=Vs(m);if(Rt||(m[et]=Rt=new ee(m)),S=Rt.add(E,S,V,Me,he),S.proxy)return S;if(V=zi(),S.proxy=V,V.src=m,V.listener=S,m.addEventListener)ke||(ie=Me),ie===void 0&&(ie=!1),m.addEventListener(E.toString(),V,ie);else if(m.attachEvent)m.attachEvent(Bi(E.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return S}function zi(){function m(S){return E.call(m.src,m.listener,S)}const E=Ra;return m}function Xi(m,E,S,V,ie){if(Array.isArray(E))for(var he=0;he<E.length;he++)Xi(m,E[he],S,V,ie);else V=f(V)?!!V.capture:!!V,S=pe(S),m&&m[Ge]?(m=m.i,E=String(E).toString(),E in m.g&&(he=m.g[E],S=Re(he,S,V,ie),-1<S&&(gt(he[S]),Array.prototype.splice.call(he,S,1),he.length==0&&(delete m.g[E],m.h--)))):m&&(m=Vs(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Re(E,S,V,ie)),(S=-1<m?E[m]:null)&&gs(S))}function gs(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Ge])me(E.i,m);else{var S=m.type,V=m.proxy;E.removeEventListener?E.removeEventListener(S,V,m.capture):E.detachEvent?E.detachEvent(Bi(S),V):E.addListener&&E.removeListener&&E.removeListener(V),(S=Vs(E))?(me(S,m),S.h==0&&(S.src=null,E[et]=null)):gt(m)}}}function Bi(m){return m in it?it[m]:it[m]="on"+m}function Ra(m,E){if(m.da)m=!0;else{E=new $e(E,this);var S=m.listener,V=m.ha||m.src;m.fa&&gs(m),m=S.call(V,E)}return m}function Vs(m){return m=m[et],m instanceof ee?m:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pe(m){return typeof m=="function"?m:(m[Vn]||(m[Vn]=function(E){return m.handleEvent(E)}),m[Vn])}function ze(){Ae.call(this),this.i=new ee(this),this.M=this,this.F=null}C(ze,Ae),ze.prototype[Ge]=!0,ze.prototype.removeEventListener=function(m,E,S,V){Xi(this,m,E,S,V)};function $(m,E){var S,V=m.F;if(V)for(S=[];V;V=V.F)S.push(V);if(m=m.M,V=E.type||E,typeof E=="string")E=new ge(E,m);else if(E instanceof ge)E.target=E.target||m;else{var ie=E;E=new ge(V,m),U(E,ie)}if(ie=!0,S)for(var he=S.length-1;0<=he;he--){var Me=E.g=S[he];ie=ae(Me,V,!0,E)&&ie}if(Me=E.g=m,ie=ae(Me,V,!0,E)&&ie,ie=ae(Me,V,!1,E)&&ie,S)for(he=0;he<S.length;he++)Me=E.g=S[he],ie=ae(Me,V,!1,E)&&ie}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var S=m.g[E],V=0;V<S.length;V++)gt(S[V]);delete m.g[E],m.h--}}this.F=null},ze.prototype.K=function(m,E,S,V){return this.i.add(String(m),E,!1,S,V)},ze.prototype.L=function(m,E,S,V){return this.i.add(String(m),E,!0,S,V)};function ae(m,E,S,V){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var ie=!0,he=0;he<E.length;++he){var Me=E[he];if(Me&&!Me.da&&Me.capture==S){var Rt=Me.listener,Cn=Me.ha||Me.src;Me.fa&&me(m.i,Me),ie=Rt.call(Cn,V)!==!1&&ie}}return ie&&!V.defaultPrevented}function oe(m,E,S){if(typeof m=="function")S&&(m=x(m,S));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:u.setTimeout(m,E||0)}function be(m){m.g=oe(()=>{m.g=null,m.i&&(m.i=!1,be(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Ie extends Ae{constructor(E,S){super(),this.m=E,this.l=S,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:be(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(m){Ae.call(this),this.h=m,this.g={}}C(De,Ae);var Ne=[];function Ve(m){J(m.g,function(E,S){this.g.hasOwnProperty(S)&&gs(E)},m),m.g={}}De.prototype.N=function(){De.aa.N.call(this),Ve(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var We=u.JSON.stringify,bt=u.JSON.parse,mi=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ys(){}ys.prototype.h=null;function Gl(m){return m.h||(m.h=m.i())}function Wl(){}var Fs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qi(){ge.call(this,"d")}C(Qi,ge);function No(){ge.call(this,"c")}C(No,ge);var _s={},Kl=null;function Ur(){return Kl=Kl||new ze}_s.La="serverreachability";function Do(m){ge.call(this,_s.La,m)}C(Do,ge);function zr(m){const E=Ur();$(E,new Do(E))}_s.STAT_EVENT="statevent";function pr(m,E){ge.call(this,_s.STAT_EVENT,m),this.stat=E}C(pr,ge);function $t(m){const E=Ur();$(E,new pr(E,m))}_s.Ma="timingevent";function Sn(m,E){ge.call(this,_s.Ma,m),this.size=E}C(Sn,ge);function xn(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function Yl(m,E,S,V,ie,he){m.info(function(){if(m.g)if(he)for(var Me="",Rt=he.split("&"),Cn=0;Cn<Rt.length;Cn++){var It=Rt[Cn].split("=");if(1<It.length){var Bn=It[0];It=It[1];var Rn=Bn.split("_");Me=2<=Rn.length&&Rn[1]=="type"?Me+(Bn+"="+It+"&"):Me+(Bn+"=redacted&")}}else Me=null;else Me=he;return"XMLHTTP REQ ("+V+") [attempt "+ie+"]: "+E+`
`+S+`
`+Me})}function bh(m,E,S,V,ie,he,Me){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ie+"]: "+E+`
`+S+`
`+he+" "+Me})}function Us(m,E,S,V){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+zs(m,S)+(V?" "+V:"")})}function gr(m,E){m.info(function(){return"TIMEOUT: "+E})}Zi.prototype.info=function(){};function zs(m,E){if(!m.g)return E;if(!E)return null;try{var S=JSON.parse(E);if(S){for(m=0;m<S.length;m++)if(Array.isArray(S[m])){var V=S[m];if(!(2>V.length)){var ie=V[1];if(Array.isArray(ie)&&!(1>ie.length)){var he=ie[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Me=1;Me<ie.length;Me++)ie[Me]=""}}}}return We(S)}catch{return E}}var Br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bs;function Hs(){}C(Hs,ys),Hs.prototype.g=function(){return new XMLHttpRequest},Hs.prototype.i=function(){return{}},Bs=new Hs;function En(m,E,S,V){this.j=m,this.i=E,this.l=S,this.R=V||1,this.U=new De(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var Kn={},Fn={};function rn(m,E,S){m.L=1,m.v=Ks(ln(E)),m.m=S,m.P=!0,Ji(m,null)}function Ji(m,E){m.F=Date.now(),es(m),m.A=ln(m.v);var S=m.A,V=m.R;Array.isArray(V)||(V=[String(V)]),Ma(S.i,"t",V),m.C=0,S=m.j.J,m.h=new wt,m.g=eu(m.j,S?E:null,!m.m),0<m.O&&(m.M=new Ie(x(m.Y,m,m.g),m.O)),E=m.U,S=m.g,V=m.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Ne[0]=ie.toString()),ie=Ne);for(var he=0;he<ie.length;he++){var Me=mn(S,ie[he],V||E.handleEvent,!1,E.h||E);if(!Me)break;E.g[Me.key]=Me}E=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),zr(),Yl(m.i,m.u,m.A,m.l,m.R,m.m)}En.prototype.ca=function(m){m=m.target;const E=this.M;E&&Qn(m)==3?E.j():this.Y(m)},En.prototype.Y=function(m){try{if(m==this.g)e:{const Rn=Qn(this.g);var E=this.g.Ba();const In=this.g.Z();if(!(3>Rn)&&(Rn!=3||this.g&&(this.h.h||this.g.oa()||Qc(this.g)))){this.J||Rn!=4||E==7||(E==8||0>=In?zr(3):zr(2)),qs(this);var S=this.g.Z();this.X=S;t:if(yr(this)){var V=Qc(this.g);m="";var ie=V.length,he=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Un(this),pi(this);var Me="";break t}this.h.i=new u.TextDecoder}for(E=0;E<ie;E++)this.h.h=!0,m+=this.h.i.decode(V[E],{stream:!(he&&E==ie-1)});V.length=0,this.h.g+=m,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=S==200,bh(this.i,this.u,this.A,this.l,this.R,Rn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Rt,Cn=this.g;if((Rt=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Rt)){var It=Rt;break t}}It=null}if(S=It)Us(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_r(this,S);else{this.o=!1,this.s=3,$t(12),Un(this),pi(this);break e}}if(this.P){S=!0;let Hn;for(;!this.J&&this.C<Me.length;)if(Hn=$s(this,Me),Hn==Fn){Rn==4&&(this.s=4,$t(14),S=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Kn){this.s=4,$t(15),Us(this.i,this.l,Me,"[Invalid Chunk]"),S=!1;break}else Us(this.i,this.l,Hn,null),_r(this,Hn);if(yr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rn!=4||Me.length!=0||this.h.h||(this.s=1,$t(16),S=!1),this.o=this.o&&S,!S)Us(this.i,this.l,Me,"[Invalid Chunked Response]"),Un(this),pi(this);else if(0<Me.length&&!this.W){this.W=!0;var Bn=this.j;Bn.g==this&&Bn.ba&&!Bn.M&&(Bn.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),za(Bn),Bn.M=!0,$t(11))}}else Us(this.i,this.l,Me,null),_r(this,Me);Rn==4&&Un(this),this.o&&!this.J&&(Rn==4?sc(this.j,this):(this.o=!1,es(this)))}else Zc(this.g),S==400&&0<Me.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),Un(this),pi(this)}}}catch{}finally{}};function yr(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function $s(m,E){var S=m.C,V=E.indexOf(`
`,S);return V==-1?Fn:(S=Number(E.substring(S,V)),isNaN(S)?Kn:(V+=1,V+S>E.length?Fn:(E=E.slice(V,V+S),m.C=V+S,E)))}En.prototype.cancel=function(){this.J=!0,Un(this)};function es(m){m.S=Date.now()+m.I,Xl(m,m.I)}function Xl(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=xn(x(m.ba,m),E)}function qs(m){m.B&&(u.clearTimeout(m.B),m.B=null)}En.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(gr(this.i,this.A),this.L!=2&&(zr(),$t(17)),Un(this),this.s=2,pi(this)):Xl(this,this.S-m)};function pi(m){m.j.G==0||m.J||sc(m.j,m)}function Un(m){qs(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,Ve(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function _r(m,E){try{var S=m.j;if(S.G!=0&&(S.g==m||Mo(S.h,m))){if(!m.K&&Mo(S.h,m)&&S.G==3){try{var V=S.Da.g.parse(E)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ie=V;if(ie[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<m.F)Ba(S),Va(S);else break e;ic(S),$t(18)}}else S.za=ie[1],0<S.za-S.T&&37500>ie[2]&&S.F&&S.v==0&&!S.C&&(S.C=xn(x(S.Za,S),6e3));if(1>=ka(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Ts(S,11)}else if((m.K||S.g==m)&&Ba(S),!q(E))for(ie=S.Da.g.parse(E),E=0;E<ie.length;E++){let It=ie[E];if(S.T=It[0],It=It[1],S.G==2)if(It[0]=="c"){S.K=It[1],S.ia=It[2];const Bn=It[3];Bn!=null&&(S.la=Bn,S.j.info("VER="+S.la));const Rn=It[4];Rn!=null&&(S.Aa=Rn,S.j.info("SVER="+S.Aa));const In=It[5];In!=null&&typeof In=="number"&&0<In&&(V=1.5*In,S.L=V,S.j.info("backChannelRequestTimeoutMs_="+V)),V=S;const Hn=m.g;if(Hn){const Ss=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ss){var he=V.h;he.g||Ss.indexOf("spdy")==-1&&Ss.indexOf("quic")==-1&&Ss.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Na(he,he.h),he.h=null))}if(V.D){const Bo=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(V.ya=Bo,Ct(V.I,V.D,Bo))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-m.F,S.j.info("Handshake RTT: "+S.R+"ms")),V=S;var Me=m;if(V.qa=rc(V,V.J?V.ia:null,V.W),Me.K){ai(V.h,Me);var Rt=Me,Cn=V.L;Cn&&(Rt.I=Cn),Rt.B&&(qs(Rt),es(Rt)),V.g=Me}else Ua(V);0<S.i.length&&Fa(S)}else It[0]!="stop"&&It[0]!="close"||Ts(S,7);else S.G==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?Ts(S,7):Vo(S):It[0]!="noop"&&S.l&&S.l.ta(It),S.v=0)}}zr(4)}catch{}}var Oo=class{constructor(m,E){this.g=m,this.map=E}};function Gs(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ia(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ka(m){return m.h?1:m.g?m.g.size:0}function Mo(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Na(m,E){m.g?m.g.add(E):m.h=E}function ai(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Gs.prototype.cancel=function(){if(this.i=Po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Po(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const S of m.g.values())E=E.concat(S.D);return E}return k(m.i)}function Yc(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var E=[],S=m.length,V=0;V<S;V++)E.push(m[V]);return E}E=[],S=0;for(V in m)E[S++]=m[V];return E}function Da(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var E=[];m=m.length;for(var S=0;S<m;S++)E.push(S);return E}E=[],S=0;for(const V in m)E[S++]=V;return E}}}function jo(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var S=Da(m),V=Yc(m),ie=V.length,he=0;he<ie;he++)E.call(void 0,V[he],S&&S[he],m)}var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gi(m,E){if(m){m=m.split("&");for(var S=0;S<m.length;S++){var V=m[S].indexOf("="),ie=null;if(0<=V){var he=m[S].substring(0,V);ie=m[S].substring(V+1)}else he=m[S];E(he,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Jt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Jt){this.h=m.h,br(this,m.j),this.o=m.o,this.g=m.g,Ws(this,m.s),this.l=m.l;var E=m.i,S=new li;S.i=E.i,E.g&&(S.g=new Map(E.g),S.h=E.h),zn(this,S),this.m=m.m}else m&&(E=String(m).match(oi))?(this.h=!1,br(this,E[1]||"",!0),this.o=Yn(E[2]||""),this.g=Yn(E[3]||"",!0),Ws(this,E[4]),this.l=Yn(E[5]||"",!0),zn(this,E[6]||"",!0),this.m=Yn(E[7]||"")):(this.h=!1,this.i=new li(null,this.h))}Jt.prototype.toString=function(){var m=[],E=this.j;E&&m.push(vr(E,Ys,!0),":");var S=this.g;return(S||E=="file")&&(m.push("//"),(E=this.o)&&m.push(vr(E,Ys,!0),"@"),m.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&m.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(vr(S,S.charAt(0)=="/"?Xc:Oa,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",vr(S,Lo)),m.join("")};function ln(m){return new Jt(m)}function br(m,E,S){m.j=S?Yn(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Ws(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function zn(m,E,S){E instanceof li?(m.i=E,Zl(m.i,m.h)):(S||(E=vr(E,vs)),m.i=new li(E,m.h))}function Ct(m,E,S){m.i.set(E,S)}function Ks(m){return Ct(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Yn(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function vr(m,E,S){return typeof m=="string"?(m=encodeURI(m).replace(E,Ql),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ql(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ys=/[#\/\?@]/g,Oa=/[#\?:]/g,Xc=/[#\?]/g,vs=/[#\?@]/g,Lo=/#/g;function li(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function yi(m){m.g||(m.g=new Map,m.h=0,m.i&&gi(m.i,function(E,S){m.add(decodeURIComponent(E.replace(/\+/g," ")),S)}))}n=li.prototype,n.add=function(m,E){yi(this),this.i=null,m=Ai(this,m);var S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(E),this.h+=1,this};function Xs(m,E){yi(m),E=Ai(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Hi(m,E){return yi(m),E=Ai(m,E),m.g.has(E)}n.forEach=function(m,E){yi(this),this.g.forEach(function(S,V){S.forEach(function(ie){m.call(E,ie,V,this)},this)},this)},n.na=function(){yi(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),S=[];for(let V=0;V<E.length;V++){const ie=m[V];for(let he=0;he<ie.length;he++)S.push(E[V])}return S},n.V=function(m){yi(this);let E=[];if(typeof m=="string")Hi(this,m)&&(E=E.concat(this.g.get(Ai(this,m))));else{m=Array.from(this.g.values());for(let S=0;S<m.length;S++)E=E.concat(m[S])}return E},n.set=function(m,E){return yi(this),this.i=null,m=Ai(this,m),Hi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function Ma(m,E,S){Xs(m,E),0<S.length&&(m.i=null,m.g.set(Ai(m,E),k(S)),m.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var S=0;S<E.length;S++){var V=E[S];const he=encodeURIComponent(String(V)),Me=this.V(V);for(V=0;V<Me.length;V++){var ie=he;Me[V]!==""&&(ie+="="+encodeURIComponent(String(Me[V]))),m.push(ie)}}return this.i=m.join("&")};function Ai(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Zl(m,E){E&&!m.j&&(yi(m),m.i=null,m.g.forEach(function(S,V){var ie=V.toLowerCase();V!=ie&&(Xs(this,V),Ma(this,ie,S))},m)),m.j=E}function Hr(m,E){const S=new Zi;if(u.Image){const V=new Image;V.onload=T(Xn,S,"TestLoadImage: loaded",!0,E,V),V.onerror=T(Xn,S,"TestLoadImage: error",!1,E,V),V.onabort=T(Xn,S,"TestLoadImage: abort",!1,E,V),V.ontimeout=T(Xn,S,"TestLoadImage: timeout",!1,E,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else E(!1)}function ts(m,E){const S=new Zi,V=new AbortController,ie=setTimeout(()=>{V.abort(),Xn(S,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:V.signal}).then(he=>{clearTimeout(ie),he.ok?Xn(S,"TestPingServer: ok",!0,E):Xn(S,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ie),Xn(S,"TestPingServer: error",!1,E)})}function Xn(m,E,S,V,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),V(S)}catch{}}function Pa(){this.g=new mi}function xs(m,E,S){const V=S||"";try{jo(m,function(ie,he){let Me=ie;f(ie)&&(Me=We(ie)),E.push(V+he+"="+encodeURIComponent(Me))})}catch(ie){throw E.push(V+"type="+encodeURIComponent("_badmap")),ie}}function Qs(m){this.l=m.Ub||null,this.j=m.eb||!1}C(Qs,ys),Qs.prototype.g=function(){return new ns(this.l,this.j)},Qs.prototype.i=function(m){return function(){return m}}({});function ns(m,E){ze.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ns,ze),n=ns.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,$i(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||u).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ja(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function ja(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Zs(this):$i(this),this.readyState==3&&ja(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,Zs(this))},n.Qa=function(m){this.g&&(this.response=m,Zs(this))},n.ga=function(){this.g&&Zs(this)};function Zs(m){m.readyState=4,m.l=null,m.j=null,m.v=null,$i(m)}n.setRequestHeader=function(m,E){this.u.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var S=E.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=E.next();return m.join(`\r
`)};function $i(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Jl(m){let E="";return J(m,function(S,V){E+=V,E+=":",E+=S,E+=`\r
`}),E}function An(m,E,S){e:{for(V in S){var V=!1;break e}V=!0}V||(S=Jl(S),typeof m=="string"?S!=null&&encodeURIComponent(String(S)):Ct(m,E,S))}function Pt(m){ze.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Pt,ze);var $r=/^https?$/i,xr=["POST","PUT"];n=Pt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,E,S,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bs.g(),this.v=this.o?Gl(this.o):Gl(Bs),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(he){ec(this,he);return}if(m=S||"",S=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ie in V)S.set(ie,V[ie]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const he of V.keys())S.set(he,V.get(he));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(S.keys()).find(he=>he.toLowerCase()=="content-type"),ie=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(xr,E,void 0))||V||ie||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Me]of S)this.g.setRequestHeader(he,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gr(this),this.u=!0,this.g.send(m),this.u=!1}catch(he){ec(this,he)}};function ec(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,Js(m),Es(m)}function Js(m){m.A||(m.A=!0,$(m,"complete"),$(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,$(this,"complete"),$(this,"abort"),Es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Es(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},n.bb=function(){qr(this)};function qr(m){if(m.h&&typeof l<"u"&&(!m.v[1]||Qn(m)!=4||m.Z()!=2)){if(m.u&&Qn(m)==4)oe(m.Ea,0,m);else if($(m,"readystatechange"),Qn(m)==4){m.h=!1;try{const Me=m.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var S;if(!(S=E)){var V;if(V=Me===0){var ie=String(m.D).match(oi)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),V=!$r.test(ie?ie.toLowerCase():"")}S=V}if(S)$(m,"complete"),$(m,"success");else{m.m=6;try{var he=2<Qn(m)?m.g.statusText:""}catch{he=""}m.l=he+" ["+m.Z()+"]",Js(m)}}finally{Es(m)}}}}function Es(m,E){if(m.g){Gr(m);const S=m.g,V=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||$(m,"ready");try{S.onreadystatechange=V}catch{}}}function Gr(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Qn(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),bt(E)}};function Qc(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Zc(m){const E={};m=(m.g&&2<=Qn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(q(m[V]))continue;var S=H(m[V]);const ie=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const he=E[ie]||[];E[ie]=he,he.push(S)}F(E,function(V){return V.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(m,E,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||E}function La(m){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,m),this.cb=Wr("retryDelaySeedMs",1e4,m),this.Wa=Wr("forwardChannelMaxRetries",2,m),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Gs(m&&m.concurrentRequestLimit),this.Da=new Pa,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=La.prototype,n.la=8,n.G=1,n.connect=function(m,E,S,V){$t(0),this.W=m,this.H=E||{},S&&V!==void 0&&(this.H.OSID=S,this.H.OAID=V),this.F=this.X,this.I=rc(this,null,this.W),Fa(this)};function Vo(m){if(Fo(m),m.G==3){var E=m.U++,S=ln(m.I);if(Ct(S,"SID",m.K),Ct(S,"RID",E),Ct(S,"TYPE","terminate"),Kr(m,S),E=new En(m,m.j,E),E.L=2,E.v=Ks(ln(S)),S=!1,u.navigator&&u.navigator.sendBeacon)try{S=u.navigator.sendBeacon(E.v.toString(),"")}catch{}!S&&u.Image&&(new Image().src=E.v,S=!0),S||(E.g=eu(E.j,null),E.g.ea(E.v)),E.F=Date.now(),es(E)}Jc(m)}function Va(m){m.g&&(za(m),m.g.cancel(),m.g=null)}function Fo(m){Va(m),m.u&&(u.clearTimeout(m.u),m.u=null),Ba(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Fa(m){if(!Ia(m.h)&&!m.s){m.s=!0;var E=m.Ga;se||P(),Ee||(se(),Ee=!0),Le.add(E,m),m.B=0}}function vh(m,E){return ka(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=xn(x(m.Ga,m,E),ws(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ie=new En(this,this.j,m);let he=this.o;if(this.S&&(he?(he=I(he),U(he,this.S)):he=this.S),this.m!==null||this.O||(ie.H=he,he=null),this.P)e:{for(var E=0,S=0;S<this.i.length;S++){t:{var V=this.i[S];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(E+=V,4096<E){E=S;break e}if(E===4096||S===this.i.length-1){E=S+1;break e}}E=1e3}else E=1e3;E=nc(this,ie,E),S=ln(this.I),Ct(S,"RID",m),Ct(S,"CVER",22),this.D&&Ct(S,"X-HTTP-Session-Id",this.D),Kr(this,S),he&&(this.O?E="headers="+encodeURIComponent(String(Jl(he)))+"&"+E:this.m&&An(S,this.m,he)),Na(this.h,ie),this.Ua&&Ct(S,"TYPE","init"),this.P?(Ct(S,"$req",E),Ct(S,"SID","null"),ie.T=!0,rn(ie,S,null)):rn(ie,S,E),this.G=2}}else this.G==3&&(m?tc(this,m):this.i.length==0||Ia(this.h)||tc(this))};function tc(m,E){var S;E?S=E.l:S=m.U++;const V=ln(m.I);Ct(V,"SID",m.K),Ct(V,"RID",S),Ct(V,"AID",m.T),Kr(m,V),m.m&&m.o&&An(V,m.m,m.o),S=new En(m,m.j,S,m.B+1),m.m===null&&(S.H=m.o),E&&(m.i=E.D.concat(m.i)),E=nc(m,S,1e3),S.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Na(m.h,S),rn(S,V,E)}function Kr(m,E){m.H&&J(m.H,function(S,V){Ct(E,V,S)}),m.l&&jo({},function(S,V){Ct(E,V,S)})}function nc(m,E,S){S=Math.min(m.i.length,S);var V=m.l?x(m.l.Na,m.l,m):null;e:{var ie=m.i;let he=-1;for(;;){const Me=["count="+S];he==-1?0<S?(he=ie[0].g,Me.push("ofs="+he)):he=0:Me.push("ofs="+he);let Rt=!0;for(let Cn=0;Cn<S;Cn++){let It=ie[Cn].g;const Bn=ie[Cn].map;if(It-=he,0>It)he=Math.max(0,ie[Cn].g-100),Rt=!1;else try{xs(Bn,Me,"req"+It+"_")}catch{V&&V(Bn)}}if(Rt){V=Me.join("&");break e}}}return m=m.i.splice(0,S),E.D=m,V}function Ua(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;se||P(),Ee||(se(),Ee=!0),Le.add(E,m),m.v=0}}function ic(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=xn(x(m.Fa,m),ws(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Uo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=xn(x(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Va(this),Uo(this))};function za(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Uo(m){m.g=new En(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=ln(m.qa);Ct(E,"RID","rpc"),Ct(E,"SID",m.K),Ct(E,"AID",m.T),Ct(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ct(E,"TO",m.ja),Ct(E,"TYPE","xmlhttp"),Kr(m,E),m.m&&m.o&&An(E,m.m,m.o),m.L&&(m.g.I=m.L);var S=m.g;m=m.ia,S.L=1,S.v=Ks(ln(E)),S.m=null,S.P=!0,Ji(S,m)}n.Za=function(){this.C!=null&&(this.C=null,Va(this),ic(this),$t(19))};function Ba(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function sc(m,E){var S=null;if(m.g==E){Ba(m),za(m),m.g=null;var V=2}else if(Mo(m.h,E))S=E.D,ai(m.h,E),V=1;else return;if(m.G!=0){if(E.o)if(V==1){S=E.m?E.m.length:0,E=Date.now()-E.F;var ie=m.B;V=Ur(),$(V,new Sn(V,S)),Fa(m)}else Ua(m);else if(ie=E.s,ie==3||ie==0&&0<E.X||!(V==1&&vh(m,E)||V==2&&ic(m)))switch(S&&0<S.length&&(E=m.h,E.i=E.i.concat(S)),ie){case 1:Ts(m,5);break;case 4:Ts(m,10);break;case 3:Ts(m,6);break;default:Ts(m,2)}}}function ws(m,E){let S=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(S*=2),S*E}function Ts(m,E){if(m.j.info("Error code "+E),E==2){var S=x(m.fb,m),V=m.Xa;const ie=!V;V=new Jt(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||br(V,"https"),Ks(V),ie?Hr(V.toString(),S):ts(V.toString(),S)}else $t(2);m.G=0,m.l&&m.l.sa(E),Jc(m),Fo(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Jc(m){if(m.G=0,m.ka=[],m.l){const E=Po(m.h);(E.length!=0||m.i.length!=0)&&(R(m.ka,E),R(m.ka,m.i),m.h.i.length=0,k(m.i),m.i.length=0),m.l.ra()}}function rc(m,E,S){var V=S instanceof Jt?ln(S):new Jt(S);if(V.g!="")E&&(V.g=E+"."+V.g),Ws(V,V.s);else{var ie=u.location;V=ie.protocol,E=E?E+"."+ie.hostname:ie.hostname,ie=+ie.port;var he=new Jt(null);V&&br(he,V),E&&(he.g=E),ie&&Ws(he,ie),S&&(he.l=S),V=he}return S=m.D,E=m.ya,S&&E&&Ct(V,S,E),Ct(V,"VER",m.la),Kr(m,V),V}function eu(m,E,S){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new Pt(new Qs({eb:S})):new Pt(m.pa),E.Ha(m.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}n=tu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zo(){}zo.prototype.g=function(m,E){return new _i(m,E)};function _i(m,E){ze.call(this),this.g=new La(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!q(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!q(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new er(this)}C(_i,ze),_i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){Vo(this.g)},_i.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.u&&(S={},S.__data__=We(m),m=S);E.i.push(new Oo(E.Ya++,m)),E.G==3&&Fa(E)},_i.prototype.N=function(){this.g.l=null,delete this.j,Vo(this.g),delete this.g,_i.aa.N.call(this)};function ac(m){Qi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const S in E){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}C(ac,Qi);function oc(){No.call(this),this.status=1}C(oc,No);function er(m){this.g=m}C(er,tu),er.prototype.ua=function(){$(this.g,"a")},er.prototype.ta=function(m){$(this.g,new ac(m))},er.prototype.sa=function(m){$(this.g,new oc)},er.prototype.ra=function(){$(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,_C=function(){return new zo},yC=function(){return Ur()},gC=_s,xb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,xp=Br,bs.COMPLETE="complete",pC=bs,Wl.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Ud=Wl,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,mC=Pt}).apply(typeof Km<"u"?Km:typeof self<"u"?self:typeof window<"u"?window:{});const xw="@firebase/firestore",Ew="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new xg("@firebase/firestore");function Lu(){return Oc.logLevel}function qe(n,...e){if(Oc.logLevel<=kt.DEBUG){const t=e.map(mv);Oc.debug(`Firestore (${uh}): ${n}`,...t)}}function Ao(n,...e){if(Oc.logLevel<=kt.ERROR){const t=e.map(mv);Oc.error(`Firestore (${uh}): ${n}`,...t)}}function Qu(n,...e){if(Oc.logLevel<=kt.WARN){const t=e.map(mv);Oc.warn(`Firestore (${uh}): ${n}`,...t)}}function mv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,bC(n,i,t)}function bC(n,e,t){let i=`FIRESTORE (${uh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ao(i),new Error(i)}function Gt(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||bC(e,s,i)}function pt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class e2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pi.UNAUTHENTICATED))}shutdown(){}}class t2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class n2{constructor(e){this.t=e,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Gt(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let a=new Il;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Il,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Il)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Gt(typeof i.accessToken=="string",31837,{l:i}),new vC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gt(e===null||typeof e=="string",2055,{h:e}),new Pi(e)}}class i2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new i2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ww{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Gt(this.o===void 0,3512);const i=a=>{a.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,qe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ww(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Gt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ww(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=a2(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function Nt(n,e){return n<e?-1:n>e?1:0}function Eb(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),a=e.charAt(i);if(s!==a)return D_(s)===D_(a)?Nt(s,a):D_(s)?1:-1}return Nt(n.length,e.length)}const o2=55296,l2=57343;function D_(n){const e=n.charCodeAt(0);return e>=o2&&e<=l2}function Zu(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="__name__";class ha{constructor(e,t,i){t===void 0?t=0:t>e.length&&ct(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ct(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ha.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ha?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=ha.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Nt(e.length,t.length)}static compareSegments(e,t){const i=ha.isNumericId(e),s=ha.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ha.extractNumericId(e).compare(ha.extractNumericId(t)):Eb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rl.fromString(e.substring(4,e.length-2))}}class dn extends ha{construct(e,t,i){return new dn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ye(Ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const c2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ti extends ha{construct(e,t,i){return new Ti(e,t,i)}static isValidIdentifier(e){return c2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ti.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tw}static keyField(){return new Ti([Tw])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ye(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ye(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ye(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(a(),s++)}if(a(),l)throw new Ye(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ti(t)}static emptyPath(){return new Ti([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(dn.fromString(e))}static fromName(e){return new Je(dn.fromString(e).popFirst(5))}static empty(){return new Je(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new dn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n,e,t){if(!t)throw new Ye(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function u2(n,e,t,i){if(e===!0&&i===!0)throw new Ye(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sw(n){if(!Je.isDocumentKey(n))throw new Ye(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Aw(n){if(Je.isDocumentKey(n))throw new Ye(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function EC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ct(12329,{type:typeof n})}function Mc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ye(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gv(n);throw new Ye(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Rf(n,e){if(!EC(n))throw new Ye(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Ye(Ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=-62135596800,Rw=1e6;class fn{static now(){return fn.fromMillis(Date.now())}static fromDate(e){return fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Rw);return new fn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ye(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ye(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Cw)throw new Ye(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rw}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rf(e,fn._jsonSchema))return new fn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fn._jsonSchemaVersion="firestore/timestamp/1.0",fn._jsonSchema={type:Wn("string",fn._jsonSchemaVersion),seconds:Wn("number"),nanoseconds:Wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new fn(0,0))}static max(){return new ft(new fn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=-1;function h2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ft.fromTimestamp(i===1e9?new fn(t+1,0):new fn(t,i));return new Ml(s,Je.empty(),e)}function d2(n){return new Ml(n.readTime,n.key,of)}class Ml{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ml(ft.min(),Je.empty(),of)}static max(){return new Ml(ft.max(),Je.empty(),of)}}function f2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Je.comparator(n.documentKey,e.documentKey),t!==0?t:Nt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(n){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==m2)throw n;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,i)=>{t(e)})}static reject(e){return new Te((t,i)=>{i(e)})}static waitFor(e){return new Te((t,i)=>{let s=0,a=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++a,l&&a===s&&t()},h=>i(h))}),l=!0,a===s&&t()})}static or(e){let t=Te.resolve(!1);for(const i of e)t=t.next(s=>s?Te.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,a)=>{i.push(t.call(this,s,a))}),this.waitFor(i)}static mapArray(e,t){return new Te((i,s)=>{const a=e.length,l=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;t(e[f]).next(y=>{l[f]=y,++u,u===a&&i(l)},y=>s(y))}})}static doWhile(e,t){return new Te((i,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):i()};a()})}}function g2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-1;function Tg(n){return n==null}function Lp(n){return n===0&&1/n==-1/0}function y2(n){return typeof n=="number"&&Number.isInteger(n)&&!Lp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="";function _2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Iw(e)),e=b2(n.get(t),e);return Iw(e)}function b2(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case wC:t+="";break;default:t+=a}}return t}function Iw(n){return n+wC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t){this.comparator=e,this.root=t||wi.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ym(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ym(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ym(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ym(this.root,e,this.comparator,!0)}}class Ym{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wi{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??wi.RED,this.left=s??wi.EMPTY,this.right=a??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new wi(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return wi.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ct(27949);return e+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1;wi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct(57766)}get value(){throw ct(16141)}get color(){throw ct(16727)}get left(){throw ct(29726)}get right(){throw ct(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new wi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nw(this.data.getIterator())}getIteratorFrom(e){return new Nw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ri)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ri(this.comparator);return t.data=e,t}}class Nw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.fields=e,e.sort(Ti.comparator)}static empty(){return new js([])}unionWith(e){let t=new ri(Ti.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new js(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zu(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new SC("Invalid base64 string: "+a):a}}(e);return new Si(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const v2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pl(n){if(Gt(!!n,39018),typeof n=="string"){let e=0;const t=v2.exec(n);if(Gt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mn(n.seconds),nanos:Mn(n.nanos)}}function Mn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jl(n){return typeof n=="string"?Si.fromBase64String(n):Si.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="server_timestamp",CC="__type__",RC="__previous_value__",IC="__local_write_time__";function _v(n){return(n?.mapValue?.fields||{})[CC]?.stringValue===AC}function Sg(n){const e=n.mapValue.fields[RC];return _v(e)?Sg(e):e}function lf(n){const e=Pl(n.mapValue.fields[IC].timestampValue);return new fn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,i,s,a,l,u,h,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=y}}const Vp="(default)";class cf{constructor(e,t){this.projectId=e,this.database=t||Vp}static empty(){return new cf("","")}get isDefaultDatabase(){return this.database===Vp}isEqual(e){return e instanceof cf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="__type__",E2="__max__",Xm={mapValue:{}},NC="__vector__",Fp="value";function Ll(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_v(n)?4:T2(n)?9007199254740991:w2(n)?10:11:ct(28295,{value:n})}function xa(n,e){if(n===e)return!0;const t=Ll(n);if(t!==Ll(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lf(n).isEqual(lf(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Pl(s.timestampValue),u=Pl(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return jl(s.bytesValue).isEqual(jl(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Mn(s.geoPointValue.latitude)===Mn(a.geoPointValue.latitude)&&Mn(s.geoPointValue.longitude)===Mn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Mn(s.integerValue)===Mn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Mn(s.doubleValue),u=Mn(a.doubleValue);return l===u?Lp(l)===Lp(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return Zu(n.arrayValue.values||[],e.arrayValue.values||[],xa);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(kw(l)!==kw(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!xa(l[h],u[h])))return!1;return!0}(n,e);default:return ct(52216,{left:n})}}function uf(n,e){return(n.values||[]).find(t=>xa(t,e))!==void 0}function Ju(n,e){if(n===e)return 0;const t=Ll(n),i=Ll(e);if(t!==i)return Nt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const u=Mn(a.integerValue||a.doubleValue),h=Mn(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Dw(n.timestampValue,e.timestampValue);case 4:return Dw(lf(n),lf(e));case 5:return Eb(n.stringValue,e.stringValue);case 6:return function(a,l){const u=jl(a),h=jl(l);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const u=a.split("/"),h=l.split("/");for(let f=0;f<u.length&&f<h.length;f++){const y=Nt(u[f],h[f]);if(y!==0)return y}return Nt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const u=Nt(Mn(a.latitude),Mn(l.latitude));return u!==0?u:Nt(Mn(a.longitude),Mn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Ow(n.arrayValue,e.arrayValue);case 10:return function(a,l){const u=a.fields||{},h=l.fields||{},f=u[Fp]?.arrayValue,y=h[Fp]?.arrayValue,v=Nt(f?.values?.length||0,y?.values?.length||0);return v!==0?v:Ow(f,y)}(n.mapValue,e.mapValue);case 11:return function(a,l){if(a===Xm.mapValue&&l===Xm.mapValue)return 0;if(a===Xm.mapValue)return 1;if(l===Xm.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=l.fields||{},y=Object.keys(f);h.sort(),y.sort();for(let v=0;v<h.length&&v<y.length;++v){const x=Eb(h[v],y[v]);if(x!==0)return x;const T=Ju(u[h[v]],f[y[v]]);if(T!==0)return T}return Nt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ct(23264,{he:t})}}function Dw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Nt(n,e);const t=Pl(n),i=Pl(e),s=Nt(t.seconds,i.seconds);return s!==0?s:Nt(t.nanos,i.nanos)}function Ow(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=Ju(t[s],i[s]);if(a)return a}return Nt(t.length,i.length)}function eh(n){return wb(n)}function wb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Pl(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return jl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Je.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=wb(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${wb(t.fields[l])}`;return s+"}"}(n.mapValue):ct(61005,{value:n})}function Ep(n){switch(Ll(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sg(n);return e?16+Ep(e):16;case 5:return 2*n.stringValue.length;case 6:return jl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Ep(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Hl(i.fields,(a,l)=>{s+=a.length+Ep(l)}),s}(n.mapValue);default:throw ct(13486,{value:n})}}function Tb(n){return!!n&&"integerValue"in n}function bv(n){return!!n&&"arrayValue"in n}function Mw(n){return!!n&&"nullValue"in n}function Pw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wp(n){return!!n&&"mapValue"in n}function w2(n){return(n?.mapValue?.fields||{})[kC]?.stringValue===NC}function Kd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Hl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Kd(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kd(n.arrayValue.values[t]);return e}return{...n}}function T2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===E2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.value=e}static empty(){return new ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!wp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kd(t)}setAll(e){let t=Ti.emptyPath(),i={},s=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,i,s),i={},s=[],t=u.popLast()}l?i[u.lastSegment()]=Kd(l):s.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());wp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];wp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Hl(t,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new ds(Kd(this.value))}}function DC(n){const e=[];return Hl(n.fields,(t,i)=>{const s=new Ti([t]);if(wp(i)){const a=DC(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new js(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t,i,s,a,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new ji(e,0,ft.min(),ft.min(),ft.min(),ds.empty(),0)}static newFoundDocument(e,t,i,s){return new ji(e,1,t,ft.min(),i,s,0)}static newNoDocument(e,t){return new ji(e,2,t,ft.min(),ft.min(),ds.empty(),0)}static newUnknownDocument(e,t){return new ji(e,3,t,ft.min(),ft.min(),ds.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.position=e,this.inclusive=t}}function jw(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?i=Je.comparator(Je.fromName(l.referenceValue),t.key):i=Ju(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Lw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xa(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t="asc"){this.field=e,this.dir=t}}function S2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{}class ii extends OC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new C2(e,t,i):t==="array-contains"?new k2(e,i):t==="in"?new N2(e,i):t==="not-in"?new D2(e,i):t==="array-contains-any"?new O2(e,i):new ii(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new R2(e,i):new I2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ju(t,this.value)):t!==null&&Ll(this.value)===Ll(t)&&this.matchesComparison(Ju(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ea extends OC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ea(e,t)}matches(e){return MC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MC(n){return n.op==="and"}function PC(n){return A2(n)&&MC(n)}function A2(n){for(const e of n.filters)if(e instanceof Ea)return!1;return!0}function Sb(n){if(n instanceof ii)return n.field.canonicalString()+n.op.toString()+eh(n.value);if(PC(n))return n.filters.map(e=>Sb(e)).join(",");{const e=n.filters.map(t=>Sb(t)).join(",");return`${n.op}(${e})`}}function jC(n,e){return n instanceof ii?function(i,s){return s instanceof ii&&i.op===s.op&&i.field.isEqual(s.field)&&xa(i.value,s.value)}(n,e):n instanceof Ea?function(i,s){return s instanceof Ea&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,l,u)=>a&&jC(l,s.filters[u]),!0):!1}(n,e):void ct(19439)}function LC(n){return n instanceof ii?function(t){return`${t.field.canonicalString()} ${t.op} ${eh(t.value)}`}(n):n instanceof Ea?function(t){return t.op.toString()+" {"+t.getFilters().map(LC).join(" ,")+"}"}(n):"Filter"}class C2 extends ii{constructor(e,t,i){super(e,t,i),this.key=Je.fromName(i.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class R2 extends ii{constructor(e,t){super(e,"in",t),this.keys=VC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class I2 extends ii{constructor(e,t){super(e,"not-in",t),this.keys=VC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VC(n,e){return(e.arrayValue?.values||[]).map(t=>Je.fromName(t.referenceValue))}class k2 extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bv(t)&&uf(t.arrayValue,this.value)}}class N2 extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uf(this.value.arrayValue,t)}}class D2 extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uf(this.value.arrayValue,t)}}class O2 extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>uf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t=null,i=[],s=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function Vw(n,e=null,t=[],i=[],s=null,a=null,l=null){return new M2(n,e,t,i,s,a,l)}function vv(n){const e=pt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Sb(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Tg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>eh(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>eh(i)).join(",")),e.Te=t}return e.Te}function xv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Lw(n.startAt,e.startAt)&&Lw(n.endAt,e.endAt)}function Ab(n){return Je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t=null,i=[],s=[],a=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function P2(n,e,t,i,s,a,l,u){return new Ag(n,e,t,i,s,a,l,u)}function FC(n){return new Ag(n)}function Fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function j2(n){return n.collectionGroup!==null}function Yd(n){const e=pt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new ri(Ti.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new zp(a,i))}),t.has(Ti.keyField().canonicalString())||e.Ie.push(new zp(Ti.keyField(),i))}return e.Ie}function ma(n){const e=pt(n);return e.Ee||(e.Ee=L2(e,Yd(n))),e.Ee}function L2(n,e){if(n.limitType==="F")return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new zp(s.field,a)});const t=n.endAt?new Up(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Up(n.startAt.position,n.startAt.inclusive):null;return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Cb(n,e,t){return new Ag(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cg(n,e){return xv(ma(n),ma(e))&&n.limitType===e.limitType}function UC(n){return`${vv(ma(n))}|lt:${n.limitType}`}function Vu(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>LC(s)).join(", ")}]`),Tg(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>eh(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>eh(s)).join(",")),`Target(${i})`}(ma(n))}; limitType=${n.limitType})`}function Rg(n,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Je.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,s){for(const a of Yd(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(l,u,h){const f=jw(l,u,h);return l.inclusive?f<=0:f<0}(i.startAt,Yd(i),s)||i.endAt&&!function(l,u,h){const f=jw(l,u,h);return l.inclusive?f>=0:f>0}(i.endAt,Yd(i),s))}(n,e)}function V2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zC(n){return(e,t)=>{let i=!1;for(const s of Yd(n)){const a=F2(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function F2(n,e,t){const i=n.field.isKeyField()?Je.comparator(e.key,t.key):function(a,l,u){const h=l.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Ju(h,f):ct(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ct(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hl(this.inner,(t,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return TC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new vn(Je.comparator);function Co(){return U2}const BC=new vn(Je.comparator);function zd(...n){let e=BC;for(const t of n)e=e.insert(t.key,t);return e}function HC(n){let e=BC;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ic(){return Xd()}function $C(){return Xd()}function Xd(){return new qc(n=>n.toString(),(n,e)=>n.isEqual(e))}const z2=new vn(Je.comparator),B2=new ri(Je.comparator);function Dt(...n){let e=B2;for(const t of n)e=e.add(t);return e}const H2=new ri(Nt);function $2(){return H2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lp(e)?"-0":e}}function qC(n){return{integerValue:""+n}}function q2(n,e){return y2(e)?qC(e):Ev(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this._=void 0}}function G2(n,e,t){return n instanceof Bp?function(s,a){const l={fields:{[CC]:{stringValue:AC},[IC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&_v(a)&&(a=Sg(a)),a&&(l.fields[RC]=a),{mapValue:l}}(t,e):n instanceof hf?WC(n,e):n instanceof df?KC(n,e):function(s,a){const l=GC(s,a),u=Uw(l)+Uw(s.Ae);return Tb(l)&&Tb(s.Ae)?qC(u):Ev(s.serializer,u)}(n,e)}function W2(n,e,t){return n instanceof hf?WC(n,e):n instanceof df?KC(n,e):t}function GC(n,e){return n instanceof Hp?function(i){return Tb(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Bp extends Ig{}class hf extends Ig{constructor(e){super(),this.elements=e}}function WC(n,e){const t=YC(e);for(const i of n.elements)t.some(s=>xa(s,i))||t.push(i);return{arrayValue:{values:t}}}class df extends Ig{constructor(e){super(),this.elements=e}}function KC(n,e){let t=YC(e);for(const i of n.elements)t=t.filter(s=>!xa(s,i));return{arrayValue:{values:t}}}class Hp extends Ig{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Uw(n){return Mn(n.integerValue||n.doubleValue)}function YC(n){return bv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function K2(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof hf&&s instanceof hf||i instanceof df&&s instanceof df?Zu(i.elements,s.elements,xa):i instanceof Hp&&s instanceof Hp?xa(i.Ae,s.Ae):i instanceof Bp&&s instanceof Bp}(n.transform,e.transform)}class Y2{constructor(e,t){this.version=e,this.transformResults=t}}class Pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class kg{}function XC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wv(n.key,Pr.none()):new If(n.key,n.data,Pr.none());{const t=n.data,i=ds.empty();let s=new ri(Ti.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new $l(n.key,i,new js(s.toArray()),Pr.none())}}function X2(n,e,t){n instanceof If?function(s,a,l){const u=s.value.clone(),h=Bw(s.fieldTransforms,a,l.transformResults);u.setAll(h),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof $l?function(s,a,l){if(!Tp(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=Bw(s.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(QC(s)),h.setAll(u),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Qd(n,e,t,i){return n instanceof If?function(a,l,u,h){if(!Tp(a.precondition,l))return u;const f=a.value.clone(),y=Hw(a.fieldTransforms,h,l);return f.setAll(y),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof $l?function(a,l,u,h){if(!Tp(a.precondition,l))return u;const f=Hw(a.fieldTransforms,h,l),y=l.data;return y.setAll(QC(a)),y.setAll(f),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(a,l,u){return Tp(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function Q2(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=GC(i.transform,s||null);a!=null&&(t===null&&(t=ds.empty()),t.set(i.field,a))}return t||null}function zw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Zu(i,s,(a,l)=>K2(a,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class If extends kg{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $l extends kg{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function QC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Bw(n,e,t){const i=new Map;Gt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,u=e.data.field(a.field);i.set(a.field,W2(l,u,t[s]))}return i}function Hw(n,e,t){const i=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);i.set(s.field,G2(a,l,e))}return i}class wv extends kg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z2 extends kg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&X2(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Qd(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Qd(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$C();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=t.has(s.key)?null:u;const h=XC(l,u);h!==null&&i.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(ft.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Dt())}isEqual(e){return this.batchId===e.batchId&&Zu(this.mutations,e.mutations,(t,i)=>zw(t,i))&&Zu(this.baseMutations,e.baseMutations,(t,i)=>zw(t,i))}}class Tv{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Gt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return z2}();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Tv(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,Vt;function nP(n){switch(n){case Ce.OK:return ct(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return ct(15467,{code:n})}}function ZC(n){if(n===void 0)return Ao("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case qn.OK:return Ce.OK;case qn.CANCELLED:return Ce.CANCELLED;case qn.UNKNOWN:return Ce.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Ce.INTERNAL;case qn.UNAVAILABLE:return Ce.UNAVAILABLE;case qn.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case qn.NOT_FOUND:return Ce.NOT_FOUND;case qn.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case qn.ABORTED:return Ce.ABORTED;case qn.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case qn.DATA_LOSS:return Ce.DATA_LOSS;default:return ct(39323,{code:n})}}(Vt=qn||(qn={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new Rl([4294967295,4294967295],0);function $w(n){const e=iP().encode(n),t=new fC;return t.update(e),new Uint8Array(t.digest())}function qw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Rl([t,i],0),new Rl([s,a],0)]}class Sv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Bd(`Invalid padding: ${t}`);if(i<0)throw new Bd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bd(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Bd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Rl.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Rl.fromNumber(i)));return s.compare(sP)===1&&(s=new Rl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$w(e),[i,s]=qw(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Sv(a,s,t);return i.forEach(u=>l.insert(u)),l}insert(e){if(this.ge===0)return;const t=$w(e),[i,s]=qw(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Bd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,kf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ng(ft.min(),s,new vn(Nt),Co(),Dt())}}class kf{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new kf(i,t,Dt(),Dt(),Dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class JC{constructor(e,t){this.targetId=e,this.Ce=t}}class e1{constructor(e,t,i=Si.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class Gw{constructor(){this.ve=0,this.Fe=Ww(),this.Me=Si.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Dt(),t=Dt(),i=Dt();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ct(38017,{changeType:a})}}),new kf(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Ww()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Co(),this.Je=Qm(),this.He=Qm(),this.Ye=new vn(Nt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ct(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((i,s)=>{this.rt(s)&&t(s)})}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Ab(a))if(i===0){const l=new Je(a.path);this.et(t,l,ji.newNoDocument(l,ft.min()))}else Gt(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let l,u;try{l=jl(i).toUint8Array()}catch(h){if(h instanceof SC)return Qu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Sv(l,s,a)}catch(h){return Qu(h instanceof Bd?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach(a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(t,a,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((a,l)=>{const u=this.ot(l);if(u){if(a.current&&Ab(u.target)){const h=new Je(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,ji.newNoDocument(h,e))}a.Be&&(t.set(l,a.ke()),a.qe())}});let i=Dt();this.He.forEach((a,l)=>{let u=!0;l.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(a))}),this.je.forEach((a,l)=>l.setReadTime(e));const s=new Ng(e,t,this.Ye,this.je,i);return this.je=Co(),this.Je=Qm(),this.He=Qm(),this.Ye=new vn(Nt),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Gw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ri(Nt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ri(Nt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gw),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qm(){return new vn(Je.comparator)}function Ww(){return new vn(Je.comparator)}const aP={asc:"ASCENDING",desc:"DESCENDING"},oP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lP={and:"AND",or:"OR"};class cP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rb(n,e){return n.useProto3Json||Tg(e)?e:{value:e}}function $p(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uP(n,e){return $p(n,e.toTimestamp())}function pa(n){return Gt(!!n,49232),ft.fromTimestamp(function(t){const i=Pl(t);return new fn(i.seconds,i.nanos)}(n))}function Av(n,e){return Ib(n,e).canonicalString()}function Ib(n,e){const t=function(s){return new dn(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function n1(n){const e=dn.fromString(n);return Gt(o1(e),10190,{key:e.toString()}),e}function kb(n,e){return Av(n.databaseId,e.path)}function O_(n,e){const t=n1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ye(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ye(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(s1(t))}function i1(n,e){return Av(n.databaseId,e)}function hP(n){const e=n1(n);return e.length===4?dn.emptyPath():s1(e)}function Nb(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function s1(n){return Gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Kw(n,e,t){return{name:kb(n,e),fields:t.value.mapValue.fields}}function dP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ct(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,y){return f.useProto3Json?(Gt(y===void 0||typeof y=="string",58123),Si.fromBase64String(y||"")):(Gt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Si.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(f){const y=f.code===void 0?Ce.UNKNOWN:ZC(f.code);return new Ye(y,f.message||"")}(l);t=new e1(i,s,a,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=O_(n,i.document.name),a=pa(i.document.updateTime),l=i.document.createTime?pa(i.document.createTime):ft.min(),u=new ds({mapValue:{fields:i.document.fields}}),h=ji.newFoundDocument(s,a,l,u),f=i.targetIds||[],y=i.removedTargetIds||[];t=new Sp(f,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=O_(n,i.document),a=i.readTime?pa(i.readTime):ft.min(),l=ji.newNoDocument(s,a),u=i.removedTargetIds||[];t=new Sp([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=O_(n,i.document),a=i.removedTargetIds||[];t=new Sp([],a,s,null)}else{if(!("filter"in e))return ct(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new tP(s,a),u=i.targetId;t=new JC(u,l)}}return t}function fP(n,e){let t;if(e instanceof If)t={update:Kw(n,e.key,e.value)};else if(e instanceof wv)t={delete:kb(n,e.key)};else if(e instanceof $l)t={update:Kw(n,e.key,e.data),updateMask:EP(e.fieldMask)};else{if(!(e instanceof Z2))return ct(16599,{Vt:e.type});t={verify:kb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,l){const u=l.transform;if(u instanceof Bp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof df)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hp)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw ct(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:uP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ct(27497)}(n,e.precondition)),t}function mP(n,e){return n&&n.length>0?(Gt(e!==void 0,14353),n.map(t=>function(s,a){let l=s.updateTime?pa(s.updateTime):pa(a);return l.isEqual(ft.min())&&(l=pa(a)),new Y2(l,s.transformResults||[])}(t,e))):[]}function pP(n,e){return{documents:[i1(n,e.path)]}}function gP(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=i1(n,s);const a=function(f){if(f.length!==0)return a1(Ea.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(f){if(f.length!==0)return f.map(y=>function(x){return{field:Fu(x.field),direction:bP(x.dir)}}(y))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Rb(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:t,parent:s}}function yP(n){let e=hP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Gt(i===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=function(v){const x=r1(v);return x instanceof Ea&&PC(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(x=>function(C){return new zp(Uu(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(x))}(t.orderBy));let u=null;t.limit&&(u=function(v){let x;return x=typeof v=="object"?v.value:v,Tg(x)?null:x}(t.limit));let h=null;t.startAt&&(h=function(v){const x=!!v.before,T=v.values||[];return new Up(T,x)}(t.startAt));let f=null;return t.endAt&&(f=function(v){const x=!v.before,T=v.values||[];return new Up(T,x)}(t.endAt)),P2(e,s,l,a,u,"F",h,f)}function _P(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Uu(t.unaryFilter.field);return ii.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Uu(t.unaryFilter.field);return ii.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Uu(t.unaryFilter.field);return ii.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Uu(t.unaryFilter.field);return ii.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ct(61313);default:return ct(60726)}}(n):n.fieldFilter!==void 0?function(t){return ii.create(Uu(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ct(58110);default:return ct(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ea.create(t.compositeFilter.filters.map(i=>r1(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ct(1026)}}(t.compositeFilter.op))}(n):ct(30097,{filter:n})}function bP(n){return aP[n]}function vP(n){return oP[n]}function xP(n){return lP[n]}function Fu(n){return{fieldPath:n.canonicalString()}}function Uu(n){return Ti.fromServerFormat(n.fieldPath)}function a1(n){return n instanceof ii?function(t){if(t.op==="=="){if(Pw(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NAN"}};if(Mw(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Pw(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NAN"}};if(Mw(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(t.field),op:vP(t.op),value:t.value}}}(n):n instanceof Ea?function(t){const i=t.getFilters().map(s=>a1(s));return i.length===1?i[0]:{compositeFilter:{op:xP(t.op),filters:i}}}(n):ct(54877,{filter:n})}function EP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function o1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t,i,s,a=ft.min(),l=ft.min(),u=Si.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new wl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.yt=e}}function TP(n){const e=yP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.Cn=new AP}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Ml.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Ml.min())}updateCollectionGroup(e,t,i){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class AP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new ri(dn.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ri(dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},l1=41943040;class hs{static withCacheSize(e){return new hs(e,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(l1,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new th(0)}static cr(){return new th(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="LruGarbageCollector",CP=1048576;function Qw([n,e],[t,i]){const s=Nt(n,t);return s===0?Nt(e,i):s}class RP{constructor(e){this.Ir=e,this.buffer=new ri(Qw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Qw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){qe(Xw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dh(t)?qe(Xw,"Ignoring IndexedDB error during garbage collection: ",t):await hh(t)}await this.Vr(3e5)})}}class kP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(wg.ce);const i=new RP(t);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Yw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,a,l,u,h,f;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,u=Date.now(),this.removeTargets(e,i,t))).next(v=>(a=v,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),Lu()<=kt.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-y}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function NP(n,e){return new kP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.changes=new qc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&Qd(i.mutation,s,js.empty(),fn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Dt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Dt()){const s=Ic();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(a=>{let l=zd();return a.forEach((u,h)=>{l=l.insert(u,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=Ic();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Dt()))}populateOverlays(e,t,i){const s=[];return i.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,i,s){let a=Co();const l=Xd(),u=function(){return Xd()}();return t.forEach((h,f)=>{const y=i.get(f.key);s.has(f.key)&&(y===void 0||y.mutation instanceof $l)?a=a.insert(f.key,f):y!==void 0?(l.set(f.key,y.mutation.getFieldMask()),Qd(y.mutation,f,y.mutation.getFieldMask(),fn.now())):l.set(f.key,js.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,y)=>l.set(f,y)),t.forEach((f,y)=>u.set(f,new OP(y,l.get(f)??null))),u))}recalculateAndSaveOverlays(e,t){const i=Xd();let s=new vn((l,u)=>l-u),a=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let y=i.get(h)||js.empty();y=u.applyToLocalView(f,y),i.set(h,y);const v=(s.get(u.batchId)||Dt()).add(h);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,y=h.value,v=$C();y.forEach(x=>{if(!a.has(x)){const T=XC(t.get(x),i.get(x));T!==null&&v.set(x,T),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return Te.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(l){return Je.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):j2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):Te.resolve(Ic());let u=of,h=a;return l.next(f=>Te.forEach(f,(y,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(y)?Te.resolve():this.remoteDocumentCache.getEntry(e,y).next(x=>{h=h.insert(y,x)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,Dt())).next(y=>({batchId:u,changes:HC(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next(i=>{let s=zd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let l=zd();return this.indexManager.getCollectionParents(e,a).next(u=>Te.forEach(u,h=>{const f=function(v,x){return new Ag(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next(y=>{y.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s))).next(l=>{a.forEach((h,f)=>{const y=f.getKey();l.get(y)===null&&(l=l.insert(y,ji.newInvalidDocument(y)))});let u=zd();return l.forEach((h,f)=>{const y=a.get(h);y!==void 0&&Qd(y.mutation,f,js.empty(),fn.now()),Rg(t,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:pa(s.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(s){return{name:s.name,query:TP(s.bundledQuery),readTime:pa(s.readTime)}}(t)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.overlays=new vn(Je.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ic();return Te.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,a)=>{this.St(e,t,a)}),Te.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(i)),Te.resolve()}getOverlaysForCollection(e,t,i){const s=Ic(),a=t.length+1,l=new Je(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>i&&s.set(h.getKey(),h)}return Te.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new vn((f,y)=>f-y);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let y=a.get(f.largestBatchId);y===null&&(y=Ic(),a=a.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const u=Ic(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,y)=>u.set(f,y)),!(u.size()>=s)););return Te.resolve(u)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new eP(t,i));let a=this.qr.get(t);a===void 0&&(a=Dt(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.sessionToken=Si.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.Qr=new ri(di.$r),this.Ur=new ri(di.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new di(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Gr(new di(e,t))}zr(e,t){e.forEach(i=>this.removeReference(i,t))}jr(e){const t=new Je(new dn([])),i=new di(t,e),s=new di(t,e+1),a=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),a.push(l.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Je(new dn([])),i=new di(t,e),s=new di(t,e+1);let a=Dt();return this.Ur.forEachInRange([i,s],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new di(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class di{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Je.comparator(e.key,t.key)||Nt(e.Yr,t.Yr)}static Kr(e,t){return Nt(e.Yr,t.Yr)||Je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ri(di.$r)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new J2(a,t,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new di(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Te.resolve(l)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),a=s<0?0:s;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?yv:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new di(t,0),s=new di(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],l=>{const u=this.Xr(l.Yr);a.push(u)}),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ri(Nt);return t.forEach(s=>{const a=new di(s,0),l=new di(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],u=>{i=i.add(u.Yr)})}),Te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;Je.isDocumentKey(a)||(a=a.child(""));const l=new di(new Je(a),0);let u=new ri(Nt);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Yr)),!0)},l),Te.resolve(this.ti(u))}ti(e){const t=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Gt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Te.forEach(t.mutations,s=>{const a=new di(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){const i=new di(t,0),s=this.Zr.firstAfterOrEqual(i);return Te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.ri=e,this.docs=function(){return new vn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Te.resolve(i?i.document.mutableCopy():ji.newInvalidDocument(t))}getEntries(e,t){let i=Co();return t.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():ji.newInvalidDocument(s))}),Te.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=Co();const l=t.path,u=new Je(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:y}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||f2(d2(y),i)<=0||(s.has(y.key)||Rg(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,t,i,s){ct(9500)}ii(e,t){return Te.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new UP(this)}getSize(e){return Te.resolve(this.size)}}class UP extends DP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.persistence=e,this.si=new qc(t=>vv(t),xv),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.oi=0,this._i=new Cv,this.targetCount=0,this.ai=th.ur()}forEachTarget(e,t){return this.si.forEach((i,s)=>t(s)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new th(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.si.forEach((l,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),Te.waitFor(a).next(()=>s)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return Te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),Te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return Te.resolve(i)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t){this.ui={},this.overlays={},this.ci=new wg(0),this.li=!1,this.li=!0,this.hi=new LP,this.referenceDelegate=e(this),this.Pi=new zP(this),this.indexManager=new SP,this.remoteDocumentCache=function(s){return new FP(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new wP(t),this.Ii=new PP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new VP(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){qe("MemoryPersistence","Starting transaction:",e);const s=new BP(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,t){return Te.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}}class BP extends p2{constructor(e){super(),this.currentSequenceNumber=e}}class Rv{constructor(e){this.persistence=e,this.Ri=new Cv,this.Vi=null}static mi(e){return new Rv(e)}get fi(){if(this.Vi)return this.Vi;throw ct(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,i=>{const s=Je.fromPath(i);return this.gi(e,s).next(a=>{a||t.removeEntry(s,ft.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qp{constructor(e,t){this.persistence=e,this.pi=new qc(i=>_2(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=NP(this,t)}static mi(e,t){return new qp(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}wr(e){let t=0;return this.pr(e,i=>{t++}).next(()=>t)}pr(e,t){return Te.forEach(this.pi,(i,s)=>this.br(e,i,s).next(a=>a?Te.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,t).next(u=>{u||(i++,a.removeEntry(l,ft.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ep(e.data.value)),t}br(e,t,i){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return Te.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Dt(),s=Dt();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Iv(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return MO()?8:g2(Fi())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.ys(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ws(e,t,s,i).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new HP;return this.Ss(e,t,l).next(u=>{if(a.result=u,this.Vs)return this.bs(e,t,l,u.size)})}).next(()=>a.result)}bs(e,t,i,s){return i.documentReadCount<this.fs?(Lu()<=kt.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",Vu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(Lu()<=kt.DEBUG&&qe("QueryEngine","Query:",Vu(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Lu()<=kt.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",Vu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(t))):Te.resolve())}ys(e,t){if(Fw(t))return Te.resolve(null);let i=ma(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Cb(t,null,"F"),i=ma(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const l=Dt(...a);return this.ps.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(t,u);return this.Cs(t,f,l,h.readTime)?this.ys(e,Cb(t,null,"F")):this.vs(e,f,t,h)}))})))}ws(e,t,i,s){return Fw(t)||s.isEqual(ft.min())?Te.resolve(null):this.ps.getDocuments(e,i).next(a=>{const l=this.Ds(t,a);return this.Cs(t,l,i,s)?Te.resolve(null):(Lu()<=kt.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vu(t)),this.vs(e,l,t,h2(s,of)).next(u=>u))})}Ds(e,t){let i=new ri(zC(e));return t.forEach((s,a)=>{Rg(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,t,i){return Lu()<=kt.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",Vu(t)),this.ps.getDocumentsMatchingQuery(e,t,Ml.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="LocalStore",qP=3e8;class GP{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new vn(Nt),this.xs=new qc(a=>vv(a),xv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function WP(n,e,t,i){return new GP(n,e,t,i)}async function u1(n,e){const t=pt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const l=[],u=[];let h=Dt();for(const f of s){l.push(f.batchId);for(const y of f.mutations)h=h.add(y.key)}for(const f of a){u.push(f.batchId);for(const y of f.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:u}))})})}function KP(n,e){const t=pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,y){const v=f.batch,x=v.keys();let T=Te.resolve();return x.forEach(C=>{T=T.next(()=>y.getEntry(h,C)).next(k=>{const R=f.docVersions.get(C);Gt(R!==null,48541),k.version.compareTo(R)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),y.addEntry(k)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,v))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Dt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function h1(n){const e=pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function YP(n,e){const t=pt(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach((y,v)=>{const x=s.get(v);if(!x)return;u.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,v).next(()=>t.Pi.addMatchingKeys(a,y.addedDocuments,v)));let T=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Si.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,i)),s=s.insert(v,T),function(k,R,j){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=qP?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(x,T,y)&&u.push(t.Pi.updateTargetData(a,T))});let h=Co(),f=Dt();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),u.push(XP(a,l,e.documentUpdates).next(y=>{h=y.ks,f=y.qs})),!i.isEqual(ft.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next(v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i));u.push(y)}return Te.waitFor(u).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(t.Ms=s,a))}function XP(n,e,t){let i=Dt(),s=Dt();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let l=Co();return t.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ft.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):qe(kv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:l,qs:s}})}function QP(n,e){const t=pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=yv),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ZP(n,e){const t=pt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Pi.getTargetData(i,e).next(a=>a?(s=a,Te.resolve(s)):t.Pi.allocateTargetId(i).next(l=>(s=new wl(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i})}async function Db(n,e,t){const i=pt(n),s=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!dh(l))throw l;qe(kv,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Zw(n,e,t){const i=pt(n);let s=ft.min(),a=Dt();return i.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,y){const v=pt(h),x=v.xs.get(y);return x!==void 0?Te.resolve(v.Ms.get(x)):v.Pi.getTargetData(f,y)}(i,l,ma(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next(h=>{a=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:ft.min(),t?a:Dt())).next(u=>(JP(i,V2(e),u),{documents:u,Qs:a})))}function JP(n,e,t){let i=n.Os.get(e)||ft.min();t.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Os.set(e,i)}class Jw{constructor(){this.activeTargetIds=$2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ej{constructor(){this.Mo=new Jw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="ConnectivityMonitor";class tT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){qe(eT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){qe(eT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zm=null;function Ob(){return Zm===null?Zm=function(){return 268435456+Math.round(2147483648*Math.random())}():Zm++,"0x"+Zm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="RestConnection",nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ij{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Vp?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,a){const l=Ob(),u=this.zo(e,t.toUriEncodedString());qe(M_,`Sending RPC '${e}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,a);const{host:f}=new URL(u),y=Bc(f);return this.Jo(e,u,h,i,y).then(v=>(qe(M_,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Qu(M_,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v})}Ho(e,t,i,s,a,l){return this.Go(e,t,i,s,a)}jo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}zo(e,t){const i=nj[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="WebChannelConnection";class rj extends ij{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,a){const l=Ob();return new Promise((u,h)=>{const f=new mC;f.setWithCredentials(!0),f.listenOnce(pC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case xp.NO_ERROR:const v=f.getResponseJson();qe(Oi,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case xp.TIMEOUT:qe(Oi,`RPC '${e}' ${l} timed out`),h(new Ye(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case xp.HTTP_ERROR:const x=f.getStatus();if(qe(Oi,`RPC '${e}' ${l} failed with status:`,x,"response text:",f.getResponseText()),x>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T?.error;if(C&&C.status&&C.message){const k=function(j){const q=j.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(q)>=0?q:Ce.UNKNOWN}(C.status);h(new Ye(k,C.message))}else h(new Ye(Ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Ye(Ce.UNAVAILABLE,"Connection failed."));break;default:ct(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{qe(Oi,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);qe(Oi,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",y,i,15)})}T_(e,t,i){const s=Ob(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=_C(),u=yC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const y=a.join("");qe(Oi,`Creating RPC '${e}' stream ${s}: ${y}`,h);const v=l.createWebChannel(y,h);this.I_(v);let x=!1,T=!1;const C=new sj({Yo:R=>{T?qe(Oi,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(x||(qe(Oi,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),qe(Oi,`RPC '${e}' stream ${s} sending:`,R),v.send(R))},Zo:()=>v.close()}),k=(R,j,q)=>{R.listen(j,G=>{try{q(G)}catch(X){setTimeout(()=>{throw X},0)}})};return k(v,Ud.EventType.OPEN,()=>{T||(qe(Oi,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),k(v,Ud.EventType.CLOSE,()=>{T||(T=!0,qe(Oi,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(v))}),k(v,Ud.EventType.ERROR,R=>{T||(T=!0,Qu(Oi,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),C.a_(new Ye(Ce.UNAVAILABLE,"The operation could not be completed")))}),k(v,Ud.EventType.MESSAGE,R=>{if(!T){const j=R.data[0];Gt(!!j,16349);const q=j,G=q?.error||q[0]?.error;if(G){qe(Oi,`RPC '${e}' stream ${s} received error:`,G);const X=G.status;let Y=function(I){const O=qn[I];if(O!==void 0)return ZC(O)}(X),J=G.message;Y===void 0&&(Y=Ce.INTERNAL,J="Unknown error status: "+X+" with message "+G.message),T=!0,C.a_(new Ye(Y,J)),v.close()}else qe(Oi,`RPC '${e}' stream ${s} received:`,j),C.u_(j)}}),k(u,gC.STAT_EVENT,R=>{R.stat===xb.PROXY?qe(Oi,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===xb.NOPROXY&&qe(Oi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function P_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(n){return new cP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t,i=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&qe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="PersistentStream";class f1{constructor(e,t,i,s,a,l,u,h){this.Mi=e,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new d1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(Ao(t.toString()),Ao("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===t&&this.G_(i,s)},i=>{e(()=>{const s=new Ye(Ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return qe(nT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(qe(nT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aj extends f1{constructor(e,t,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dP(this.serializer,e),i=function(a){if(!("targetChange"in a))return ft.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?ft.min():l.readTime?pa(l.readTime):ft.min()}(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Nb(this.serializer),t.addTarget=function(a,l){let u;const h=l.target;if(u=Ab(h)?{documents:pP(a,h)}:{query:gP(a,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=t1(a,l.resumeToken);const f=Rb(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(ft.min())>0){u.readTime=$p(a,l.snapshotVersion.toTimestamp());const f=Rb(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=_P(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Nb(this.serializer),t.removeTarget=e,this.q_(t)}}class oj extends f1{constructor(e,t,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=mP(e.writeResults,e.commitTime),i=pa(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Nb(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>fP(this.serializer,i))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{}class cj extends lj{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ye(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Go(e,Ib(t,i),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ye(Ce.UNKNOWN,a.toString())})}Ho(e,t,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Ho(e,Ib(t,i),s,l,u,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ye(Ce.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class uj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ao(t),this.aa=!1):qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="RemoteStore";class hj{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{Gc(this)&&(qe(Pc,"Restarting streams for network reachability change."),await async function(h){const f=pt(h);f.Ea.add(4),await Nf(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Og(f)}(this))})}),this.Ra=new uj(i,s)}}async function Og(n){if(Gc(n))for(const e of n.da)await e(!0)}async function Nf(n){for(const e of n.da)await e(!1)}function m1(n,e){const t=pt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mv(t)?Ov(t):fh(t).O_()&&Dv(t,e))}function Nv(n,e){const t=pt(n),i=fh(t);t.Ia.delete(e),i.O_()&&p1(t,e),t.Ia.size===0&&(i.O_()?i.L_():Gc(t)&&t.Ra.set("Unknown"))}function Dv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fh(n).Y_(e)}function p1(n,e){n.Va.Ue(e),fh(n).Z_(e)}function Ov(n){n.Va=new rP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fh(n).start(),n.Ra.ua()}function Mv(n){return Gc(n)&&!fh(n).x_()&&n.Ia.size>0}function Gc(n){return pt(n).Ea.size===0}function g1(n){n.Va=void 0}async function dj(n){n.Ra.set("Online")}async function fj(n){n.Ia.forEach((e,t)=>{Dv(n,e)})}async function mj(n,e){g1(n),Mv(n)?(n.Ra.ha(e),Ov(n)):n.Ra.set("Unknown")}async function pj(n,e,t){if(n.Ra.set("Online"),e instanceof e1&&e.state===2&&e.cause)try{await async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))}(n,e)}catch(i){qe(Pc,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gp(n,i)}else if(e instanceof Sp?n.Va.Ze(e):e instanceof JC?n.Va.st(e):n.Va.tt(e),!t.isEqual(ft.min()))try{const i=await h1(n.localStore);t.compareTo(i)>=0&&await function(a,l){const u=a.Va.Tt(l);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const y=a.Ia.get(f);y&&a.Ia.set(f,y.withResumeToken(h.resumeToken,l))}}),u.targetMismatches.forEach((h,f)=>{const y=a.Ia.get(h);if(!y)return;a.Ia.set(h,y.withResumeToken(Si.EMPTY_BYTE_STRING,y.snapshotVersion)),p1(a,h);const v=new wl(y.target,h,f,y.sequenceNumber);Dv(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(i){qe(Pc,"Failed to raise snapshot:",i),await Gp(n,i)}}async function Gp(n,e,t){if(!dh(e))throw e;n.Ea.add(1),await Nf(n),n.Ra.set("Offline"),t||(t=()=>h1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{qe(Pc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Og(n)})}function y1(n,e){return e().catch(t=>Gp(n,t,e))}async function Mg(n){const e=pt(n),t=Vl(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yv;for(;gj(e);)try{const s=await QP(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,yj(e,s)}catch(s){await Gp(e,s)}_1(e)&&b1(e)}function gj(n){return Gc(n)&&n.Ta.length<10}function yj(n,e){n.Ta.push(e);const t=Vl(n);t.O_()&&t.X_&&t.ea(e.mutations)}function _1(n){return Gc(n)&&!Vl(n).x_()&&n.Ta.length>0}function b1(n){Vl(n).start()}async function _j(n){Vl(n).ra()}async function bj(n){const e=Vl(n);for(const t of n.Ta)e.ea(t.mutations)}async function vj(n,e,t){const i=n.Ta.shift(),s=Tv.from(i,e,t);await y1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Mg(n)}async function xj(n,e){e&&Vl(n).X_&&await async function(i,s){if(function(l){return nP(l)&&l!==Ce.ABORTED}(s.code)){const a=i.Ta.shift();Vl(i).B_(),await y1(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Mg(i)}}(n,e),_1(n)&&b1(n)}async function iT(n,e){const t=pt(n);t.asyncQueue.verifyOperationInProgress(),qe(Pc,"RemoteStore received new credentials");const i=Gc(t);t.Ea.add(3),await Nf(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Og(t)}async function Ej(n,e){const t=pt(n);e?(t.Ea.delete(2),await Og(t)):e||(t.Ea.add(2),await Nf(t),t.Ra.set("Unknown"))}function fh(n){return n.ma||(n.ma=function(t,i,s){const a=pt(t);return a.sa(),new aj(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:dj.bind(null,n),t_:fj.bind(null,n),r_:mj.bind(null,n),H_:pj.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Mv(n)?Ov(n):n.Ra.set("Unknown")):(await n.ma.stop(),g1(n))})),n.ma}function Vl(n){return n.fa||(n.fa=function(t,i,s){const a=pt(t);return a.sa(),new oj(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:_j.bind(null,n),r_:xj.bind(null,n),ta:bj.bind(null,n),na:vj.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Mg(n)):(await n.fa.stop(),n.Ta.length>0&&(qe(Pc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Il,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const l=Date.now()+i,u=new Pv(e,t,l,s,a);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ye(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jv(n,e){if(Ao("AsyncQueue",`${e}: ${n}`),dh(n))return new Ye(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{static emptySet(e){return new Hu(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Je.comparator(t.key,i.key):(t,i)=>Je.comparator(t.key,i.key),this.keyedMap=zd(),this.sortedSet=new vn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Hu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.ga=new vn(Je.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ct(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}}class nh{constructor(e,t,i,s,a,l,u,h,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,a){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new nh(e,t,Hu.emptySet(t),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Tj{constructor(){this.queries=rT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=pt(t),a=s.queries;s.queries=rT(),a.forEach((l,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new Ye(Ce.ABORTED,"Firestore shutting down"))}}function rT(){return new qc(n=>UC(n),Cg)}async function Sj(n,e){const t=pt(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.ba()&&e.Da()&&(i=2):(a=new wj,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=jv(l,`Initialization of query '${Vu(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Lv(t)}async function Aj(n,e){const t=pt(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Cj(n,e){const t=pt(n);let i=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&Lv(t)}function Rj(n,e,t){const i=pt(n),s=i.queries.get(e);if(s)for(const a of s.Sa)a.onError(t);i.queries.delete(e)}function Lv(n){n.Ca.forEach(e=>{e.next()})}var Mb,aT;(aT=Mb||(Mb={})).Ma="default",aT.Cache="cache";class Ij{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new nh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.key=e}}class x1{constructor(e){this.key=e}}class kj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Dt(),this.mutatedKeys=Dt(),this.eu=zC(e),this.tu=new Hu(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new sT,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const x=s.get(y),T=Rg(this.query,v)?v:null,C=!!x&&this.mutatedKeys.has(x.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let R=!1;x&&T?x.data.isEqual(T.data)?C!==k&&(i.track({type:3,doc:T}),R=!0):this.su(x,T)||(i.track({type:2,doc:T}),R=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!x&&T?(i.track({type:0,doc:T}),R=!0):x&&!T&&(i.track({type:1,doc:x}),R=!0,(h||f)&&(u=!0)),R&&(T?(l=l.add(T),a=k?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Cs:u,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,v)=>function(T,C){const k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct(20277,{Rt:R})}};return k(T)-k(C)}(y.type,v.type)||this.eu(y.doc,v.doc)),this.ou(i),s=s??!1;const u=t&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,l.length!==0||f?{snapshot:new nh(this.query,e.tu,a,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Dt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const t=[];return e.forEach(i=>{this.Xa.has(i)||t.push(new x1(i))}),this.Xa.forEach(i=>{e.has(i)||t.push(new v1(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=Dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vv="SyncEngine";class Nj{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Dj{constructor(e){this.key=e,this.hu=!1}}class Oj{constructor(e,t,i,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new qc(u=>UC(u),Cg),this.Iu=new Map,this.Eu=new Set,this.du=new vn(Je.comparator),this.Au=new Map,this.Ru=new Cv,this.Vu={},this.mu=new Map,this.fu=th.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Mj(n,e,t=!0){const i=C1(n);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await E1(i,e,t,!0),s}async function Pj(n,e){const t=C1(n);await E1(t,e,!0,!1)}async function E1(n,e,t,i){const s=await ZP(n.localStore,ma(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let u;return i&&(u=await jj(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&m1(n.remoteStore,s),u}async function jj(n,e,t,i,s){n.pu=(v,x,T)=>async function(k,R,j,q){let G=R.view.ru(j);G.Cs&&(G=await Zw(k.localStore,R.query,!1).then(({documents:F})=>R.view.ru(F,G)));const X=q&&q.targetChanges.get(R.targetId),Y=q&&q.targetMismatches.get(R.targetId)!=null,J=R.view.applyChanges(G,k.isPrimaryClient,X,Y);return lT(k,R.targetId,J.au),J.snapshot}(n,v,x,T);const a=await Zw(n.localStore,e,!0),l=new kj(e,a.Qs),u=l.ru(a.documents),h=kf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,h);lT(n,t,f.au);const y=new Nj(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function Lj(n,e,t){const i=pt(n),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter(l=>!Cg(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Db(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Nv(i.remoteStore,s.targetId),Pb(i,s.targetId)}).catch(hh)):(Pb(i,s.targetId),await Db(i.localStore,s.targetId,!0))}async function Vj(n,e){const t=pt(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Nv(t.remoteStore,i.targetId))}async function Fj(n,e,t){const i=Gj(n);try{const s=await function(l,u){const h=pt(l),f=fn.now(),y=u.reduce((T,C)=>T.add(C.key),Dt());let v,x;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=Co(),k=Dt();return h.Ns.getEntries(T,y).next(R=>{C=R,C.forEach((j,q)=>{q.isValidDocument()||(k=k.add(j))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,C)).next(R=>{v=R;const j=[];for(const q of u){const G=Q2(q,v.get(q.key).overlayedDocument);G!=null&&j.push(new $l(q.key,G,DC(G.value.mapValue),Pr.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,j,u)}).next(R=>{x=R;const j=R.applyToLocalDocumentSet(v,k);return h.documentOverlayCache.saveOverlays(T,R.batchId,j)})}).then(()=>({batchId:x.batchId,changes:HC(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,u,h){let f=l.Vu[l.currentUser.toKey()];f||(f=new vn(Nt)),f=f.insert(u,h),l.Vu[l.currentUser.toKey()]=f}(i,s.batchId,t),await Df(i,s.changes),await Mg(i.remoteStore)}catch(s){const a=jv(s,"Failed to persist write");t.reject(a)}}async function w1(n,e){const t=pt(n);try{const i=await YP(t.localStore,e);e.targetChanges.forEach((s,a)=>{const l=t.Au.get(a);l&&(Gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Gt(l.hu,14607):s.removedDocuments.size>0&&(Gt(l.hu,42227),l.hu=!1))}),await Df(t,i,e)}catch(i){await hh(i)}}function oT(n,e,t){const i=pt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach((a,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const h=pt(l);h.onlineState=u;let f=!1;h.queries.forEach((y,v)=>{for(const x of v.Sa)x.va(u)&&(f=!0)}),f&&Lv(h)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Uj(n,e,t){const i=pt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),a=s&&s.key;if(a){let l=new vn(Je.comparator);l=l.insert(a,ji.newNoDocument(a,ft.min()));const u=Dt().add(a),h=new Ng(ft.min(),new Map,new vn(Nt),l,u);await w1(i,h),i.du=i.du.remove(a),i.Au.delete(e),Fv(i)}else await Db(i.localStore,e,!1).then(()=>Pb(i,e,t)).catch(hh)}async function zj(n,e){const t=pt(n),i=e.batch.batchId;try{const s=await KP(t.localStore,e);S1(t,i,null),T1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Df(t,s)}catch(s){await hh(s)}}async function Bj(n,e,t){const i=pt(n);try{const s=await function(l,u){const h=pt(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return h.mutationQueue.lookupMutationBatch(f,u).next(v=>(Gt(v!==null,37113),y=v.keys(),h.mutationQueue.removeMutationBatch(f,v))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>h.localDocuments.getDocuments(f,y))})}(i.localStore,e);S1(i,e,t),T1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Df(i,s)}catch(s){await hh(s)}}function T1(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function S1(n,e,t){const i=pt(n);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Pb(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(i=>{n.Ru.containsKey(i)||A1(n,i)})}function A1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Nv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Fv(n))}function lT(n,e,t){for(const i of t)i instanceof v1?(n.Ru.addReference(i.key,e),Hj(n,i)):i instanceof x1?(qe(Vv,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||A1(n,i.key)):ct(19791,{wu:i})}function Hj(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(qe(Vv,"New document in limbo: "+t),n.Eu.add(i),Fv(n))}function Fv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Je(dn.fromString(e)),i=n.fu.next();n.Au.set(i,new Dj(t)),n.du=n.du.insert(t,i),m1(n.remoteStore,new wl(ma(FC(t.path)),i,"TargetPurposeLimboResolution",wg.ce))}}async function Df(n,e,t){const i=pt(n),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{l.push(i.pu(h,e,t).then(f=>{if((f||t)&&i.isPrimaryClient){const y=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Iv.As(h.targetId,f);a.push(y)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(h,f){const y=pt(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Te.forEach(f,x=>Te.forEach(x.Es,T=>y.persistence.referenceDelegate.addReference(v,x.targetId,T)).next(()=>Te.forEach(x.ds,T=>y.persistence.referenceDelegate.removeReference(v,x.targetId,T)))))}catch(v){if(!dh(v))throw v;qe(kv,"Failed to update sequence numbers: "+v)}for(const v of f){const x=v.targetId;if(!v.fromCache){const T=y.Ms.get(x),C=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(C);y.Ms=y.Ms.insert(x,k)}}}(i.localStore,a))}async function $j(n,e){const t=pt(n);if(!t.currentUser.isEqual(e)){qe(Vv,"User change. New user:",e.toKey());const i=await u1(t.localStore,e);t.currentUser=e,function(a,l){a.mu.forEach(u=>{u.forEach(h=>{h.reject(new Ye(Ce.CANCELLED,l))})}),a.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Df(t,i.Ls)}}function qj(n,e){const t=pt(n),i=t.Au.get(e);if(i&&i.hu)return Dt().add(i.key);{let s=Dt();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function C1(n){const e=pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=w1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uj.bind(null,e),e.Pu.H_=Cj.bind(null,e.eventManager),e.Pu.yu=Rj.bind(null,e.eventManager),e}function Gj(n){const e=pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bj.bind(null,e),e}class Wp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return WP(this.persistence,new $P,e.initialUser,this.serializer)}Cu(e){return new c1(Rv.mi,this.serializer)}Du(e){return new ej}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wp.provider={build:()=>new Wp};class Wj extends Wp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Gt(this.persistence.referenceDelegate instanceof qp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new IP(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new c1(i=>qp.mi(i,t),this.serializer)}}class jb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$j.bind(null,this.syncEngine),await Ej(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Tj}()}createDatastore(e){const t=Dg(e.databaseInfo.databaseId),i=function(a){return new rj(a)}(e.databaseInfo);return function(a,l,u,h){return new cj(a,l,u,h)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,a,l,u){return new hj(i,s,a,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>oT(this.syncEngine,t,0),function(){return tT.v()?new tT:new tj}())}createSyncEngine(e,t){return function(s,a,l,u,h,f,y){const v=new Oj(s,a,l,u,h,f);return y&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const i=pt(t);qe(Pc,"RemoteStore shutting down."),i.Ea.add(5),await Nf(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jb.provider={build:()=>new jb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ao("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="FirestoreClient";class Yj{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Pi.UNAUTHENTICATED,this.clientId=pv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async l=>{qe(Fl,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(qe(Fl,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Il;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=jv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function j_(n,e){n.asyncQueue.verifyOperationInProgress(),qe(Fl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await u1(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Xj(n);qe(Fl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>iT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>iT(e.remoteStore,s)),n._onlineComponents=e}async function Xj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe(Fl,"Using user provided OfflineComponentProvider");try{await j_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ce.FAILED_PRECONDITION||s.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Qu("Error using user provided cache. Falling back to memory cache: "+t),await j_(n,new Wp)}}else qe(Fl,"Using default OfflineComponentProvider"),await j_(n,new Wj(void 0));return n._offlineComponents}async function R1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe(Fl,"Using user provided OnlineComponentProvider"),await cT(n,n._uninitializedComponentsProvider._online)):(qe(Fl,"Using default OnlineComponentProvider"),await cT(n,new jb))),n._onlineComponents}function Qj(n){return R1(n).then(e=>e.syncEngine)}async function Zj(n){const e=await R1(n),t=e.eventManager;return t.onListen=Mj.bind(null,e.syncEngine),t.onUnlisten=Lj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Pj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Vj.bind(null,e.syncEngine),t}function Jj(n,e,t={}){const i=new Il;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,u,h,f){const y=new Kj({next:x=>{y.Nu(),l.enqueueAndForget(()=>Aj(a,v)),x.fromCache&&h.source==="server"?f.reject(new Ye(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new Ij(u,y,{includeMetadataChanges:!0,qa:!0});return Sj(a,v)}(await Zj(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firestore.googleapis.com",hT=!0;class dT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ye(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k1,this.ssl=hT}else this.host=e.host,this.ssl=e.ssl??hT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=l1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CP)throw new Ye(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I1(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ye(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ye(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ye(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pg{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ye(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new e2;switch(i.type){case"firstParty":return new s2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ye(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=uT.get(t);i&&(qe("ComponentProvider","Removing Datastore"),uT.delete(t),i.terminate())}(this),Promise.resolve()}}function eL(n,e,t,i={}){n=Mc(n,Pg);const s=Bc(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(hv(`https://${u}`),dv("Firestore",!0)),a.host!==k1&&a.host!==u&&Qu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:u,ssl:s,emulatorOptions:i};if(!Ol(h,l)&&(n._setSettings(h),i.mockUserToken)){let f,y;if(typeof i.mockUserToken=="string")f=i.mockUserToken,y=Pi.MOCK_USER;else{f=iC(i.mockUserToken,n._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Ye(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Pi(v)}n._authCredentials=new t2(new vC(f,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new jg(this.firestore,e,this._query)}}class fi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fi(this.firestore,e,this._key)}toJSON(){return{type:fi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Rf(t,fi._jsonSchema))return new fi(e,i||null,new Je(dn.fromString(t.referencePath)))}}fi._jsonSchemaVersion="firestore/documentReference/1.0",fi._jsonSchema={type:Wn("string",fi._jsonSchemaVersion),referencePath:Wn("string")};class kl extends jg{constructor(e,t,i){super(e,t,FC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fi(this.firestore,null,new Je(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function sn(n,e,...t){if(n=Ln(n),xC("collection","path",e),n instanceof Pg){const i=dn.fromString(e,...t);return Aw(i),new kl(n,null,i)}{if(!(n instanceof fi||n instanceof kl))throw new Ye(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dn.fromString(e,...t));return Aw(i),new kl(n.firestore,null,i)}}function wa(n,e,...t){if(n=Ln(n),arguments.length===1&&(e=pv.newId()),xC("doc","path",e),n instanceof Pg){const i=dn.fromString(e,...t);return Sw(i),new fi(n,null,new Je(i))}{if(!(n instanceof fi||n instanceof kl))throw new Ye(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dn.fromString(e,...t));return Sw(i),new fi(n.firestore,n instanceof kl?n.converter:null,new Je(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="AsyncQueue";class mT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new d1(this,"async_queue_retry"),this._c=()=>{const i=P_();i&&qe(fT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=P_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=P_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Il;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dh(e))throw e;qe(fT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ao("INTERNAL UNHANDLED ERROR: ",pT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Pv.createAndSchedule(this,e,t,i,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&ct(47125,{Pc:pT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function pT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Of extends Pg{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new mT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mT(e),this._firestoreClient=void 0,await e}}}function tL(n,e){const t=typeof n=="object"?n:Eg(),i=typeof n=="string"?n:Vp,s=Bl(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=eC("firestore");a&&eL(s,...a)}return s}function N1(n){if(n._terminated)throw new Ye(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nL(n),n._firestoreClient}function nL(n){const e=n._freezeSettings(),t=function(s,a,l,u){return new x2(s,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,I1(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Yj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cr(Si.fromBase64String(e))}catch(t){throw new Ye(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cr(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rf(e,cr._jsonSchema))return cr.fromBase64String(e.bytes)}}cr._jsonSchemaVersion="firestore/bytes/1.0",cr._jsonSchema={type:Wn("string",cr._jsonSchemaVersion),bytes:Wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ye(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ti(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ye(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ye(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ga._jsonSchemaVersion}}static fromJSON(e){if(Rf(e,ga._jsonSchema))return new ga(e.latitude,e.longitude)}}ga._jsonSchemaVersion="firestore/geoPoint/1.0",ga._jsonSchema={type:Wn("string",ga._jsonSchemaVersion),latitude:Wn("number"),longitude:Wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ya._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rf(e,ya._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ya(e.vectorValues);throw new Ye(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ya._jsonSchemaVersion="firestore/vectorValue/1.0",ya._jsonSchema={type:Wn("string",ya._jsonSchemaVersion),vectorValues:Wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=/^__.*__$/;class sL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new If(e,this.data,t,this.fieldTransforms)}}class D1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new $l(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function O1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct(40011,{Ac:n})}}class zv{constructor(e,t,i,s,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(O1(this.Ac)&&iL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Dg(e)}Cc(e,t,i,s=!1){return new zv({Ac:e,methodName:t,Dc:i,path:Ti.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M1(n){const e=n._freezeSettings(),t=Dg(n._databaseId);return new rL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aL(n,e,t,i,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,s);Bv("Data must be an object, but it was:",l,i);const u=P1(i,l);let h,f;if(a.merge)h=new js(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const v of a.mergeFields){const x=Lb(e,v,t);if(!l.contains(x))throw new Ye(Ce.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);L1(y,x)||y.push(x)}h=new js(y),f=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,f=l.fieldTransforms;return new sL(new ds(u),h,f)}class Vg extends Uv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vg}}function oL(n,e,t,i){const s=n.Cc(1,e,t);Bv("Data must be an object, but it was:",s,i);const a=[],l=ds.empty();Hl(i,(h,f)=>{const y=Hv(e,h,t);f=Ln(f);const v=s.yc(y);if(f instanceof Vg)a.push(y);else{const x=Fg(f,v);x!=null&&(a.push(y),l.set(y,x))}});const u=new js(a);return new D1(l,u,s.fieldTransforms)}function lL(n,e,t,i,s,a){const l=n.Cc(1,e,t),u=[Lb(e,i,t)],h=[s];if(a.length%2!=0)throw new Ye(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)u.push(Lb(e,a[x])),h.push(a[x+1]);const f=[],y=ds.empty();for(let x=u.length-1;x>=0;--x)if(!L1(f,u[x])){const T=u[x];let C=h[x];C=Ln(C);const k=l.yc(T);if(C instanceof Vg)f.push(T);else{const R=Fg(C,k);R!=null&&(f.push(T),y.set(T,R))}}const v=new js(f);return new D1(y,v,l.fieldTransforms)}function Fg(n,e){if(j1(n=Ln(n)))return Bv("Unsupported field value:",e,n),P1(n,e);if(n instanceof Uv)return function(i,s){if(!O1(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const a=[];let l=0;for(const u of i){let h=Fg(u,s.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}}(n,e)}return function(i,s){if((i=Ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return q2(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=fn.fromDate(i);return{timestampValue:$p(s.serializer,a)}}if(i instanceof fn){const a=new fn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$p(s.serializer,a)}}if(i instanceof ga)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof cr)return{bytesValue:t1(s.serializer,i._byteString)};if(i instanceof fi){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Av(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ya)return function(l,u){return{mapValue:{fields:{[kC]:{stringValue:NC},[Fp]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Ev(u.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${gv(i)}`)}(n,e)}function P1(n,e){const t={};return TC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hl(n,(i,s)=>{const a=Fg(s,e.mc(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function j1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fn||n instanceof ga||n instanceof cr||n instanceof fi||n instanceof Uv||n instanceof ya)}function Bv(n,e,t){if(!j1(t)||!EC(t)){const i=gv(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Lb(n,e,t){if((e=Ln(e))instanceof Lg)return e._internalPath;if(typeof e=="string")return Hv(n,e);throw Kp("Field path arguments must be of type string or ",n,!1,void 0,t)}const cL=new RegExp("[~\\*/\\[\\]]");function Hv(n,e,t){if(e.search(cL)>=0)throw Kp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lg(...e.split("."))._internalPath}catch{throw Kp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kp(n,e,t,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${i}`),l&&(h+=` in document ${s}`),h+=")"),new Ye(Ce.INVALID_ARGUMENT,u+n+h)}function L1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(F1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uL extends V1{data(){return super.data()}}function F1(n,e){return typeof e=="string"?Hv(n,e):e instanceof Lg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ye(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dL{convertValue(e,t="none"){switch(Ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ct(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Hl(e,(s,a)=>{i[s]=this.convertValue(a,t)}),i}convertVectorValue(e){const t=e.fields?.[Fp].arrayValue?.values?.map(i=>Mn(i.doubleValue));return new ya(t)}convertGeoPoint(e){return new ga(Mn(e.latitude),Mn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Sg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(lf(e));default:return null}}convertTimestamp(e){const t=Pl(e);return new fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dn.fromString(e);Gt(o1(i),9688,{name:e});const s=new cf(i.get(1),i.get(3)),a=new Je(i.popFirst(5));return s.isEqual(t)||Ao(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Jm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $u extends V1{constructor(e,t,i,s,a,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ap(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(F1("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$u._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$u._jsonSchemaVersion="firestore/documentSnapshot/1.0",$u._jsonSchema={type:Wn("string",$u._jsonSchemaVersion),bundleSource:Wn("string","DocumentSnapshot"),bundleName:Wn("string"),bundle:Wn("string")};class Ap extends $u{data(e={}){return super.data(e)}}class qu{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Jm(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ap(this._firestore,this._userDataWriter,i.key,i,new Jm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ye(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const h=new Ap(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Jm(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new Ap(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Jm(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,y=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:mL(u.type),doc:h,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct(61501,{type:n})}}qu._jsonSchemaVersion="firestore/querySnapshot/1.0",qu._jsonSchema={type:Wn("string",qu._jsonSchemaVersion),bundleSource:Wn("string","QuerySnapshot"),bundleName:Wn("string"),bundle:Wn("string")};class pL extends dL{constructor(e){super(),this.firestore=e}convertBytes(e){return new cr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,t)}}function Pn(n){n=Mc(n,jg);const e=Mc(n.firestore,Of),t=N1(e),i=new pL(e);return hL(n._query),Jj(t,n._query).then(s=>new qu(e,i,n,s))}function Mf(n,e,t,...i){n=Mc(n,fi);const s=Mc(n.firestore,Of),a=M1(s);let l;return l=typeof(e=Ln(e))=="string"||e instanceof Lg?lL(a,"updateDoc",n._key,e,t,i):oL(a,"updateDoc",n._key,e),$v(s,[l.toMutation(n._key,Pr.exists(!0))])}function Ug(n){return $v(Mc(n.firestore,Of),[new wv(n._key,Pr.none())])}function jc(n,e){const t=Mc(n.firestore,Of),i=wa(n),s=fL(n.converter,e);return $v(t,[aL(M1(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Pr.exists(!1))]).then(()=>i)}function $v(n,e){return function(i,s){const a=new Il;return i.asyncQueue.enqueueAndForget(async()=>Fj(await Qj(i),s,a)),a.promise}(N1(n),e)}(function(e,t=!0){(function(s){uh=s})($c),Lr(new dr("firestore",(i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),u=new Of(new n2(i.getProvider("auth-internal")),new r2(l,i.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ye(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cf(f.options.projectId,y)}(l,s),l);return a={useFetchStreams:t,...a},u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),ms(xw,Ew,e),ms(xw,Ew,"esm2020")})();var gL="firebase",yL="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(gL,yL,"app");const U1="@firebase/installations",qv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=1e4,B1=`w:${qv}`,H1="FIS_v2",_L="https://firebaseinstallations.googleapis.com/v1",bL=3600*1e3,vL="installations",xL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Lc=new Hc(vL,xL,EL);function $1(n){return n instanceof mr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1({projectId:n}){return`${_L}/projects/${n}/installations`}function G1(n){return{token:n.token,requestStatus:2,expiresIn:TL(n.expiresIn),creationTime:Date.now()}}async function W1(n,e){const i=(await e.json()).error;return Lc.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function K1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function wL(n,{refreshToken:e}){const t=K1(n);return t.append("Authorization",SL(e)),t}async function Y1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function TL(n){return Number(n.replace("s","000"))}function SL(n){return`${H1} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=q1(n),s=K1(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={fid:t,authVersion:H1,appId:n.appId,sdkVersion:B1},u={method:"POST",headers:s,body:JSON.stringify(l)},h=await Y1(()=>fetch(i,u));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:G1(f.authToken)}}else throw await W1("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=/^[cdef][\w-]{21}$/,Vb="";function IL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=kL(n);return RL.test(t)?t:Vb}catch{return Vb}}function kL(n){return CL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Map;function Z1(n,e){const t=zg(n);J1(t,e),NL(t,e)}function J1(n,e){const t=Q1.get(n);if(t)for(const i of t)i(e)}function NL(n,e){const t=DL();t&&t.postMessage({key:n,fid:e}),OL()}let kc=null;function DL(){return!kc&&"BroadcastChannel"in self&&(kc=new BroadcastChannel("[Firebase] FID Change"),kc.onmessage=n=>{J1(n.data.key,n.data.fid)}),kc}function OL(){Q1.size===0&&kc&&(kc.close(),kc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML="firebase-installations-database",PL=1,Vc="firebase-installations-store";let L_=null;function Gv(){return L_||(L_=cC(ML,PL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Vc)}}})),L_}async function Yp(n,e){const t=zg(n),s=(await Gv()).transaction(Vc,"readwrite"),a=s.objectStore(Vc),l=await a.get(t);return await a.put(e,t),await s.done,(!l||l.fid!==e.fid)&&Z1(n,e.fid),e}async function eR(n){const e=zg(n),i=(await Gv()).transaction(Vc,"readwrite");await i.objectStore(Vc).delete(e),await i.done}async function Bg(n,e){const t=zg(n),s=(await Gv()).transaction(Vc,"readwrite"),a=s.objectStore(Vc),l=await a.get(t),u=e(l);return u===void 0?await a.delete(t):await a.put(u,t),await s.done,u&&(!l||l.fid!==u.fid)&&Z1(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(n){let e;const t=await Bg(n.appConfig,i=>{const s=jL(i),a=LL(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===Vb?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function jL(n){const e=n||{fid:IL(),registrationStatus:0};return tR(e)}function LL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Lc.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=VL(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:FL(n)}:{installationEntry:e}}async function VL(n,e){try{const t=await AL(n,e);return Yp(n.appConfig,t)}catch(t){throw $1(t)&&t.customData.serverCode===409?await eR(n.appConfig):await Yp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function FL(n){let e=await gT(n.appConfig);for(;e.registrationStatus===1;)await X1(100),e=await gT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Wv(n);return i||t}return e}function gT(n){return Bg(n,e=>{if(!e)throw Lc.create("installation-not-found");return tR(e)})}function tR(n){return UL(n)?{fid:n.fid,registrationStatus:0}:n}function UL(n){return n.registrationStatus===1&&n.registrationTime+z1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL({appConfig:n,heartbeatServiceProvider:e},t){const i=BL(n,t),s=wL(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={installation:{sdkVersion:B1,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},h=await Y1(()=>fetch(i,u));if(h.ok){const f=await h.json();return G1(f)}else throw await W1("Generate Auth Token",h)}function BL(n,{fid:e}){return`${q1(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kv(n,e=!1){let t;const i=await Bg(n.appConfig,a=>{if(!nR(a))throw Lc.create("not-registered");const l=a.authToken;if(!e&&qL(l))return a;if(l.requestStatus===1)return t=HL(n,e),a;{if(!navigator.onLine)throw Lc.create("app-offline");const u=WL(a);return t=$L(n,u),u}});return t?await t:i.authToken}async function HL(n,e){let t=await yT(n.appConfig);for(;t.authToken.requestStatus===1;)await X1(100),t=await yT(n.appConfig);const i=t.authToken;return i.requestStatus===0?Kv(n,e):i}function yT(n){return Bg(n,e=>{if(!nR(e))throw Lc.create("not-registered");const t=e.authToken;return KL(t)?{...e,authToken:{requestStatus:0}}:e})}async function $L(n,e){try{const t=await zL(n,e),i={...e,authToken:t};return await Yp(n.appConfig,i),t}catch(t){if($1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await eR(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Yp(n.appConfig,i)}throw t}}function nR(n){return n!==void 0&&n.registrationStatus===2}function qL(n){return n.requestStatus===2&&!GL(n)}function GL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+bL}function WL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function KL(n){return n.requestStatus===1&&n.requestTime+z1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(n){const e=n,{installationEntry:t,registrationPromise:i}=await Wv(e);return i?i.catch(console.error):Kv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(n,e=!1){const t=n;return await QL(t),(await Kv(t,e)).token}async function QL(n){const{registrationPromise:e}=await Wv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(n){if(!n||!n.options)throw V_("App Configuration");if(!n.name)throw V_("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw V_(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function V_(n){return Lc.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="installations",JL="installations-internal",eV=n=>{const e=n.getProvider("app").getImmediate(),t=ZL(e),i=Bl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},tV=n=>{const e=n.getProvider("app").getImmediate(),t=Bl(e,iR).getImmediate();return{getId:()=>YL(t),getToken:s=>XL(t,s)}};function nV(){Lr(new dr(iR,eV,"PUBLIC")),Lr(new dr(JL,tV,"PRIVATE"))}nV();ms(U1,qv);ms(U1,qv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="analytics",iV="firebase_id",sV="origin",rV=60*1e3,aV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new xg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ls=new Hc("analytics","Analytics",oV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n){if(!n.startsWith(Yv)){const e=Ls.create("invalid-gtag-resource",{gtagURL:n});return ps.warn(e.message),""}return n}function sR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function cV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function uV(n,e){const t=cV("firebase-js-sdk-policy",{createScriptURL:lV}),i=document.createElement("script"),s=`${Yv}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function hV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function dV(n,e,t,i,s,a){const l=i[s];try{if(l)await e[l];else{const h=(await sR(t)).find(f=>f.measurementId===s);h&&await e[h.appId]}}catch(u){ps.error(u)}n("config",s,a)}async function fV(n,e,t,i,s){try{let a=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await sR(t);for(const h of l){const f=u.find(v=>v.measurementId===h),y=f&&e[f.appId];if(y)a.push(y);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,s||{})}catch(a){ps.error(a)}}function mV(n,e,t,i){async function s(a,...l){try{if(a==="event"){const[u,h]=l;await fV(n,e,t,u,h)}else if(a==="config"){const[u,h]=l;await dV(n,e,t,i,u,h)}else if(a==="consent"){const[u,h]=l;n("consent",u,h)}else if(a==="get"){const[u,h,f]=l;n("get",u,h,f)}else if(a==="set"){const[u]=l;n("set",u)}else n(a,...l)}catch(u){ps.error(u)}}return s}function pV(n,e,t,i,s){let a=function(...l){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=mV(a,n,e,t),{gtagCore:a,wrappedGtag:window[s]}}function gV(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Yv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=30,_V=1e3;class bV{constructor(e={},t=_V){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const rR=new bV;function vV(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function xV(n){const{appId:e,apiKey:t}=n,i={method:"GET",headers:vV(t)},s=aV.replace("{app-id}",e),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let l="";try{const u=await a.json();u.error?.message&&(l=u.error.message)}catch{}throw Ls.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function EV(n,e=rR,t){const{appId:i,apiKey:s,measurementId:a}=n.options;if(!i)throw Ls.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:i};throw Ls.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new SV;return setTimeout(async()=>{u.abort()},rV),aR({appId:i,apiKey:s,measurementId:a},l,u,e)}async function aR(n,{throttleEndTimeMillis:e,backoffCount:t},i,s=rR){const{appId:a,measurementId:l}=n;try{await wV(i,e)}catch(u){if(l)return ps.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:l};throw u}try{const u=await xV(n);return s.deleteThrottleMetadata(a),u}catch(u){const h=u;if(!TV(h)){if(s.deleteThrottleMetadata(a),l)return ps.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:l};throw u}const f=Number(h?.customData?.httpStatus)===503?hw(t,s.intervalMillis,yV):hw(t,s.intervalMillis),y={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return s.setThrottleMetadata(a,y),ps.debug(`Calling attemptFetch again in ${f} millis`),aR(n,y,i,s)}}function wV(n,e){return new Promise((t,i)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(a),i(Ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function TV(n){if(!(n instanceof mr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class SV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function AV(n,e,t,i,s){if(s&&s.global){n("event",t,i);return}else{const a=await e,l={...i,send_to:a};n("event",t,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(){if(rC())try{await aC()}catch(n){return ps.warn(Ls.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return ps.warn(Ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function RV(n,e,t,i,s,a,l){const u=EV(n);u.then(x=>{t[x.measurementId]=x.appId,n.options.measurementId&&x.measurementId!==n.options.measurementId&&ps.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>ps.error(x)),e.push(u);const h=CV().then(x=>{if(x)return i.getId()}),[f,y]=await Promise.all([u,h]);gV(a)||uV(a,f.measurementId),s("js",new Date);const v=l?.config??{};return v[sV]="firebase",v.update=!0,y!=null&&(v[iV]=y),s("config",f.measurementId,v),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.app=e}_delete(){return delete Zd[this.app.options.appId],Promise.resolve()}}let Zd={},_T=[];const bT={};let F_="dataLayer",kV="gtag",vT,oR,xT=!1;function NV(){const n=[];if(sC()&&n.push("This is a browser extension environment."),PO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),t=Ls.create("invalid-analytics-context",{errorInfo:e});ps.warn(t.message)}}function DV(n,e,t){NV();const i=n.options.appId;if(!i)throw Ls.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ps.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ls.create("no-api-key");if(Zd[i]!=null)throw Ls.create("already-exists",{id:i});if(!xT){hV(F_);const{wrappedGtag:a,gtagCore:l}=pV(Zd,_T,bT,F_,kV);oR=a,vT=l,xT=!0}return Zd[i]=RV(n,_T,bT,e,vT,F_,t),new IV(n)}function OV(n=Eg()){n=Ln(n);const e=Bl(n,Xp);return e.isInitialized()?e.getImmediate():MV(n)}function MV(n,e={}){const t=Bl(n,Xp);if(t.isInitialized()){const s=t.getImmediate();if(Ol(e,t.getOptions()))return s;throw Ls.create("already-initialized")}return t.initialize({options:e})}function PV(n,e,t,i){n=Ln(n),AV(oR,Zd[n.app.options.appId],e,t,i).catch(s=>ps.error(s))}const ET="@firebase/analytics",wT="0.10.18";function jV(){Lr(new dr(Xp,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return DV(i,s,t)},"PUBLIC")),Lr(new dr("analytics-internal",n,"PRIVATE")),ms(ET,wT),ms(ET,wT,"esm2020");function n(e){try{const t=e.getProvider(Xp).getImmediate();return{logEvent:(i,s,a)=>PV(t,i,s,a)}}catch(t){throw Ls.create("interop-component-reg-failed",{reason:t})}}}jV();function lR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LV=lR,cR=new Hc("auth","Firebase",lR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=new xg("@firebase/auth");function VV(n,...e){Qp.logLevel<=kt.WARN&&Qp.warn(`Auth (${$c}): ${n}`,...e)}function Cp(n,...e){Qp.logLevel<=kt.ERROR&&Qp.error(`Auth (${$c}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n,...e){throw Xv(n,...e)}function _a(n,...e){return Xv(n,...e)}function uR(n,e,t){const i={...LV(),[e]:t};return new Hc("auth","Firebase",i).create(e,{appName:n.name})}function Nl(n){return uR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return cR.create(n,...e)}function lt(n,e,...t){if(!n)throw Xv(e,...t)}function _o(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Cp(e),new Error(e)}function Ro(n,e){n||_o(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof self<"u"&&self.location?.href||""}function FV(){return TT()==="http:"||TT()==="https:"}function TT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FV()||sC()||"connection"in navigator)?navigator.onLine:!0}function zV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ro(t>e,"Short delay should be less than long delay!"),this.isMobile=IO()||DO()}get(){return UV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n,e){Ro(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_o("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_o("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_o("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$V=new Pf(3e4,6e4);function Wc(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ql(n,e,t,i,s={}){return dR(n,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const u=Cf({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...a};return NO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Bc(n.emulatorConfig.host)&&(f.credentials="include"),hR.fetch()(await fR(n,n.config.apiHost,t,u),f)})}async function dR(n,e,t){n._canInitEmulator=!1;const i={...BV,...e};try{const s=new GV(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw ep(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ep(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw ep(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw ep(n,"user-disabled",l);const y=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw uR(n,y,f);Vr(n,y)}}catch(s){if(s instanceof mr)throw s;Vr(n,"network-request-failed",{message:String(s)})}}async function Hg(n,e,t,i,s={}){const a=await ql(n,e,t,i,s);return"mfaPendingCredential"in a&&Vr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function fR(n,e,t,i){const s=`${e}${t}?${i}`,a=n,l=a.config.emulator?Qv(n.config,s):`${n.config.apiScheme}://${s}`;return HV.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function qV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_a(this.auth,"network-request-failed")),$V.get())})}}function ep(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=_a(n,e,i);return s.customData._tokenResponse=t,s}function ST(n){return n!==void 0&&n.enterprise!==void 0}class WV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KV(n,e){return ql(n,"GET","/v2/recaptchaConfig",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(n,e){return ql(n,"POST","/v1/accounts:delete",e)}async function Zp(n,e){return ql(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XV(n,e=!1){const t=Ln(n),i=await t.getIdToken(e),s=Zv(i);lt(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:i,authTime:Jd(U_(s.auth_time)),issuedAtTime:Jd(U_(s.iat)),expirationTime:Jd(U_(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function U_(n){return Number(n)*1e3}function Zv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Cp("JWT malformed, contained fewer than 3 sections"),null;try{const s=ZA(t);return s?JSON.parse(s):(Cp("Failed to decode base64 JWT payload"),null)}catch(s){return Cp("Caught error parsing JWT payload as JSON",s?.toString()),null}}function AT(n){const e=Zv(n);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof mr&&QV(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function QV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jd(this.lastLoginAt),this.creationTime=Jd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jp(n){const e=n.auth,t=await n.getIdToken(),i=await ff(n,Zp(e,{idToken:t}));lt(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=s.providerUserInfo?.length?mR(s.providerUserInfo):[],l=e6(n.providerData,a),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!l?.length,f=u?h:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ub(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,y)}async function JV(n){const e=Ln(n);await Jp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e6(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function mR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(n,e){const t=await dR(n,{},async()=>{const i=Cf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await fR(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return n.emulatorConfig&&Bc(n.emulatorConfig.host)&&(h.credentials="include"),hR.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function n6(n,e){return ql(n,"POST","/v2/accounts:revokeToken",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const t=AT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await t6(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,l=new Gu;return i&&(lt(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(lt(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(lt(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gu,this.toJSON())}_performRefresh(){return _o("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n,e){lt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Or{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new ZV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ub(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ff(this,this.stsTokenManager.getToken(this.auth,e));return lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XV(this,e)}reload(){return JV(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Jp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Nl(this.auth));const e=await this.getIdToken();return await ff(this,YV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:x,isAnonymous:T,providerData:C,stsTokenManager:k}=t;lt(v&&k,e,"internal-error");const R=Gu.fromJSON(this.name,k);lt(typeof v=="string",e,"internal-error"),pl(i,e.name),pl(s,e.name),lt(typeof x=="boolean",e,"internal-error"),lt(typeof T=="boolean",e,"internal-error"),pl(a,e.name),pl(l,e.name),pl(u,e.name),pl(h,e.name),pl(f,e.name),pl(y,e.name);const j=new Or({uid:v,auth:e,email:s,emailVerified:x,displayName:i,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:R,createdAt:f,lastLoginAt:y});return C&&Array.isArray(C)&&(j.providerData=C.map(q=>({...q}))),h&&(j._redirectEventId=h),j}static async _fromIdTokenResponse(e,t,i=!1){const s=new Gu;s.updateFromServerResponse(t);const a=new Or({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Jp(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];lt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?mR(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new Gu;u.updateFromIdToken(i);const h=new Or({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ub(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;function bo(n){Ro(n instanceof Function,"Expected a class definition");let e=CT.get(n);return e?(Ro(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,CT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pR.type="NONE";const RT=pR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e,t){return`firebase:${n}:${e}:${t}`}class Wu{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Rp(this.userKey,s.apiKey,a),this.fullPersistenceKey=Rp("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zp(this.auth,{idToken:e}).catch(()=>{});return t?Or._fromGetAccountInfoResponse(this.auth,t,e):null}return Or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wu(bo(RT),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||bo(RT);const l=Rp(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const y=await f._get(l);if(y){let v;if(typeof y=="string"){const x=await Zp(e,{idToken:y}).catch(()=>{});if(!x)break;v=await Or._fromGetAccountInfoResponse(e,x,y)}else v=Or._fromJSON(e,y);f!==a&&(u=v),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Wu(a,e,i):(a=h[0],u&&await a._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new Wu(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xR(e))return"Blackberry";if(ER(e))return"Webos";if(yR(e))return"Safari";if((e.includes("chrome/")||_R(e))&&!e.includes("edge/"))return"Chrome";if(vR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function gR(n=Fi()){return/firefox\//i.test(n)}function yR(n=Fi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _R(n=Fi()){return/crios\//i.test(n)}function bR(n=Fi()){return/iemobile/i.test(n)}function vR(n=Fi()){return/android/i.test(n)}function xR(n=Fi()){return/blackberry/i.test(n)}function ER(n=Fi()){return/webos/i.test(n)}function Jv(n=Fi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function i6(n=Fi()){return Jv(n)&&!!window.navigator?.standalone}function s6(){return OO()&&document.documentMode===10}function wR(n=Fi()){return Jv(n)||vR(n)||ER(n)||xR(n)||/windows phone/i.test(n)||bR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n,e=[]){let t;switch(n){case"Browser":t=IT(Fi());break;case"Worker":t=`${IT(Fi())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$c}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,u)=>{try{const h=e(a);l(h)}catch(h){u(h)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(n,e={}){return ql(n,"GET","/v2/passwordPolicy",Wc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=6;class l6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??o6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kT(this),this.idTokenSubscription=new kT(this),this.beforeStateQueue=new r6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zp(this,{idToken:e}),i=await Or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(lr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Nl(this));const t=e?Ln(e):null;return t&&lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Nl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Nl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await a6(this),t=new l6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await n6(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bo(e)||this._popupRedirectResolver;lt(t,this,"argument-error"),this.redirectPersistenceManager=await Wu.create(this,[bo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&VV(`Error while retrieving App Check token: ${e.error}`),e?.token}}function mh(n){return Ln(n)}class kT{constructor(e){this.auth=e,this.observer=null,this.addObserver=UO(t=>this.observer=t)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u6(n){$g=n}function SR(n){return $g.loadJS(n)}function h6(){return $g.recaptchaEnterpriseScript}function d6(){return $g.gapiScript}function f6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class m6{constructor(){this.enterprise=new p6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class p6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const g6="recaptcha-enterprise",AR="NO_RECAPTCHA";class y6{constructor(e){this.type=g6,this.auth=mh(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{KV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new WV(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,l,u){const h=window.grecaptcha;ST(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(AR)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m6().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(u=>{if(!t&&ST(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=h6();h.length!==0&&(h+=u),SR(h).then(()=>{s(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function NT(n,e,t,i=!1,s=!1){const a=new y6(n);let l;if(s)l=AR;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function DT(n,e,t,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await NT(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await NT(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(n,e){const t=Bl(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Ol(a,e??{}))return s;Vr(s,"already-initialized")}return t.initialize({options:e})}function b6(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(bo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function v6(n,e,t){const i=mh(n);lt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=CR(e),{host:l,port:u}=x6(e),h=u===null?"":`:${u}`,f={url:`${a}//${l}${h}/`},y=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){lt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),lt(Ol(f,i.config.emulator)&&Ol(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Bc(l)?(hv(`${a}//${l}${h}`),dv("Auth",!0)):E6()}function CR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function x6(n){const e=CR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:OT(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:OT(l)}}}function OT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function E6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _o("not implemented")}_getIdTokenResponse(e){return _o("not implemented")}_linkToIdToken(e,t){return _o("not implemented")}_getReauthenticationResolver(e){return _o("not implemented")}}async function w6(n,e){return ql(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(n,e){return Hg(n,"POST","/v1/accounts:signInWithPassword",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(n,e){return Hg(n,"POST","/v1/accounts:signInWithEmailLink",Wc(n,e))}async function A6(n,e){return Hg(n,"POST","/v1/accounts:signInWithEmailLink",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends e0{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new mf(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new mf(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DT(e,t,"signInWithPassword",T6);case"emailLink":return S6(e,{email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DT(e,i,"signUpPassword",w6);case"emailLink":return A6(e,{idToken:t,email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(n,e){return Hg(n,"POST","/v1/accounts:signInWithIdp",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="http://localhost";class Fc extends e0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=t;if(!i||!s)return null;const l=new Fc(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ku(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ku(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ku(e,t)}buildRequest(){const e={requestUri:C6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function I6(n){const e=Vd(Fd(n)).link,t=e?Vd(Fd(e)).deep_link_id:null,i=Vd(Fd(n)).deep_link_id;return(i?Vd(Fd(i)).link:null)||i||t||e||n}class t0{constructor(e){const t=Vd(Fd(e)),i=t.apiKey??null,s=t.oobCode??null,a=R6(t.mode??null);lt(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=I6(e);try{return new t0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this.providerId=ph.PROVIDER_ID}static credential(e,t){return mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=t0.parseLink(t);return lt(i,"argument-error"),mf._fromEmailAndCode(e,i.code,i.tenantId)}}ph.PROVIDER_ID="password";ph.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ph.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends RR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends jf{constructor(){super("facebook.com")}static credential(e){return Fc._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bl.credential(e.oauthAccessToken)}catch{return null}}}bl.FACEBOOK_SIGN_IN_METHOD="facebook.com";bl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends jf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fc._fromParams({providerId:vl.PROVIDER_ID,signInMethod:vl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vl.credentialFromTaggedObject(e)}static credentialFromError(e){return vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vl.credential(t,i)}catch{return null}}}vl.GOOGLE_SIGN_IN_METHOD="google.com";vl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends jf{constructor(){super("github.com")}static credential(e){return Fc._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xl.credential(e.oauthAccessToken)}catch{return null}}}xl.GITHUB_SIGN_IN_METHOD="github.com";xl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends jf{constructor(){super("twitter.com")}static credential(e,t){return Fc._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return El.credential(t,i)}catch{return null}}}El.TWITTER_SIGN_IN_METHOD="twitter.com";El.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await Or._fromIdTokenResponse(e,i,s),l=MT(i);return new ih({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=MT(i);return new ih({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function MT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends mr{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,eg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new eg(e,t,i,s)}}function IR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?eg._fromErrorAndOperation(n,a,e,i):a})}async function k6(n,e,t=!1){const i=await ff(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ih._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(n,e,t=!1){const{auth:i}=n;if(lr(i.app))return Promise.reject(Nl(i));const s="reauthenticate";try{const a=await ff(n,IR(i,s,e,n),t);lt(a.idToken,i,"internal-error");const l=Zv(a.idToken);lt(l,i,"internal-error");const{sub:u}=l;return lt(n.uid===u,i,"user-mismatch"),ih._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Vr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(n,e,t=!1){if(lr(n.app))return Promise.reject(Nl(n));const i="signIn",s=await IR(n,i,e),a=await ih._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}async function D6(n,e){return kR(mh(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(n){const e=mh(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function M6(n,e,t){return lr(n.app)?Promise.reject(Nl(n)):D6(Ln(n),ph.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&O6(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(n,e){return Ln(n).setPersistence(e)}function j6(n,e,t,i){return Ln(n).onIdTokenChanged(e,t,i)}function L6(n,e,t){return Ln(n).beforeAuthStateChanged(e,t)}function V6(n,e,t,i){return Ln(n).onAuthStateChanged(e,t,i)}function F6(n){return Ln(n).signOut()}const tg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tg,"1"),this.storage.removeItem(tg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=1e3,z6=10;class DR extends NR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);s6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,z6):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},U6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}DR.type="LOCAL";const OR=DR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR extends NR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}MR.type="SESSION";const PR=MR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new qg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(t.origin,a)),h=await B6(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,h)=>{const f=n0("",20);s.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(y),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(){return window}function $6(n){ba().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return typeof ba().WorkerGlobalScope<"u"&&typeof ba().importScripts=="function"}async function q6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G6(){return navigator?.serviceWorker?.controller||null}function W6(){return jR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="firebaseLocalStorageDb",K6=1,ng="firebaseLocalStorage",VR="fbase_key";class Lf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gg(n,e){return n.transaction([ng],e?"readwrite":"readonly").objectStore(ng)}function Y6(){const n=indexedDB.deleteDatabase(LR);return new Lf(n).toPromise()}function zb(){const n=indexedDB.open(LR,K6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ng,{keyPath:VR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ng)?e(i):(i.close(),await Y6(),e(await zb()))})})}async function PT(n,e,t){const i=Gg(n,!0).put({[VR]:e,value:t});return new Lf(i).toPromise()}async function X6(n,e){const t=Gg(n,!1).get(e),i=await new Lf(t).toPromise();return i===void 0?null:i.value}function jT(n,e){const t=Gg(n,!0).delete(e);return new Lf(t).toPromise()}const Q6=800,Z6=3;class FR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Z6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qg._getInstance(W6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await q6(),!this.activeServiceWorker)return;this.sender=new H6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zb();return await PT(e,tg,"1"),await jT(e,tg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>PT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>X6(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Gg(s,!1).getAll();return new Lf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FR.type="LOCAL";const J6=FR;new Pf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(n,e){return e?bo(e):(lt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends e0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ku(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ku(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ku(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function t5(n){return kR(n.auth,new i0(n),n.bypassAuthState)}function n5(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),N6(t,new i0(n),n.bypassAuthState)}async function i5(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),k6(t,new i0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return t5;case"linkViaPopup":case"linkViaRedirect":return i5;case"reauthViaPopup":case"reauthViaRedirect":return n5;default:Vr(this.auth,"internal-error")}}resolve(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=new Pf(2e3,1e4);class Bu extends UR{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Bu.currentPopupAction&&Bu.currentPopupAction.cancel(),Bu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");const e=n0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_a(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_a(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_a(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,s5.get())};e()}}Bu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="pendingRedirect",Ip=new Map;class a5 extends UR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ip.get(this.auth._key());if(!e){try{const i=await o5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ip.set(this.auth._key(),e)}return this.bypassAuthState||Ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o5(n,e){const t=u5(e),i=c5(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function l5(n,e){Ip.set(n._key(),e)}function c5(n){return bo(n._redirectPersistence)}function u5(n){return Rp(r5,n.config.apiKey,n.name)}async function h5(n,e,t=!1){if(lr(n.app))return Promise.reject(Nl(n));const i=mh(n),s=e5(i,e),l=await new a5(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=600*1e3;class f5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zR(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(_a(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LT(e))}saveEventToCache(e){this.cachedEventUids.add(LT(e)),this.lastProcessedEventTime=Date.now()}}function LT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function m5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(n,e={}){return ql(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y5=/^https?/;async function _5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await p5(n);for(const t of e)try{if(b5(t))return}catch{}Vr(n,"unauthorized-domain")}function b5(n){const e=Fb(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!y5.test(t))return!1;if(g5.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=new Pf(3e4,6e4);function VT(){const n=ba().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function x5(n){return new Promise((e,t)=>{function i(){VT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VT(),t(_a(n,"network-request-failed"))},timeout:v5.get()})}if(ba().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ba().gapi?.load)i();else{const s=f6("iframefcb");return ba()[s]=()=>{gapi.load?i():t(_a(n,"network-request-failed"))},SR(`${d6()}?onload=${s}`).catch(a=>t(a))}}).catch(e=>{throw kp=null,e})}let kp=null;function E5(n){return kp=kp||x5(n),kp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=new Pf(5e3,15e3),T5="__/auth/iframe",S5="emulator/auth/iframe",A5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R5(n){const e=n.config;lt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qv(e,S5):`https://${n.config.authDomain}/${T5}`,i={apiKey:e.apiKey,appName:n.name,v:$c},s=C5.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Cf(i).slice(1)}`}async function I5(n){const e=await E5(n),t=ba().gapi;return lt(t,n,"internal-error"),e.open({where:document.body,url:R5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A5,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=_a(n,"network-request-failed"),u=ba().setTimeout(()=>{a(l)},w5.get());function h(){ba().clearTimeout(u),s(i)}i.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N5=500,D5=600,O5="_blank",M5="http://localhost";class FT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P5(n,e,t,i=N5,s=D5){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...k5,width:i.toString(),height:s.toString(),top:a,left:l},f=Fi().toLowerCase();t&&(u=_R(f)?O5:t),gR(f)&&(e=e||M5,h.scrollbars="yes");const y=Object.entries(h).reduce((x,[T,C])=>`${x}${T}=${C},`,"");if(i6(f)&&u!=="_self")return j5(e||"",u),new FT(null);const v=window.open(e||"",u,y);lt(v,n,"popup-blocked");try{v.focus()}catch{}return new FT(v)}function j5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="__/auth/handler",V5="emulator/auth/handler",F5=encodeURIComponent("fac");async function UT(n,e,t,i,s,a){lt(n.config.authDomain,n,"auth-domain-config-required"),lt(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:$c,eventId:s};if(e instanceof RR){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",FO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))l[y]=v}if(e instanceof jf){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const h=await n._getAppCheckToken(),f=h?`#${F5}=${encodeURIComponent(h)}`:"";return`${U5(n)}?${Cf(u).slice(1)}${f}`}function U5({config:n}){return n.emulator?Qv(n,V5):`https://${n.authDomain}/${L5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="webStorageSupport";class z5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PR,this._completeRedirectFn=h5,this._overrideRedirectResult=l5}async _openPopup(e,t,i,s){Ro(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await UT(e,t,i,Fb(),s);return P5(e,a,n0())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await UT(e,t,i,Fb(),s);return $6(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ro(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await I5(e),i=new f5(e);return t.register("authEvent",s=>(lt(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(z_,{type:z_},s=>{const a=s?.[0]?.[z_];a!==void 0&&t(!!a),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wR()||yR()||Jv()}}const B5=z5;var zT="@firebase/auth",BT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q5(n){Lr(new dr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;lt(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TR(n)},f=new c6(i,s,a,h);return b6(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Lr(new dr("auth-internal",e=>{const t=mh(e.getProvider("auth").getImmediate());return(i=>new H5(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(zT,BT,$5(n)),ms(zT,BT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=300,W5=nC("authIdTokenMaxAge")||G5;let HT=null;const K5=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>W5)return;const s=t?.token;HT!==s&&(HT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Y5(n=Eg()){const e=Bl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_6(n,{popupRedirectResolver:B5,persistence:[J6,OR,PR]}),i=nC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=K5(a.toString());L6(t,l,()=>l(t.currentUser)),j6(t,u=>l(u))}}const s=JA("auth");return s&&v6(t,`http://${s}`),t}function X5(){return document.getElementsByTagName("head")?.[0]??document}u6({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=_a("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",X5().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q5("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="firebasestorage.googleapis.com",Q5="storageBucket",Z5=120*1e3,J5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends mr{constructor(e,t,i=0){super(B_(e),`Firebase Storage: ${t} (${B_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ca.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return B_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ta;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ta||(Ta={}));function B_(n){return"storage/"+n}function e4(){const n="An unknown error occurred, please check the error payload for server response.";return new Ca(Ta.UNKNOWN,n)}function t4(){return new Ca(Ta.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function n4(){return new Ca(Ta.CANCELED,"User canceled the upload/download.")}function i4(n){return new Ca(Ta.INVALID_URL,"Invalid URL '"+n+"'.")}function s4(n){return new Ca(Ta.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function $T(n){return new Ca(Ta.INVALID_ARGUMENT,n)}function HR(){return new Ca(Ta.APP_DELETED,"The Firebase app was deleted.")}function r4(n){return new Ca(Ta.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Mr.makeFromUrl(e,t)}catch{return new Mr(e,"")}if(i.path==="")return i;throw s4(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function f(X){X.path_=decodeURIComponent(X.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${y}/b/${s}/o${x}`,"i"),C={bucket:1,path:3},k=t===BR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",j=new RegExp(`^https?://${k}/${s}/${R}`,"i"),G=[{regex:u,indices:h,postModify:a},{regex:T,indices:C,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let X=0;X<G.length;X++){const Y=G[X],J=Y.regex.exec(e);if(J){const F=J[Y.indices.bucket];let I=J[Y.indices.path];I||(I=""),i=new Mr(F,I),Y.postModify(i);break}}if(i==null)throw i4(e);return i}}class a4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(n,e,t){let i=1,s=null,a=null,l=!1,u=0;function h(){return u===2}let f=!1;function y(...R){f||(f=!0,e.apply(null,R))}function v(R){s=setTimeout(()=>{s=null,n(T,h())},R)}function x(){a&&clearTimeout(a)}function T(R,...j){if(f){x();return}if(R){x(),y.call(null,R,...j);return}if(h()||l){x(),y.call(null,R,...j);return}i<64&&(i*=2);let G;u===1?(u=2,G=0):G=(i+Math.random())*1e3,v(G)}let C=!1;function k(R){C||(C=!0,x(),!f&&(s!==null?(R||(u=2),clearTimeout(s),v(0)):R||(u=1)))}return v(0),a=setTimeout(()=>{l=!0,k(!0)},t),k}function l4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(n){return n!==void 0}function qT(n,e,t,i){if(i<e)throw $T(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw $T(`Invalid value for '${n}'. Expected ${t} or less.`)}function u4(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var ig;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ig||(ig={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,t,i,s,a,l,u,h,f,y,v,x=!0,T=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=y,this.connectionFactory_=v,this.retry=x,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,k)=>{this.resolve_=C,this.reject_=k,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new tp(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const u=a.getErrorCode()===ig.NO_ERROR,h=a.getStatus();if(!u||h4(h,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===ig.ABORT;i(!1,new tp(!1,null,y));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new tp(f,a))})},t=(i,s)=>{const a=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());c4(h)?a(h):a()}catch(h){l(h)}else if(u!==null){const h=e4();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(s.canceled){const h=this.appDelete_?HR():n4();l(h)}else{const h=t4();l(h)}};this.canceled_?t(!1,new tp(!1,null,!0)):this.backoffId_=o4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tp{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function f4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function m4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function p4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function g4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function y4(n,e,t,i,s,a,l=!0,u=!1){const h=u4(n.urlParams),f=n.url+h,y=Object.assign({},n.headers);return p4(y,e),f4(y,t),m4(y,a),g4(y,i),new d4(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function b4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t){this._service=e,t instanceof Mr?this._location=t:this._location=Mr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new sg(e,t)}get root(){const e=new Mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b4(this._location.path)}get storage(){return this._service}get parent(){const e=_4(this._location.path);if(e===null)return null;const t=new Mr(this._location.bucket,e);return new sg(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw r4(e)}}function GT(n,e){const t=e?.[Q5];return t==null?null:Mr.makeFromBucketSpec(t,n)}function v4(n,e,t,i={}){n.host=`${e}:${t}`;const s=Bc(e);s&&(hv(`https://${n.host}/b`),dv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:iC(a,n.app.options.projectId))}class x4{constructor(e,t,i,s,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=BR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z5,this._maxUploadRetryTime=J5,this._requests=new Set,s!=null?this._bucket=Mr.makeFromBucketSpec(s,this._host):this._bucket=GT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mr.makeFromBucketSpec(this._url,e):this._bucket=GT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sg(this,e)}_makeRequest(e,t,i,s,a=!0){if(this._deleted)return new a4(HR());{const l=y4(e,this._appId,i,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const WT="@firebase/storage",KT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="storage";function E4(n=Eg(),e){n=Ln(n);const i=Bl(n,$R).getImmediate({identifier:e}),s=eC("storage");return s&&w4(i,...s),i}function w4(n,e,t,i={}){v4(n,e,t,i)}function T4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new x4(t,i,s,e,$c)}function S4(){Lr(new dr($R,T4,"PUBLIC").setMultipleInstances(!0)),ms(WT,KT,""),ms(WT,KT,"esm2020")}S4();const A4={apiKey:"AIzaSyBANwmEJ1kcCHD7-G2Zh-SGwkFf4b814Ag",authDomain:"kombuchaprod.firebaseapp.com",projectId:"kombuchaprod",storageBucket:"kombuchaprod.firebasestorage.app",messagingSenderId:"530701989412",appId:"1:530701989412:web:42f34bba68a8d78c970ab1",measurementId:"G-FW5SZV6G31"},Wg=uC(A4);OV(Wg);const rg=Y5(Wg),At=tL(Wg);E4(Wg);P6(rg,OR).then(()=>{console.log("Firebase Auth persistence set to local storage (prod)")}).catch(n=>{console.error("Error setting Firebase Auth persistence (prod):",n)});const Ul="America/Mexico_City",Ps=()=>new Date().toLocaleDateString("en-CA",{timeZone:Ul}),ag=()=>{const n=new Date;return new Date(n.toLocaleString("en-US",{timeZone:Ul})).toISOString()},qR=()=>new Date().toLocaleDateString("en-CA",{timeZone:Ul,year:"numeric",month:"2-digit"}).replace("/","-"),da=n=>new Date(n).toLocaleDateString("es-ES",{timeZone:Ul}),C4=(n=0)=>{const e=new Date;return e.setDate(e.getDate()+n),e.toLocaleDateString("en-CA",{timeZone:Ul})},H_=n=>n?new Date(n+"-01").toLocaleDateString("es-ES",{month:"long",year:"numeric",timeZone:Ul}):"este mes",R4=n=>{const e=new Date(n+"T00:00:00"),t=new Date,i=new Date(e.toLocaleString("en-US",{timeZone:Ul})),s=new Date(t.toLocaleString("en-US",{timeZone:Ul}));i.setHours(0,0,0,0),s.setHours(0,0,0,0);const a=Math.abs(s-i),l=Math.ceil(a/(1e3*60*60*24));return l===0?"Hoy":l===1?"Ayer":l<=7?`Hace ${l} das`:da(n)},I4=n=>{if(!n||!n.fecha||!n.items)return null;const e=n.items.reduce((v,x)=>v+(parseInt(x.cantidad)||0),0);if(e===0)return null;const t=e,i=new Date(n.fecha+"T00:00:00"),s=new Date(i);s.setDate(i.getDate()+t);const a=s.toISOString().split("T")[0],l=Ps(),u=a<=l,h=new Date(l+"T00:00:00"),f=new Date(a+"T00:00:00"),y=Math.floor((h-f)/(1e3*60*60*24));return{customerId:n.cliente,lastSaleId:n.id,lastSaleDate:n.fecha,totalKombuchas:e,daysToWait:t,reminderDate:a,isDue:u,daysOverdue:u?Math.abs(y):0,daysUntilDue:u?0:Math.abs(y),status:"pending"}},s0=(n,e)=>{const t=[],i={};return n.forEach(s=>{i[s.cliente]||(i[s.cliente]=[]),i[s.cliente].push(s)}),Object.keys(i).forEach(s=>{const l=i[s].sort((h,f)=>new Date(f.fecha)-new Date(h.fecha))[0],u=I4(l);if(u){const h=e.find(f=>f.id===s);h&&t.push({...u,customerName:h.nombre,customerPhone:h.telefono,customerAddress:h.direccion,notificationId:`${s}_${l.id}_${u.reminderDate}`})}}),t.sort((s,a)=>s.isDue&&!a.isDue?-1:!s.isDue&&a.isDue?1:s.isDue&&a.isDue?a.daysOverdue-s.daysOverdue:s.daysUntilDue-a.daysUntilDue)},og=n=>{const e=n.filter(s=>s.status==="pending"),t=e.filter(s=>s.isDue),i=e.filter(s=>!s.isDue);return{total:n.length,pending:e.length,overdue:t.length,upcoming:i.length,contacted:n.filter(s=>s.status==="contacted").length,dismissed:n.filter(s=>s.status==="dismissed").length}},GR=n=>{const{customerName:e,totalKombuchas:t,isDue:i,daysOverdue:s,daysUntilDue:a}=n;return i?s===0?`Hoy es el da! Contacta a ${e} - compr ${t} kombuchas`:s===1?`Ayer era el da! Contacta a ${e} - compr ${t} kombuchas`:`${s} das de retraso! Contacta a ${e} - compr ${t} kombuchas`:a===1?`Maana contacta a ${e} - compr ${t} kombuchas`:`En ${a} das contacta a ${e} - compr ${t} kombuchas`},Np=n=>n.isDue?n.daysOverdue>=7?"high":n.daysOverdue>=3?"medium":"low":"low";/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vf(n){return n+.5|0}const Tl=(n,e,t)=>Math.max(Math.min(n,t),e);function Hd(n){return Tl(Vf(n*2.55),0,255)}function Dl(n){return Tl(Vf(n*255),0,255)}function po(n){return Tl(Vf(n/2.55)/100,0,1)}function YT(n){return Tl(Vf(n*100),0,100)}const or={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bb=[..."0123456789ABCDEF"],k4=n=>Bb[n&15],N4=n=>Bb[(n&240)>>4]+Bb[n&15],np=n=>(n&240)>>4===(n&15),D4=n=>np(n.r)&&np(n.g)&&np(n.b)&&np(n.a);function O4(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&or[n[1]]*17,g:255&or[n[2]]*17,b:255&or[n[3]]*17,a:e===5?or[n[4]]*17:255}:(e===7||e===9)&&(t={r:or[n[1]]<<4|or[n[2]],g:or[n[3]]<<4|or[n[4]],b:or[n[5]]<<4|or[n[6]],a:e===9?or[n[7]]<<4|or[n[8]]:255})),t}const M4=(n,e)=>n<255?e(n):"";function P4(n){var e=D4(n)?k4:N4;return n?"#"+e(n.r)+e(n.g)+e(n.b)+M4(n.a,e):void 0}const j4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function WR(n,e,t){const i=e*Math.min(t,1-t),s=(a,l=(a+n/30)%12)=>t-i*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function L4(n,e,t){const i=(s,a=(s+n/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function V4(n,e,t){const i=WR(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function F4(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function r0(n){const t=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(t,i,s),l=Math.min(t,i,s),u=(a+l)/2;let h,f,y;return a!==l&&(y=a-l,f=u>.5?y/(2-a-l):y/(a+l),h=F4(t,i,s,y,a),h=h*60+.5),[h|0,f||0,u]}function a0(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Dl)}function o0(n,e,t){return a0(WR,n,e,t)}function U4(n,e,t){return a0(V4,n,e,t)}function z4(n,e,t){return a0(L4,n,e,t)}function KR(n){return(n%360+360)%360}function B4(n){const e=j4.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Hd(+e[5]):Dl(+e[5]));const s=KR(+e[2]),a=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=U4(s,a,l):e[1]==="hsv"?i=z4(s,a,l):i=o0(s,a,l),{r:i[0],g:i[1],b:i[2],a:t}}function H4(n,e){var t=r0(n);t[0]=KR(t[0]+e),t=o0(t),n.r=t[0],n.g=t[1],n.b=t[2]}function $4(n){if(!n)return;const e=r0(n),t=e[0],i=YT(e[1]),s=YT(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${po(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const XT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},QT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function q4(){const n={},e=Object.keys(QT),t=Object.keys(XT);let i,s,a,l,u;for(i=0;i<e.length;i++){for(l=u=e[i],s=0;s<t.length;s++)a=t[s],u=u.replace(a,XT[a]);a=parseInt(QT[l],16),n[u]=[a>>16&255,a>>8&255,a&255]}return n}let ip;function G4(n){ip||(ip=q4(),ip.transparent=[0,0,0,0]);const e=ip[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const W4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function K4(n){const e=W4.exec(n);let t=255,i,s,a;if(e){if(e[7]!==i){const l=+e[7];t=e[8]?Hd(l):Tl(l*255,0,255)}return i=+e[1],s=+e[3],a=+e[5],i=255&(e[2]?Hd(i):Tl(i,0,255)),s=255&(e[4]?Hd(s):Tl(s,0,255)),a=255&(e[6]?Hd(a):Tl(a,0,255)),{r:i,g:s,b:a,a:t}}}function Y4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${po(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const $_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ou=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function X4(n,e,t){const i=Ou(po(n.r)),s=Ou(po(n.g)),a=Ou(po(n.b));return{r:Dl($_(i+t*(Ou(po(e.r))-i))),g:Dl($_(s+t*(Ou(po(e.g))-s))),b:Dl($_(a+t*(Ou(po(e.b))-a))),a:n.a+t*(e.a-n.a)}}function sp(n,e,t){if(n){let i=r0(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=o0(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function YR(n,e){return n&&Object.assign(e||{},n)}function ZT(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Dl(n[3]))):(e=YR(n,{r:0,g:0,b:0,a:1}),e.a=Dl(e.a)),e}function Q4(n){return n.charAt(0)==="r"?K4(n):B4(n)}class pf{constructor(e){if(e instanceof pf)return e;const t=typeof e;let i;t==="object"?i=ZT(e):t==="string"&&(i=O4(e)||G4(e)||Q4(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=YR(this._rgb);return e&&(e.a=po(e.a)),e}set rgb(e){this._rgb=ZT(e)}rgbString(){return this._valid?Y4(this._rgb):void 0}hexString(){return this._valid?P4(this._rgb):void 0}hslString(){return this._valid?$4(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let a;const l=t===a?.5:t,u=2*l-1,h=i.a-s.a,f=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;a=1-f,i.r=255&f*i.r+a*s.r+.5,i.g=255&f*i.g+a*s.g+.5,i.b=255&f*i.b+a*s.b+.5,i.a=l*i.a+(1-l)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=X4(this._rgb,e._rgb,t)),this}clone(){return new pf(this.rgb)}alpha(e){return this._rgb.a=Dl(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Vf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return sp(this._rgb,2,e),this}darken(e){return sp(this._rgb,2,-e),this}saturate(e){return sp(this._rgb,1,e),this}desaturate(e){return sp(this._rgb,1,-e),this}rotate(e){return H4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function uo(){}const Z4=(()=>{let n=0;return()=>n++})();function qt(n){return n==null}function Gn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ot(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ui(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function la(n,e){return Ui(n)?n:e}function vt(n,e){return typeof n>"u"?e:n}const J4=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,XR=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function hn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Qt(n,e,t,i){let s,a,l;if(Gn(n))for(a=n.length,s=0;s<a;s++)e.call(t,n[s],s);else if(Ot(n))for(l=Object.keys(n),a=l.length,s=0;s<a;s++)e.call(t,n[l[s]],l[s])}function lg(n,e){let t,i,s,a;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],a=e[t],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function cg(n){if(Gn(n))return n.map(cg);if(Ot(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=cg(n[t[s]]);return e}return n}function QR(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function e3(n,e,t,i){if(!QR(n))return;const s=e[n],a=t[n];Ot(s)&&Ot(a)?gf(s,a,i):e[n]=cg(a)}function gf(n,e,t){const i=Gn(e)?e:[e],s=i.length;if(!Ot(n))return n;t=t||{};const a=t.merger||e3;let l;for(let u=0;u<s;++u){if(l=i[u],!Ot(l))continue;const h=Object.keys(l);for(let f=0,y=h.length;f<y;++f)a(h[f],n,l,t)}return n}function ef(n,e){return gf(n,e,{merger:t3})}function t3(n,e,t){if(!QR(n))return;const i=e[n],s=t[n];Ot(i)&&Ot(s)?ef(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=cg(s))}const JT={"":n=>n,x:n=>n.x,y:n=>n.y};function n3(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function i3(n){const e=n3(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Uc(n,e){return(JT[e]||(JT[e]=i3(e)))(n)}function l0(n){return n.charAt(0).toUpperCase()+n.slice(1)}const yf=n=>typeof n<"u",zl=n=>typeof n=="function",eS=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function s3(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Zt=Math.PI,bn=2*Zt,r3=bn+Zt,ug=Number.POSITIVE_INFINITY,a3=Zt/180,si=Zt/2,xc=Zt/4,tS=Zt*2/3,ZR=Math.log10,va=Math.sign;function tf(n,e,t){return Math.abs(n-e)<t}function nS(n){const e=Math.round(n);n=tf(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(ZR(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function o3(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,a)=>s-a).pop(),e}function l3(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function _f(n){return!l3(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function c3(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function u3(n,e,t){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function vo(n){return n*(Zt/180)}function h3(n){return n*(180/Zt)}function iS(n){if(!Ui(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function JR(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let a=Math.atan2(i,t);return a<-.5*Zt&&(a+=bn),{angle:a,distance:s}}function Hb(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function d3(n,e){return(n-e+r3)%bn-Zt}function Ms(n){return(n%bn+bn)%bn}function bf(n,e,t,i){const s=Ms(n),a=Ms(e),l=Ms(t),u=Ms(a-s),h=Ms(l-s),f=Ms(s-a),y=Ms(s-l);return s===a||s===l||i&&a===l||u>h&&f<y}function Li(n,e,t){return Math.max(e,Math.min(t,n))}function f3(n){return Li(n,-32768,32767)}function xo(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function c0(n,e,t){t=t||(l=>n[l]<e);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,t(a)?s=a:i=a;return{lo:s,hi:i}}const Nc=(n,e,t,i)=>c0(n,t,i?s=>{const a=n[s][e];return a<t||a===t&&n[s+1][e]===t}:s=>n[s][e]<t),m3=(n,e,t)=>c0(n,t,i=>n[i][e]>=t);function p3(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const eI=["push","pop","shift","splice","unshift"];function g3(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),eI.forEach(t=>{const i="_onData"+l0(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...a){const l=s.apply(this,a);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...a)}),l}})})}function sS(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(eI.forEach(a=>{delete n[a]}),delete n._chartjs)}function tI(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const nI=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function iI(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,nI.call(window,()=>{i=!1,n.apply(e,t)}))}}function y3(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const u0=n=>n==="start"?"left":n==="end"?"right":"center",Mi=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,_3=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function b3(n,e,t){const i=e.length;let s=0,a=i;if(n._sorted){const{iScale:l,vScale:u,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,y=l.axis,{min:v,max:x,minDefined:T,maxDefined:C}=l.getUserBounds();if(T){if(s=Math.min(Nc(h,y,v).lo,t?i:Nc(e,y,l.getPixelForValue(v)).lo),f){const k=h.slice(0,s+1).reverse().findIndex(R=>!qt(R[u.axis]));s-=Math.max(0,k)}s=Li(s,0,i-1)}if(C){let k=Math.max(Nc(h,l.axis,x,!0).hi+1,t?0:Nc(e,y,l.getPixelForValue(x),!0).hi+1);if(f){const R=h.slice(k-1).findIndex(j=>!qt(j[u.axis]));k+=Math.max(0,R)}a=Li(k,s,i)-s}else a=i-s}return{start:s,count:a}}function v3(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const a=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),a}const rp=n=>n===0||n===1,rS=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*bn/t)),aS=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*bn/t)+1,nf={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*si)+1,easeOutSine:n=>Math.sin(n*si),easeInOutSine:n=>-.5*(Math.cos(Zt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>rp(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>rp(n)?n:rS(n,.075,.3),easeOutElastic:n=>rp(n)?n:aS(n,.075,.3),easeInOutElastic(n){return rp(n)?n:n<.5?.5*rS(n*2,.1125,.45):.5+.5*aS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-nf.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?nf.easeInBounce(n*2)*.5:nf.easeOutBounce(n*2-1)*.5+.5};function h0(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function oS(n){return h0(n)?n:new pf(n)}function q_(n){return h0(n)?n:new pf(n).saturate(.5).darken(.1).hexString()}const x3=["x","y","borderWidth","radius","tension"],E3=["color","borderColor","backgroundColor"];function w3(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:E3},numbers:{type:"number",properties:x3}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function T3(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const lS=new Map;function S3(n,e){e=e||{};const t=n+JSON.stringify(e);let i=lS.get(t);return i||(i=new Intl.NumberFormat(n,e),lS.set(t,i)),i}function d0(n,e,t){return S3(e,t).format(n)}const A3={values(n){return Gn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),a=C3(n,t)}const l=ZR(Math.abs(a)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),d0(n,i,h)}};function C3(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var sI={formatters:A3};function R3(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zc=Object.create(null),$b=Object.create(null);function sf(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const a=t[i];n=n[a]||(n[a]=Object.create(null))}return n}function G_(n,e,t){return typeof e=="string"?gf(sf(n,e),t):gf(sf(n,""),e)}class I3{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>q_(s.backgroundColor),this.hoverBorderColor=(i,s)=>q_(s.borderColor),this.hoverColor=(i,s)=>q_(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return G_(this,e,t)}get(e){return sf(this,e)}describe(e,t){return G_($b,e,t)}override(e,t){return G_(zc,e,t)}route(e,t,i,s){const a=sf(this,e),l=sf(this,i),u="_"+t;Object.defineProperties(a,{[u]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[u],f=l[s];return Ot(h)?Object.assign({},f,h):vt(h,f)},set(h){this[u]=h}}})}apply(e){e.forEach(t=>t(this))}}var jn=new I3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[w3,T3,R3]);function k3(n){return!n||qt(n.size)||qt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function cS(n,e,t,i,s){let a=e[s];return a||(a=e[s]=n.measureText(s).width,t.push(s)),a>i&&(i=a),i}function Ec(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function uS(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function qb(n,e,t,i){rI(n,e,t,i,null)}function rI(n,e,t,i,s){let a,l,u,h,f,y,v,x;const T=e.pointStyle,C=e.rotation,k=e.radius;let R=(C||0)*a3;if(T&&typeof T=="object"&&(a=T.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(R),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),T){default:s?n.ellipse(t,i,s/2,k,0,0,bn):n.arc(t,i,k,0,bn),n.closePath();break;case"triangle":y=s?s/2:k,n.moveTo(t+Math.sin(R)*y,i-Math.cos(R)*k),R+=tS,n.lineTo(t+Math.sin(R)*y,i-Math.cos(R)*k),R+=tS,n.lineTo(t+Math.sin(R)*y,i-Math.cos(R)*k),n.closePath();break;case"rectRounded":f=k*.516,h=k-f,l=Math.cos(R+xc)*h,v=Math.cos(R+xc)*(s?s/2-f:h),u=Math.sin(R+xc)*h,x=Math.sin(R+xc)*(s?s/2-f:h),n.arc(t-v,i-u,f,R-Zt,R-si),n.arc(t+x,i-l,f,R-si,R),n.arc(t+v,i+u,f,R,R+si),n.arc(t-x,i+l,f,R+si,R+Zt),n.closePath();break;case"rect":if(!C){h=Math.SQRT1_2*k,y=s?s/2:h,n.rect(t-y,i-h,2*y,2*h);break}R+=xc;case"rectRot":v=Math.cos(R)*(s?s/2:k),l=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(s?s/2:k),n.moveTo(t-v,i-u),n.lineTo(t+x,i-l),n.lineTo(t+v,i+u),n.lineTo(t-x,i+l),n.closePath();break;case"crossRot":R+=xc;case"cross":v=Math.cos(R)*(s?s/2:k),l=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(s?s/2:k),n.moveTo(t-v,i-u),n.lineTo(t+v,i+u),n.moveTo(t+x,i-l),n.lineTo(t-x,i+l);break;case"star":v=Math.cos(R)*(s?s/2:k),l=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(s?s/2:k),n.moveTo(t-v,i-u),n.lineTo(t+v,i+u),n.moveTo(t+x,i-l),n.lineTo(t-x,i+l),R+=xc,v=Math.cos(R)*(s?s/2:k),l=Math.cos(R)*k,u=Math.sin(R)*k,x=Math.sin(R)*(s?s/2:k),n.moveTo(t-v,i-u),n.lineTo(t+v,i+u),n.moveTo(t+x,i-l),n.lineTo(t-x,i+l);break;case"line":l=s?s/2:Math.cos(R)*k,u=Math.sin(R)*k,n.moveTo(t-l,i-u),n.lineTo(t+l,i+u);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(R)*(s?s/2:k),i+Math.sin(R)*k);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function vf(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Kg(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Yg(n){n.restore()}function N3(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const a=(e.x+t.x)/2;n.lineTo(a,e.y),n.lineTo(a,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function D3(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function O3(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),qt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function M3(n,e,t,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),l=e-a.actualBoundingBoxLeft,u=e+a.actualBoundingBoxRight,h=t-a.actualBoundingBoxAscent,f=t+a.actualBoundingBoxDescent,y=s.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,y),n.lineTo(u,y),n.stroke()}}function P3(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function xf(n,e,t,i,s,a={}){const l=Gn(e)?e:[e],u=a.strokeWidth>0&&a.strokeColor!=="";let h,f;for(n.save(),n.font=s.string,O3(n,a),h=0;h<l.length;++h)f=l[h],a.backdrop&&P3(n,a.backdrop),u&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),qt(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(f,t,i,a.maxWidth)),n.fillText(f,t,i,a.maxWidth),M3(n,t,i,f,a),i+=Number(s.lineHeight);n.restore()}function hg(n,e){const{x:t,y:i,w:s,h:a,radius:l}=e;n.arc(t+l.topLeft,i+l.topLeft,l.topLeft,1.5*Zt,Zt,!0),n.lineTo(t,i+a-l.bottomLeft),n.arc(t+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,Zt,si,!0),n.lineTo(t+s-l.bottomRight,i+a),n.arc(t+s-l.bottomRight,i+a-l.bottomRight,l.bottomRight,si,0,!0),n.lineTo(t+s,i+l.topRight),n.arc(t+s-l.topRight,i+l.topRight,l.topRight,0,-si,!0),n.lineTo(t+l.topLeft,i)}const j3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,L3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function V3(n,e){const t=(""+n).match(j3);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const F3=n=>+n||0;function f0(n,e){const t={},i=Ot(e),s=i?Object.keys(e):e,a=Ot(n)?i?l=>vt(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of s)t[l]=F3(a(l));return t}function aI(n){return f0(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Yu(n){return f0(n,["topLeft","topRight","bottomLeft","bottomRight"])}function fr(n){const e=aI(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Vi(n,e){n=n||{},e=e||jn.font;let t=vt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=vt(n.style,e.style);i&&!(""+i).match(L3)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:vt(n.family,e.family),lineHeight:V3(vt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:vt(n.weight,e.weight),string:""};return s.string=k3(s),s}function ap(n,e,t,i){let s,a,l;for(s=0,a=n.length;s<a;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function U3(n,e,t){const{min:i,max:s}=n,a=XR(e,(s-i)/2),l=(u,h)=>t&&u===0?0:u+h;return{min:l(i,-Math.abs(a)),max:l(s,a)}}function Kc(n,e){return Object.assign(Object.create(n),e)}function m0(n,e=[""],t,i,s=()=>n[0]){const a=t||n;typeof i>"u"&&(i=uI("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:u=>m0([u,...n],e,a,i)};return new Proxy(l,{deleteProperty(u,h){return delete u[h],delete u._keys,delete n[0][h],!0},get(u,h){return lI(u,h,()=>K3(h,e,n,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,h){return dS(u).includes(h)},ownKeys(u){return dS(u)},set(u,h,f){const y=u._storage||(u._storage=s());return u[h]=y[h]=f,delete u._keys,!0}})}function sh(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:oI(n,i),setContext:a=>sh(n,a,t,i),override:a=>sh(n.override(a),e,t,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,u){return lI(a,l,()=>B3(a,l,u))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,u){return n[l]=u,delete a[l],!0}})}function oI(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:zl(t)?t:()=>t,isIndexable:zl(i)?i:()=>i}}const z3=(n,e)=>n?n+l0(e):e,p0=(n,e)=>Ot(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function lI(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function B3(n,e,t){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;let u=i[e];return zl(u)&&l.isScriptable(e)&&(u=H3(e,u,n,t)),Gn(u)&&u.length&&(u=$3(e,u,n,l.isIndexable)),p0(e,u)&&(u=sh(u,s,a&&a[e],l)),u}function H3(n,e,t,i){const{_proxy:s,_context:a,_subProxy:l,_stack:u}=t;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let h=e(a,l||i);return u.delete(n),p0(n,h)&&(h=g0(s._scopes,s,n,h)),h}function $3(n,e,t,i){const{_proxy:s,_context:a,_subProxy:l,_descriptors:u}=t;if(typeof a.index<"u"&&i(n))return e[a.index%e.length];if(Ot(e[0])){const h=e,f=s._scopes.filter(y=>y!==h);e=[];for(const y of h){const v=g0(f,s,n,y);e.push(sh(v,a,l&&l[n],u))}}return e}function cI(n,e,t){return zl(n)?n(e,t):n}const q3=(n,e)=>n===!0?e:typeof n=="string"?Uc(e,n):void 0;function G3(n,e,t,i,s){for(const a of e){const l=q3(t,a);if(l){n.add(l);const u=cI(l._fallback,t,s);if(typeof u<"u"&&u!==t&&u!==i)return u}else if(l===!1&&typeof i<"u"&&t!==i)return null}return!1}function g0(n,e,t,i){const s=e._rootScopes,a=cI(e._fallback,t,i),l=[...n,...s],u=new Set;u.add(i);let h=hS(u,l,t,a||t,i);return h===null||typeof a<"u"&&a!==t&&(h=hS(u,l,a,h,i),h===null)?!1:m0(Array.from(u),[""],s,a,()=>W3(e,t,i))}function hS(n,e,t,i,s){for(;t;)t=G3(n,e,t,i,s);return t}function W3(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return Gn(s)&&Ot(t)?t:s||{}}function K3(n,e,t,i){let s;for(const a of e)if(s=uI(z3(a,n),t),typeof s<"u")return p0(n,s)?g0(t,i,n,s):s}function uI(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function dS(n){let e=n._keys;return e||(e=n._keys=Y3(n._scopes)),e}function Y3(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const X3=Number.EPSILON||1e-14,rh=(n,e)=>e<n.length&&!n[e].skip&&n[e],hI=n=>n==="x"?"y":"x";function Q3(n,e,t,i){const s=n.skip?e:n,a=e,l=t.skip?e:t,u=Hb(a,s),h=Hb(l,a);let f=u/(u+h),y=h/(u+h);f=isNaN(f)?0:f,y=isNaN(y)?0:y;const v=i*f,x=i*y;return{previous:{x:a.x-v*(l.x-s.x),y:a.y-v*(l.y-s.y)},next:{x:a.x+x*(l.x-s.x),y:a.y+x*(l.y-s.y)}}}function Z3(n,e,t){const i=n.length;let s,a,l,u,h,f=rh(n,0);for(let y=0;y<i-1;++y)if(h=f,f=rh(n,y+1),!(!h||!f)){if(tf(e[y],0,X3)){t[y]=t[y+1]=0;continue}s=t[y]/e[y],a=t[y+1]/e[y],u=Math.pow(s,2)+Math.pow(a,2),!(u<=9)&&(l=3/Math.sqrt(u),t[y]=s*l*e[y],t[y+1]=a*l*e[y])}}function J3(n,e,t="x"){const i=hI(t),s=n.length;let a,l,u,h=rh(n,0);for(let f=0;f<s;++f){if(l=u,u=h,h=rh(n,f+1),!u)continue;const y=u[t],v=u[i];l&&(a=(y-l[t])/3,u[`cp1${t}`]=y-a,u[`cp1${i}`]=v-a*e[f]),h&&(a=(h[t]-y)/3,u[`cp2${t}`]=y+a,u[`cp2${i}`]=v+a*e[f])}}function eF(n,e="x"){const t=hI(e),i=n.length,s=Array(i).fill(0),a=Array(i);let l,u,h,f=rh(n,0);for(l=0;l<i;++l)if(u=h,h=f,f=rh(n,l+1),!!h){if(f){const y=f[e]-h[e];s[l]=y!==0?(f[t]-h[t])/y:0}a[l]=u?f?va(s[l-1])!==va(s[l])?0:(s[l-1]+s[l])/2:s[l-1]:s[l]}Z3(n,s,a),J3(n,a,e)}function op(n,e,t){return Math.max(Math.min(n,t),e)}function tF(n,e){let t,i,s,a,l,u=vf(n[0],e);for(t=0,i=n.length;t<i;++t)l=a,a=u,u=t<i-1&&vf(n[t+1],e),a&&(s=n[t],l&&(s.cp1x=op(s.cp1x,e.left,e.right),s.cp1y=op(s.cp1y,e.top,e.bottom)),u&&(s.cp2x=op(s.cp2x,e.left,e.right),s.cp2y=op(s.cp2y,e.top,e.bottom)))}function nF(n,e,t,i,s){let a,l,u,h;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")eF(n,s);else{let f=i?n[n.length-1]:n[0];for(a=0,l=n.length;a<l;++a)u=n[a],h=Q3(f,u,n[Math.min(a+1,l-(i?0:1))%l],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,f=u}e.capBezierPoints&&tF(n,t)}function y0(){return typeof window<"u"&&typeof document<"u"}function _0(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function dg(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Xg=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function iF(n,e){return Xg(n).getPropertyValue(e)}const sF=["top","right","bottom","left"];function Dc(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const a=sF[s];i[a]=parseFloat(n[e+"-"+a+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const rF=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function aF(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:a}=i;let l=!1,u,h;if(rF(s,a,n.target))u=s,h=a;else{const f=e.getBoundingClientRect();u=i.clientX-f.left,h=i.clientY-f.top,l=!0}return{x:u,y:h,box:l}}function Ac(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=Xg(t),a=s.boxSizing==="border-box",l=Dc(s,"padding"),u=Dc(s,"border","width"),{x:h,y:f,box:y}=aF(n,t),v=l.left+(y&&u.left),x=l.top+(y&&u.top);let{width:T,height:C}=e;return a&&(T-=l.width+u.width,C-=l.height+u.height),{x:Math.round((h-v)/T*t.width/i),y:Math.round((f-x)/C*t.height/i)}}function oF(n,e,t){let i,s;if(e===void 0||t===void 0){const a=n&&_0(n);if(!a)e=n.clientWidth,t=n.clientHeight;else{const l=a.getBoundingClientRect(),u=Xg(a),h=Dc(u,"border","width"),f=Dc(u,"padding");e=l.width-f.width-h.width,t=l.height-f.height-h.height,i=dg(u.maxWidth,a,"clientWidth"),s=dg(u.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:i||ug,maxHeight:s||ug}}const lp=n=>Math.round(n*10)/10;function lF(n,e,t,i){const s=Xg(n),a=Dc(s,"margin"),l=dg(s.maxWidth,n,"clientWidth")||ug,u=dg(s.maxHeight,n,"clientHeight")||ug,h=oF(n,e,t);let{width:f,height:y}=h;if(s.boxSizing==="content-box"){const x=Dc(s,"border","width"),T=Dc(s,"padding");f-=T.width+x.width,y-=T.height+x.height}return f=Math.max(0,f-a.width),y=Math.max(0,i?f/i:y-a.height),f=lp(Math.min(f,l,h.maxWidth)),y=lp(Math.min(y,u,h.maxHeight)),f&&!y&&(y=lp(f/2)),(e!==void 0||t!==void 0)&&i&&h.height&&y>h.height&&(y=h.height,f=lp(Math.floor(y*i))),{width:f,height:y}}function fS(n,e,t){const i=e||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==s||l.width!==a?(n.currentDevicePixelRatio=i,l.height=s,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const cF=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};y0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function mS(n,e){const t=iF(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Cc(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function uF(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function hF(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},a={x:e.cp1x,y:e.cp1y},l=Cc(n,s,t),u=Cc(s,a,t),h=Cc(a,e,t),f=Cc(l,u,t),y=Cc(u,h,t);return Cc(f,y,t)}const dF=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},fF=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Xu(n,e,t){return n?dF(e,t):fF()}function dI(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function fI(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function mI(n){return n==="angle"?{between:bf,compare:d3,normalize:Ms}:{between:xo,compare:(e,t)=>e-t,normalize:e=>e}}function pS({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function mF(n,e,t){const{property:i,start:s,end:a}=t,{between:l,normalize:u}=mI(i),h=e.length;let{start:f,end:y,loop:v}=n,x,T;if(v){for(f+=h,y+=h,x=0,T=h;x<T&&l(u(e[f%h][i]),s,a);++x)f--,y--;f%=h,y%=h}return y<f&&(y+=h),{start:f,end:y,loop:v,style:n.style}}function pI(n,e,t){if(!t)return[n];const{property:i,start:s,end:a}=t,l=e.length,{compare:u,between:h,normalize:f}=mI(i),{start:y,end:v,loop:x,style:T}=mF(n,e,t),C=[];let k=!1,R=null,j,q,G;const X=()=>h(s,G,j)&&u(s,G)!==0,Y=()=>u(a,j)===0||h(a,G,j),J=()=>k||X(),F=()=>!k||Y();for(let I=y,O=y;I<=v;++I)q=e[I%l],!q.skip&&(j=f(q[i]),j!==G&&(k=h(j,s,a),R===null&&J()&&(R=u(j,s)===0?I:O),R!==null&&F()&&(C.push(pS({start:R,end:I,loop:x,count:l,style:T})),R=null),O=I,G=j));return R!==null&&C.push(pS({start:R,end:v,loop:x,count:l,style:T})),C}function gI(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const a=pI(i[s],n.points,e);a.length&&t.push(...a)}return t}function pF(n,e,t,i){let s=0,a=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(a+=s);a>s&&n[a%e].skip;)a--;return a%=e,{start:s,end:a}}function gF(n,e,t,i){const s=n.length,a=[];let l=e,u=n[e],h;for(h=e+1;h<=t;++h){const f=n[h%s];f.skip||f.stop?u.skip||(i=!1,a.push({start:e%s,end:(h-1)%s,loop:i}),e=l=f.stop?h:null):(l=h,u.skip&&(e=h)),u=f}return l!==null&&a.push({start:e%s,end:l%s,loop:i}),a}function yF(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const a=!!n._loop,{start:l,end:u}=pF(t,s,a,i);if(i===!0)return gS(n,[{start:l,end:u,loop:a}],t,e);const h=u<l?u+s:u,f=!!n._fullLoop&&l===0&&u===s-1;return gS(n,gF(t,l,h,f),t,e)}function gS(n,e,t,i){return!i||!i.setContext||!t?e:_F(n,e,t,i)}function _F(n,e,t,i){const s=n._chart.getContext(),a=yS(n.options),{_datasetIndex:l,options:{spanGaps:u}}=n,h=t.length,f=[];let y=a,v=e[0].start,x=v;function T(C,k,R,j){const q=u?-1:1;if(C!==k){for(C+=h;t[C%h].skip;)C-=q;for(;t[k%h].skip;)k+=q;C%h!==k%h&&(f.push({start:C%h,end:k%h,loop:R,style:j}),y=j,v=k%h)}}for(const C of e){v=u?v:C.start;let k=t[v%h],R;for(x=v+1;x<=C.end;x++){const j=t[x%h];R=yS(i.setContext(Kc(s,{type:"segment",p0:k,p1:j,p0DataIndex:(x-1)%h,p1DataIndex:x%h,datasetIndex:l}))),bF(R,y)&&T(v,x-1,C.loop,y),k=j,y=R}v<x-1&&T(v,x-1,C.loop,y)}return f}function yS(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function bF(n,e){if(!e)return!1;const t=[],i=function(s,a){return h0(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function cp(n,e,t){return n.options.clip?n[t]:e[t]}function vF(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:cp(t,e,"left"),right:cp(t,e,"right"),top:cp(i,e,"top"),bottom:cp(i,e,"bottom")}:e}function yI(n,e){const t=e._clip;if(t.disabled)return!1;const i=vF(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class xF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const a=t.listeners[s],l=t.duration;a.forEach(u=>u({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(i-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=nI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,u=!1,h;for(;l>=0;--l)h=a[l],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(e),u=!0):(a[l]=a[a.length-1],a.pop());u&&(s.draw(),this._notify(s,i,e,"progress")),a.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var fo=new xF;const _S="transparent",EF={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=oS(n||_S),s=i.valid&&oS(e||_S);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class wF{constructor(e,t,i,s){const a=t[i];s=ap([e.to,s,a,e.from]);const l=ap([e.from,a,s]);this._active=!0,this._fn=e.fn||EF[e.type||typeof l],this._easing=nf[e.easing]||nf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=ap([e.to,t,s,e.from]),this._from=ap([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,a=this._from,l=this._loop,u=this._to;let h;if(this._active=a!==u&&(l||t<i),!this._active){this._target[s]=u,this._notify(!0);return}if(t<0){this._target[s]=a;return}h=t/i%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[s]=this._fn(a,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class _I{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ot(e))return;const t=Object.keys(jn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const a=e[s];if(!Ot(a))return;const l={};for(const u of t)l[u]=a[u];(Gn(a.properties)&&a.properties||[s]).forEach(u=>{(u===s||!i.has(u))&&i.set(u,l)})})}_animateOptions(e,t){const i=t.options,s=SF(e,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&TF(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){const i=this._properties,s=[],a=e.$animations||(e.$animations={}),l=Object.keys(t),u=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(e,t));continue}const y=t[f];let v=a[f];const x=i.get(f);if(v)if(x&&v.active()){v.update(x,y,u);continue}else v.cancel();if(!x||!x.duration){e[f]=y;continue}a[f]=v=new wF(x,e,f,y),s.push(v)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return fo.add(this._chart,i),!0}}function TF(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function SF(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function bS(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:i?a:s,end:i?s:a}}function AF(n,e,t){if(t===!1)return!1;const i=bS(n,t),s=bS(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function CF(n){let e,t,i,s;return Ot(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function bI(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,a;for(s=0,a=i.length;s<a;++s)t.push(i[s].index);return t}function vS(n,e,t,i={}){const s=n.keys,a=i.mode==="single";let l,u,h,f;if(e===null)return;let y=!1;for(l=0,u=s.length;l<u;++l){if(h=+s[l],h===t){if(y=!0,i.all)continue;break}f=n.values[h],Ui(f)&&(a||e===0||va(e)===va(f))&&(e+=f)}return!y&&!i.all?0:e}function RF(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let h,f,y;for(h=0,f=l.length;h<f;++h)y=l[h],u[h]={[s]:y,[a]:n[y]};return u}function W_(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function IF(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function kF(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function NF(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function xS(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(t&&a>0||!t&&a<0)return s.index}return null}function ES(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:a,vScale:l,index:u}=i,h=a.axis,f=l.axis,y=IF(a,l,i),v=e.length;let x;for(let T=0;T<v;++T){const C=e[T],{[h]:k,[f]:R}=C,j=C._stacks||(C._stacks={});x=j[f]=NF(s,y,k),x[u]=R,x._top=xS(x,l,!0,i.type),x._bottom=xS(x,l,!1,i.type);const q=x._visualValues||(x._visualValues={});q[u]=R}}function K_(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function DF(n,e){return Kc(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function OF(n,e,t){return Kc(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function kd(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const a=s._stacks;if(!a||a[i]===void 0||a[i][t]===void 0)return;delete a[i][t],a[i]._visualValues!==void 0&&a[i]._visualValues[t]!==void 0&&delete a[i]._visualValues[t]}}}const Y_=n=>n==="reset"||n==="none",wS=(n,e)=>e?n:Object.assign({},n),MF=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:bI(t,!0),values:null};class Qg{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=W_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(v,x,T,C)=>v==="x"?x:v==="r"?C:T,a=t.xAxisID=vt(i.xAxisID,K_(e,"x")),l=t.yAxisID=vt(i.yAxisID,K_(e,"y")),u=t.rAxisID=vt(i.rAxisID,K_(e,"r")),h=t.indexAxis,f=t.iAxisID=s(h,a,l,u),y=t.vAxisID=s(h,l,a,u);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(u),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&sS(this._data,this),e._stacked&&kd(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Ot(t)){const s=this._cachedMeta;this._data=RF(t,s)}else if(i!==t){if(i){sS(i,this);const s=this._cachedMeta;kd(s),s._parsed=[]}t&&Object.isExtensible(t)&&g3(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=t._stacked;t._stacked=W_(t.vScale,t),t.stack!==i.stack&&(s=!0,kd(t),t.stack=i.stack),this._resyncElements(e),(s||a!==t._stacked)&&(ES(this,t._parsed),t._stacked=W_(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,u=a.axis;let h=e===0&&t===s.length?!0:i._sorted,f=e>0&&i._parsed[e-1],y,v,x;if(this._parsing===!1)i._parsed=s,i._sorted=!0,x=s;else{Gn(s[e])?x=this.parseArrayData(i,s,e,t):Ot(s[e])?x=this.parseObjectData(i,s,e,t):x=this.parsePrimitiveData(i,s,e,t);const T=()=>v[u]===null||f&&v[u]<f[u];for(y=0;y<t;++y)i._parsed[y+e]=v=x[y],h&&(T()&&(h=!1),f=v);i._sorted=h}l&&ES(this,x)}parsePrimitiveData(e,t,i,s){const{iScale:a,vScale:l}=e,u=a.axis,h=l.axis,f=a.getLabels(),y=a===l,v=new Array(s);let x,T,C;for(x=0,T=s;x<T;++x)C=x+i,v[x]={[u]:y||a.parse(f[C],C),[h]:l.parse(t[C],C)};return v}parseArrayData(e,t,i,s){const{xScale:a,yScale:l}=e,u=new Array(s);let h,f,y,v;for(h=0,f=s;h<f;++h)y=h+i,v=t[y],u[h]={x:a.parse(v[0],y),y:l.parse(v[1],y)};return u}parseObjectData(e,t,i,s){const{xScale:a,yScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,f=new Array(s);let y,v,x,T;for(y=0,v=s;y<v;++y)x=y+i,T=t[x],f[y]={x:a.parse(Uc(T,u),x),y:l.parse(Uc(T,h),x)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,a=this._cachedMeta,l=t[e.axis],u={keys:bI(s,!0),values:t._stacks[e.axis]._visualValues};return vS(u,l,a.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const a=i[t.axis];let l=a===null?NaN:a;const u=s&&i._stacks[t.axis];s&&u&&(s.values=u,l=vS(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&e===i.iScale,l=s.length,u=this._getOtherScale(e),h=MF(t,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:v}=kF(u);let x,T;function C(){T=s[x];const k=T[u.axis];return!Ui(T[e.axis])||y>k||v<k}for(x=0;x<l&&!(!C()&&(this.updateRangeFromParsed(f,e,T,h),a));++x);if(a){for(x=l-1;x>=0;--x)if(!C()){this.updateRangeFromParsed(f,e,T,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=t.length;s<a;++s)l=t[s][e.axis],Ui(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=CF(vt(this.options.clip,AF(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],a=t.chartArea,l=[],u=this._drawStart||0,h=this._drawCount||s.length-u,f=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(e,a,u,h),y=u;y<u+h;++y){const v=s[y];v.hidden||(v.active&&f?l.push(v):v.draw(e,a))}for(y=0;y<l.length;++y)l[y].draw(e,a)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];a=l.$context||(l.$context=OF(this.getContext(),e,l)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=DF(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=i,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",a=this._cachedDataOpts,l=e+"-"+t,u=a[l],h=this.enableOptionSharing&&yf(i);if(u)return wS(u,h);const f=this.chart.config,y=f.datasetElementScopeKeys(this._type,e),v=s?[`${e}Hover`,"hover",e,""]:[e,""],x=f.getOptionScopes(this.getDataset(),y),T=Object.keys(jn.elements[e]),C=()=>this.getContext(i,s,t),k=f.resolveNamedOptions(x,T,C,v);return k.$shared&&(k.$shared=h,a[l]=Object.freeze(wS(k,h))),k}_resolveAnimations(e,t,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${t}`,u=a[l];if(u)return u;let h;if(s.options.animation!==!1){const y=this.chart.config,v=y.datasetAnimationScopeKeys(this._type,t),x=y.getOptionScopes(this.getDataset(),v);h=y.createResolver(x,this.getContext(e,i,t))}const f=new _I(s,h&&h.animations);return h&&h._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Y_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(t,a)||a!==s;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:l}}updateElement(e,t,i,s){Y_(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!Y_(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const a=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[u,h,f]of this._syncList)this[u](h,f);this._syncList=[];const s=i.length,a=t.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,t,i=!0){const s=this._cachedMeta,a=s.data,l=e+t;let u;const h=f=>{for(f.length+=t,u=f.length-1;u>=l;u--)f[u]=f[u-t]};for(h(a),u=e;u<l;++u)a[u]=new this.dataElementType;this._parsing&&h(s._parsed),this.parse(e,t),i&&this.updateElements(a,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&kd(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function PF(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,a=t.length;s<a;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=tI(i.sort((s,a)=>s-a))}return n._cache.$bar}function jF(n){const e=n.iScale,t=PF(e,n.type);let i=e._length,s,a,l,u;const h=()=>{l===32767||l===-32768||(yf(u)&&(i=Math.min(i,Math.abs(l-u)||i)),u=l)};for(s=0,a=t.length;s<a;++s)l=e.getPixelForValue(t[s]),h();for(u=void 0,s=0,a=e.ticks.length;s<a;++s)l=e.getPixelForTick(s),h();return i}function LF(n,e,t,i){const s=t.barThickness;let a,l;return qt(s)?(a=e.min*t.categoryPercentage,l=t.barPercentage):(a=s*i,l=1),{chunk:a/i,ratio:l,start:e.pixels[n]-a/2}}function VF(n,e,t,i){const s=e.pixels,a=s[n];let l=n>0?s[n-1]:null,u=n<s.length-1?s[n+1]:null;const h=t.categoryPercentage;l===null&&(l=a-(u===null?e.end-e.start:u-a)),u===null&&(u=a+a-l);const f=a-(a-Math.min(l,u))/2*h;return{chunk:Math.abs(u-l)/2*h/i,ratio:t.barPercentage,start:f}}function FF(n,e,t,i){const s=t.parse(n[0],i),a=t.parse(n[1],i),l=Math.min(s,a),u=Math.max(s,a);let h=l,f=u;Math.abs(l)>Math.abs(u)&&(h=u,f=l),e[t.axis]=f,e._custom={barStart:h,barEnd:f,start:s,end:a,min:l,max:u}}function vI(n,e,t,i){return Gn(n)?FF(n,e,t,i):e[t.axis]=t.parse(n,i),e}function TS(n,e,t,i){const s=n.iScale,a=n.vScale,l=s.getLabels(),u=s===a,h=[];let f,y,v,x;for(f=t,y=t+i;f<y;++f)x=e[f],v={},v[s.axis]=u||s.parse(l[f],f),h.push(vI(x,v,a,f));return h}function X_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function UF(n,e,t){return n!==0?va(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function zF(n){let e,t,i,s,a;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",a="start"):(s="start",a="end"),{start:t,end:i,reverse:e,top:s,bottom:a}}function BF(n,e,t,i){let s=e.borderSkipped;const a={};if(!s){n.borderSkipped=a;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:h,top:f,bottom:y}=zF(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=f:(t._bottom||0)===i?s=y:(a[SS(y,l,u,h)]=!0,s=f)),a[SS(s,l,u,h)]=!0,n.borderSkipped=a}function SS(n,e,t,i){return i?(n=HF(n,e,t),n=AS(n,t,e)):n=AS(n,e,t),n}function HF(n,e,t){return n===e?t:n===t?e:n}function AS(n,e,t){return n==="start"?e:n==="end"?t:n}function $F(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class qF extends Qg{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,s){return TS(e,t,i,s)}parseArrayData(e,t,i,s){return TS(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:a,vScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,f=a.axis==="x"?u:h,y=l.axis==="x"?u:h,v=[];let x,T,C,k;for(x=i,T=i+s;x<T;++x)k=t[x],C={},C[a.axis]=a.parse(Uc(k,f),x),v.push(vI(Uc(k,y),C,l,x));return v}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,a=this.getParsed(e),l=a._custom,u=X_(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const a=s==="reset",{index:l,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),f=u.isHorizontal(),y=this._getRuler(),{sharedOptions:v,includeOptions:x}=this._getSharedOptions(t,s);for(let T=t;T<t+i;T++){const C=this.getParsed(T),k=a||qt(C[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(T),R=this._calculateBarIndexPixels(T,y),j=(C._stacks||{})[u.axis],q={horizontal:f,base:k.base,enableBorderRadius:!j||X_(C._custom)||l===j._top||l===j._bottom,x:f?k.head:R.center,y:f?R.center:k.head,height:f?R.size:Math.abs(k.size),width:f?Math.abs(k.size):R.size};x&&(q.options=v||this.resolveDataElementOptions(T,e[T].active?"active":s));const G=q.options||e[T].options;BF(q,G,j,l),$F(q,G,y.ratio),this.updateElement(e[T],T,q,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),a=i.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(t),h=u&&u[i.axis],f=y=>{const v=y._parsed.find(T=>T[i.axis]===h),x=v&&v[y.vScale.axis];if(qt(x)||isNaN(x))return!0};for(const y of s)if(!(t!==void 0&&f(y))&&((a===!1||l.indexOf(y.stack)===-1||a===void 0&&y.stack===void 0)&&l.push(y.stack),y.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[vt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const s=this._getStacks(e,i),a=t!==void 0?s.indexOf(t):-1;return a===-1?s.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let a,l;for(a=0,l=t.data.length;a<l;++a)s.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const u=e.barThickness;return{min:u||jF(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:a,minBarLength:l}}=this,u=a||0,h=this.getParsed(e),f=h._custom,y=X_(f);let v=h[t.axis],x=0,T=i?this.applyStack(t,h,i):v,C,k;T!==v&&(x=T-v,T=v),y&&(v=f.barStart,T=f.barEnd-f.barStart,v!==0&&va(v)!==va(f.barEnd)&&(x=0),x+=v);const R=!qt(a)&&!y?a:x;let j=t.getPixelForValue(R);if(this.chart.getDataVisibility(e)?C=t.getPixelForValue(x+T):C=j,k=C-j,Math.abs(k)<l){k=UF(k,t,u)*l,v===u&&(j-=k/2);const q=t.getPixelForDecimal(0),G=t.getPixelForDecimal(1),X=Math.min(q,G),Y=Math.max(q,G);j=Math.max(Math.min(j,Y),X),C=j+k,i&&!y&&(h._stacks[t.axis]._visualValues[s]=t.getValueForPixel(C)-t.getValueForPixel(j))}if(j===t.getPixelForValue(u)){const q=va(k)*t.getLineWidthForValue(u)/2;j+=q,k-=q}return{size:k,base:j,head:C,center:C+k/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,a=s.skipNull,l=vt(s.maxBarThickness,1/0);let u,h;const f=this._getAxisCount();if(t.grouped){const y=a?this._getStackCount(e):t.stackCount,v=s.barThickness==="flex"?VF(e,t,s,y*f):LF(e,t,s,y*f),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,T=this._getAxis().indexOf(vt(x,this.getFirstScaleIdForIndexAxis())),C=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+T;u=v.start+v.chunk*C+v.chunk/2,h=Math.min(l,v.chunk*v.ratio)}else u=i.getPixelForValue(this.getParsed(e)[i.axis],e),h=Math.min(l,t.min*t.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let a=0;for(;a<s;++a)this.getParsed(a)[t.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}function GF(n,e,t){let i=1,s=1,a=0,l=0;if(e<bn){const u=n,h=u+e,f=Math.cos(u),y=Math.sin(u),v=Math.cos(h),x=Math.sin(h),T=(G,X,Y)=>bf(G,u,h,!0)?1:Math.max(X,X*t,Y,Y*t),C=(G,X,Y)=>bf(G,u,h,!0)?-1:Math.min(X,X*t,Y,Y*t),k=T(0,f,v),R=T(si,y,x),j=C(Zt,f,v),q=C(Zt+si,y,x);i=(k-j)/2,s=(R-q)/2,a=-(k+j)/2,l=-(R+q)/2}return{ratioX:i,ratioY:s,offsetX:a,offsetY:l}}class WF extends Qg{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((a,l)=>{const h=e.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:s,lineWidth:h.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let a=h=>+i[h];if(Ot(i[e])){const{key:h="value"}=this._parsing;a=f=>+Uc(i[f],h)}let l,u;for(l=e,u=e+t;l<u;++l)s._parsed[l]=a(l)}}_getRotation(){return vo(this.options.rotation-90)}_getCircumference(){return vo(this.options.circumference)}_getRotationExtents(){let e=bn,t=-bn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),l=s._getCircumference();e=Math.min(e,a),t=Math.max(t,a+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,a=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(J4(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:y,rotation:v}=this._getRotationExtents(),{ratioX:x,ratioY:T,offsetX:C,offsetY:k}=GF(v,y,h),R=(i.width-l)/x,j=(i.height-l)/T,q=Math.max(Math.min(R,j)/2,0),G=XR(this.options.radius,q),X=Math.max(G*h,0),Y=(G-X)/this._getVisibleDatasetWeightTotal();this.offsetX=C*G,this.offsetY=k*G,s.total=this.calculateTotal(),this.outerRadius=G-Y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Y*f,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/bn)}updateElements(e,t,i,s){const a=s==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,y=(u.left+u.right)/2,v=(u.top+u.bottom)/2,x=a&&f.animateScale,T=x?0:this.innerRadius,C=x?0:this.outerRadius,{sharedOptions:k,includeOptions:R}=this._getSharedOptions(t,s);let j=this._getRotation(),q;for(q=0;q<t;++q)j+=this._circumference(q,a);for(q=t;q<t+i;++q){const G=this._circumference(q,a),X=e[q],Y={x:y+this.offsetX,y:v+this.offsetY,startAngle:j,endAngle:j+G,circumference:G,outerRadius:C,innerRadius:T};R&&(Y.options=k||this.resolveDataElementOptions(q,X.active?"active":s)),j+=G,this.updateElement(X,q,Y,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const a=e._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?bn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=d0(t._parsed[e],i.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,a,l,u,h;if(!e){for(s=0,a=i.data.datasets.length;s<a;++s)if(i.isDatasetVisible(s)){l=i.getDatasetMeta(s),e=l.data,u=l.controller;break}}if(!e)return 0;for(s=0,a=e.length;s<a;++s)h=u.resolveDataElementOptions(s),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const a=this.resolveDataElementOptions(i);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(vt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class KF extends Qg{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=t,l=this.chart._animationsDisabled;let{start:u,count:h}=b3(t,s,l);this._drawStart=u,this._drawCount=h,v3(t)&&(u=0,h=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},e),this.updateElements(s,u,h,e)}updateElements(e,t,i,s){const a=s==="reset",{iScale:l,vScale:u,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:y,includeOptions:v}=this._getSharedOptions(t,s),x=l.axis,T=u.axis,{spanGaps:C,segment:k}=this.options,R=_f(C)?C:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||a||s==="none",q=t+i,G=e.length;let X=t>0&&this.getParsed(t-1);for(let Y=0;Y<G;++Y){const J=e[Y],F=j?J:{};if(Y<t||Y>=q){F.skip=!0;continue}const I=this.getParsed(Y),O=qt(I[T]),U=F[x]=l.getPixelForValue(I[x],Y),H=F[T]=a||O?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,I,h):I[T],Y);F.skip=isNaN(U)||isNaN(H)||O,F.stop=Y>0&&Math.abs(I[x]-X[x])>R,k&&(F.parsed=I,F.raw=f.data[Y]),v&&(F.options=y||this.resolveDataElementOptions(Y,J.active?"active":s)),j||this.updateElement(J,Y,F,s),X=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const a=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,a,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function wc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class b0{static override(e){Object.assign(b0.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return wc()}parse(){return wc()}format(){return wc()}add(){return wc()}diff(){return wc()}startOf(){return wc()}endOf(){return wc()}}var YF={_date:b0};function XF(n,e,t,i){const{controller:s,data:a,_sorted:l}=n,u=s._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&a.length){const f=u._reversePixels?m3:Nc;if(i){if(s._sharedOptions){const y=a[0],v=typeof y.getRange=="function"&&y.getRange(e);if(v){const x=f(a,e,t-v),T=f(a,e,t+v);return{lo:x.lo,hi:T.hi}}}}else{const y=f(a,e,t);if(h){const{vScale:v}=s._cachedMeta,{_parsed:x}=n,T=x.slice(0,y.lo+1).reverse().findIndex(k=>!qt(k[v.axis]));y.lo-=Math.max(0,T);const C=x.slice(y.hi).findIndex(k=>!qt(k[v.axis]));y.hi+=Math.max(0,C)}return y}}return{lo:0,hi:a.length-1}}function Zg(n,e,t,i,s){const a=n.getSortedVisibleDatasetMetas(),l=t[e];for(let u=0,h=a.length;u<h;++u){const{index:f,data:y}=a[u],{lo:v,hi:x}=XF(a[u],e,l,s);for(let T=v;T<=x;++T){const C=y[T];C.skip||i(C,f,T)}}}function QF(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const a=e?Math.abs(i.x-s.x):0,l=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function Q_(n,e,t,i,s){const a=[];return!s&&!n.isPointInArea(e)||Zg(n,t,e,function(u,h,f){!s&&!vf(u,n.chartArea,0)||u.inRange(e.x,e.y,i)&&a.push({element:u,datasetIndex:h,index:f})},!0),a}function ZF(n,e,t,i){let s=[];function a(l,u,h){const{startAngle:f,endAngle:y}=l.getProps(["startAngle","endAngle"],i),{angle:v}=JR(l,{x:e.x,y:e.y});bf(v,f,y)&&s.push({element:l,datasetIndex:u,index:h})}return Zg(n,t,e,a),s}function JF(n,e,t,i,s,a){let l=[];const u=QF(t);let h=Number.POSITIVE_INFINITY;function f(y,v,x){const T=y.inRange(e.x,e.y,s);if(i&&!T)return;const C=y.getCenterPoint(s);if(!(!!a||n.isPointInArea(C))&&!T)return;const R=u(e,C);R<h?(l=[{element:y,datasetIndex:v,index:x}],h=R):R===h&&l.push({element:y,datasetIndex:v,index:x})}return Zg(n,t,e,f),l}function Z_(n,e,t,i,s,a){return!a&&!n.isPointInArea(e)?[]:t==="r"&&!i?ZF(n,e,t,s):JF(n,e,t,i,s,a)}function CS(n,e,t,i,s){const a=[],l=t==="x"?"inXRange":"inYRange";let u=!1;return Zg(n,t,e,(h,f,y)=>{h[l]&&h[l](e[t],s)&&(a.push({element:h,datasetIndex:f,index:y}),u=u||h.inRange(e.x,e.y,s))}),i&&!u?[]:a}var eU={modes:{index(n,e,t,i){const s=Ac(e,n),a=t.axis||"x",l=t.includeInvisible||!1,u=t.intersect?Q_(n,s,a,i,l):Z_(n,s,a,!1,i,l),h=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const y=u[0].index,v=f.data[y];v&&!v.skip&&h.push({element:v,datasetIndex:f.index,index:y})}),h):[]},dataset(n,e,t,i){const s=Ac(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;let u=t.intersect?Q_(n,s,a,i,l):Z_(n,s,a,!1,i,l);if(u.length>0){const h=u[0].datasetIndex,f=n.getDatasetMeta(h).data;u=[];for(let y=0;y<f.length;++y)u.push({element:f[y],datasetIndex:h,index:y})}return u},point(n,e,t,i){const s=Ac(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;return Q_(n,s,a,i,l)},nearest(n,e,t,i){const s=Ac(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;return Z_(n,s,a,t.intersect,i,l)},x(n,e,t,i){const s=Ac(e,n);return CS(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=Ac(e,n);return CS(n,s,"y",t.intersect,i)}}};const xI=["left","top","right","bottom"];function Nd(n,e){return n.filter(t=>t.pos===e)}function RS(n,e){return n.filter(t=>xI.indexOf(t.pos)===-1&&t.box.axis===e)}function Dd(n,e){return n.sort((t,i)=>{const s=e?i:t,a=e?t:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function tU(n){const e=[];let t,i,s,a,l,u;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:a,options:{stack:l,stackWeight:u=1}}=s,e.push({index:t,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&a+l,stackWeight:u});return e}function nU(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:a}=t;if(!i||!xI.includes(s))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return e}function iU(n,e){const t=nU(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let a,l,u;for(a=0,l=n.length;a<l;++a){u=n[a];const{fullSize:h}=u.box,f=t[u.stack],y=f&&u.stackWeight/f.weight;u.horizontal?(u.width=y?y*i:h&&e.availableWidth,u.height=s):(u.width=i,u.height=y?y*s:h&&e.availableHeight)}return t}function sU(n){const e=tU(n),t=Dd(e.filter(f=>f.box.fullSize),!0),i=Dd(Nd(e,"left"),!0),s=Dd(Nd(e,"right")),a=Dd(Nd(e,"top"),!0),l=Dd(Nd(e,"bottom")),u=RS(e,"x"),h=RS(e,"y");return{fullSize:t,leftAndTop:i.concat(a),rightAndBottom:s.concat(h).concat(l).concat(u),chartArea:Nd(e,"chartArea"),vertical:i.concat(s).concat(h),horizontal:a.concat(l).concat(u)}}function IS(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function EI(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function rU(n,e,t,i){const{pos:s,box:a}=t,l=n.maxPadding;if(!Ot(s)){t.size&&(n[s]-=t.size);const v=i[t.stack]||{size:0,count:1};v.size=Math.max(v.size,t.horizontal?a.height:a.width),t.size=v.size/v.count,n[s]+=t.size}a.getPadding&&EI(l,a.getPadding());const u=Math.max(0,e.outerWidth-IS(l,n,"left","right")),h=Math.max(0,e.outerHeight-IS(l,n,"top","bottom")),f=u!==n.w,y=h!==n.h;return n.w=u,n.h=h,t.horizontal?{same:f,other:y}:{same:y,other:f}}function aU(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function oU(n,e){const t=e.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{a[l]=Math.max(e[l],t[l])}),a}return i(n?["left","right"]:["top","bottom"])}function $d(n,e,t,i){const s=[];let a,l,u,h,f,y;for(a=0,l=n.length,f=0;a<l;++a){u=n[a],h=u.box,h.update(u.width||e.w,u.height||e.h,oU(u.horizontal,e));const{same:v,other:x}=rU(e,t,u,i);f|=v&&s.length,y=y||x,h.fullSize||s.push(u)}return f&&$d(s,e,t,i)||y}function up(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function kS(n,e,t,i){const s=t.padding;let{x:a,y:l}=e;for(const u of n){const h=u.box,f=i[u.stack]||{placed:0,weight:1},y=u.stackWeight/f.weight||1;if(u.horizontal){const v=e.w*y,x=f.size||h.height;yf(f.start)&&(l=f.start),h.fullSize?up(h,s.left,l,t.outerWidth-s.right-s.left,x):up(h,e.left+f.placed,l,v,x),f.start=l,f.placed+=v,l=h.bottom}else{const v=e.h*y,x=f.size||h.width;yf(f.start)&&(a=f.start),h.fullSize?up(h,a,s.top,x,t.outerHeight-s.bottom-s.top):up(h,a,e.top+f.placed,x,v),f.start=a,f.placed+=v,a=h.right}}e.x=a,e.y=l}var hr={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=fr(n.options.layout.padding),a=Math.max(e-s.width,0),l=Math.max(t-s.height,0),u=sU(n.boxes),h=u.vertical,f=u.horizontal;Qt(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const y=h.reduce((k,R)=>R.box.options&&R.box.options.display===!1?k:k+1,0)||1,v=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/y,hBoxMaxHeight:l/2}),x=Object.assign({},s);EI(x,fr(i));const T=Object.assign({maxPadding:x,w:a,h:l,x:s.left,y:s.top},s),C=iU(h.concat(f),v);$d(u.fullSize,T,v,C),$d(h,T,v,C),$d(f,T,v,C)&&$d(h,T,v,C),aU(T),kS(u.leftAndTop,T,v,C),T.x+=T.w,T.y+=T.h,kS(u.rightAndBottom,T,v,C),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Qt(u.chartArea,k=>{const R=k.box;Object.assign(R,n.chartArea),R.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class wI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class lU extends wI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Dp="$chartjs",cU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},NS=n=>n===null||n==="";function uU(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Dp]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",NS(s)){const a=mS(n,"width");a!==void 0&&(n.width=a)}if(NS(i))if(n.style.height==="")n.height=n.width/(e||2);else{const a=mS(n,"height");a!==void 0&&(n.height=a)}return n}const TI=cF?{passive:!0}:!1;function hU(n,e,t){n&&n.addEventListener(e,t,TI)}function dU(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,TI)}function fU(n,e){const t=cU[n.type]||n.type,{x:i,y:s}=Ac(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function fg(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function mU(n,e,t){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||fg(u.addedNodes,i),l=l&&!fg(u.removedNodes,i);l&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function pU(n,e,t){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||fg(u.removedNodes,i),l=l&&!fg(u.addedNodes,i);l&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ef=new Map;let DS=0;function SI(){const n=window.devicePixelRatio;n!==DS&&(DS=n,Ef.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function gU(n,e){Ef.size||window.addEventListener("resize",SI),Ef.set(n,e)}function yU(n){Ef.delete(n),Ef.size||window.removeEventListener("resize",SI)}function _U(n,e,t){const i=n.canvas,s=i&&_0(i);if(!s)return;const a=iI((u,h)=>{const f=s.clientWidth;t(u,h),f<s.clientWidth&&t()},window),l=new ResizeObserver(u=>{const h=u[0],f=h.contentRect.width,y=h.contentRect.height;f===0&&y===0||a(f,y)});return l.observe(s),gU(n,a),l}function J_(n,e,t){t&&t.disconnect(),e==="resize"&&yU(n)}function bU(n,e,t){const i=n.canvas,s=iI(a=>{n.ctx!==null&&t(fU(a,n))},n);return hU(i,e,s),s}class vU extends wI{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(uU(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Dp])return!1;const i=t[Dp].initial;["height","width"].forEach(a=>{const l=i[a];qt(l)?t.removeAttribute(a):t.setAttribute(a,l)});const s=i.style||{};return Object.keys(s).forEach(a=>{t.style[a]=s[a]}),t.width=t.width,delete t[Dp],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),l={attach:mU,detach:pU,resize:_U}[t]||bU;s[t]=l(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:J_,detach:J_,resize:J_}[t]||dU)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return lF(e,t,i,s)}isAttached(e){const t=e&&_0(e);return!!(t&&t.isConnected)}}function xU(n){return!y0()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?lU:vU}let Io=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return _f(this.x)&&_f(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}};function EU(n,e){const t=n.options.ticks,i=wU(n),s=Math.min(t.maxTicksLimit||i,i),a=t.major.enabled?SU(e):[],l=a.length,u=a[0],h=a[l-1],f=[];if(l>s)return AU(e,f,a,l/s),f;const y=TU(a,e,s);if(l>0){let v,x;const T=l>1?Math.round((h-u)/(l-1)):null;for(hp(e,f,y,qt(T)?0:u-T,u),v=0,x=l-1;v<x;v++)hp(e,f,y,a[v],a[v+1]);return hp(e,f,y,h,qt(T)?e.length:h+T),f}return hp(e,f,y),f}function wU(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function TU(n,e,t){const i=CU(n),s=e.length/t;if(!i)return Math.max(s,1);const a=o3(i);for(let l=0,u=a.length-1;l<u;l++){const h=a[l];if(h>s)return h}return Math.max(s,1)}function SU(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function AU(n,e,t,i){let s=0,a=t[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(e.push(n[l]),s++,a=t[s*i])}function hp(n,e,t,i,s){const a=vt(i,0),l=Math.min(vt(s,n.length),n.length);let u=0,h,f,y;for(t=Math.ceil(t),s&&(h=s-i,t=h/Math.floor(h/t)),y=a;y<0;)u++,y=Math.round(a+u*t);for(f=Math.max(a,0);f<l;f++)f===y&&(e.push(n[f]),u++,y=Math.round(a+u*t))}function CU(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const RU=n=>n==="left"?"right":n==="right"?"left":n,OS=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,MS=(n,e)=>Math.min(e||n,n);function PS(n,e){const t=[],i=n.length/e,s=n.length;let a=0;for(;a<s;a+=i)t.push(n[Math.floor(a)]);return t}function IU(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),a=n._startPixel,l=n._endPixel,u=1e-6;let h=n.getPixelForTick(s),f;if(!(t&&(i===1?f=Math.max(h-a,l-h):e===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(s-1))/2,h+=s<e?f:-f,h<a-u||h>l+u)))return h}function kU(n,e){Qt(n,t=>{const i=t.gc,s=i.length/2;let a;if(s>e){for(a=0;a<s;++a)delete t.data[i[a]];i.splice(0,s)}})}function Od(n){return n.drawTicks?n.tickLength:0}function jS(n,e){if(!n.display)return 0;const t=Vi(n.font,e),i=fr(n.padding);return(Gn(n.text)?n.text.length:1)*t.lineHeight+i.height}function NU(n,e){return Kc(n,{scale:e,type:"scale"})}function DU(n,e,t){return Kc(n,{tick:t,index:e,type:"tick"})}function OU(n,e,t){let i=u0(n);return(t&&e!=="right"||!t&&e==="right")&&(i=RU(i)),i}function MU(n,e,t,i){const{top:s,left:a,bottom:l,right:u,chart:h}=n,{chartArea:f,scales:y}=h;let v=0,x,T,C;const k=l-s,R=u-a;if(n.isHorizontal()){if(T=Mi(i,a,u),Ot(t)){const j=Object.keys(t)[0],q=t[j];C=y[j].getPixelForValue(q)+k-e}else t==="center"?C=(f.bottom+f.top)/2+k-e:C=OS(n,t,e);x=u-a}else{if(Ot(t)){const j=Object.keys(t)[0],q=t[j];T=y[j].getPixelForValue(q)-R+e}else t==="center"?T=(f.left+f.right)/2-R+e:T=OS(n,t,e);C=Mi(i,l,s),v=t==="left"?-si:si}return{titleX:T,titleY:C,maxWidth:x,rotation:v}}class gh extends Io{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=la(e,Number.POSITIVE_INFINITY),t=la(t,Number.NEGATIVE_INFINITY),i=la(i,Number.POSITIVE_INFINITY),s=la(s,Number.NEGATIVE_INFINITY),{min:la(e,i),max:la(t,s),minDefined:Ui(e),maxDefined:Ui(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),l;if(s&&a)return{min:t,max:i};const u=this.getMatchingVisibleMetas();for(let h=0,f=u.length;h<f;++h)l=u[h].controller.getMinMax(this,e),s||(t=Math.min(t,l.min)),a||(i=Math.max(i,l.max));return t=a&&t>i?i:t,i=s&&t>i?t:i,{min:la(t,la(i,t)),max:la(i,la(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){hn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:a,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=U3(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?PS(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=EU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){hn(this.options.afterUpdate,[this])}beforeSetDimensions(){hn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){hn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),hn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){hn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,a;for(i=0,s=e.length;i<s;i++)a=e[i],a.label=hn(t.callback,[a.value,i,e],this)}afterTickToLabelConversion(){hn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){hn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=MS(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,a=t.maxRotation;let l=s,u,h,f;if(!this._isVisible()||!t.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const y=this._getLabelSizes(),v=y.widest.width,x=y.highest.height,T=Li(this.chart.width-v,0,this.maxWidth);u=e.offset?this.maxWidth/i:T/(i-1),v+6>u&&(u=T/(i-(e.offset?.5:1)),h=this.maxHeight-Od(e.grid)-t.padding-jS(e.title,this.chart.options.font),f=Math.sqrt(v*v+x*x),l=h3(Math.min(Math.asin(Li((y.highest.height+6)/u,-1,1)),Math.asin(Li(h/f,-1,1))-Math.asin(Li(x/f,-1,1)))),l=Math.max(s,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){hn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){hn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:a}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const h=jS(s,t.options.font);if(u?(e.width=this.maxWidth,e.height=Od(a)+h):(e.height=this.maxHeight,e.width=Od(a)+h),i.display&&this.ticks.length){const{first:f,last:y,widest:v,highest:x}=this._getLabelSizes(),T=i.padding*2,C=vo(this.labelRotation),k=Math.cos(C),R=Math.sin(C);if(u){const j=i.mirror?0:R*v.width+k*x.height;e.height=Math.min(this.maxHeight,e.height+j+T)}else{const j=i.mirror?0:k*v.width+R*x.height;e.width=Math.min(this.maxWidth,e.width+j+T)}this._calculatePadding(f,y,R,k)}}this._handleMargins(),u?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:a,padding:l},position:u}=this.options,h=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,T=0;h?f?(x=s*e.width,T=i*t.height):(x=i*e.height,T=s*t.width):a==="start"?T=t.width:a==="end"?x=e.width:a!=="inner"&&(x=e.width/2,T=t.width/2),this.paddingLeft=Math.max((x-y+l)*this.width/(this.width-y),0),this.paddingRight=Math.max((T-v+l)*this.width/(this.width-v),0)}else{let y=t.height/2,v=e.height/2;a==="start"?(y=0,v=e.height):a==="end"&&(y=t.height,v=0),this.paddingTop=y+l,this.paddingBottom=v+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){hn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)qt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=PS(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:a}=this,l=[],u=[],h=Math.floor(t/MS(t,i));let f=0,y=0,v,x,T,C,k,R,j,q,G,X,Y;for(v=0;v<t;v+=h){if(C=e[v].label,k=this._resolveTickFontOptions(v),s.font=R=k.string,j=a[R]=a[R]||{data:{},gc:[]},q=k.lineHeight,G=X=0,!qt(C)&&!Gn(C))G=cS(s,j.data,j.gc,G,C),X=q;else if(Gn(C))for(x=0,T=C.length;x<T;++x)Y=C[x],!qt(Y)&&!Gn(Y)&&(G=cS(s,j.data,j.gc,G,Y),X+=q);l.push(G),u.push(X),f=Math.max(G,f),y=Math.max(X,y)}kU(a,t);const J=l.indexOf(f),F=u.indexOf(y),I=O=>({width:l[O]||0,height:u[O]||0});return{first:I(0),last:I(t-1),widest:I(J),highest:I(F),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return f3(this._alignToPixels?Ec(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=DU(this.getContext(),e,i))}return this.$context||(this.$context=NU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=vo(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),a=this._getLabelSizes(),l=e.autoSkipPadding||0,u=a?a.widest.width+l:0,h=a?a.highest.height+l:0;return this.isHorizontal()?h*i>u*s?u/i:h/s:h*s<u*i?h/i:u/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:a,position:l,border:u}=s,h=a.offset,f=this.isHorizontal(),v=this.ticks.length+(h?1:0),x=Od(a),T=[],C=u.setContext(this.getContext()),k=C.display?C.width:0,R=k/2,j=function(K){return Ec(i,K,k)};let q,G,X,Y,J,F,I,O,U,H,B,z;if(l==="top")q=j(this.bottom),F=this.bottom-x,O=q-R,H=j(e.top)+R,z=e.bottom;else if(l==="bottom")q=j(this.top),H=e.top,z=j(e.bottom)-R,F=q+R,O=this.top+x;else if(l==="left")q=j(this.right),J=this.right-x,I=q-R,U=j(e.left)+R,B=e.right;else if(l==="right")q=j(this.left),U=e.left,B=j(e.right)-R,J=q+R,I=this.left+x;else if(t==="x"){if(l==="center")q=j((e.top+e.bottom)/2+.5);else if(Ot(l)){const K=Object.keys(l)[0],se=l[K];q=j(this.chart.scales[K].getPixelForValue(se))}H=e.top,z=e.bottom,F=q+R,O=F+x}else if(t==="y"){if(l==="center")q=j((e.left+e.right)/2);else if(Ot(l)){const K=Object.keys(l)[0],se=l[K];q=j(this.chart.scales[K].getPixelForValue(se))}J=q-R,I=J-x,U=e.left,B=e.right}const je=vt(s.ticks.maxTicksLimit,v),_e=Math.max(1,Math.ceil(v/je));for(G=0;G<v;G+=_e){const K=this.getContext(G),se=a.setContext(K),Ee=u.setContext(K),Le=se.lineWidth,P=se.color,fe=Ee.dash||[],Ae=Ee.dashOffset,ge=se.tickWidth,ke=se.tickColor,$e=se.tickBorderDash||[],Pe=se.tickBorderDashOffset;X=IU(this,G,h),X!==void 0&&(Y=Ec(i,X,Le),f?J=I=U=B=Y:F=O=H=z=Y,T.push({tx1:J,ty1:F,tx2:I,ty2:O,x1:U,y1:H,x2:B,y2:z,width:Le,color:P,borderDash:fe,borderDashOffset:Ae,tickWidth:ge,tickColor:ke,tickBorderDash:$e,tickBorderDashOffset:Pe}))}return this._ticksLength=v,this._borderValue=q,T}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:a}=i,l=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:f,padding:y,mirror:v}=a,x=Od(i.grid),T=x+y,C=v?-y:T,k=-vo(this.labelRotation),R=[];let j,q,G,X,Y,J,F,I,O,U,H,B,z="middle";if(s==="top")J=this.bottom-C,F=this._getXAxisLabelAlignment();else if(s==="bottom")J=this.top+C,F=this._getXAxisLabelAlignment();else if(s==="left"){const _e=this._getYAxisLabelAlignment(x);F=_e.textAlign,Y=_e.x}else if(s==="right"){const _e=this._getYAxisLabelAlignment(x);F=_e.textAlign,Y=_e.x}else if(t==="x"){if(s==="center")J=(e.top+e.bottom)/2+T;else if(Ot(s)){const _e=Object.keys(s)[0],K=s[_e];J=this.chart.scales[_e].getPixelForValue(K)+T}F=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")Y=(e.left+e.right)/2-T;else if(Ot(s)){const _e=Object.keys(s)[0],K=s[_e];Y=this.chart.scales[_e].getPixelForValue(K)}F=this._getYAxisLabelAlignment(x).textAlign}t==="y"&&(h==="start"?z="top":h==="end"&&(z="bottom"));const je=this._getLabelSizes();for(j=0,q=u.length;j<q;++j){G=u[j],X=G.label;const _e=a.setContext(this.getContext(j));I=this.getPixelForTick(j)+a.labelOffset,O=this._resolveTickFontOptions(j),U=O.lineHeight,H=Gn(X)?X.length:1;const K=H/2,se=_e.color,Ee=_e.textStrokeColor,Le=_e.textStrokeWidth;let P=F;l?(Y=I,F==="inner"&&(j===q-1?P=this.options.reverse?"left":"right":j===0?P=this.options.reverse?"right":"left":P="center"),s==="top"?f==="near"||k!==0?B=-H*U+U/2:f==="center"?B=-je.highest.height/2-K*U+U:B=-je.highest.height+U/2:f==="near"||k!==0?B=U/2:f==="center"?B=je.highest.height/2-K*U:B=je.highest.height-H*U,v&&(B*=-1),k!==0&&!_e.showLabelBackdrop&&(Y+=U/2*Math.sin(k))):(J=I,B=(1-H)*U/2);let fe;if(_e.showLabelBackdrop){const Ae=fr(_e.backdropPadding),ge=je.heights[j],ke=je.widths[j];let $e=B-Ae.top,Pe=0-Ae.left;switch(z){case"middle":$e-=ge/2;break;case"bottom":$e-=ge;break}switch(F){case"center":Pe-=ke/2;break;case"right":Pe-=ke;break;case"inner":j===q-1?Pe-=ke:j>0&&(Pe-=ke/2);break}fe={left:Pe,top:$e,width:ke+Ae.width,height:ge+Ae.height,color:_e.backdropColor}}R.push({label:X,font:O,textOffset:B,options:{rotation:k,color:se,strokeColor:Ee,strokeWidth:Le,textAlign:P,textBaseline:z,translation:[Y,J],backdrop:fe}})}return R}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-vo(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,l=this._getLabelSizes(),u=e+a,h=l.widest.width;let f,y;return t==="left"?s?(y=this.right+a,i==="near"?f="left":i==="center"?(f="center",y+=h/2):(f="right",y+=h)):(y=this.right-u,i==="near"?f="right":i==="center"?(f="center",y-=h/2):(f="left",y=this.left)):t==="right"?s?(y=this.left+a,i==="near"?f="right":i==="center"?(f="center",y-=h/2):(f="left",y-=h)):(y=this.left+u,i==="near"?f="left":i==="center"?(f="center",y+=h/2):(f="right",y=this.right)):f="right",{textAlign:f,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:a,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,a,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(a=>a.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,l;const u=(h,f,y)=>{!y.width||!y.color||(i.save(),i.lineWidth=y.width,i.strokeStyle=y.color,i.setLineDash(y.borderDash||[]),i.lineDashOffset=y.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(t.display)for(a=0,l=s.length;a<l;++a){const h=s[a];t.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const u=s.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,y,v,x;this.isHorizontal()?(f=Ec(e,this.left,l)-l/2,y=Ec(e,this.right,u)+u/2,v=x=h):(v=Ec(e,this.top,l)-l/2,x=Ec(e,this.bottom,u)+u/2,f=y=h),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(f,v),t.lineTo(y,x),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Kg(i,s);const a=this.getLabelItems(e);for(const l of a){const u=l.options,h=l.font,f=l.label,y=l.textOffset;xf(i,f,0,y,h,u)}s&&Yg(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const a=Vi(i.font),l=fr(i.padding),u=i.align;let h=a.lineHeight/2;t==="bottom"||t==="center"||Ot(t)?(h+=l.bottom,Gn(i.text)&&(h+=a.lineHeight*(i.text.length-1))):h+=l.top;const{titleX:f,titleY:y,maxWidth:v,rotation:x}=MU(this,h,t,u);xf(e,i.text,0,0,a,{color:i.color,maxWidth:v,rotation:x,textAlign:OU(u,t,s),textBaseline:"middle",translation:[f,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=vt(e.grid&&e.grid.z,-1),s=vt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==gh.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,l;for(a=0,l=t.length;a<l;++a){const u=t[a];u[i]===this.id&&(!e||u.type===e)&&s.push(u)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Vi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dp{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;LU(t)&&(i=this.register(t));const s=this.items,a=e.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in s||(s[a]=e,PU(e,l,i),this.override&&jn.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in jn[s]&&(delete jn[s][i],this.override&&delete zc[i])}}function PU(n,e,t){const i=gf(Object.create(null),[t?jn.get(t):{},jn.get(e),n.defaults]);jn.set(e,i),n.defaultRoutes&&jU(e,n.defaultRoutes),n.descriptors&&jn.describe(e,n.descriptors)}function jU(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),a=[n].concat(i).join("."),l=e[t].split("."),u=l.pop(),h=l.join(".");jn.route(a,s,h,u)})}function LU(n){return"id"in n&&"defaults"in n}class VU{constructor(){this.controllers=new dp(Qg,"datasets",!0),this.elements=new dp(Io,"elements"),this.plugins=new dp(Object,"plugins"),this.scales=new dp(gh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(e,a,s):Qt(s,l=>{const u=i||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,t,i){const s=l0(e);hn(i["before"+s],[],i),t[e](i),hn(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var ua=new VU;class FU{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=s?this._descriptors(e).filter(s):this._descriptors(e),l=this._notify(a,e,t,i);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,i,s){s=s||{};for(const a of e){const l=a.plugin,u=l[i],h=[t,s,a.options];if(hn(u,h,l)===!1&&s.cancelable)return!1}return!0}invalidate(){qt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=vt(i.options&&i.options.plugins,{}),a=UU(i);return s===!1&&!t?[]:BU(e,a,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(a,l)=>a.filter(u=>!l.some(h=>u.plugin.id===h.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function UU(n){const e={},t=[],i=Object.keys(ua.plugins.items);for(let a=0;a<i.length;a++)t.push(ua.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const l=s[a];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function zU(n,e){return!e&&n===!1?null:n===!0?{}:n}function BU(n,{plugins:e,localIds:t},i,s){const a=[],l=n.getContext();for(const u of e){const h=u.id,f=zU(i[h],s);f!==null&&a.push({plugin:u,options:HU(n.config,{plugin:u,local:t[h]},f,l)})}return a}function HU(n,{plugin:e,local:t},i,s){const a=n.pluginScopeKeys(e),l=n.getOptionScopes(i,a);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gb(n,e){const t=jn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function $U(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function qU(n,e){return n===e?"_index_":"_value_"}function LS(n){if(n==="x"||n==="y"||n==="r")return n}function GU(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Wb(n,...e){if(LS(n))return n;for(const t of e){const i=t.axis||GU(t.position)||n.length>1&&LS(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function VS(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function WU(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return VS(n,"x",t[0])||VS(n,"y",t[0])}return{}}function KU(n,e){const t=zc[n.type]||{scales:{}},i=e.scales||{},s=Gb(n.type,e),a=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ot(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=Wb(l,u,WU(l,n),jn.scales[u.type]),f=qU(h,s),y=t.scales||{};a[l]=ef(Object.create(null),[{axis:h},u,y[h],y[f]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,h=l.indexAxis||Gb(u,e),y=(zc[u]||{}).scales||{};Object.keys(y).forEach(v=>{const x=$U(v,h),T=l[x+"AxisID"]||x;a[T]=a[T]||Object.create(null),ef(a[T],[{axis:x},i[T],y[v]])})}),Object.keys(a).forEach(l=>{const u=a[l];ef(u,[jn.scales[u.type],jn.scale])}),a}function AI(n){const e=n.options||(n.options={});e.plugins=vt(e.plugins,{}),e.scales=KU(n,e)}function CI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function YU(n){return n=n||{},n.data=CI(n.data),AI(n),n}const FS=new Map,RI=new Set;function fp(n,e){let t=FS.get(n);return t||(t=e(),FS.set(n,t),RI.add(t)),t}const Md=(n,e,t)=>{const i=Uc(e,t);i!==void 0&&n.add(i)};class XU{constructor(e){this._config=YU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=CI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),AI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return fp(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return fp(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return fp(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return fp(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:a}=this,l=this._cachedScopes(e,i),u=l.get(t);if(u)return u;const h=new Set;t.forEach(y=>{e&&(h.add(e),y.forEach(v=>Md(h,e,v))),y.forEach(v=>Md(h,s,v)),y.forEach(v=>Md(h,zc[a]||{},v)),y.forEach(v=>Md(h,jn,v)),y.forEach(v=>Md(h,$b,v))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),RI.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,zc[t]||{},jn.datasets[t]||{},{type:t},jn,$b]}resolveNamedOptions(e,t,i,s=[""]){const a={$shared:!0},{resolver:l,subPrefixes:u}=US(this._resolverCache,e,s);let h=l;if(ZU(l,t)){a.$shared=!1,i=zl(i)?i():i;const f=this.createResolver(e,i,u);h=sh(l,i,f)}for(const f of t)a[f]=h[f];return a}createResolver(e,t,i=[""],s){const{resolver:a}=US(this._resolverCache,e,i);return Ot(t)?sh(a,t,void 0,s):a}}function US(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let a=i.get(s);return a||(a={resolver:m0(e,t),subPrefixes:t.filter(u=>!u.toLowerCase().includes("hover"))},i.set(s,a)),a}const QU=n=>Ot(n)&&Object.getOwnPropertyNames(n).some(e=>zl(n[e]));function ZU(n,e){const{isScriptable:t,isIndexable:i}=oI(n);for(const s of e){const a=t(s),l=i(s),u=(l||a)&&n[s];if(a&&(zl(u)||QU(u))||l&&Gn(u))return!0}return!1}var JU="4.5.0";const ez=["top","bottom","left","right","chartArea"];function zS(n,e){return n==="top"||n==="bottom"||ez.indexOf(n)===-1&&e==="x"}function BS(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function HS(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),hn(t&&t.onComplete,[n],e)}function tz(n){const e=n.chart,t=e.options.animation;hn(t&&t.onProgress,[n],e)}function II(n){return y0()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Op={},$S=n=>{const e=II(n);return Object.values(Op).filter(t=>t.canvas===e).pop()};function nz(n,e,t){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=e){const l=n[s];delete n[s],(t>0||a>e)&&(n[a+t]=l)}}}function iz(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}let Jg=class{static defaults=jn;static instances=Op;static overrides=zc;static registry=ua;static version=JU;static getChart=$S;static register(...e){ua.add(...e),qS()}static unregister(...e){ua.remove(...e),qS()}constructor(e,t){const i=this.config=new XU(t),s=II(e),a=$S(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||xU(s)),this.platform.updateConfig(i);const u=this.platform.acquireContext(s,l.aspectRatio),h=u&&u.canvas,f=h&&h.height,y=h&&h.width;if(this.id=Z4(),this.ctx=u,this.canvas=h,this.width=y,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=y3(v=>this.update(v),l.resizeDelay||0),this._dataChanges=[],Op[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}fo.listen(this,"complete",HS),fo.listen(this,"progress",tz),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:a}=this;return qt(e)?t&&a?a:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ua}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return uS(this.canvas,this.ctx),this}stop(){return fo.stop(this),this}resize(e,t){fo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,e,t,a),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,fS(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),hn(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Qt(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let a=[];t&&(a=a.concat(Object.keys(t).map(l=>{const u=t[l],h=Wb(l,u),f=h==="r",y=h==="x";return{options:u,dposition:f?"chartArea":y?"bottom":"left",dtype:f?"radialLinear":y?"category":"linear"}}))),Qt(a,l=>{const u=l.options,h=u.id,f=Wb(h,u),y=vt(u.type,l.dtype);(u.position===void 0||zS(u.position,f)!==zS(l.dposition))&&(u.position=l.dposition),s[h]=!0;let v=null;if(h in i&&i[h].type===y)v=i[h];else{const x=ua.getScale(y);v=new x({id:h,type:y,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(u,e)}),Qt(s,(l,u)=>{l||delete i[u]}),Qt(i,l=>{hr.configure(this,l,l.options),hr.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,a)=>s.index-a.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(BS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const a=t[i];let l=this.getDatasetMeta(i);const u=a.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=a.indexAxis||Gb(u,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=ua.getController(u),{datasetElementType:f,dataElementType:y}=jn.datasets[u];Object.assign(h,{dataElementType:ua.getElement(y),datasetElementType:f&&ua.getElement(f)}),l.controller=new h(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Qt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,y=this.data.datasets.length;f<y;f++){const{controller:v}=this.getDatasetMeta(f),x=!s&&a.indexOf(v)===-1;v.buildOrUpdateElements(x),l=Math.max(+v.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||Qt(a,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(BS("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Qt(this.scales,e=>{hr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!eS(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of t){const l=i==="_removeElements"?-a:a;nz(e,s,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=a=>new Set(e.filter(l=>l[0]===a).map((l,u)=>u+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<t;a++)if(!eS(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hr.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Qt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,zl(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fo.has(this)?this.attached&&!fo.running(this)&&fo.start(this):(this.draw(),HS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,a;for(s=0,a=t.length;s<a;++s){const l=t[s];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=yI(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Kg(t,s),e.controller.draw(),s&&Yg(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return vf(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const a=eU.modes[t];return typeof a=="function"?a(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(a=>a&&a._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Kc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",a=this.getDatasetMeta(e),l=a.controller._resolveAnimations(void 0,s);yf(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(a,{visible:i}),this.update(u=>u.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),fo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),uS(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Op[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(a,l)=>{t.addEventListener(this,a,l),e[a]=l},s=(a,l,u)=>{a.offsetX=l,a.offsetY=u,this._eventHandler(a)};Qt(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},s=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},a=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const u=()=>{s("attach",u),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",u)},t.isAttached(this.canvas)?u():l()}unbindEvents(){Qt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Qt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let a,l,u,h;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){l=e[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:a,index:l})=>{const u=this.getDatasetMeta(a);if(!u)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:u.data[l],index:l}});!lg(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,a=(h,f)=>h.filter(y=>!f.some(v=>y.datasetIndex===v.datasetIndex&&y.index===v.index)),l=a(t,e),u=i?e:a(e,t);l.length&&this.updateHoverStyle(l,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:a}=this,l=t,u=this._getActiveElements(e,s,i,l),h=s3(e),f=iz(e,this._lastEvent,i,h);i&&(this._lastEvent=null,hn(a.onHover,[e,u,this],this),h&&hn(a.onClick,[e,u,this],this));const y=!lg(u,s);return(y||t)&&(this._active=u,this._updateHoverStyles(u,s,t)),this._lastEvent=f,y}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}};function qS(){return Qt(Jg.instances,n=>n._plugins.invalidate())}function sz(n,e,t){const{startAngle:i,x:s,y:a,outerRadius:l,innerRadius:u,options:h}=e,{borderWidth:f,borderJoinStyle:y}=h,v=Math.min(f/l,Ms(i-t));if(n.beginPath(),n.arc(s,a,l-f/2,i+v/2,t-v/2),u>0){const x=Math.min(f/u,Ms(i-t));n.arc(s,a,u+f/2,t-x/2,i+x/2,!0)}else{const x=Math.min(f/2,l*Ms(i-t));if(y==="round")n.arc(s,a,x,t-Zt/2,i+Zt/2,!0);else if(y==="bevel"){const T=2*x*x,C=-T*Math.cos(t+Zt/2)+s,k=-T*Math.sin(t+Zt/2)+a,R=T*Math.cos(i+Zt/2)+s,j=T*Math.sin(i+Zt/2)+a;n.lineTo(C,k),n.lineTo(R,j)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function rz(n,e,t){const{startAngle:i,pixelMargin:s,x:a,y:l,outerRadius:u,innerRadius:h}=e;let f=s/u;n.beginPath(),n.arc(a,l,u,i-f,t+f),h>s?(f=s/h,n.arc(a,l,h,t+f,i-f,!0)):n.arc(a,l,s,t+si,i-si),n.closePath(),n.clip()}function az(n){return f0(n,["outerStart","outerEnd","innerStart","innerEnd"])}function oz(n,e,t,i){const s=az(n.options.borderRadius),a=(t-e)/2,l=Math.min(a,i*e/2),u=h=>{const f=(t-Math.min(a,h))*i/2;return Li(h,0,Math.min(a,f))};return{outerStart:u(s.outerStart),outerEnd:u(s.outerEnd),innerStart:Li(s.innerStart,0,l),innerEnd:Li(s.innerEnd,0,l)}}function Mu(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function mg(n,e,t,i,s,a){const{x:l,y:u,startAngle:h,pixelMargin:f,innerRadius:y}=e,v=Math.max(e.outerRadius+i+t-f,0),x=y>0?y+i+t+f:0;let T=0;const C=s-h;if(i){const _e=y>0?y-i:0,K=v>0?v-i:0,se=(_e+K)/2,Ee=se!==0?C*se/(se+i):C;T=(C-Ee)/2}const k=Math.max(.001,C*v-t/Zt)/v,R=(C-k)/2,j=h+R+T,q=s-R-T,{outerStart:G,outerEnd:X,innerStart:Y,innerEnd:J}=oz(e,x,v,q-j),F=v-G,I=v-X,O=j+G/F,U=q-X/I,H=x+Y,B=x+J,z=j+Y/H,je=q-J/B;if(n.beginPath(),a){const _e=(O+U)/2;if(n.arc(l,u,v,O,_e),n.arc(l,u,v,_e,U),X>0){const Le=Mu(I,U,l,u);n.arc(Le.x,Le.y,X,U,q+si)}const K=Mu(B,q,l,u);if(n.lineTo(K.x,K.y),J>0){const Le=Mu(B,je,l,u);n.arc(Le.x,Le.y,J,q+si,je+Math.PI)}const se=(q-J/x+(j+Y/x))/2;if(n.arc(l,u,x,q-J/x,se,!0),n.arc(l,u,x,se,j+Y/x,!0),Y>0){const Le=Mu(H,z,l,u);n.arc(Le.x,Le.y,Y,z+Math.PI,j-si)}const Ee=Mu(F,j,l,u);if(n.lineTo(Ee.x,Ee.y),G>0){const Le=Mu(F,O,l,u);n.arc(Le.x,Le.y,G,j-si,O)}}else{n.moveTo(l,u);const _e=Math.cos(O)*v+l,K=Math.sin(O)*v+u;n.lineTo(_e,K);const se=Math.cos(U)*v+l,Ee=Math.sin(U)*v+u;n.lineTo(se,Ee)}n.closePath()}function lz(n,e,t,i,s){const{fullCircles:a,startAngle:l,circumference:u}=e;let h=e.endAngle;if(a){mg(n,e,t,i,h,s);for(let f=0;f<a;++f)n.fill();isNaN(u)||(h=l+(u%bn||bn))}return mg(n,e,t,i,h,s),n.fill(),h}function cz(n,e,t,i,s){const{fullCircles:a,startAngle:l,circumference:u,options:h}=e,{borderWidth:f,borderJoinStyle:y,borderDash:v,borderDashOffset:x,borderRadius:T}=h,C=h.borderAlign==="inner";if(!f)return;n.setLineDash(v||[]),n.lineDashOffset=x,C?(n.lineWidth=f*2,n.lineJoin=y||"round"):(n.lineWidth=f,n.lineJoin=y||"bevel");let k=e.endAngle;if(a){mg(n,e,t,i,k,s);for(let R=0;R<a;++R)n.stroke();isNaN(u)||(k=l+(u%bn||bn))}C&&rz(n,e,k),h.selfJoin&&k-l>=Zt&&T===0&&y!=="miter"&&sz(n,e,k),a||(mg(n,e,t,i,k,s),n.stroke())}class uz extends Io{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:a,distance:l}=JR(s,{x:e,y:t}),{startAngle:u,endAngle:h,innerRadius:f,outerRadius:y,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),x=(this.options.spacing+this.options.borderWidth)/2,T=vt(v,h-u),C=bf(a,u,h)&&u!==h,k=T>=bn||C,R=xo(l,f+x,y+x);return k&&R}getCenterPoint(e){const{x:t,y:i,startAngle:s,endAngle:a,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,y=(s+a)/2,v=(l+u+f+h)/2;return{x:t+Math.cos(y)*v,y:i+Math.sin(y)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/4,a=(t.spacing||0)/2,l=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>bn?Math.floor(i/bn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*s,Math.sin(u)*s);const h=1-Math.sin(Math.min(Zt,i||0)),f=s*h;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,lz(e,this,f,a,l),cz(e,this,f,a,l),e.restore()}}function kI(n,e,t=e){n.lineCap=vt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(vt(t.borderDash,e.borderDash)),n.lineDashOffset=vt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=vt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=vt(t.borderWidth,e.borderWidth),n.strokeStyle=vt(t.borderColor,e.borderColor)}function hz(n,e,t){n.lineTo(t.x,t.y)}function dz(n){return n.stepped?N3:n.tension||n.cubicInterpolationMode==="monotone"?D3:hz}function NI(n,e,t={}){const i=n.length,{start:s=0,end:a=i-1}=t,{start:l,end:u}=e,h=Math.max(s,l),f=Math.min(a,u),y=s<l&&a<l||s>u&&a>u;return{count:i,start:h,loop:e.loop,ilen:f<h&&!y?i+f-h:f-h}}function fz(n,e,t,i){const{points:s,options:a}=e,{count:l,start:u,loop:h,ilen:f}=NI(s,t,i),y=dz(a);let{move:v=!0,reverse:x}=i||{},T,C,k;for(T=0;T<=f;++T)C=s[(u+(x?f-T:T))%l],!C.skip&&(v?(n.moveTo(C.x,C.y),v=!1):y(n,k,C,x,a.stepped),k=C);return h&&(C=s[(u+(x?f:0))%l],y(n,k,C,x,a.stepped)),!!h}function mz(n,e,t,i){const s=e.points,{count:a,start:l,ilen:u}=NI(s,t,i),{move:h=!0,reverse:f}=i||{};let y=0,v=0,x,T,C,k,R,j;const q=X=>(l+(f?u-X:X))%a,G=()=>{k!==R&&(n.lineTo(y,R),n.lineTo(y,k),n.lineTo(y,j))};for(h&&(T=s[q(0)],n.moveTo(T.x,T.y)),x=0;x<=u;++x){if(T=s[q(x)],T.skip)continue;const X=T.x,Y=T.y,J=X|0;J===C?(Y<k?k=Y:Y>R&&(R=Y),y=(v*y+X)/++v):(G(),n.lineTo(X,Y),C=J,v=0,k=R=Y),j=Y}G()}function Kb(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?mz:fz}function pz(n){return n.stepped?uF:n.tension||n.cubicInterpolationMode==="monotone"?hF:Cc}function gz(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),kI(n,e.options),n.stroke(s)}function yz(n,e,t,i){const{segments:s,options:a}=e,l=Kb(e);for(const u of s)kI(n,a,u.style),n.beginPath(),l(n,e,u,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const _z=typeof Path2D=="function";function bz(n,e,t,i){_z&&!e.options.segment?gz(n,e,t,i):yz(n,e,t,i)}class ey extends Io{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;nF(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=yF(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],a=this.points,l=gI(this,{property:t,start:s,end:s});if(!l.length)return;const u=[],h=pz(i);let f,y;for(f=0,y=l.length;f<y;++f){const{start:v,end:x}=l[f],T=a[v],C=a[x];if(T===C){u.push(T);continue}const k=Math.abs((s-T[t])/(C[t]-T[t])),R=h(T,C,k,i.stepped);R[t]=e[t],u.push(R)}return u.length===1?u[0]:u}pathSegment(e,t,i){return Kb(this)(e,this,t,i)}path(e,t,i){const s=this.segments,a=Kb(this);let l=this._loop;t=t||0,i=i||this.points.length-t;for(const u of s)l&=a(e,this,u,{start:t,end:t+i-1});return!!l}draw(e,t,i,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),bz(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function GS(n,e,t,i){const s=n.options,{[t]:a}=n.getProps([t],i);return Math.abs(e-a)<s.radius+s.hitRadius}class vz extends Io{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(t-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return GS(this,e,"x",t)}inYRange(e,t){return GS(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!vf(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,qb(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function DI(n,e){const{x:t,y:i,base:s,width:a,height:l}=n.getProps(["x","y","base","width","height"],e);let u,h,f,y,v;return n.horizontal?(v=l/2,u=Math.min(t,s),h=Math.max(t,s),f=i-v,y=i+v):(v=a/2,u=t-v,h=t+v,f=Math.min(i,s),y=Math.max(i,s)),{left:u,top:f,right:h,bottom:y}}function Sl(n,e,t,i){return n?0:Li(e,t,i)}function xz(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,a=aI(i);return{t:Sl(s.top,a.top,0,t),r:Sl(s.right,a.right,0,e),b:Sl(s.bottom,a.bottom,0,t),l:Sl(s.left,a.left,0,e)}}function Ez(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,a=Yu(s),l=Math.min(e,t),u=n.borderSkipped,h=i||Ot(s);return{topLeft:Sl(!h||u.top||u.left,a.topLeft,0,l),topRight:Sl(!h||u.top||u.right,a.topRight,0,l),bottomLeft:Sl(!h||u.bottom||u.left,a.bottomLeft,0,l),bottomRight:Sl(!h||u.bottom||u.right,a.bottomRight,0,l)}}function wz(n){const e=DI(n),t=e.right-e.left,i=e.bottom-e.top,s=xz(n,t/2,i/2),a=Ez(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:a},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function eb(n,e,t,i){const s=e===null,a=t===null,u=n&&!(s&&a)&&DI(n,i);return u&&(s||xo(e,u.left,u.right))&&(a||xo(t,u.top,u.bottom))}function Tz(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Sz(n,e){n.rect(e.x,e.y,e.w,e.h)}function tb(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,a=(n.x+n.w!==t.x+t.w?e:0)-i,l=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+a,h:n.h+l,radius:n.radius}}class Az extends Io{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:a,outer:l}=wz(this),u=Tz(l.radius)?hg:Sz;e.save(),(l.w!==a.w||l.h!==a.h)&&(e.beginPath(),u(e,tb(l,t,a)),e.clip(),u(e,tb(a,-t,l)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),u(e,tb(a,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return eb(this,e,t,i)}inXRange(e,t){return eb(this,e,null,t)}inYRange(e,t){return eb(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+s)/2:t,y:a?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function Cz(n,e,t){const i=n.segments,s=n.points,a=e.points,l=[];for(const u of i){let{start:h,end:f}=u;f=ty(h,f,s);const y=Yb(t,s[h],s[f],u.loop);if(!e.segments){l.push({source:u,target:y,start:s[h],end:s[f]});continue}const v=gI(e,y);for(const x of v){const T=Yb(t,a[x.start],a[x.end],x.loop),C=pI(u,s,T);for(const k of C)l.push({source:k,target:x,start:{[t]:WS(y,T,"start",Math.max)},end:{[t]:WS(y,T,"end",Math.min)}})}}return l}function Yb(n,e,t,i){if(i)return;let s=e[n],a=t[n];return n==="angle"&&(s=Ms(s),a=Ms(a)),{property:n,start:s,end:a}}function Rz(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,a=[];return e.segments.forEach(({start:l,end:u})=>{u=ty(l,u,s);const h=s[l],f=s[u];i!==null?(a.push({x:h.x,y:i}),a.push({x:f.x,y:i})):t!==null&&(a.push({x:t,y:h.y}),a.push({x:t,y:f.y}))}),a}function ty(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function WS(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function OI(n,e){let t=[],i=!1;return Gn(n)?(i=!0,t=n):t=Rz(n,e),t.length?new ey({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function KS(n){return n&&n.fill!==!1}function Iz(n,e,t){let s=n[e].fill;const a=[e];let l;if(!t)return s;for(;s!==!1&&a.indexOf(s)===-1;){if(!Ui(s))return s;if(l=n[s],!l)return!1;if(l.visible)return s;a.push(s),s=l.fill}return!1}function kz(n,e,t){const i=Mz(n);if(Ot(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Ui(s)&&Math.floor(s)===s?Nz(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Nz(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function Dz(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ot(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Oz(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Ot(n)?i=n.value:i=e.getBaseValue(),i}function Mz(n){const e=n.options,t=e.fill;let i=vt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Pz(n){const{scale:e,index:t,line:i}=n,s=[],a=i.segments,l=i.points,u=jz(e,t);u.push(OI({x:null,y:e.bottom},i));for(let h=0;h<a.length;h++){const f=a[h];for(let y=f.start;y<=f.end;y++)Lz(s,l[y],u)}return new ey({points:s,options:{}})}function jz(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const a=i[s];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function Lz(n,e,t){const i=[];for(let s=0;s<t.length;s++){const a=t[s],{first:l,last:u,point:h}=Vz(a,e,"x");if(!(!h||l&&u)){if(l)i.unshift(h);else if(n.push(h),!u)break}}n.push(...i)}function Vz(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],a=n.segments,l=n.points;let u=!1,h=!1;for(let f=0;f<a.length;f++){const y=a[f],v=l[y.start][t],x=l[y.end][t];if(xo(s,v,x)){u=s===v,h=s===x;break}}return{first:u,last:h,point:i}}class MI{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:a,radius:l}=this;return t=t||{start:0,end:bn},e.arc(s,a,l,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,a=e.angle;return{x:t+Math.cos(a)*s,y:i+Math.sin(a)*s,angle:a}}}function Fz(n){const{chart:e,fill:t,line:i}=n;if(Ui(t))return Uz(e,t);if(t==="stack")return Pz(n);if(t==="shape")return!0;const s=zz(n);return s instanceof MI?s:OI(s,i)}function Uz(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function zz(n){return(n.scale||{}).getPointPositionForValue?Hz(n):Bz(n)}function Bz(n){const{scale:e={},fill:t}=n,i=Dz(t,e);if(Ui(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function Hz(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,a=i.reverse?e.max:e.min,l=Oz(t,e,a),u=[];if(i.grid.circular){const h=e.getPointPositionForValue(0,a);return new MI({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(l)})}for(let h=0;h<s;++h)u.push(e.getPointPositionForValue(h,l));return u}function nb(n,e,t){const i=Fz(e),{chart:s,index:a,line:l,scale:u,axis:h}=e,f=l.options,y=f.fill,v=f.backgroundColor,{above:x=v,below:T=v}=y||{},C=s.getDatasetMeta(a),k=yI(s,C);i&&l.points.length&&(Kg(n,t),$z(n,{line:l,target:i,above:x,below:T,area:t,scale:u,axis:h,clip:k}),Yg(n))}function $z(n,e){const{line:t,target:i,above:s,below:a,area:l,scale:u,clip:h}=e,f=t._loop?"angle":e.axis;n.save();let y=a;a!==s&&(f==="x"?(YS(n,i,l.top),ib(n,{line:t,target:i,color:s,scale:u,property:f,clip:h}),n.restore(),n.save(),YS(n,i,l.bottom)):f==="y"&&(XS(n,i,l.left),ib(n,{line:t,target:i,color:a,scale:u,property:f,clip:h}),n.restore(),n.save(),XS(n,i,l.right),y=s)),ib(n,{line:t,target:i,color:y,scale:u,property:f,clip:h}),n.restore()}function YS(n,e,t){const{segments:i,points:s}=e;let a=!0,l=!1;n.beginPath();for(const u of i){const{start:h,end:f}=u,y=s[h],v=s[ty(h,f,s)];a?(n.moveTo(y.x,y.y),a=!1):(n.lineTo(y.x,t),n.lineTo(y.x,y.y)),l=!!e.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(v.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function XS(n,e,t){const{segments:i,points:s}=e;let a=!0,l=!1;n.beginPath();for(const u of i){const{start:h,end:f}=u,y=s[h],v=s[ty(h,f,s)];a?(n.moveTo(y.x,y.y),a=!1):(n.lineTo(t,y.y),n.lineTo(y.x,y.y)),l=!!e.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(t,v.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function ib(n,e){const{line:t,target:i,property:s,color:a,scale:l,clip:u}=e,h=Cz(t,i,s);for(const{source:f,target:y,start:v,end:x}of h){const{style:{backgroundColor:T=a}={}}=f,C=i!==!0;n.save(),n.fillStyle=T,qz(n,l,u,C&&Yb(s,v,x)),n.beginPath();const k=!!t.pathSegment(n,f);let R;if(C){k?n.closePath():QS(n,i,x,s);const j=!!i.pathSegment(n,y,{move:k,reverse:!0});R=k&&j,R||QS(n,i,v,s)}n.closePath(),n.fill(R?"evenodd":"nonzero"),n.restore()}}function qz(n,e,t,i){const s=e.chart.chartArea,{property:a,start:l,end:u}=i||{};if(a==="x"||a==="y"){let h,f,y,v;a==="x"?(h=l,f=s.top,y=u,v=s.bottom):(h=s.left,f=l,y=s.right,v=u),n.beginPath(),t&&(h=Math.max(h,t.left),y=Math.min(y,t.right),f=Math.max(f,t.top),v=Math.min(v,t.bottom)),n.rect(h,f,y-h,v-f),n.clip()}}function QS(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var Gz={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let a,l,u,h;for(l=0;l<i;++l)a=n.getDatasetMeta(l),u=a.dataset,h=null,u&&u.options&&u instanceof ey&&(h={visible:n.isDatasetVisible(l),index:l,fill:kz(u,l,i),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:u}),a.$filler=h,s.push(h);for(l=0;l<i;++l)h=s[l],!(!h||h.fill===!1)&&(h.fill=Iz(s,l,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let l=s.length-1;l>=0;--l){const u=s[l].$filler;u&&(u.line.updateControlPoints(a,u.axis),i&&u.fill&&nb(n.ctx,u,a))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const a=i[s].$filler;KS(a)&&nb(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!KS(i)||t.drawTime!=="beforeDatasetDraw"||nb(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ZS=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},Wz=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class JS extends Io{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=hn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=Vi(i.font),a=s.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=ZS(i,a);let f,y;t.font=s.string,this.isHorizontal()?(f=this.maxWidth,y=this._fitRows(l,a,u,h)+10):(y=this.maxHeight,f=this._fitCols(l,s,u,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:a,maxWidth:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],y=s+u;let v=e;a.textAlign="left",a.textBaseline="middle";let x=-1,T=-y;return this.legendItems.forEach((C,k)=>{const R=i+t/2+a.measureText(C.text).width;(k===0||f[f.length-1]+R+2*u>l)&&(v+=y,f[f.length-(k>0?0:1)]=0,T+=y,x++),h[k]={left:0,top:T,row:x,width:R,height:s},f[f.length-1]+=R+u}),v}_fitCols(e,t,i,s){const{ctx:a,maxHeight:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],y=l-e;let v=u,x=0,T=0,C=0,k=0;return this.legendItems.forEach((R,j)=>{const{itemWidth:q,itemHeight:G}=Kz(i,t,a,R,s);j>0&&T+G+2*u>y&&(v+=x+u,f.push({width:x,height:T}),C+=x+u,k++,x=T=0),h[j]={left:C,top:T,col:k,width:q,height:G},x=Math.max(x,q),T+=G+u}),v+=x,f.push({width:x,height:T}),v}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:a}}=this,l=Xu(a,this.left,this.width);if(this.isHorizontal()){let u=0,h=Mi(i,this.left+s,this.right-this.lineWidths[u]);for(const f of t)u!==f.row&&(u=f.row,h=Mi(i,this.left+s,this.right-this.lineWidths[u])),f.top+=this.top+e+s,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+s}else{let u=0,h=Mi(i,this.top+e+s,this.bottom-this.columnSizes[u].height);for(const f of t)f.col!==u&&(u=f.col,h=Mi(i,this.top+e+s,this.bottom-this.columnSizes[u].height)),f.top=h,f.left+=this.left+s,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Kg(e,this),this._draw(),Yg(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:a,labels:l}=e,u=jn.color,h=Xu(e.rtl,this.left,this.width),f=Vi(l.font),{padding:y}=l,v=f.size,x=v/2;let T;this.drawTitle(),s.textAlign=h.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:C,boxHeight:k,itemHeight:R}=ZS(l,v),j=function(J,F,I){if(isNaN(C)||C<=0||isNaN(k)||k<0)return;s.save();const O=vt(I.lineWidth,1);if(s.fillStyle=vt(I.fillStyle,u),s.lineCap=vt(I.lineCap,"butt"),s.lineDashOffset=vt(I.lineDashOffset,0),s.lineJoin=vt(I.lineJoin,"miter"),s.lineWidth=O,s.strokeStyle=vt(I.strokeStyle,u),s.setLineDash(vt(I.lineDash,[])),l.usePointStyle){const U={radius:k*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:O},H=h.xPlus(J,C/2),B=F+x;rI(s,U,H,B,l.pointStyleWidth&&C)}else{const U=F+Math.max((v-k)/2,0),H=h.leftForLtr(J,C),B=Yu(I.borderRadius);s.beginPath(),Object.values(B).some(z=>z!==0)?hg(s,{x:H,y:U,w:C,h:k,radius:B}):s.rect(H,U,C,k),s.fill(),O!==0&&s.stroke()}s.restore()},q=function(J,F,I){xf(s,I.text,J,F+R/2,f,{strikethrough:I.hidden,textAlign:h.textAlign(I.textAlign)})},G=this.isHorizontal(),X=this._computeTitleHeight();G?T={x:Mi(a,this.left+y,this.right-i[0]),y:this.top+y+X,line:0}:T={x:this.left+y,y:Mi(a,this.top+X+y,this.bottom-t[0].height),line:0},dI(this.ctx,e.textDirection);const Y=R+y;this.legendItems.forEach((J,F)=>{s.strokeStyle=J.fontColor,s.fillStyle=J.fontColor;const I=s.measureText(J.text).width,O=h.textAlign(J.textAlign||(J.textAlign=l.textAlign)),U=C+x+I;let H=T.x,B=T.y;h.setWidth(this.width),G?F>0&&H+U+y>this.right&&(B=T.y+=Y,T.line++,H=T.x=Mi(a,this.left+y,this.right-i[T.line])):F>0&&B+Y>this.bottom&&(H=T.x=H+t[T.line].width+y,T.line++,B=T.y=Mi(a,this.top+X+y,this.bottom-t[T.line].height));const z=h.x(H);if(j(z,B,J),H=_3(O,H+C+x,G?H+U:this.right,e.rtl),q(h.x(H),B,J),G)T.x+=U+y;else if(typeof J.text!="string"){const je=f.lineHeight;T.y+=PI(J,je)+y}else T.y+=Y}),fI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Vi(t.font),s=fr(t.padding);if(!t.display)return;const a=Xu(e.rtl,this.left,this.width),l=this.ctx,u=t.position,h=i.size/2,f=s.top+h;let y,v=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),y=this.top+f,v=Mi(e.align,v,this.right-x);else{const C=this.columnSizes.reduce((k,R)=>Math.max(k,R.height),0);y=f+Mi(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const T=Mi(u,v,v+x);l.textAlign=a.textAlign(u0(u)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=i.string,xf(l,t.text,T,y,i)}_computeTitleHeight(){const e=this.options.title,t=Vi(e.font),i=fr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,a;if(xo(e,this.left,this.right)&&xo(t,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],xo(e,s.left,s.left+s.width)&&xo(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!Qz(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,a=Wz(s,i);s&&!a&&hn(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!a&&hn(t.onHover,[e,i,this],this)}else i&&hn(t.onClick,[e,i,this],this)}}function Kz(n,e,t,i,s){const a=Yz(i,n,e,t),l=Xz(s,i,e.lineHeight);return{itemWidth:a,itemHeight:l}}function Yz(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,l)=>a.length>l.length?a:l)),e+t.size/2+i.measureText(s).width}function Xz(n,e,t){let i=n;return typeof e.text!="string"&&(i=PI(e,t)),i}function PI(n,e){const t=n.text?n.text.length:0;return e*t}function Qz(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Zz={id:"legend",_element:JS,start(n,e,t){const i=n.legend=new JS({ctx:n.ctx,options:t,chart:n});hr.configure(n,i,t),hr.addBox(n,i)},stop(n){hr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;hr.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:a,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),y=fr(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class jI extends Io{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=Gn(i.text)?i.text.length:1;this._padding=fr(i.padding);const a=s*Vi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:a,options:l}=this,u=l.align;let h=0,f,y,v;return this.isHorizontal()?(y=Mi(u,i,a),v=t+e,f=a-i):(l.position==="left"?(y=i+e,v=Mi(u,s,t),h=Zt*-.5):(y=a-e,v=Mi(u,t,s),h=Zt*.5),f=s-t),{titleX:y,titleY:v,maxWidth:f,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Vi(t.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:h,rotation:f}=this._drawArgs(a);xf(e,t.text,0,0,i,{color:t.color,maxWidth:h,rotation:f,textAlign:u0(t.align),textBaseline:"middle",translation:[l,u]})}}function Jz(n,e){const t=new jI({ctx:n.ctx,options:e,chart:n});hr.configure(n,t,e),hr.addBox(n,t),n.titleBlock=t}var e9={id:"title",_element:jI,start(n,e,t){Jz(n,t)},stop(n){const e=n.titleBlock;hr.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;hr.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qd={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,a=0;for(e=0,t=n.length;e<t;++e){const u=n[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();i.add(h.x),s+=h.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((u,h)=>u+h)/i.size,y:s/a}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,a,l,u;for(a=0,l=n.length;a<l;++a){const h=n[a].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),y=Hb(e,f);y<s&&(s=y,u=h)}}if(u){const h=u.tooltipPosition();t=h.x,i=h.y}return{x:t,y:i}}};function ca(n,e){return e&&(Gn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function mo(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function t9(n,e){const{element:t,datasetIndex:i,index:s}=e,a=n.getDatasetMeta(i).controller,{label:l,value:u}=a.getLabelAndValue(s);return{chart:n,label:l,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:u,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function eA(n,e){const t=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:l,boxHeight:u}=e,h=Vi(e.bodyFont),f=Vi(e.titleFont),y=Vi(e.footerFont),v=a.length,x=s.length,T=i.length,C=fr(e.padding);let k=C.height,R=0,j=i.reduce((X,Y)=>X+Y.before.length+Y.lines.length+Y.after.length,0);if(j+=n.beforeBody.length+n.afterBody.length,v&&(k+=v*f.lineHeight+(v-1)*e.titleSpacing+e.titleMarginBottom),j){const X=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;k+=T*X+(j-T)*h.lineHeight+(j-1)*e.bodySpacing}x&&(k+=e.footerMarginTop+x*y.lineHeight+(x-1)*e.footerSpacing);let q=0;const G=function(X){R=Math.max(R,t.measureText(X).width+q)};return t.save(),t.font=f.string,Qt(n.title,G),t.font=h.string,Qt(n.beforeBody.concat(n.afterBody),G),q=e.displayColors?l+2+e.boxPadding:0,Qt(i,X=>{Qt(X.before,G),Qt(X.lines,G),Qt(X.after,G)}),q=0,t.font=y.string,Qt(n.footer,G),t.restore(),R+=C.width,{width:R,height:k}}function n9(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function i9(n,e,t,i){const{x:s,width:a}=i,l=t.caretSize+t.caretPadding;if(n==="left"&&s+a+l>e.width||n==="right"&&s-a-l<0)return!0}function s9(n,e,t,i){const{x:s,width:a}=t,{width:l,chartArea:{left:u,right:h}}=n;let f="center";return i==="center"?f=s<=(u+h)/2?"left":"right":s<=a/2?f="left":s>=l-a/2&&(f="right"),i9(f,n,e,t)&&(f="center"),f}function tA(n,e,t){const i=t.yAlign||e.yAlign||n9(n,t);return{xAlign:t.xAlign||e.xAlign||s9(n,e,t,i),yAlign:i}}function r9(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function a9(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function nA(n,e,t,i){const{caretSize:s,caretPadding:a,cornerRadius:l}=n,{xAlign:u,yAlign:h}=t,f=s+a,{topLeft:y,topRight:v,bottomLeft:x,bottomRight:T}=Yu(l);let C=r9(e,u);const k=a9(e,h,f);return h==="center"?u==="left"?C+=f:u==="right"&&(C-=f):u==="left"?C-=Math.max(y,x)+s:u==="right"&&(C+=Math.max(v,T)+s),{x:Li(C,0,i.width-e.width),y:Li(k,0,i.height-e.height)}}function mp(n,e,t){const i=fr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function iA(n){return ca([],mo(n))}function o9(n,e,t){return Kc(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function sA(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const LI={beforeTitle:uo,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:uo,beforeBody:uo,beforeLabel:uo,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return qt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:uo,afterBody:uo,beforeFooter:uo,footer:uo,afterFooter:uo};function us(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?LI[e].call(t,i):s}class rA extends Io{static positioners=qd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,a=new _I(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=o9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=us(i,"beforeTitle",this,e),a=us(i,"title",this,e),l=us(i,"afterTitle",this,e);let u=[];return u=ca(u,mo(s)),u=ca(u,mo(a)),u=ca(u,mo(l)),u}getBeforeBody(e,t){return iA(us(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return Qt(e,a=>{const l={before:[],lines:[],after:[]},u=sA(i,a);ca(l.before,mo(us(u,"beforeLabel",this,a))),ca(l.lines,us(u,"label",this,a)),ca(l.after,mo(us(u,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(e,t){return iA(us(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=us(i,"beforeFooter",this,e),a=us(i,"footer",this,e),l=us(i,"afterFooter",this,e);let u=[];return u=ca(u,mo(s)),u=ca(u,mo(a)),u=ca(u,mo(l)),u}_createItems(e){const t=this._active,i=this.chart.data,s=[],a=[],l=[];let u=[],h,f;for(h=0,f=t.length;h<f;++h)u.push(t9(this.chart,t[h]));return e.filter&&(u=u.filter((y,v,x)=>e.filter(y,v,x,i))),e.itemSort&&(u=u.sort((y,v)=>e.itemSort(y,v,i))),Qt(u,y=>{const v=sA(e.callbacks,y);s.push(us(v,"labelColor",this,y)),a.push(us(v,"labelPointStyle",this,y)),l.push(us(v,"labelTextColor",this,y))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=u,u}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const u=qd[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=eA(this,i),f=Object.assign({},u,h),y=tA(this.chart,i,f),v=nA(i,f,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,a={opacity:1,x:v.x,y:v.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const a=this.getCaretPosition(e,i,s);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:h,topRight:f,bottomLeft:y,bottomRight:v}=Yu(u),{x,y:T}=e,{width:C,height:k}=t;let R,j,q,G,X,Y;return a==="center"?(X=T+k/2,s==="left"?(R=x,j=R-l,G=X+l,Y=X-l):(R=x+C,j=R+l,G=X-l,Y=X+l),q=R):(s==="left"?j=x+Math.max(h,y)+l:s==="right"?j=x+C-Math.max(f,v)-l:j=this.caretX,a==="top"?(G=T,X=G-l,R=j-l,q=j+l):(G=T+k,X=G+l,R=j+l,q=j-l),Y=G),{x1:R,x2:j,x3:q,y1:G,y2:X,y3:Y}}drawTitle(e,t,i){const s=this.title,a=s.length;let l,u,h;if(a){const f=Xu(i.rtl,this.x,this.width);for(e.x=mp(this,i.titleAlign,i),t.textAlign=f.textAlign(i.titleAlign),t.textBaseline="middle",l=Vi(i.titleFont),u=i.titleSpacing,t.fillStyle=i.titleColor,t.font=l.string,h=0;h<a;++h)t.fillText(s[h],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,h+1===a&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,t,i,s,a){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:h,boxWidth:f}=a,y=Vi(a.bodyFont),v=mp(this,"left",a),x=s.x(v),T=h<y.lineHeight?(y.lineHeight-h)/2:0,C=t.y+T;if(a.usePointStyle){const k={radius:Math.min(f,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},R=s.leftForLtr(x,f)+f/2,j=C+h/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,qb(e,k,R,j),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,qb(e,k,R,j)}else{e.lineWidth=Ot(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const k=s.leftForLtr(x,f),R=s.leftForLtr(s.xPlus(x,1),f-2),j=Yu(l.borderRadius);Object.values(j).some(q=>q!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,hg(e,{x:k,y:C,w:f,h,radius:j}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),hg(e,{x:R,y:C+1,w:f-2,h:h-2,radius:j}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(k,C,f,h),e.strokeRect(k,C,f,h),e.fillStyle=l.backgroundColor,e.fillRect(R,C+1,f-2,h-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:u,boxHeight:h,boxWidth:f,boxPadding:y}=i,v=Vi(i.bodyFont);let x=v.lineHeight,T=0;const C=Xu(i.rtl,this.x,this.width),k=function(I){t.fillText(I,C.x(e.x+T),e.y+x/2),e.y+=x+a},R=C.textAlign(l);let j,q,G,X,Y,J,F;for(t.textAlign=l,t.textBaseline="middle",t.font=v.string,e.x=mp(this,R,i),t.fillStyle=i.bodyColor,Qt(this.beforeBody,k),T=u&&R!=="right"?l==="center"?f/2+y:f+2+y:0,X=0,J=s.length;X<J;++X){for(j=s[X],q=this.labelTextColors[X],t.fillStyle=q,Qt(j.before,k),G=j.lines,u&&G.length&&(this._drawColorBox(t,e,X,C,i),x=Math.max(v.lineHeight,h)),Y=0,F=G.length;Y<F;++Y)k(G[Y]),x=v.lineHeight;Qt(j.after,k)}T=0,x=v.lineHeight,Qt(this.afterBody,k),e.y-=a}drawFooter(e,t,i){const s=this.footer,a=s.length;let l,u;if(a){const h=Xu(i.rtl,this.x,this.width);for(e.x=mp(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=h.textAlign(i.footerAlign),t.textBaseline="middle",l=Vi(i.footerFont),t.fillStyle=i.footerColor,t.font=l.string,u=0;u<a;++u)t.fillText(s[u],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:a,yAlign:l}=this,{x:u,y:h}=e,{width:f,height:y}=i,{topLeft:v,topRight:x,bottomLeft:T,bottomRight:C}=Yu(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(u+v,h),l==="top"&&this.drawCaret(e,t,i,s),t.lineTo(u+f-x,h),t.quadraticCurveTo(u+f,h,u+f,h+x),l==="center"&&a==="right"&&this.drawCaret(e,t,i,s),t.lineTo(u+f,h+y-C),t.quadraticCurveTo(u+f,h+y,u+f-C,h+y),l==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(u+T,h+y),t.quadraticCurveTo(u,h+y,u,h+y-T),l==="center"&&a==="left"&&this.drawCaret(e,t,i,s),t.lineTo(u,h+v),t.quadraticCurveTo(u,h,u+v,h),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=qd[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=eA(this,e),h=Object.assign({},l,this._size),f=tA(t,e,h),y=nA(e,h,f,t);(s._to!==y.x||a._to!==y.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=fr(t.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,s,t),dI(e,t.textDirection),a.y+=l.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),fI(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:u,index:h})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[h],index:h}}),a=!lg(i,s),l=this._positionChanged(s,t);(a||l)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(e,a,t,i),u=this._positionChanged(l,e),h=t||!lg(l,a)||u;return h&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,i,s){const a=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:i,caretY:s,options:a}=this,l=qd[a.position].call(this,e,t);return l!==!1&&(i!==l.x||s!==l.y)}}var l9={id:"tooltip",_element:rA,positioners:qd,afterInit(n,e,t){t&&(n.tooltip=new rA({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:LI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const c9=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function u9(n,e,t,i){const s=n.indexOf(e);if(s===-1)return c9(n,e,t,i);const a=n.lastIndexOf(e);return s!==a?t:s}const h9=(n,e)=>n===null?null:Li(Math.round(n),0,e);function aA(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class d9 extends gh{static id="category";static defaults={ticks:{callback:aA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:a}of t)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(qt(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:u9(i,e,vt(t,e),this._addedLabels),h9(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=t;l++)s.push({value:l});return s}getLabelForValue(e){return aA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function f9(n,e){const t=[],{bounds:s,step:a,min:l,max:u,precision:h,count:f,maxTicks:y,maxDigits:v,includeBounds:x}=n,T=a||1,C=y-1,{min:k,max:R}=e,j=!qt(l),q=!qt(u),G=!qt(f),X=(R-k)/(v+1);let Y=nS((R-k)/C/T)*T,J,F,I,O;if(Y<1e-14&&!j&&!q)return[{value:k},{value:R}];O=Math.ceil(R/Y)-Math.floor(k/Y),O>C&&(Y=nS(O*Y/C/T)*T),qt(h)||(J=Math.pow(10,h),Y=Math.ceil(Y*J)/J),s==="ticks"?(F=Math.floor(k/Y)*Y,I=Math.ceil(R/Y)*Y):(F=k,I=R),j&&q&&a&&c3((u-l)/a,Y/1e3)?(O=Math.round(Math.min((u-l)/Y,y)),Y=(u-l)/O,F=l,I=u):G?(F=j?l:F,I=q?u:I,O=f-1,Y=(I-F)/O):(O=(I-F)/Y,tf(O,Math.round(O),Y/1e3)?O=Math.round(O):O=Math.ceil(O));const U=Math.max(iS(Y),iS(F));J=Math.pow(10,qt(h)?U:h),F=Math.round(F*J)/J,I=Math.round(I*J)/J;let H=0;for(j&&(x&&F!==l?(t.push({value:l}),F<l&&H++,tf(Math.round((F+H*Y)*J)/J,l,oA(l,X,n))&&H++):F<l&&H++);H<O;++H){const B=Math.round((F+H*Y)*J)/J;if(q&&B>u)break;t.push({value:B})}return q&&x&&I!==u?t.length&&tf(t[t.length-1].value,u,oA(u,X,n))?t[t.length-1].value=u:t.push({value:u}):(!q||I===u)&&t.push({value:I}),t}function oA(n,e,{horizontal:t,minRotation:i}){const s=vo(i),a=(t?Math.sin(s):Math.cos(s))||.001,l=.75*e*(""+n).length;return Math.min(e/a,l)}class m9 extends gh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return qt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const l=h=>s=t?s:h,u=h=>a=i?a:h;if(e){const h=va(s),f=va(a);h<0&&f<0?u(0):h>0&&f>0&&l(0)}if(s===a){let h=a===0?1:Math.abs(a*.05);u(a+h),e||l(s-h)}this.min=s,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,l=f9(s,a);return e.bounds==="ticks"&&u3(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return d0(e,this.chart.options.locale,this.options.ticks.format)}}class p9 extends m9{static id="linear";static defaults={ticks:{callback:sI.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ui(e)?e:0,this.max=Ui(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=vo(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const ny={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fs=Object.keys(ny);function lA(n,e){return n-e}function cA(n,e){if(qt(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),Ui(l)||(l=typeof i=="string"?t.parse(l,i):t.parse(l)),l===null?null:(s&&(l=s==="week"&&(_f(a)||a===!0)?t.startOf(l,"isoWeek",a):t.startOf(l,s)),+l)}function uA(n,e,t,i){const s=fs.length;for(let a=fs.indexOf(n);a<s-1;++a){const l=ny[fs[a]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(u*l.size))<=i)return fs[a]}return fs[s-1]}function g9(n,e,t,i,s){for(let a=fs.length-1;a>=fs.indexOf(t);a--){const l=fs[a];if(ny[l].common&&n._adapter.diff(s,i,l)>=e-1)return l}return fs[t?fs.indexOf(t):0]}function y9(n){for(let e=fs.indexOf(n)+1,t=fs.length;e<t;++e)if(ny[fs[e]].common)return fs[e]}function hA(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=c0(t,e),a=t[i]>=e?t[i]:t[s];n[a]=!0}}function _9(n,e,t,i){const s=n._adapter,a=+s.startOf(e[0].value,i),l=e[e.length-1].value;let u,h;for(u=a;u<=l;u=+s.add(u,1,i))h=t[u],h>=0&&(e[h].major=!0);return e}function dA(n,e,t){const i=[],s={},a=e.length;let l,u;for(l=0;l<a;++l)u=e[l],s[u]=l,i.push({value:u,major:!1});return a===0||!t?i:_9(n,i,s,t)}class fA extends gh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new YF._date(e.adapters.date);s.init(t),ef(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:cA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:u}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!u&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),s=Ui(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),a=Ui(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,l=this.max,u=p3(s,a,l);return this._unit=t.unit||(i.autoSkip?uA(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):g9(this,u.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:y9(this._unit),this.initOffsets(s),e.reverse&&u.reverse(),dA(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,a;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?i=a:i=(a-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=Li(t,0,l),i=Li(i,0,l),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||uA(a.minUnit,t,i,this._getLabelCapacity(t)),u=vt(s.ticks.stepSize,1),h=l==="week"?a.isoWeekday:!1,f=_f(h)||h===!0,y={};let v=t,x,T;if(f&&(v=+e.startOf(v,"isoWeek",h)),v=+e.startOf(v,f?"day":l),e.diff(i,t,l)>1e5*u)throw new Error(t+" and "+i+" are too far apart with stepSize of "+u+" "+l);const C=s.ticks.source==="data"&&this.getDataTimestamps();for(x=v,T=0;x<i;x=+e.add(x,u,l),T++)hA(y,x,C);return(x===i||s.bounds==="ticks"||T===1)&&hA(y,x,C),Object.keys(y).sort(lA).map(k=>+k)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,a=this._unit,l=t||s[a];return this._adapter.format(e,l)}_tickFormatFunction(e,t,i,s){const a=this.options,l=a.ticks.callback;if(l)return hn(l,[e,t,i],this);const u=a.time.displayFormats,h=this._unit,f=this._majorUnit,y=h&&u[h],v=f&&u[f],x=i[t],T=f&&v&&x&&x.major;return this._adapter.format(e,s||(T?v:y))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=vo(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:i*a+u*l,h:i*l+u*a}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,dA(this,[e],this._majorUnit),s),l=this._getLabelSize(a),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(cA(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return tI(e.sort(lA))}}function pp(n,e,t){let i=0,s=n.length-1,a,l,u,h;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Nc(n,"pos",e)),{pos:a,time:u}=n[i],{pos:l,time:h}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Nc(n,"time",e)),{time:a,pos:u}=n[i],{time:l,pos:h}=n[s]);const f=l-a;return f?u+(h-u)*(e-a)/f:u}class MH extends fA{static id="timeseries";static defaults=fA.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=pp(t,this.min),this._tableRange=pp(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],a=[];let l,u,h,f,y;for(l=0,u=e.length;l<u;++l)f=e[l],f>=t&&f<=i&&s.push(f);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(l=0,u=s.length;l<u;++l)y=s[l+1],h=s[l-1],f=s[l],Math.round((y+h)/2)!==f&&a.push({time:f,pos:l/(u-1)});return a}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(pp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return pp(this._table,i*this._tableRange+this._minPos,!0)}}const VI="label";function mA(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function b9(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function FI(n,e){n.labels=e}function UI(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:VI;const i=[];n.datasets=e.map(s=>{const a=n.datasets.find(l=>l[t]===s[t]);return!a||!s.data||i.includes(a)?{...s}:(i.push(a),Object.assign(a,s),a)})}function v9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:VI;const t={labels:[],datasets:[]};return FI(t,n.labels),UI(t,n.datasets,e),t}function x9(n,e){const{height:t=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:l,data:u,options:h,plugins:f=[],fallbackContent:y,updateMode:v,...x}=n,T=D.useRef(null),C=D.useRef(null),k=()=>{T.current&&(C.current=new Jg(T.current,{type:l,data:v9(u,a),options:h&&{...h},plugins:f}),mA(e,C.current))},R=()=>{mA(e,null),C.current&&(C.current.destroy(),C.current=null)};return D.useEffect(()=>{!s&&C.current&&h&&b9(C.current,h)},[s,h]),D.useEffect(()=>{!s&&C.current&&FI(C.current.config.data,u.labels)},[s,u.labels]),D.useEffect(()=>{!s&&C.current&&u.datasets&&UI(C.current.config.data,u.datasets,a)},[s,u.datasets]),D.useEffect(()=>{C.current&&(s?(R(),setTimeout(k)):C.current.update(v))},[s,h,u.labels,u.datasets,v]),D.useEffect(()=>{C.current&&(R(),setTimeout(k))},[l]),D.useEffect(()=>(k(),()=>R()),[]),ur.createElement("canvas",{ref:T,role:"img",height:t,width:i,...x},y)}const E9=D.forwardRef(x9);function v0(n,e){return Jg.register(e),D.forwardRef((t,i)=>ur.createElement(E9,{...t,ref:i,type:n}))}const pA=v0("line",KF),w9=v0("bar",qF),T9=v0("doughnut",WF),S9=({onNotificationClick:n})=>{const[e,t]=D.useState(0),[i,s]=D.useState(!0),[a,l]=D.useState(!1),[u,h]=D.useState([]),f=async()=>{try{s(!0);const[T,C]=await Promise.all([Pn(sn(At,"ventas")),Pn(sn(At,"clientes"))]),k=T.docs.map(X=>({id:X.id,...X.data()})),R=C.docs.map(X=>({id:X.id,...X.data()})),j=s0(k,R),q=og(j),G=j.filter(X=>X.status==="pending").slice(0,5);t(q.pending),h(G)}catch(T){console.error("Error fetching notifications:",T)}finally{s(!1)}};D.useEffect(()=>{f();const T=setInterval(f,300*1e3);return()=>clearInterval(T)},[]);const y=()=>{l(!a)},v=T=>{l(!1),n&&n(T)},x=T=>T.isDue&&T.daysOverdue>=7?"":T.isDue?"":"";return i?p.jsx("div",{className:"notification-bell",children:p.jsx("div",{className:"bell-icon",children:""})}):p.jsxs("div",{className:"notification-bell-container",children:[p.jsxs("div",{className:`notification-bell ${e>0?"has-notifications":""}`,onClick:y,children:[p.jsx("div",{className:"bell-icon",children:""}),e>0&&p.jsx("div",{className:"notification-badge",children:e>99?"99+":e})]}),a&&p.jsxs("div",{className:"notification-dropdown",children:[p.jsxs("div",{className:"dropdown-header",children:[p.jsx("h3",{children:"Recordatorios de Clientes"}),p.jsxs("span",{className:"notification-count",children:[e," pendientes"]})]}),u.length===0?p.jsx("div",{className:"no-notifications",children:p.jsx("p",{children:"No hay recordatorios pendientes"})}):p.jsx("div",{className:"notification-list",children:u.map(T=>p.jsxs("div",{className:`notification-item ${T.isDue?"overdue":"upcoming"}`,onClick:()=>v(T),children:[p.jsx("div",{className:"notification-priority",children:x(T)}),p.jsxs("div",{className:"notification-content",children:[p.jsx("div",{className:"customer-name",children:T.customerName}),p.jsx("div",{className:"notification-message",children:T.isDue?`${T.daysOverdue} das de retraso!`:`En ${T.daysUntilDue} das`}),p.jsxs("div",{className:"kombucha-info",children:["Compr ",T.totalKombuchas," kombuchas"]})]})]},T.notificationId))}),p.jsx("div",{className:"dropdown-footer",children:p.jsx("button",{className:"view-all-btn",onClick:()=>{l(!1),n&&n({type:"view-all"})},children:"Ver todos los recordatorios"})})]})]})};Jg.register(d9,p9,vz,ey,Az,uz,e9,l9,Zz,Gz);function A9(){const n=ch(),[e,t]=D.useState({dailySales:0,monthlySales:0,monthlyKombuchasSold:0,dailyRevenue:0,monthlyRevenue:0,monthlyCost:0}),[i,s]=D.useState(!0),[a,l]=D.useState([]),[u,h]=D.useState([]),[f,y]=D.useState([]),[v,x]=D.useState({salesTrend:{},topProducts:{},revenueGrowth:{},salesStatus:{}}),[T,C]=D.useState([]),[k,R]=D.useState({}),j=async()=>{try{s(!0);const F=(await Pn(sn(At,"ventas"))).docs.map(Ge=>({id:Ge.id,...Ge.data()})),O=(await Pn(sn(At,"clientes"))).docs.map(Ge=>({id:Ge.id,...Ge.data()}));h(O);const H=(await Pn(sn(At,"kombuchas"))).docs.map(Ge=>({id:Ge.id,...Ge.data()}));y(H);const B=Ps(),z=qR(),je=F.filter(Ge=>Ge.fecha===B&&Ge.estado!=="cancelada"),_e=je.reduce((Ge,Se)=>Ge+(parseFloat(Se.total)||0),0),K=F.filter(Ge=>(Ge.fecha?Ge.fecha.slice(0,7):"")===z&&Ge.estado!=="cancelada"),se=K.reduce((Ge,Se)=>Ge+(parseFloat(Se.total)||0),0);let Ee=0,Le=0;K.forEach(Ge=>{if(Ge.items&&Array.isArray(Ge.items))Ge.items.forEach(Se=>{const Et=parseInt(Se.cantidad)||0;Ee+=Et;const gt=H.find(ee=>ee.id===Se.kombuchaId);gt&&gt.costoUnitario&&(Le+=Et*parseFloat(gt.costoUnitario))});else if(Ge.cantidad){const Se=parseInt(Ge.cantidad)||0;Ee+=Se;const Et=H.find(gt=>gt.id===Ge.kombucha);Et&&Et.costoUnitario&&(Le+=Se*parseFloat(Et.costoUnitario))}});const P=se-Le,Ae=F.sort((Ge,Se)=>new Date(Se.fecha)-new Date(Ge.fecha)).slice(0,5),ge=q(F,H),ke=s0(F,O),$e=og(ke),Pe=ke.filter(Ge=>Ge.status==="pending").slice(0,3);t({dailySales:je.length,monthlySales:K.length,monthlyKombuchasSold:Ee,dailyRevenue:_e,monthlyRevenue:se,monthlyCost:Le,monthlyEarnings:P}),l(Ae),x(ge),C(Pe),R($e)}catch(J){console.error("Error fetching sales data:",J)}finally{s(!1)}},q=(J,F)=>{const I=[],O={};for(let K=29;K>=0;K--){const se=C4(-K);I.push(se),O[se]=0}J.forEach(K=>{O.hasOwnProperty(K.fecha)&&K.estado!=="cancelada"&&O[K.fecha]++});const U={};J.forEach(K=>{if(K.estado!=="cancelada"){if(K.items&&Array.isArray(K.items))K.items.forEach(se=>{const Ee=F.find(P=>P.id===se.kombuchaId),Le=Ee?Ee.nombre:"Producto desconocido";U[Le]=(U[Le]||0)+parseInt(se.cantidad||0)});else if(K.kombucha){const se=F.find(Le=>Le.id===K.kombucha),Ee=se?se.nombre:"Producto desconocido";U[Ee]=(U[Ee]||0)+parseInt(K.cantidad||0)}}});const H=Object.entries(U).sort(([,K],[,se])=>se-K).slice(0,5),B=J.filter(K=>K.estado!=="cancelada").sort((K,se)=>new Date(K.fecha)-new Date(se.fecha)),z=[];let je=0;B.forEach(K=>{je+=parseFloat(K.total||0),z.push(je)});const _e={};return J.forEach(K=>{const se=K.estado||"pendiente";_e[se]=(_e[se]||0)+1}),{salesTrend:{labels:I.map(K=>da(K)),datasets:[{label:"Ventas",data:I.map(K=>O[K]),borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",tension:.4,fill:!0}]},topProducts:{labels:H.map(([K])=>K),datasets:[{label:"Cantidad Vendida",data:H.map(([,K])=>K),backgroundColor:["#667eea","#764ba2","#f093fb","#f5576c","#4facfe"],borderRadius:8}]},revenueGrowth:{labels:B.map((K,se)=>`Venta ${se+1}`),datasets:[{label:"Ingresos Acumulados",data:z,borderColor:"#38a169",backgroundColor:"rgba(56, 161, 105, 0.1)",fill:!0,tension:.4}]},salesStatus:{labels:Object.keys(_e).map(K=>{switch(K){case"completada":return"Completadas";case"pendiente":return"Pendientes";case"cancelada":return"Canceladas";case"pagoPendiente":return"Pago Pendiente";default:return K}}),datasets:[{data:Object.values(_e),backgroundColor:Object.keys(_e).map(K=>{switch(K){case"completada":return"#38a169";case"pendiente":return"#d69e2e";case"cancelada":return"#c53030";case"pagoPendiente":return"#f093fb";default:return"#667eea"}}),borderWidth:0}]}}};D.useEffect(()=>{j()},[]);const G=J=>{const F=u.find(I=>I.id===J);return F?F.nombre:"Cliente no encontrado"},X=J=>R4(J),Y=J=>{J.type,n("/recordatorios")};return i?p.jsx("div",{className:"dashboard",children:p.jsx("div",{className:"loading",children:"Cargando dashboard..."})}):p.jsxs("div",{className:"dashboard",children:[p.jsxs("div",{className:"dashboard-header",children:[p.jsx("h1",{children:"Dashboard"}),p.jsx(S9,{onNotificationClick:Y})]}),p.jsxs("div",{className:"stats",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Ventas del da"}),p.jsx("p",{className:"stat-number",children:e.dailySales}),p.jsxs("p",{className:"stat-subtitle",children:["$",e.dailyRevenue.toFixed(2)]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Ventas del mes"}),p.jsx("p",{className:"stat-number",children:e.monthlySales}),p.jsxs("p",{className:"stat-subtitle",children:["$",e.monthlyRevenue.toFixed(2)]}),p.jsxs("p",{className:"stat-subtitle",children:["Ganancia: $",e.monthlyEarnings.toFixed(2)]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Kombuchas vendidas"}),p.jsx("p",{className:"stat-number",children:e.monthlyKombuchasSold}),p.jsx("p",{className:"stat-subtitle",children:"Este mes"})]}),p.jsxs("div",{className:"stat-card notification-stat",children:[p.jsx("h3",{children:"Recordatorios"}),p.jsx("p",{className:"stat-number",children:k.pending}),p.jsx("p",{className:"stat-subtitle",children:k.overdue>0?`${k.overdue} vencidos`:"Al da"})]})]}),p.jsxs("div",{className:"charts-section",children:[p.jsxs("div",{className:"chart-row",children:[p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Tendencia de Ventas (ltimos 30 das)"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(pA,{data:v.salesTrend,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}},x:{ticks:{maxTicksLimit:10}}},elements:{point:{radius:2}}}})})]}),p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Productos Ms Vendidos"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(w9,{data:v.topProducts,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0}}}})})]})]}),p.jsxs("div",{className:"chart-row",children:[p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Crecimiento de Ingresos"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(pA,{data:v.revenueGrowth,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0},x:{ticks:{maxTicksLimit:8}}},elements:{point:{radius:2}}}})})]}),p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Estado de Ventas"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(T9,{data:v.salesStatus,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{position:"bottom",labels:{padding:10,usePointStyle:!0}},tooltip:{enabled:!0}}}})})]})]})]}),T.length>0&&p.jsxs("div",{className:"notifications-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{children:"Recordatorios Urgentes"}),p.jsx("button",{onClick:()=>n("/recordatorios"),className:"view-all-link",children:"Ver todos"})]}),p.jsx("div",{className:"notifications-list",children:T.map(J=>p.jsxs("div",{className:`notification-item ${J.isDue?"overdue":"upcoming"}`,children:[p.jsxs("div",{className:"notification-content",children:[p.jsx("div",{className:"customer-name",children:J.customerName}),p.jsx("div",{className:"notification-message",children:GR(J)}),p.jsxs("div",{className:"notification-details",children:[p.jsxs("span",{children:["Compr ",J.totalKombuchas," kombuchas"]}),p.jsx("span",{children:""}),p.jsx("span",{children:da(J.lastSaleDate)})]})]}),p.jsx("div",{className:"notification-actions",children:p.jsx("button",{onClick:()=>n("/recordatorios"),className:"action-link",children:"Ver detalles"})})]},J.notificationId))})]}),p.jsxs("div",{className:"recent-batches",children:[p.jsx("h2",{children:"Ventas recientes"}),p.jsx("div",{className:"batch-list",children:a.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No hay ventas recientes"})}):a.map(J=>p.jsxs("div",{className:"batch-item",children:[p.jsxs("div",{className:"batch-info",children:[p.jsxs("h4",{children:["Venta #",J.id.slice(-6)]}),p.jsxs("p",{children:["Fecha: ",X(J.fecha)]}),p.jsxs("p",{children:["Cliente: ",G(J.cliente)]}),p.jsxs("p",{children:["Total: $",parseFloat(J.total||0).toFixed(2)]})]}),p.jsx("div",{className:`batch-status ${J.estado==="completada"?"completed":J.estado==="cancelada"?"canceled":J.estado==="pagoPendiente"?"payment-pending":"active"}`,children:J.estado==="completada"?"Completada":J.estado==="cancelada"?"Cancelada":J.estado==="pagoPendiente"?"Pago Pendiente":"Pendiente"})]},J.id))})]})]})}var sb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var gA;function C9(){return gA||(gA=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(a=s(a,i(u)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var u in a)e.call(a,u)&&a[u]&&(l=s(l,u));return l}function s(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(sb)),sb.exports}var R9=C9();const Bt=Tf(R9),I9=["xxl","xl","lg","md","sm","xs"],k9="xs",zI=D.createContext({prefixes:{},breakpoints:I9,minBreakpoint:k9}),{Consumer:PH,Provider:jH}=zI;function on(n,e){const{prefixes:t}=D.useContext(zI);return n||t[e]||e}const BI=D.forwardRef(({bsPrefix:n,fluid:e=!1,as:t="div",className:i,...s},a)=>{const l=on(n,"container"),u=typeof e=="string"?`-${e}`:"-fluid";return p.jsx(t,{ref:a,...s,className:Bt(i,e?`${l}${u}`:l)})});BI.displayName="Container";function Xb(){return Xb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xb.apply(null,arguments)}function HI(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function yA(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function N9(n){var e=D9(n,"string");return typeof e=="symbol"?e:String(e)}function D9(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function O9(n,e,t){var i=D.useRef(n!==void 0),s=D.useState(e),a=s[0],l=s[1],u=n!==void 0,h=i.current;return i.current=u,!u&&h&&a!==e&&l(e),[u?n:a,D.useCallback(function(f){for(var y=arguments.length,v=new Array(y>1?y-1:0),x=1;x<y;x++)v[x-1]=arguments[x];t&&t.apply(void 0,[f].concat(v)),l(f)},[t])]}function $I(n,e){return Object.keys(e).reduce(function(t,i){var s,a=t,l=a[yA(i)],u=a[i],h=HI(a,[yA(i),i].map(N9)),f=e[i],y=O9(u,l,n[f]),v=y[0],x=y[1];return Xb({},h,(s={},s[i]=v,s[f]=x,s))},n)}function Qb(n,e){return Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},Qb(n,e)}function M9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Qb(n,e)}var P9=Function.prototype.bind.call(Function.prototype.call,[].slice);function Rc(n,e){return P9(n.querySelectorAll(e))}function j9(){const[,n]=D.useReducer(e=>e+1,0);return n}const _A=n=>!n||typeof n=="function"?n:e=>{n.current=e};function L9(n,e){const t=_A(n),i=_A(e);return s=>{t&&t(s),i&&i(s)}}function iy(n,e){return D.useMemo(()=>L9(n,e),[n,e])}const x0=D.createContext(null);x0.displayName="NavContext";const pg=D.createContext(null),E0=(n,e=null)=>n!=null?String(n):e||null,qI=D.createContext(null),V9="data-rr-ui-",F9="rrUi";function sy(n){return`${V9}${n}`}function U9(n){return`${F9}${n}`}function z9(n){const e=D.useRef(n);return D.useEffect(()=>{e.current=n},[n]),e}function go(n){const e=z9(n);return D.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const B9=["as","disabled"];function H9(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function $9(n){return!n||n.trim()==="#"}function w0({tagName:n,disabled:e,href:t,target:i,rel:s,role:a,onClick:l,tabIndex:u=0,type:h}){n||(t!=null||i!=null||s!=null?n="a":n="button");const f={tagName:n};if(n==="button")return[{type:h||"button",disabled:e},f];const y=x=>{if((e||n==="a"&&$9(t))&&x.preventDefault(),e){x.stopPropagation();return}l?.(x)},v=x=>{x.key===" "&&(x.preventDefault(),y(x))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:a??"button",disabled:void 0,tabIndex:e?void 0:u,href:t,target:n==="a"?i:void 0,"aria-disabled":e||void 0,rel:n==="a"?s:void 0,onClick:y,onKeyDown:v},f]}const GI=D.forwardRef((n,e)=>{let{as:t,disabled:i}=n,s=H9(n,B9);const[a,{tagName:l}]=w0(Object.assign({tagName:t,disabled:i},s));return p.jsx(l,Object.assign({},s,a,{ref:e}))});GI.displayName="Button";const q9=["as","active","eventKey"];function G9(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function WI({key:n,onClick:e,active:t,id:i,role:s,disabled:a}){const l=D.useContext(pg),u=D.useContext(x0),h=D.useContext(qI);let f=t;const y={role:s};if(u){!s&&u.role==="tablist"&&(y.role="tab");const v=u.getControllerId(n??null),x=u.getControlledId(n??null);y[sy("event-key")]=n,y.id=v||i,f=t==null&&n!=null?u.activeKey===n:t,(f||!(h!=null&&h.unmountOnExit)&&!(h!=null&&h.mountOnEnter))&&(y["aria-controls"]=x)}return y.role==="tab"&&(y["aria-selected"]=f,f||(y.tabIndex=-1),a&&(y.tabIndex=-1,y["aria-disabled"]=!0)),y.onClick=go(v=>{a||(e?.(v),n!=null&&l&&!v.isPropagationStopped()&&l(n,v))}),[y,{isActive:f}]}const KI=D.forwardRef((n,e)=>{let{as:t=GI,active:i,eventKey:s}=n,a=G9(n,q9);const[l,u]=WI(Object.assign({key:E0(s,a.href),active:i},a));return l[sy("active")]=u.isActive,p.jsx(t,Object.assign({},a,l,{ref:e}))});KI.displayName="NavItem";const W9=["as","onSelect","activeKey","role","onKeyDown"];function K9(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const bA=()=>{},vA=sy("event-key"),YI=D.forwardRef((n,e)=>{let{as:t="div",onSelect:i,activeKey:s,role:a,onKeyDown:l}=n,u=K9(n,W9);const h=j9(),f=D.useRef(!1),y=D.useContext(pg),v=D.useContext(qI);let x,T;v&&(a=a||"tablist",s=v.activeKey,x=v.getControlledId,T=v.getControllerId);const C=D.useRef(null),k=G=>{const X=C.current;if(!X)return null;const Y=Rc(X,`[${vA}]:not([aria-disabled=true])`),J=X.querySelector("[aria-selected=true]");if(!J||J!==document.activeElement)return null;const F=Y.indexOf(J);if(F===-1)return null;let I=F+G;return I>=Y.length&&(I=0),I<0&&(I=Y.length-1),Y[I]},R=(G,X)=>{G!=null&&(i?.(G,X),y?.(G,X))},j=G=>{if(l?.(G),!v)return;let X;switch(G.key){case"ArrowLeft":case"ArrowUp":X=k(-1);break;case"ArrowRight":case"ArrowDown":X=k(1);break;default:return}X&&(G.preventDefault(),R(X.dataset[U9("EventKey")]||null,G),f.current=!0,h())};D.useEffect(()=>{if(C.current&&f.current){const G=C.current.querySelector(`[${vA}][aria-selected=true]`);G?.focus()}f.current=!1});const q=iy(e,C);return p.jsx(pg.Provider,{value:R,children:p.jsx(x0.Provider,{value:{role:a,activeKey:E0(s),getControlledId:x||bA,getControllerId:T||bA},children:p.jsx(t,Object.assign({},u,{onKeyDown:j,ref:q,role:a}))})})});YI.displayName="Nav";const Y9=Object.assign(YI,{Item:KI}),yh=D.createContext(null);yh.displayName="NavbarContext";const T0=D.createContext(null);T0.displayName="CardHeaderContext";const XI=D.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=on(e,"nav-item"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));XI.displayName="NavItem";function X9(){const n=D.useRef(!0),e=D.useRef(()=>n.current);return D.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function Q9(n){const e=D.useRef(null);return D.useEffect(()=>{e.current=n}),e.current}const Z9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",J9=typeof document<"u",xA=J9||Z9?D.useLayoutEffect:D.useEffect,eB=["onKeyDown"];function tB(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function nB(n){return!n||n.trim()==="#"}const QI=D.forwardRef((n,e)=>{let{onKeyDown:t}=n,i=tB(n,eB);const[s]=w0(Object.assign({tagName:"a"},i)),a=go(l=>{s.onKeyDown(l),t?.(l)});return nB(i.href)||i.role==="button"?p.jsx("a",Object.assign({ref:e},i,s,{onKeyDown:a})):p.jsx("a",Object.assign({ref:e},i,{onKeyDown:t}))});QI.displayName="Anchor";const ZI=D.forwardRef(({bsPrefix:n,className:e,as:t=QI,active:i,eventKey:s,disabled:a=!1,...l},u)=>{n=on(n,"nav-link");const[h,f]=WI({key:E0(s,l.href),active:i,disabled:a,...l});return p.jsx(t,{...l,...h,ref:u,disabled:a,className:Bt(e,n,a&&"disabled",f.isActive&&"active")})});ZI.displayName="NavLink";const JI=D.forwardRef((n,e)=>{const{as:t="div",bsPrefix:i,variant:s,fill:a=!1,justify:l=!1,navbar:u,navbarScroll:h,className:f,activeKey:y,...v}=$I(n,{activeKey:"onSelect"}),x=on(i,"nav");let T,C,k=!1;const R=D.useContext(yh),j=D.useContext(T0);return R?(T=R.bsPrefix,k=u??!0):j&&({cardHeaderBsPrefix:C}=j),p.jsx(Y9,{as:t,ref:e,activeKey:y,className:Bt(f,{[x]:!k,[`${T}-nav`]:k,[`${T}-nav-scroll`]:k&&h,[`${C}-${s}`]:!!C,[`${x}-${s}`]:!!s,[`${x}-fill`]:a,[`${x}-justified`]:l}),...v})});JI.displayName="Nav";const kr=Object.assign(JI,{Item:XI,Link:ZI}),ek=D.forwardRef(({bsPrefix:n,className:e,as:t,...i},s)=>{n=on(n,"navbar-brand");const a=t||(i.href?"a":"span");return p.jsx(a,{...i,ref:s,className:Bt(e,n)})});ek.displayName="NavbarBrand";function S0(n){return n&&n.ownerDocument||document}function iB(n){var e=S0(n);return e&&e.defaultView||window}function sB(n,e){return iB(n).getComputedStyle(n,e)}var rB=/([A-Z])/g;function aB(n){return n.replace(rB,"-$1").toLowerCase()}var oB=/^ms-/;function gp(n){return aB(n).replace(oB,"-ms-")}var lB=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function cB(n){return!!(n&&lB.test(n))}function wo(n,e){var t="",i="";if(typeof e=="string")return n.style.getPropertyValue(gp(e))||sB(n).getPropertyValue(gp(e));Object.keys(e).forEach(function(s){var a=e[s];!a&&a!==0?n.style.removeProperty(gp(s)):cB(s)?i+=s+"("+a+") ":t+=gp(s)+": "+a+";"}),i&&(t+="transform: "+i+";"),n.style.cssText+=";"+t}var rb={exports:{}},ab,EA;function uB(){if(EA)return ab;EA=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ab=n,ab}var ob,wA;function hB(){if(wA)return ob;wA=1;var n=uB();function e(){}function t(){}return t.resetWarningCache=e,ob=function(){function i(l,u,h,f,y,v){if(v!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function s(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},ob}var TA;function dB(){return TA||(TA=1,rb.exports=hB()()),rb.exports}var fB=dB();const lb=Tf(fB),SA={disabled:!1},tk=ur.createContext(null);var mB=function(e){return e.scrollTop},Gd="unmounted",_l="exited",Dr="entering",yo="entered",wf="exiting",ko=function(n){M9(e,n);function e(i,s){var a;a=n.call(this,i,s)||this;var l=s,u=l&&!l.isMounting?i.enter:i.appear,h;return a.appearStatus=null,i.in?u?(h=_l,a.appearStatus=Dr):h=yo:i.unmountOnExit||i.mountOnEnter?h=Gd:h=_l,a.state={status:h},a.nextCallback=null,a}e.getDerivedStateFromProps=function(s,a){var l=s.in;return l&&a.status===Gd?{status:_l}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var a=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==Dr&&l!==yo&&(a=Dr):(l===Dr||l===yo)&&(a=wf)}this.updateStatus(!1,a)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,a,l,u;return a=l=u=s,s!=null&&typeof s!="number"&&(a=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:a,enter:l,appear:u}},t.updateStatus=function(s,a){if(s===void 0&&(s=!1),a!==null)if(this.cancelNextCallback(),a===Dr){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:zu.findDOMNode(this);l&&mB(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===_l&&this.setState({status:Gd})},t.performEnter=function(s){var a=this,l=this.props.enter,u=this.context?this.context.isMounting:s,h=this.props.nodeRef?[u]:[zu.findDOMNode(this),u],f=h[0],y=h[1],v=this.getTimeouts(),x=u?v.appear:v.enter;if(!s&&!l||SA.disabled){this.safeSetState({status:yo},function(){a.props.onEntered(f)});return}this.props.onEnter(f,y),this.safeSetState({status:Dr},function(){a.props.onEntering(f,y),a.onTransitionEnd(x,function(){a.safeSetState({status:yo},function(){a.props.onEntered(f,y)})})})},t.performExit=function(){var s=this,a=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:zu.findDOMNode(this);if(!a||SA.disabled){this.safeSetState({status:_l},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:wf},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:_l},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,a){a=this.setNextCallback(a),this.setState(s,a)},t.setNextCallback=function(s){var a=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,a.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:zu.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=h[0],y=h[1];this.props.addEndListener(f,y)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Gd)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=HI(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ur.createElement(tk.Provider,{value:null},typeof l=="function"?l(s,u):ur.cloneElement(ur.Children.only(l),u))},e}(ur.Component);ko.contextType=tk;ko.propTypes={};function Pu(){}ko.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Pu,onEntering:Pu,onEntered:Pu,onExit:Pu,onExiting:Pu,onExited:Pu};ko.UNMOUNTED=Gd;ko.EXITED=_l;ko.ENTERING=Dr;ko.ENTERED=yo;ko.EXITING=wf;function pB(n){return n.code==="Escape"||n.keyCode===27}function gB(){const n=D.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function _h(n){if(!n||typeof n=="function")return null;const{major:e}=gB();return e>=19?n.props.ref:n.ref}const ry=!!(typeof window<"u"&&window.document&&window.document.createElement);var Zb=!1,Jb=!1;try{var cb={get passive(){return Zb=!0},get once(){return Jb=Zb=!0}};ry&&(window.addEventListener("test",cb,cb),window.removeEventListener("test",cb,!0))}catch{}function yB(n,e,t,i){if(i&&typeof i!="boolean"&&!Jb){var s=i.once,a=i.capture,l=t;!Jb&&s&&(l=t.__once||function u(h){this.removeEventListener(e,u,a),t.call(this,h)},t.__once=l),n.addEventListener(e,l,Zb?i:a)}n.addEventListener(e,t,i)}function _B(n,e,t,i){var s=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(e,t,s),t.__once&&n.removeEventListener(e,t.__once,s)}function gg(n,e,t,i){return yB(n,e,t,i),function(){_B(n,e,t,i)}}function bB(n,e,t,i){if(i===void 0&&(i=!0),n){var s=document.createEvent("HTMLEvents");s.initEvent(e,t,i),n.dispatchEvent(s)}}function vB(n){var e=wo(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function xB(n,e,t){t===void 0&&(t=5);var i=!1,s=setTimeout(function(){i||bB(n,"transitionend",!0)},e+t),a=gg(n,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(s),a()}}function EB(n,e,t,i){t==null&&(t=vB(n)||0);var s=xB(n,t,i),a=gg(n,"transitionend",e);return function(){s(),a()}}function AA(n,e){const t=wo(n,e)||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function A0(n,e){const t=AA(n,"transitionDuration"),i=AA(n,"transitionDelay"),s=EB(n,a=>{a.target===n&&(s(),e(a))},t+i)}function Pd(...n){return n.filter(e=>e!=null).reduce((e,t)=>{if(typeof t!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?t:function(...s){e.apply(this,s),t.apply(this,s)}},null)}function nk(n){n.offsetHeight}const CA=n=>!n||typeof n=="function"?n:e=>{n.current=e};function wB(n,e){const t=CA(n),i=CA(e);return s=>{t&&t(s),i&&i(s)}}function TB(n,e){return D.useMemo(()=>wB(n,e),[n,e])}function SB(n){return n&&"setState"in n?zu.findDOMNode(n):n??null}const ay=ur.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:i,onExiting:s,onExited:a,addEndListener:l,children:u,childRef:h,...f},y)=>{const v=D.useRef(null),x=TB(v,h),T=J=>{x(SB(J))},C=J=>F=>{J&&v.current&&J(v.current,F)},k=D.useCallback(C(n),[n]),R=D.useCallback(C(e),[e]),j=D.useCallback(C(t),[t]),q=D.useCallback(C(i),[i]),G=D.useCallback(C(s),[s]),X=D.useCallback(C(a),[a]),Y=D.useCallback(C(l),[l]);return p.jsx(ko,{ref:y,...f,onEnter:k,onEntered:j,onEntering:R,onExit:q,onExited:X,onExiting:G,addEndListener:Y,nodeRef:v,children:typeof u=="function"?(J,F)=>u(J,{...F,ref:T}):ur.cloneElement(u,{ref:T})})});ay.displayName="TransitionWrapper";const AB={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function CB(n,e){const t=`offset${n[0].toUpperCase()}${n.slice(1)}`,i=e[t],s=AB[n];return i+parseInt(wo(e,s[0]),10)+parseInt(wo(e,s[1]),10)}const RB={[_l]:"collapse",[wf]:"collapsing",[Dr]:"collapsing",[yo]:"collapse show"},ik=ur.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:i,onExiting:s,className:a,children:l,dimension:u="height",in:h=!1,timeout:f=300,mountOnEnter:y=!1,unmountOnExit:v=!1,appear:x=!1,getDimensionValue:T=CB,...C},k)=>{const R=typeof u=="function"?u():u,j=D.useMemo(()=>Pd(J=>{J.style[R]="0"},n),[R,n]),q=D.useMemo(()=>Pd(J=>{const F=`scroll${R[0].toUpperCase()}${R.slice(1)}`;J.style[R]=`${J[F]}px`},e),[R,e]),G=D.useMemo(()=>Pd(J=>{J.style[R]=null},t),[R,t]),X=D.useMemo(()=>Pd(J=>{J.style[R]=`${T(R,J)}px`,nk(J)},i),[i,T,R]),Y=D.useMemo(()=>Pd(J=>{J.style[R]=null},s),[R,s]);return p.jsx(ay,{ref:k,addEndListener:A0,...C,"aria-expanded":C.role?h:null,onEnter:j,onEntering:q,onEntered:G,onExit:X,onExiting:Y,childRef:_h(l),in:h,timeout:f,mountOnEnter:y,unmountOnExit:v,appear:x,children:(J,F)=>ur.cloneElement(l,{...F,className:Bt(a,l.props.className,RB[J],R==="width"&&"collapse-horizontal")})})});ik.displayName="Collapse";const sk=D.forwardRef(({children:n,bsPrefix:e,...t},i)=>{e=on(e,"navbar-collapse");const s=D.useContext(yh);return p.jsx(ik,{in:!!(s&&s.expanded),...t,children:p.jsx("div",{ref:i,className:e,children:n})})});sk.displayName="NavbarCollapse";function IB(n){const e=D.useRef(n);return D.useEffect(()=>{e.current=n},[n]),e}function oy(n){const e=IB(n);return D.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const rk=D.forwardRef(({bsPrefix:n,className:e,children:t,label:i="Toggle navigation",as:s="button",onClick:a,...l},u)=>{n=on(n,"navbar-toggler");const{onToggle:h,expanded:f}=D.useContext(yh)||{},y=oy(v=>{a&&a(v),h&&h()});return s==="button"&&(l.type="button"),p.jsx(s,{...l,ref:u,onClick:y,"aria-label":i,className:Bt(e,n,!f&&"collapsed"),children:t||p.jsx("span",{className:`${n}-icon`})})});rk.displayName="NavbarToggle";const kB=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",NB=typeof document<"u",DB=NB||kB?D.useLayoutEffect:D.useEffect,ev=new WeakMap,RA=(n,e)=>{if(!n||!e)return;const t=ev.get(e)||new Map;ev.set(e,t);let i=t.get(n);return i||(i=e.matchMedia(n),i.refCount=0,t.set(i.media,i)),i};function OB(n,e=typeof window>"u"?void 0:window){const t=RA(n,e),[i,s]=D.useState(()=>t?t.matches:!1);return DB(()=>{let a=RA(n,e);if(!a)return s(!1);let l=ev.get(e);const u=()=>{s(a.matches)};return a.refCount++,a.addListener(u),u(),()=>{a.removeListener(u),a.refCount--,a.refCount<=0&&l?.delete(a.media),a=void 0}},[n]),i}function MB(n){const e=Object.keys(n);function t(u,h){return u===h?h:u?`${u} and ${h}`:h}function i(u){return e[Math.min(e.indexOf(u)+1,e.length-1)]}function s(u){const h=i(u);let f=n[h];return typeof f=="number"?f=`${f-.2}px`:f=`calc(${f} - 0.2px)`,`(max-width: ${f})`}function a(u){let h=n[u];return typeof h=="number"&&(h=`${h}px`),`(min-width: ${h})`}function l(u,h,f){let y;typeof u=="object"?(y=u,f=h,h=!0):(h=h||!0,y={[u]:h});let v=D.useMemo(()=>Object.entries(y).reduce((x,[T,C])=>((C==="up"||C===!0)&&(x=t(x,a(T))),(C==="down"||C===!0)&&(x=t(x,s(T))),x),""),[JSON.stringify(y)]);return OB(v,f)}return l}const PB=MB({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function ub(n){n===void 0&&(n=S0());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function IA(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function jB(n){const e=D.useRef(n);return e.current=n,e}function LB(n){const e=jB(n);D.useEffect(()=>()=>e.current(),[])}function VB(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const kA=sy("modal-open");class C0{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:i=!1}={}){this.handleContainerOverflow=t,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return VB(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[i]:s.style[i]},e.scrollBarWidth&&(t[i]=`${parseInt(wo(s,i)||"0",10)+e.scrollBarWidth}px`),s.setAttribute(kA,""),wo(s,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(kA),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const ak=D.createContext(ry?window:void 0);ak.Provider;function R0(){return D.useContext(ak)}const hb=(n,e)=>ry?n==null?(e||S0()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function FB(n,e){const t=R0(),[i,s]=D.useState(()=>hb(n,t?.document));if(!i){const a=hb(n);a&&s(a)}return D.useEffect(()=>{},[e,i]),D.useEffect(()=>{const a=hb(n);a!==i&&s(a)},[n,i]),i}function UB({children:n,in:e,onExited:t,mountOnEnter:i,unmountOnExit:s}){const a=D.useRef(null),l=D.useRef(e),u=go(t);D.useEffect(()=>{e?l.current=!0:u(a.current)},[e,u]);const h=iy(a,_h(n)),f=D.cloneElement(n,{ref:h});return e?f:s||!l.current&&i?null:f}const zB=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function BB(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function HB(n){let{onEnter:e,onEntering:t,onEntered:i,onExit:s,onExiting:a,onExited:l,addEndListener:u,children:h}=n,f=BB(n,zB);const y=D.useRef(null),v=iy(y,_h(h)),x=X=>Y=>{X&&y.current&&X(y.current,Y)},T=D.useCallback(x(e),[e]),C=D.useCallback(x(t),[t]),k=D.useCallback(x(i),[i]),R=D.useCallback(x(s),[s]),j=D.useCallback(x(a),[a]),q=D.useCallback(x(l),[l]),G=D.useCallback(x(u),[u]);return Object.assign({},f,{nodeRef:y},e&&{onEnter:T},t&&{onEntering:C},i&&{onEntered:k},s&&{onExit:R},a&&{onExiting:j},l&&{onExited:q},u&&{addEndListener:G},{children:typeof h=="function"?(X,Y)=>h(X,Object.assign({},Y,{ref:v})):D.cloneElement(h,{ref:v})})}const $B=["component"];function qB(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const GB=D.forwardRef((n,e)=>{let{component:t}=n,i=qB(n,$B);const s=HB(i);return p.jsx(t,Object.assign({ref:e},s))});function WB({in:n,onTransition:e}){const t=D.useRef(null),i=D.useRef(!0),s=go(e);return xA(()=>{if(!t.current)return;let a=!1;return s({in:n,element:t.current,initial:i.current,isStale:()=>a}),()=>{a=!0}},[n,s]),xA(()=>(i.current=!1,()=>{i.current=!0}),[]),t}function KB({children:n,in:e,onExited:t,onEntered:i,transition:s}){const[a,l]=D.useState(!e);e&&a&&l(!1);const u=WB({in:!!e,onTransition:f=>{const y=()=>{f.isStale()||(f.in?i?.(f.element,f.initial):(l(!0),t?.(f.element)))};Promise.resolve(s(f)).then(y,v=>{throw f.in||l(!0),v})}}),h=iy(u,_h(n));return a&&!e?null:D.cloneElement(n,{ref:h})}function NA(n,e,t){return n?p.jsx(GB,Object.assign({},t,{component:n})):e?p.jsx(KB,Object.assign({},t,{transition:e})):p.jsx(UB,Object.assign({},t))}const YB=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function XB(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}let db;function QB(n){return db||(db=new C0({ownerDocument:n?.document})),db}function ZB(n){const e=R0(),t=n||QB(e),i=D.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>t.add(i.current),remove:()=>t.remove(i.current),isTopModal:()=>t.isTopModal(i.current),setDialogRef:D.useCallback(s=>{i.current.dialog=s},[]),setBackdropRef:D.useCallback(s=>{i.current.backdrop=s},[])})}const ok=D.forwardRef((n,e)=>{let{show:t=!1,role:i="dialog",className:s,style:a,children:l,backdrop:u=!0,keyboard:h=!0,onBackdropClick:f,onEscapeKeyDown:y,transition:v,runTransition:x,backdropTransition:T,runBackdropTransition:C,autoFocus:k=!0,enforceFocus:R=!0,restoreFocus:j=!0,restoreFocusOptions:q,renderDialog:G,renderBackdrop:X=it=>p.jsx("div",Object.assign({},it)),manager:Y,container:J,onShow:F,onHide:I=()=>{},onExit:O,onExited:U,onExiting:H,onEnter:B,onEntering:z,onEntered:je}=n,_e=XB(n,YB);const K=R0(),se=FB(J),Ee=ZB(Y),Le=X9(),P=Q9(t),[fe,Ae]=D.useState(!t),ge=D.useRef(null);D.useImperativeHandle(e,()=>Ee,[Ee]),ry&&!P&&t&&(ge.current=ub(K?.document)),t&&fe&&Ae(!1);const ke=go(()=>{if(Ee.add(),gt.current=gg(document,"keydown",Se),Et.current=gg(document,"focus",()=>setTimeout(Pe),!0),F&&F(),k){var it,mn;const Ht=ub((it=(mn=Ee.dialog)==null?void 0:mn.ownerDocument)!=null?it:K?.document);Ee.dialog&&Ht&&!IA(Ee.dialog,Ht)&&(ge.current=Ht,Ee.dialog.focus())}}),$e=go(()=>{if(Ee.remove(),gt.current==null||gt.current(),Et.current==null||Et.current(),j){var it;(it=ge.current)==null||it.focus==null||it.focus(q),ge.current=null}});D.useEffect(()=>{!t||!se||ke()},[t,se,ke]),D.useEffect(()=>{fe&&$e()},[fe,$e]),LB(()=>{$e()});const Pe=go(()=>{if(!R||!Le()||!Ee.isTopModal())return;const it=ub(K?.document);Ee.dialog&&it&&!IA(Ee.dialog,it)&&Ee.dialog.focus()}),Ge=go(it=>{it.target===it.currentTarget&&(f?.(it),u===!0&&I())}),Se=go(it=>{h&&pB(it)&&Ee.isTopModal()&&(y?.(it),it.defaultPrevented||I())}),Et=D.useRef(),gt=D.useRef(),ee=(...it)=>{Ae(!0),U?.(...it)};if(!se)return null;const me=Object.assign({role:i,ref:Ee.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},_e,{style:a,className:s,tabIndex:-1});let Re=G?G(me):p.jsx("div",Object.assign({},me,{children:D.cloneElement(l,{role:"document"})}));Re=NA(v,x,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:O,onExiting:H,onExited:ee,onEnter:B,onEntering:z,onEntered:je,children:Re});let et=null;return u&&(et=X({ref:Ee.setBackdropRef,onClick:Ge}),et=NA(T,C,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:et})),p.jsx(p.Fragment,{children:zu.createPortal(p.jsxs(p.Fragment,{children:[et,Re]}),se)})});ok.displayName="Modal";const JB=Object.assign(ok,{Manager:C0}),eH={[Dr]:"show",[yo]:"show"},lk=D.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:i,...s},a)=>{const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},u=D.useCallback((h,f)=>{nk(h),i?.(h,f)},[i]);return p.jsx(ay,{ref:a,addEndListener:A0,...l,onEnter:u,childRef:_h(e),children:(h,f)=>D.cloneElement(e,{...f,className:Bt("fade",n,e.props.className,eH[h],t[h])})})});lk.displayName="Fade";const ck=D.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=on(e,"offcanvas-body"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));ck.displayName="OffcanvasBody";const tH={[Dr]:"show",[yo]:"show"},uk=D.forwardRef(({bsPrefix:n,className:e,children:t,in:i=!1,mountOnEnter:s=!1,unmountOnExit:a=!1,appear:l=!1,...u},h)=>(n=on(n,"offcanvas"),p.jsx(ay,{ref:h,addEndListener:A0,in:i,mountOnEnter:s,unmountOnExit:a,appear:l,...u,childRef:_h(t),children:(f,y)=>D.cloneElement(t,{...y,className:Bt(e,t.props.className,(f===Dr||f===wf)&&`${n}-toggling`,tH[f])})})));uk.displayName="OffcanvasToggling";const hk=D.createContext({onHide(){}}),nH={"aria-label":lb.string,onClick:lb.func,variant:lb.oneOf(["white"])},I0=D.forwardRef(({className:n,variant:e,"aria-label":t="Close",...i},s)=>p.jsx("button",{ref:s,type:"button",className:Bt("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...i}));I0.displayName="CloseButton";I0.propTypes=nH;const dk=D.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:i,children:s,...a},l)=>{const u=D.useContext(hk),h=oy(()=>{u?.onHide(),i?.()});return p.jsxs("div",{ref:l,...a,children:[s,t&&p.jsx(I0,{"aria-label":n,variant:e,onClick:h})]})});dk.displayName="AbstractModalHeader";const fk=D.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:i=!1,...s},a)=>(n=on(n,"offcanvas-header"),p.jsx(dk,{ref:a,...s,className:Bt(e,n),closeLabel:t,closeButton:i})));fk.displayName="OffcanvasHeader";const k0=n=>D.forwardRef((e,t)=>p.jsx("div",{...e,ref:t,className:Bt(e.className,n)})),iH=k0("h5"),mk=D.forwardRef(({className:n,bsPrefix:e,as:t=iH,...i},s)=>(e=on(e,"offcanvas-title"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));mk.displayName="OffcanvasTitle";function sH(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function rH(n,e){n.classList?n.classList.add(e):sH(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function DA(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function aH(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=DA(n.className,e):n.setAttribute("class",DA(n.className&&n.className.baseVal||"",e))}const ju={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class pk extends C0{adjustAndStore(e,t,i){const s=t.style[e];t.dataset[e]=s,wo(t,{[e]:`${parseFloat(wo(t,e))+i}px`})}restore(e,t){const i=t.dataset[e];i!==void 0&&(delete t.dataset[e],wo(t,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(rH(t,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Rc(t,ju.FIXED_CONTENT).forEach(a=>this.adjustAndStore(i,a,e.scrollBarWidth)),Rc(t,ju.STICKY_CONTENT).forEach(a=>this.adjustAndStore(s,a,-e.scrollBarWidth)),Rc(t,ju.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(s,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();aH(t,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Rc(t,ju.FIXED_CONTENT).forEach(a=>this.restore(i,a)),Rc(t,ju.STICKY_CONTENT).forEach(a=>this.restore(s,a)),Rc(t,ju.NAVBAR_TOGGLER).forEach(a=>this.restore(s,a))}}let fb;function oH(n){return fb||(fb=new pk(n)),fb}function lH(n){return p.jsx(uk,{...n})}function cH(n){return p.jsx(lk,{...n})}const gk=D.forwardRef(({bsPrefix:n,className:e,children:t,"aria-labelledby":i,placement:s="start",responsive:a,show:l=!1,backdrop:u=!0,keyboard:h=!0,scroll:f=!1,onEscapeKeyDown:y,onShow:v,onHide:x,container:T,autoFocus:C=!0,enforceFocus:k=!0,restoreFocus:R=!0,restoreFocusOptions:j,onEntered:q,onExit:G,onExiting:X,onEnter:Y,onEntering:J,onExited:F,backdropClassName:I,manager:O,renderStaticNode:U=!1,...H},B)=>{const z=D.useRef();n=on(n,"offcanvas");const[je,_e]=D.useState(!1),K=oy(x),se=PB(a||"xs","up");D.useEffect(()=>{_e(a?l&&!se:l)},[l,a,se]);const Ee=D.useMemo(()=>({onHide:K}),[K]);function Le(){return O||(f?(z.current||(z.current=new pk({handleContainerOverflow:!1})),z.current):oH())}const P=(ke,...$e)=>{ke&&(ke.style.visibility="visible"),Y?.(ke,...$e)},fe=(ke,...$e)=>{ke&&(ke.style.visibility=""),F?.(...$e)},Ae=D.useCallback(ke=>p.jsx("div",{...ke,className:Bt(`${n}-backdrop`,I)}),[I,n]),ge=ke=>p.jsx("div",{...ke,...H,className:Bt(e,a?`${n}-${a}`:n,`${n}-${s}`),"aria-labelledby":i,children:t});return p.jsxs(p.Fragment,{children:[!je&&(a||U)&&ge({}),p.jsx(hk.Provider,{value:Ee,children:p.jsx(JB,{show:je,ref:B,backdrop:u,container:T,keyboard:h,autoFocus:C,enforceFocus:k&&!f,restoreFocus:R,restoreFocusOptions:j,onEscapeKeyDown:y,onShow:v,onHide:K,onEnter:P,onEntering:J,onEntered:q,onExit:G,onExiting:X,onExited:fe,manager:Le(),transition:lH,backdropTransition:cH,renderBackdrop:Ae,renderDialog:ge})})]})});gk.displayName="Offcanvas";const uH=Object.assign(gk,{Body:ck,Header:fk,Title:mk}),yk=D.forwardRef(({onHide:n,...e},t)=>{const i=D.useContext(yh),s=oy(()=>{i==null||i.onToggle==null||i.onToggle(),n?.()});return p.jsx(uH,{ref:t,show:!!(i!=null&&i.expanded),...e,renderStaticNode:!0,onHide:s})});yk.displayName="NavbarOffcanvas";const _k=D.forwardRef(({className:n,bsPrefix:e,as:t="span",...i},s)=>(e=on(e,"navbar-text"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));_k.displayName="NavbarText";const bk=D.forwardRef((n,e)=>{const{bsPrefix:t,expand:i=!0,variant:s="light",bg:a,fixed:l,sticky:u,className:h,as:f="nav",expanded:y,onToggle:v,onSelect:x,collapseOnSelect:T=!1,...C}=$I(n,{expanded:"onToggle"}),k=on(t,"navbar"),R=D.useCallback((...G)=>{x?.(...G),T&&y&&v?.(!1)},[x,T,y,v]);C.role===void 0&&f!=="nav"&&(C.role="navigation");let j=`${k}-expand`;typeof i=="string"&&(j=`${j}-${i}`);const q=D.useMemo(()=>({onToggle:()=>v?.(!y),bsPrefix:k,expanded:!!y,expand:i}),[k,y,i,v]);return p.jsx(yh.Provider,{value:q,children:p.jsx(pg.Provider,{value:R,children:p.jsx(f,{ref:e,...C,className:Bt(h,k,i&&j,s&&`${k}-${s}`,a&&`bg-${a}`,u&&`sticky-${u}`,l&&`fixed-${l}`)})})})});bk.displayName="Navbar";const yp=Object.assign(bk,{Brand:ek,Collapse:sk,Offcanvas:yk,Text:_k,Toggle:rk}),vk=D.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:i,active:s=!1,disabled:a=!1,className:l,...u},h)=>{const f=on(e,"btn"),[y,{tagName:v}]=w0({tagName:n,disabled:a,...u}),x=v;return p.jsx(x,{...y,...u,ref:h,disabled:a,className:Bt(l,f,s&&"active",t&&`${f}-${t}`,i&&`${f}-${i}`,u.href&&a&&"disabled")})});vk.displayName="Button";const xk=D.createContext(),N0=()=>{const n=D.useContext(xk);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},hH=({children:n})=>{const[e,t]=D.useState(null),[i,s]=D.useState(!0);D.useEffect(()=>V6(rg,h=>{t(h),s(!1)}),[]);const l={user:e,loading:i,logout:async()=>{try{await F6(rg)}catch(u){console.error("Error logging out:",u)}},isAuthenticated:!!e};return p.jsx(xk.Provider,{value:l,children:n})};function gl(){const{logout:n,user:e}=N0(),t=ch(),[i,s]=D.useState(!1),a=async()=>{try{s(!1),await n(),t("/login")}catch(u){console.error("Error logging out:",u)}},l=()=>{s(!1)};return p.jsx(yp,{expand:"lg",className:"bg-body-tertiary",expanded:i,onToggle:u=>s(u),children:p.jsxs(BI,{fluid:!0,children:[p.jsx(yp.Brand,{as:ho,to:"/",onClick:l,children:"Kombucha App"}),p.jsx(yp.Toggle,{"aria-controls":"basic-navbar-nav"}),p.jsxs(yp.Collapse,{id:"basic-navbar-nav",children:[p.jsxs(kr,{className:"me-auto",children:[p.jsx(kr.Link,{as:ho,to:"/",onClick:l,children:"Dashboard"}),p.jsx(kr.Link,{as:ho,to:"/clientes",onClick:l,children:"Clientes"}),p.jsx(kr.Link,{as:ho,to:"/kombuchas",onClick:l,children:"Kombuchas"}),p.jsx(kr.Link,{as:ho,to:"/ventas",onClick:l,children:"Ventas"}),p.jsx(kr.Link,{as:ho,to:"/rutas",onClick:l,children:"Rutas"}),p.jsx(kr.Link,{as:ho,to:"/mapa",onClick:l,children:"Mapa"}),p.jsx(kr.Link,{as:ho,to:"/recordatorios",onClick:l,children:"Recordatorios"})]}),p.jsxs(kr,{className:"ms-auto",children:[p.jsx(kr.Item,{className:"d-flex align-items-center me-3",children:p.jsx("small",{className:"text-white",children:e?.email?e.email.split("@")[0]:""})}),p.jsx(kr.Item,{children:p.jsx(vk,{variant:"danger",size:"sm",onClick:a,children:"Cerrar Sesin"})})]})]})]})})}let jd=!1,Tc=null;const yg=()=>jd&&Tc?(console.log("Google Maps already loading, returning existing promise"),Tc):window.google&&window.google.maps?(console.log("Google Maps already loaded"),Promise.resolve(window.google.maps)):(jd=!0,Tc=new Promise((n,e)=>{console.log("loadGoogleMapsAPI called"),console.log("Environment variables:",{VITE_GOOGLE_MAPS_API_KEY:"SET",NODE_ENV:void 0,MODE:"production"});const t="AIzaSyC2hTUdZnWCx7qSKtw0nrPzX75Us4OMX80";console.log("Loading Google Maps API with key:",t.substring(0,10)+"...");const i="initGoogleMaps_"+Date.now()+"_"+Math.random().toString(36).substr(2,9);window[i]=()=>{console.log("Google Maps API loaded successfully via callback:",i),jd=!1,Tc=null,window.google&&window.google.maps?n(window.google.maps):e(new Error("Google Maps failed to initialize properly")),delete window[i]};const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places&callback=${i}`,s.async=!0,s.defer=!0,console.log("Script URL:",s.src),s.onload=()=>{console.log("Google Maps script loaded")},s.onerror=()=>{const h="Failed to load Google Maps API script";console.error(h),jd=!1,Tc=null,delete window[i],e(new Error(h))},document.head.appendChild(s),console.log("Script added to document head"),setTimeout(()=>{console.log("Callback function should be ready:",typeof window[i])},100);const a=setTimeout(()=>{if(!window.google||!window.google.maps){const h="Google Maps API loading timed out";console.error(h),jd=!1,Tc=null,delete window[i],e(new Error(h))}},1e4),l=n,u=e;n=h=>{clearTimeout(a),l(h)},e=h=>{clearTimeout(a),u(h)}}),Tc),dH=({value:n,onChange:e,placeholder:t="Ingresa una direccin...",className:i="",restrictedCities:s=[],restrictedStates:a=[]})=>{const[l,u]=D.useState([]),[h,f]=D.useState(!1),[y,v]=D.useState(n||""),x=D.useRef(null),T=D.useRef(null);D.useEffect(()=>{(async()=>{try{await yg(),x.current=new window.google.maps.places.AutocompleteService,T.current=new window.google.maps.places.PlacesService(document.createElement("div"))}catch(G){console.error("Failed to load Google Maps:",G)}})()},[]),D.useEffect(()=>{v(n||"")},[n]);const C=q=>{const G=q.target.value;v(G),e({address:G,coordinates:null}),G.length>2&&x.current?x.current.getPlacePredictions({input:G,componentRestrictions:{country:"mx"},types:["address"]},(X,Y)=>{if(Y===window.google.maps.places.PlacesServiceStatus.OK){let J=X;(s.length>0||a.length>0)&&(J=X.filter(F=>{const I=F.structured_formatting.secondary_text||"",O=F.description||"",U=s.length===0||s.some(B=>I.toLowerCase().includes(B.toLowerCase())||O.toLowerCase().includes(B.toLowerCase())),H=a.length===0||a.some(B=>I.toLowerCase().includes(B.toLowerCase())||O.toLowerCase().includes(B.toLowerCase()));return U&&H})),u(J),f(J.length>0)}else u([]),f(!1)}):(u([]),f(!1))},k=q=>{v(q.description),f(!1),u([]),T.current&&T.current.getDetails({placeId:q.place_id,fields:["geometry","formatted_address"]},(G,X)=>{if(X===window.google.maps.places.PlacesServiceStatus.OK){const Y={lat:G.geometry.location.lat(),lng:G.geometry.location.lng()};e({address:q.description,coordinates:Y})}})},R=()=>{setTimeout(()=>{f(!1)},200)},j=()=>{l.length>0&&f(!0)};return p.jsxs("div",{className:`address-autocomplete ${i}`,children:[p.jsx("input",{type:"text",value:y,onChange:C,onBlur:R,onFocus:j,placeholder:t,className:"address-input",autoComplete:"off"}),h&&l.length>0&&p.jsx("div",{className:"suggestions-container",children:l.map((q,G)=>p.jsxs("div",{className:"suggestion-item",onClick:()=>k(q),onMouseDown:X=>X.preventDefault(),children:[p.jsx("div",{className:"suggestion-main-text",children:q.structured_formatting.main_text}),p.jsx("div",{className:"suggestion-secondary-text",children:q.structured_formatting.secondary_text})]},q.place_id))})]})},fa={restrictedCities:[],restrictedStates:["Puebla"],defaultMapCenter:{lat:19.4326,lng:-99.1332},defaultZoom:12,country:"mx"},fH=()=>fa.restrictedCities,mH=()=>fa.restrictedStates,pH=({showDetails:n=!1})=>fa.restrictedCities.length>0||fa.restrictedStates.length>0?p.jsxs("div",{className:"location-restrictions",children:[p.jsxs("div",{className:"restrictions-header",children:[p.jsx("span",{className:"restrictions-icon",children:""}),p.jsx("span",{className:"restrictions-text",children:"Bsqueda limitada a ubicaciones especficas"})]}),n&&p.jsxs("div",{className:"restrictions-details",children:[fa.restrictedCities.length>0&&p.jsxs("div",{className:"restriction-group",children:[p.jsx("strong",{children:"Ciudades permitidas:"}),p.jsx("div",{className:"restriction-tags",children:fa.restrictedCities.map((t,i)=>p.jsx("span",{className:"restriction-tag city-tag",children:t},i))})]}),fa.restrictedStates.length>0&&p.jsxs("div",{className:"restriction-group",children:[p.jsx("strong",{children:"Estados permitidos:"}),p.jsx("div",{className:"restriction-tags",children:fa.restrictedStates.map((t,i)=>p.jsx("span",{className:"restriction-tag state-tag",children:t},i))})]})]})]}):null,gH=({address:n,coordinates:e,onClose:t})=>{const i=D.useRef(null),s=D.useRef(null),a=D.useRef(null);return D.useEffect(()=>{(async()=>{try{if(await yg(),i.current&&e){const u={lat:parseFloat(e.lat),lng:parseFloat(e.lng)};s.current=new window.google.maps.Map(i.current,{center:u,zoom:16,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),a.current=new window.google.maps.Marker({position:u,map:s.current,title:n,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#F54927",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:3}});const h=new window.google.maps.InfoWindow({content:`
          <div style="padding: 12px; min-width: 250px;">
            <h3 style="margin: 0 0 8px 0; color: #333; font-size: 16px;"> Direccin Seleccionada</h3>
            <p style="margin: 8px 0; color: #666; line-height: 1.4;">
              <strong>Direccin:</strong><br>
              ${n}
            </p>
            <p style="margin: 8px 0; color: #666; font-size: 12px;">
              <strong>Coordenadas:</strong><br>
              ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}
            </p>
          </div>
        `});h.open(s.current,a.current),a.current.addListener("click",()=>{h.open(s.current,a.current)})}}catch(u){console.error("Failed to load Google Maps:",u)}})()},[n,e]),e?p.jsx("div",{className:"address-preview-overlay",children:p.jsxs("div",{className:"address-preview-container",children:[p.jsxs("div",{className:"address-preview-header",children:[p.jsx("h3",{children:"Vista Previa de la Direccin"}),p.jsx("button",{className:"close-btn",onClick:t,children:""})]}),p.jsxs("div",{className:"address-preview-content",children:[p.jsxs("div",{className:"address-info",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Direccin:"})," ",n]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Coordenadas:"})," ",e.lat.toFixed(6),", ",e.lng.toFixed(6)]})]}),p.jsx("div",{className:"map-preview-container",children:p.jsx("div",{ref:i,className:"map-preview"})})]}),p.jsx("div",{className:"address-preview-actions",children:p.jsx("button",{className:"confirm-btn",onClick:t,children:"Confirmar Direccin"})})]})}):null};function yH(){ch();const[n,e]=D.useState([]),[t,i]=D.useState(!0),[s,a]=D.useState(!1),[l,u]=D.useState(null),[h,f]=D.useState("nombre"),[y,v]=D.useState("asc"),[x,T]=D.useState({nombre:"",telefono:"",direccion:"",direccionCoords:null,fechaRegistro:""}),[C,k]=D.useState(!1),[R,j]=D.useState(!1),[q,G]=D.useState([]),[X,Y]=D.useState(!1),[J,F]=D.useState(null),[I,O]=D.useState({fecha:Ps(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),U=async()=>{try{console.log("Fetching clients from Firebase...");const[ee,me]=await Promise.all([Pn(sn(At,"clientes")),Pn(sn(At,"kombuchas"))]),Re=ee.docs.map(it=>({id:it.id,...it.data()})),et=me.docs.map(it=>({id:it.id,...it.data()}));console.log("Processed clients data:",Re),console.log("Processed kombuchas data:",et),e(Re),G(et)}catch(ee){console.error("Error fetching clients:",ee)}finally{i(!1)}};D.useEffect(()=>{U()},[]),D.useEffect(()=>{const ee=me=>{me.key==="Escape"&&(s&&fe(),R&&Et())};return(s||R)&&document.addEventListener("keydown",ee),()=>{document.removeEventListener("keydown",ee)}},[s,R]);const H=ee=>{h===ee?v(y==="asc"?"desc":"asc"):(f(ee),v("asc"))},B=[...n].sort((ee,me)=>{let Re=ee[h]||"",et=me[h]||"";return h==="fechaRegistro"&&(Re=Re||"1900-01-01",et=et||"1900-01-01"),typeof Re=="string"&&(Re=Re.toLowerCase(),et=et.toLowerCase()),y==="asc"?Re>et?1:-1:Re<et?1:-1}),z=ee=>h!==ee?"":y==="asc"?"":"",je=ee=>{const{name:me,value:Re}=ee.target;T(et=>({...et,[me]:Re}))},_e=ee=>{T(me=>({...me,direccion:ee.address,direccionCoords:ee.coordinates?{lat:parseFloat(ee.coordinates.lat),lng:parseFloat(ee.coordinates.lng)}:null}))},K=()=>{x.direccionCoords&&x.direccion&&k(!0)},se=()=>{k(!1)},Ee=async ee=>{ee.preventDefault();try{const me={...x,fechaRegistro:x.fechaRegistro||Ps()};me.direccionCoords||delete me.direccionCoords,l?(await Mf(wa(At,"clientes",l.id),me),u(null)):await jc(sn(At,"clientes"),me),T({nombre:"",telefono:"",direccion:"",direccionCoords:null}),a(!1),U()}catch(me){console.error("Error saving client:",me)}},Le=ee=>{u(ee),T({nombre:ee.nombre||"",telefono:ee.telefono||"",direccion:ee.direccion||"",direccionCoords:ee.direccionCoords?{lat:parseFloat(ee.direccionCoords.lat),lng:parseFloat(ee.direccionCoords.lng)}:null}),a(!0)},P=async ee=>{if(window.confirm("Ests seguro de que quieres eliminar este cliente?"))try{await Ug(wa(At,"clientes",ee)),U()}catch(me){console.error("Error deleting client:",me)}},fe=()=>{a(!1),u(null),T({nombre:"",telefono:"",direccion:"",direccionCoords:null})},Ae=ee=>{const{name:me,value:Re}=ee.target;O(et=>({...et,[me]:Re}))},ge=(ee,me,Re)=>{O(et=>{const it=[...et.items];if(it[ee]={...it[ee],[me]:Re},me==="kombuchaId"&&Re){const Ht=q.find(zi=>zi.id===Re);Ht&&Ht.precio&&(it[ee].precio=Ht.precio.toString())}const mn=it.reduce((Ht,zi)=>{const Xi=(parseFloat(zi.cantidad)||0)*(parseFloat(zi.precio)||0);return Ht+Xi},0);return{...et,items:it,total:mn.toFixed(2)}})},ke=()=>{O(ee=>({...ee,items:[...ee.items,{kombuchaId:"",cantidad:1,precio:""}]}))},$e=ee=>{O(me=>({...me,items:me.items.filter((Re,et)=>et!==ee)}))},Pe=ee=>{const me=q.find(Re=>Re.id===ee);return me?me.precio:null},Ge=ee=>{if(!ee.kombuchaId)return!1;const me=Pe(ee.kombuchaId);return me&&parseFloat(ee.precio)!==parseFloat(me)},Se=async ee=>{ee.preventDefault(),Y(!0);try{const me={...I,fecha:I.fecha,total:parseFloat(I.total),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await jc(sn(At,"ventas"),me),O({fecha:Ps(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),j(!1),F(null),alert("Venta registrada exitosamente")}catch(me){console.error("Error creating sale:",me),alert("Error al registrar la venta")}finally{Y(!1)}},Et=()=>{O({fecha:Ps(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),j(!1),F(null)},gt=ee=>{F(ee),O(me=>({...me,cliente:ee.id,fecha:Ps()})),j(!0)};return t?p.jsx("div",{className:"clientes-page",children:p.jsx("div",{className:"loading",children:"Cargando clientes..."})}):p.jsxs("div",{className:"clientes-page",children:[p.jsxs("div",{className:"clientes-header",children:[p.jsx("h1",{children:"Gestin de Clientes"}),p.jsx("button",{className:"add-cliente-btn",onClick:()=>a(!0),children:"+ Nuevo Cliente"})]}),s&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:l?"Editar Cliente":"Nuevo Cliente"}),p.jsxs("form",{onSubmit:Ee,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nombre",children:"Nombre *"}),p.jsx("input",{type:"text",id:"nombre",name:"nombre",value:x.nombre,onChange:je,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"telefono",children:"Telfono"}),p.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:x.telefono,onChange:je})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"direccion",children:"Direccin"}),p.jsx(pH,{showDetails:!1}),p.jsx(dH,{value:x.direccion,onChange:_e,placeholder:"Ingresa la direccin del cliente...",restrictedCities:fH(),restrictedStates:mH()}),x.direccionCoords&&p.jsxs("div",{className:"coordinates-info",children:[p.jsxs("small",{children:[" Coordenadas guardadas: ",x.direccionCoords.lat.toFixed(6),", ",x.direccionCoords.lng.toFixed(6)]}),p.jsx("button",{type:"button",className:"preview-map-btn",onClick:K,children:" Ver en Mapa"})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",onClick:fe,className:"cancel-btn",children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",children:l?"Actualizar":"Guardar"})]})]})]})}),p.jsx("div",{className:"clientes-content",children:n.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:"No hay clientes registrados"}),p.jsx("button",{className:"add-first-cliente-btn",onClick:()=>a(!0),children:"Agregar primer cliente"})]}):p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"clientes-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{className:"sortable",onClick:()=>H("nombre"),children:["Nombre ",z("nombre")]}),p.jsxs("th",{className:"sortable",onClick:()=>H("telefono"),children:["Telfono ",z("telefono")]}),p.jsxs("th",{className:"sortable",onClick:()=>H("direccion"),children:["Direccin ",z("direccion")]}),p.jsxs("th",{className:"sortable",onClick:()=>H("fechaRegistro"),children:["Fecha de Registro ",z("fechaRegistro")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:B.map(ee=>p.jsxs("tr",{children:[p.jsx("td",{children:ee.nombre}),p.jsx("td",{children:ee.telefono||"-"}),p.jsx("td",{children:ee.direccion||"-"}),p.jsx("td",{children:ee.fechaRegistro||"-"}),p.jsxs("td",{className:"actions",children:[p.jsx("button",{className:"edit-btn",onClick:()=>Le(ee),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>P(ee.id),children:"Eliminar"}),p.jsx("button",{className:"add-sale-btn",onClick:()=>gt(ee),children:"+ Venta"})]})]},ee.id))})]})})}),C&&p.jsx(gH,{address:x.direccion,coordinates:x.direccionCoords,onClose:se}),R&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container sale-form-modal",children:[p.jsxs("h2",{children:["Nueva Venta - ",J?.nombre," - ",da(I.fecha)]}),p.jsxs("form",{onSubmit:Se,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"fecha",children:"Fecha *"}),p.jsx("input",{type:"date",id:"fecha",name:"fecha",value:I.fecha,onChange:Ae,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"cliente",children:"Cliente *"}),p.jsxs("select",{id:"cliente",name:"cliente",value:I.cliente,onChange:Ae,required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(ee=>p.jsx("option",{value:ee.id,children:ee.nombre},ee.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Productos de la Venta *"}),p.jsx("div",{style:{marginBottom:"1rem"},children:p.jsx("button",{type:"button",onClick:ke,style:{background:"#4299e1",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Agregar Producto"})}),I.items.map((ee,me)=>p.jsxs("div",{style:{border:"1px solid #667eea",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"rgb(102, 126, 234)",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Producto ",me+1]}),I.items.length>1&&p.jsx("button",{type:"button",onClick:()=>$e(me),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Kombucha *"}),p.jsxs("select",{value:ee.kombuchaId,onChange:Re=>ge(me,"kombuchaId",Re.target.value),style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0,children:[p.jsx("option",{value:"",children:"Selecciona una kombucha"}),q.map(Re=>p.jsxs("option",{value:Re.id,children:[Re.nombre," - $",Re.precio?.toFixed(2)||"0.00"]},Re.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Cantidad *"}),p.jsx("input",{type:"number",value:ee.cantidad,onChange:Re=>ge(me,"cantidad",Re.target.value),min:"1",style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Precio *"}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:ee.precio,onChange:Re=>ge(me,"precio",Re.target.value),style:{width:"100%",padding:"0.5rem",border:Ge(ee)?"2px solid #f56565":"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#4a5568"},placeholder:"0.00"}),p.jsx("small",{style:{color:"white",fontSize:"0.7rem"},children:ee.kombuchaId&&Pe(ee.kombuchaId)?p.jsxs(p.Fragment,{children:["Precio original: $",Pe(ee.kombuchaId).toFixed(2),Ge(ee)&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#f56565",fontWeight:"bold"},children:[" "," Modificado"]}),p.jsx("button",{type:"button",onClick:()=>ge(me,"precio",Pe(ee.kombuchaId)),style:{background:"none",border:"none",color:"#4299e1",textDecoration:"underline",cursor:"pointer",fontSize:"0.7rem",marginLeft:"0.5rem"},children:"Restaurar"})]})]}):"Precio sugerido del producto (puede ser modificado)"})]})]}),p.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:p.jsxs("strong",{style:{color:"white"},children:["Subtotal: $",((parseFloat(ee.cantidad)||0)*(parseFloat(ee.precio)||0)).toFixed(2)]})})]},me))]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"total",children:"Total *"}),p.jsx("input",{type:"number",id:"total",name:"total",value:I.total,readOnly:!0,style:{backgroundColor:"#f7fafc",color:"#4a5568",cursor:"not-allowed",fontSize:"1.2rem",fontWeight:"bold"}}),p.jsx("small",{style:{color:"#666",fontSize:"0.8rem"},children:"Calculado automticamente (suma de todos los productos)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"estado",children:"Estado *"}),p.jsxs("select",{id:"estado",name:"estado",value:I.estado,onChange:Ae,required:!0,children:[p.jsx("option",{value:"pendiente",children:"Pendiente"}),p.jsx("option",{value:"completada",children:"Completada"})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:Et,disabled:X,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:X,children:X?"Guardando...":"Guardar Venta"})]})]})]})})]})}const tv=({clientes:n=[],center:e=null,zoom:t=12})=>{const i=D.useRef(null),s=D.useRef(null),a=D.useRef([]);D.useRef([]);const[l,u]=D.useState([]),h=(x,T,C)=>{s.current&&(C?(s.current.setCenter(x),s.current.setZoom(16)):(s.current.setCenter(x),s.current.setZoom(17)))},f=x=>{const T={};return x.forEach(C=>{const k=parseFloat(C.direccionCoords?.lat),R=parseFloat(C.direccionCoords?.lng);if(C.direccionCoords&&!isNaN(k)&&!isNaN(R)){const j=`${k.toFixed(6)},${R.toFixed(6)}`;T[j]||(T[j]={coordinates:{lat:k,lng:R},clients:[]}),T[j].clients.push(C)}}),T},y=(x,T,C=1e-4)=>{if(T<=1)return{lat:0,lng:0};const k=x*2*Math.PI/T,R=C*(1+Math.floor(x/8));return{lat:Math.cos(k)*R,lng:Math.sin(k)*R}},v=x=>{if(x.length===1){const C=x[0];return`
        <div style="padding: 10px; min-width: 200px;">
          <h3 style="margin: 0 0 8px 0; color: #333;">${C.nombre}</h3>
          <p style="margin: 5px 0; color: #666;">
            <strong>Telfono:</strong> ${C.telefono||"No disponible"}
          </p>
          <p style="margin: 5px 0; color: #666;">
            <strong>Direccin:</strong> ${C.direccion||"No disponible"}
          </p>
          <p style="margin: 5px 0; color: #666;">
            <strong>Registro:</strong> ${C.fechaRegistro||"No disponible"}
          </p>
        </div>
      `}const T=x.map((C,k)=>`
      <div style="border-bottom: 1px solid #eee; padding: 8px 0; ${k===x.length-1?"border-bottom: none;":""}">
        <h4 style="margin: 0 0 5px 0; color: #333; font-size: 14px;">${C.nombre}</h4>
        <p style="margin: 2px 0; color: #666; font-size: 12px;">
          <strong>Telfono:</strong> ${C.telefono||"No disponible"}
        </p>
        <p style="margin: 2px 0; color: #666; font-size: 12px;">
          <strong>Direccin:</strong> ${C.direccion||"No disponible"}
        </p>
      </div>
    `).join("");return`
      <div style="padding: 10px; min-width: 250px; max-height: 300px; overflow-y: auto;">
        <h3 style="margin: 0 0 10px 0; color: #333; border-bottom: 2px solid #F54927; padding-bottom: 5px;">
          ${x.length} Cliente${x.length>1?"s":""} en esta ubicacin
        </h3>
        ${T}
      </div>
    `};return D.useEffect(()=>{(async()=>{try{if(await yg(),i.current){const T=e||fa.defaultMapCenter;s.current=new window.google.maps.Map(i.current,{center:T,zoom:t||fa.defaultZoom,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]})}}catch(T){console.error("Failed to load Google Maps:",T)}})()},[e,t]),D.useEffect(()=>{a.current.forEach(T=>{T.marker.setMap(null),T.infoWindow.close()}),a.current=[],(async()=>{try{if(await yg(),s.current&&n.length>0){const T=new window.google.maps.LatLngBounds;let C=!1;const k=f(n);let R=1;if(Object.values(k).forEach((j,q)=>{const{coordinates:G,clients:X}=j;X.forEach((Y,J)=>{const F=y(J,X.length),I={lat:G.lat+F.lat,lng:G.lng+F.lng},O=new window.google.maps.Marker({position:I,map:s.current,title:X.length>1?`${X.length} clientes en esta ubicacin`:Y.nombre,label:{text:R.toString(),color:"white",fontWeight:"bold"},icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:X.length>1?14:10,fillColor:X.length>1?"#8B5CF6":"#F54927",fillOpacity:1,strokeColor:X.length>1?"#4C1D95":"#ffffff",strokeWeight:X.length>1?3:2}}),U=new window.google.maps.InfoWindow({content:v(X)});O.addListener("click",()=>{U.open(s.current,O)}),a.current.push({marker:O,infoWindow:U,coordinates:G,clients:X,isGrouped:X.length>1,markerNumber:R}),T.extend(I),C=!0,R++})}),u([...a.current]),C){s.current.fitBounds(T);const j=window.google.maps.event.addListenerOnce(s.current,"bounds_changed",()=>{s.current.setZoom(Math.min(s.current.getZoom(),15))})}}}catch(T){console.error("Failed to load Google Maps for markers:",T)}})()},[n]),p.jsxs("div",{className:"map-view",children:[p.jsx("div",{ref:i,className:"map-container"}),p.jsxs("div",{className:"map-legend",children:[p.jsx("h3",{children:"Clientes en el mapa"}),p.jsx("div",{className:"legend-items",children:(()=>{const x=f(n);return Object.values(x).map((T,C)=>{const{coordinates:k,clients:R}=T;if(R.length>1)return R.map((q,G)=>{const X=l.find(Y=>Y.coordinates.lat===k.lat&&Y.coordinates.lng===k.lng&&Y.clients.includes(q));return p.jsxs("div",{className:"legend-item",onClick:()=>h(k,R,!0),style:{cursor:"pointer"},children:[p.jsxs("div",{className:"legend-marker",style:{backgroundColor:"#8B5CF6",position:"relative"},children:[R.length,p.jsx("div",{style:{position:"absolute",top:"-2px",right:"-2px",backgroundColor:"#4C1D95",color:"white",borderRadius:"50%",width:"16px",height:"16px",fontSize:"10px",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white"},children:X?X.markerNumber:"?"})]}),p.jsx("span",{className:"legend-text",children:q.nombre})]},`${C}-${G}`)});{const q=l.find(G=>G.coordinates.lat===k.lat&&G.coordinates.lng===k.lng);return p.jsxs("div",{className:"legend-item",onClick:()=>h(k,R,!1),style:{cursor:"pointer"},children:[p.jsx("div",{className:"legend-marker",style:{backgroundColor:"#F54927"},children:q?q.markerNumber:"?"}),p.jsx("span",{className:"legend-text",children:R[0].nombre})]},`group-${C}`)}})})()}),n.filter(x=>{const T=parseFloat(x.direccionCoords?.lat),C=parseFloat(x.direccionCoords?.lng);return x.direccionCoords&&!isNaN(T)&&!isNaN(C)}).length===0&&p.jsx("p",{className:"no-coordinates",children:"No hay clientes con coordenadas para mostrar en el mapa"})]})]})};function _H(){const[n,e]=D.useState([]),[t,i]=D.useState(!0),s=async()=>{try{console.log("Fetching clients for map...");const u=(await Pn(sn(At,"clientes"))).docs.map(h=>({id:h.id,...h.data()}));console.log("Clients with coordinates:",u.filter(h=>{const f=parseFloat(h.direccionCoords?.lat),y=parseFloat(h.direccionCoords?.lng);return h.direccionCoords&&!isNaN(f)&&!isNaN(y)})),e(u)}catch(l){console.error("Error fetching clients for map:",l)}finally{i(!1)}};if(D.useEffect(()=>{s()},[]),t)return p.jsx("div",{className:"map-page",children:p.jsx("div",{className:"loading",children:"Cargando mapa de clientes..."})});const a=n.filter(l=>{const u=parseFloat(l.direccionCoords?.lat),h=parseFloat(l.direccionCoords?.lng);return l.direccionCoords&&!isNaN(u)&&!isNaN(h)});return p.jsxs("div",{className:"map-page",children:[p.jsxs("div",{className:"map-header",children:[p.jsx("h1",{children:"Mapa de Clientes"}),p.jsxs("div",{className:"map-stats",children:[p.jsxs("span",{className:"stat-item",children:[p.jsx("strong",{children:"Total de clientes:"})," ",n.length]}),p.jsxs("span",{className:"stat-item",children:[p.jsx("strong",{children:"Con coordenadas:"})," ",a.length]})]})]}),a.length===0?p.jsx("div",{className:"no-coordinates-message",children:p.jsxs("div",{className:"message-content",children:[p.jsx("h2",{children:"No hay clientes con coordenadas"}),p.jsx("p",{children:"Para ver clientes en el mapa, necesitas agregar direcciones usando las sugerencias de Google Maps en la pgina de gestin de clientes."}),p.jsx("button",{className:"go-to-clients-btn",onClick:()=>window.location.href="/clientes",children:"Ir a Gestin de Clientes"})]})}):p.jsx("div",{className:"map-content",children:p.jsx(tv,{clientes:n})})]})}const bH=()=>{const[n,e]=D.useState([]),[t,i]=D.useState(!0),[s,a]=D.useState(!1),[l,u]=D.useState(null),[h,f]=D.useState("nombre"),[y,v]=D.useState("asc"),[x,T]=D.useState(!1),[C,k]=D.useState(""),[R,j]=D.useState({nombre:"",precio:"",costoUnitario:""}),q=async()=>{try{i(!0);const z=(await Pn(sn(At,"kombuchas"))).docs.map(se=>({id:se.id,...se.data()})),_e=(await Pn(sn(At,"ventas"))).docs.map(se=>({id:se.id,...se.data()})),K=z.map(se=>{let Ee=0;return _e.forEach(Le=>{Le.items&&Array.isArray(Le.items)?Le.items.forEach(P=>{P.kombuchaId===se.id&&(Ee+=parseInt(P.cantidad)||0)}):Le.kombucha===se.id&&(Ee+=parseInt(Le.cantidad)||0)}),{...se,ventas:Ee}});e(K)}catch(B){console.error("Error fetching kombuchas:",B),k("Error al cargar las kombuchas")}finally{i(!1)}};D.useEffect(()=>{q()},[]);const G=B=>{f(B),v(y==="asc"?"desc":"asc")},X=B=>h===B?y==="asc"?"":"":"",Y=B=>{const{name:z,value:je}=B.target;j(_e=>({..._e,[z]:je}))},J=async B=>{B.preventDefault(),T(!0),k("");try{if(!R.nombre.trim()||!R.precio.trim()||!R.costoUnitario.trim()){k("Sabor, precio y costo unitario son campos obligatorios");return}const z={nombre:R.nombre.trim(),precio:parseFloat(R.precio)||0,costoUnitario:parseFloat(R.costoUnitario)||0,fechaRegistro:l?l.fechaRegistro:ag(),fechaActualizacion:ag()};if(l)await Mf(wa(At,"kombuchas",l.id),z),e(je=>je.map(_e=>_e.id===l.id?{..._e,...z}:_e)),u(null);else{const je=await jc(sn(At,"kombuchas"),z);e(_e=>[..._e,{id:je.id,...z,ventas:0}])}a(!1),U()}catch(z){console.error("Error saving kombucha:",z),k("Error al guardar la kombucha")}finally{T(!1)}},F=B=>{u(B),j({nombre:B.nombre||"",precio:B.precio?.toString()||"",costoUnitario:B.costoUnitario?.toString()||""}),a(!0)},I=async B=>{if(window.confirm("Ests seguro de que quieres eliminar esta kombucha?"))try{await Ug(wa(At,"kombuchas",B)),e(z=>z.filter(je=>je.id!==B))}catch(z){console.error("Error deleting kombucha:",z),k("Error al eliminar la kombucha")}},O=()=>{a(!1),u(null),U()},U=()=>{j({nombre:"",precio:"",costoUnitario:""}),k("")},H=[...n].sort((B,z)=>{const je=B[h],_e=z[h];if(h==="precio"||h==="ventas"||h==="costoUnitario"){const K=parseFloat(je)||0,se=parseFloat(_e)||0;return y==="asc"?K-se:se-K}return je&&_e?y==="asc"?je.toString().localeCompare(_e.toString()):_e.toString().localeCompare(je.toString()):0});return t?p.jsx("div",{className:"kombuchas-page",children:p.jsx("div",{className:"loading",children:"Cargando kombuchas..."})}):p.jsxs("div",{className:"kombuchas-page",children:[p.jsxs("div",{className:"kombuchas-header",children:[p.jsx("h1",{children:"Kombuchas"}),p.jsx("button",{className:"add-kombucha-btn",onClick:()=>a(!0),children:"+ Nueva Kombucha"})]}),C&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:C}),p.jsx("div",{className:"kombuchas-content",children:n.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:"No hay kombuchas registradas"}),p.jsx("button",{className:"add-first-kombucha-btn",onClick:()=>a(!0),children:"Agregar primera kombucha"})]}):p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"kombuchas-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{className:"sortable",onClick:()=>G("nombre"),children:["Sabor Kombucha ",X("nombre")]}),p.jsxs("th",{className:"sortable",onClick:()=>G("precio"),children:["Precio ",X("precio")]}),p.jsxs("th",{className:"sortable",onClick:()=>G("costoUnitario"),children:["Costo Unitario ",X("costoUnitario")]}),p.jsxs("th",{className:"sortable",onClick:()=>G("ventas"),children:["Ventas ",X("ventas")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:H.map(B=>p.jsxs("tr",{children:[p.jsx("td",{children:B.nombre}),p.jsxs("td",{className:"price-cell",children:["$",B.precio?.toFixed(2)||"0.00"]}),p.jsxs("td",{className:"price-cell",children:["$",B.costoUnitario?.toFixed(2)||"0.00"]}),p.jsx("td",{children:B.ventas||0}),p.jsx("td",{children:p.jsxs("div",{className:"actions",children:[p.jsx("button",{className:"edit-btn",onClick:()=>F(B),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>I(B.id),children:"Eliminar"})]})})]},B.id))})]})})}),s&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:l?"Editar Kombucha":"Nueva Kombucha"}),C&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem"},children:C}),p.jsxs("form",{onSubmit:J,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nombre",children:"Sabor *"}),p.jsx("input",{type:"text",id:"nombre",name:"nombre",value:R.nombre,onChange:Y,required:!0,placeholder:"Sabor de la kombucha"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"precio",children:"Precio *"}),p.jsx("input",{type:"number",id:"precio",name:"precio",value:R.precio,onChange:Y,required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"costoUnitario",children:"Costo Unitario *"}),p.jsx("input",{type:"number",id:"costoUnitario",name:"costoUnitario",value:R.costoUnitario,onChange:Y,required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:O,disabled:x,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:x,children:x?"Guardando...":l?"Actualizar":"Guardar"})]})]})]})})]})},vH=()=>{const n=Aa(),[e,t]=D.useState([]),[i,s]=D.useState(!0),[a,l]=D.useState(!1),[u,h]=D.useState(null),[f,y]=D.useState("fecha"),[v,x]=D.useState("desc"),[T,C]=D.useState(!1),[k,R]=D.useState(""),[j,q]=D.useState([]),[G,X]=D.useState([]),[Y,J]=D.useState(qR()),[F,I]=D.useState("sales"),[O,U]=D.useState({fecha:Ps(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],packs:[],total:"0.00",estado:"pendiente",isWholesale:!1}),H=async()=>{try{s(!0);const ae=(await Pn(sn(At,"ventas"))).docs.map(oe=>({id:oe.id,...oe.data()}));t(ae)}catch($){console.error("Error fetching sales:",$),R("Error al cargar las ventas")}finally{s(!1)}},B=async()=>{try{const ae=(await Pn(sn(At,"kombuchas"))).docs.map(oe=>({id:oe.id,...oe.data()}));q(ae)}catch($){console.error("Error fetching kombuchas:",$)}},z=async()=>{try{const ae=(await Pn(sn(At,"clientes"))).docs.map(oe=>({id:oe.id,...oe.data()}));X(ae)}catch($){console.error("Error fetching clientes:",$)}};D.useEffect(()=>{H(),B(),z()},[]),D.useEffect(()=>{n.state?.selectedCliente&&n.state?.showForm&&(U($=>({...$,cliente:n.state.selectedCliente.id})),l(!0))},[n.state]);const je=$=>{y($),x(v==="asc"?"desc":"asc")},_e=$=>f===$?v==="asc"?"":"":"",K=$=>{const{name:ae,value:oe,type:be,checked:Ie}=$.target;U(De=>({...De,[ae]:be==="checkbox"?Ie:oe})),ae==="isWholesale"&&setTimeout(Ie?()=>{mn()}:()=>{Ht(),Xi()},0)},se=($,ae,oe)=>{U(be=>{const Ie=[...be.items];if(Ie[$]={...Ie[$],[ae]:oe},ae==="kombuchaId"&&oe){const We=j.find(bt=>bt.id===oe);We&&We.precio&&!Ie[$].precio&&(Ie[$].precio=et(oe))}const De=Ie.reduce((We,bt)=>{const mi=parseFloat(bt.cantidad)||0,ys=parseFloat(bt.precio)||0;return We+mi*ys},0),Ne=be.packs.reduce((We,bt)=>{const mi=parseFloat(bt.precio)||0;return We+mi},0),Ve=De+Ne;return{...be,items:Ie,total:Ve.toFixed(2)}})},Ee=()=>{U($=>({...$,items:[...$.items,{kombuchaId:"",cantidad:1,precio:""}]}))},Le=()=>{U($=>{const ae={kombuchas:[],precio:0},oe=$.items.reduce((De,Ne)=>{const Ve=parseFloat(Ne.cantidad)||0,We=parseFloat(Ne.precio)||0;return De+Ve*We},0),be=[...$.packs,ae].reduce((De,Ne)=>De+Ne.precio,0),Ie=oe+be;return{...$,packs:[...$.packs,ae],total:Ie.toFixed(2)}})},P=$=>{U(ae=>{const oe=ae.packs.filter((Ne,Ve)=>Ve!==$),be=ae.items.reduce((Ne,Ve)=>{const We=parseFloat(Ve.cantidad)||0,bt=parseFloat(Ve.precio)||0;return Ne+We*bt},0),Ie=oe.reduce((Ne,Ve)=>Ne+Ve.precio,0),De=be+Ie;return{...ae,packs:oe,total:De.toFixed(2)}})},fe=($,ae,oe)=>{U(be=>{const Ie=[...be.packs];Ie[$]={...Ie[$],[ae]:oe},oe.length>6&&(oe=oe.slice(0,6)),Ie[$].precio=it(oe);const De=be.items.reduce((We,bt)=>{const mi=parseFloat(bt.cantidad)||0,ys=parseFloat(bt.precio)||0;return We+mi*ys},0),Ne=Ie.reduce((We,bt)=>We+bt.precio,0),Ve=De+Ne;return{...be,packs:Ie,total:Ve.toFixed(2)}})},Ae=$=>{U(ae=>{const oe=ae.items.filter((Ne,Ve)=>Ve!==$),be=oe.reduce((Ne,Ve)=>{const We=parseFloat(Ve.cantidad)||0,bt=parseFloat(Ve.precio)||0;return Ne+We*bt},0),Ie=ae.packs.reduce((Ne,Ve)=>{const We=parseFloat(Ve.precio)||0;return Ne+We},0),De=be+Ie;return{...ae,items:oe,total:De.toFixed(2)}})},ge=async $=>{$.preventDefault(),C(!0),R("");try{if(!O.fecha.trim()||!O.cliente.trim()){R("Fecha y cliente son campos obligatorios");return}const ae=O.items.filter(Ie=>Ie.kombuchaId&&Ie.cantidad>0),oe=O.packs.filter(Ie=>Ie.kombuchas&&Ie.kombuchas.length>0);if(ae.length===0&&oe.length===0){R("Debe agregar al menos un producto (kombucha individual o pack)");return}const be={fecha:O.fecha.trim(),cliente:O.cliente.trim(),items:ae,packs:oe,total:parseFloat(O.total),estado:O.estado,isWholesale:O.isWholesale,fechaRegistro:u&&u.fechaRegistro?u.fechaRegistro:ag(),fechaActualizacion:ag()};if(u)await Mf(wa(At,"ventas",u.id),be),t(Ie=>Ie.map(De=>De.id===u.id?{...De,...be}:De)),h(null);else{const Ie=await jc(sn(At,"ventas"),be);t(De=>[...De,{id:Ie.id,...be}])}l(!1),Ge()}catch(ae){console.error("Error saving sale:",ae),R("Error al guardar la venta")}finally{C(!1)}},ke=$=>{h($);let ae=[];$.items&&Array.isArray($.items)?ae=$.items:$.kombucha&&(ae=[{kombuchaId:$.kombucha,cantidad:parseFloat($.cantidad)||1,precio:parseFloat($.precio)||0}]);const oe=ae.reduce((Ne,Ve)=>{const We=parseFloat(Ve.cantidad)||0,bt=parseFloat(Ve.precio)||0;return Ne+We*bt},0);let be=[],Ie=0;$.packs&&Array.isArray($.packs)&&(be=$.packs,Ie=be.reduce((Ne,Ve)=>Ne+(Ve.precio||0),0));const De=oe+Ie;U({fecha:$.fecha||"",cliente:$.cliente||"",items:ae,packs:be,total:De.toFixed(2),estado:$.estado||"pendiente",isWholesale:$.isWholesale||!1}),l(!0)},$e=async $=>{if(window.confirm("Ests seguro de que quieres eliminar esta venta?"))try{await Ug(wa(At,"ventas",$)),t(ae=>ae.filter(oe=>oe.id!==$))}catch(ae){console.error("Error deleting sale:",ae),R("Error al eliminar la venta")}},Pe=()=>{l(!1),h(null),Ge()},Ge=()=>{U({fecha:Ps(),cliente:"",items:[],packs:[],total:"0.00",estado:"pendiente",isWholesale:!1})},Se=$=>{const ae=j.find(oe=>oe.id===$);return ae?ae.nombre:"Kombucha no encontrada"},Et=$=>{const ae=G.find(oe=>oe.id===$);return ae?ae.nombre:"Cliente no encontrado"},gt=$=>{const ae=j.find(oe=>oe.id===$);return ae?ae.precio:null},ee=()=>{const $=O.items.reduce((oe,be)=>oe+(parseFloat(be.cantidad)||0),0),ae=O.packs.reduce((oe,be)=>oe+(be.kombuchas?.length||0),0);return $+ae},me=()=>O.isWholesale,Re=()=>36,et=$=>$?me()?Re():gt($)||0:0,it=$=>!$||$.length===0?0:$.length===6?me()?Re()*6:250:$.length>0?$.reduce((oe,be)=>oe+et(be),0):0,mn=()=>{U($=>{const ae=$.items.map(Ne=>Ne.kombuchaId?{...Ne,precio:Re()}:Ne),oe=$.packs.map(Ne=>Ne.kombuchas&&Ne.kombuchas.length>0?{...Ne,precio:it(Ne.kombuchas)}:Ne),be=ae.reduce((Ne,Ve)=>{const We=parseFloat(Ve.cantidad)||0,bt=parseFloat(Ve.precio)||0;return Ne+We*bt},0),Ie=oe.reduce((Ne,Ve)=>Ne+Ve.precio,0),De=be+Ie;return{...$,items:ae,packs:oe,total:De.toFixed(2)}})},Ht=()=>{U($=>{const ae=$.items.map(Ne=>Ne.kombuchaId?{...Ne,precio:gt(Ne.kombuchaId)||0}:Ne),oe=$.packs.map(Ne=>{if(Ne.kombuchas&&Ne.kombuchas.length>0){let Ve=0;return Ne.kombuchas.length===6?Ve=250:Ne.kombuchas.length>0&&(Ve=Ne.kombuchas.reduce((We,bt)=>We+(gt(bt)||0),0)),{...Ne,precio:Ve}}return Ne}),be=ae.reduce((Ne,Ve)=>{const We=parseFloat(Ve.cantidad)||0,bt=parseFloat(Ve.precio)||0;return Ne+We*bt},0),Ie=oe.reduce((Ne,Ve)=>Ne+Ve.precio,0),De=be+Ie;return{...$,items:ae,packs:oe,total:De.toFixed(2)}})},zi=()=>{if(!me())return 0;let $=0;return O.items.forEach(ae=>{if(ae.kombuchaId&&ae.cantidad){const oe=gt(ae.kombuchaId)||0,be=Re(),Ie=(oe-be)*parseFloat(ae.cantidad);$+=Ie}}),O.packs.forEach(ae=>{if(ae.kombuchas&&ae.kombuchas.length>0)if(ae.kombuchas.length===6){const Ie=250-Re()*6;$+=Ie}else{const oe=ae.kombuchas.reduce((De,Ne)=>De+(gt(Ne)||0),0),be=ae.kombuchas.reduce((De,Ne)=>De+Re(),0),Ie=oe-be;$+=Ie}}),$},Xi=()=>{U($=>{const ae=$.packs.map(De=>{if(De.kombuchas&&De.kombuchas.length>0){let Ne=0;return De.kombuchas.length===6?Ne=250:De.kombuchas.length>0&&(Ne=De.kombuchas.reduce((Ve,We)=>Ve+(gt(We)||0),0)),{...De,precio:Ne}}return De}),oe=$.items.reduce((De,Ne)=>{const Ve=parseFloat(Ne.cantidad)||0,We=parseFloat(Ne.precio)||0;return De+Ve*We},0),be=ae.reduce((De,Ne)=>De+Ne.precio,0),Ie=oe+be;return{...$,packs:ae,total:Ie.toFixed(2)}})},gs=$=>{if(!$.kombuchaId||!$.precio)return!1;const ae=gt($.kombuchaId);return ae&&parseFloat($.precio)!==parseFloat(ae)},Bi=e.filter($=>Y?($.fecha?$.fecha.slice(0,7):"")===Y:!0),Ra=()=>{const $=Bi,ae=$.length,oe=$.filter(Ve=>Ve.estado!=="cancelada").reduce((Ve,We)=>Ve+(parseFloat(We.total)||0),0),be=$.filter(Ve=>Ve.estado==="completada").length,Ie=$.filter(Ve=>Ve.estado==="pendiente").length,De=$.filter(Ve=>Ve.estado==="cancelada").length,Ne=$.filter(Ve=>Ve.estado==="pagoPendiente").length;return{totalSales:ae,totalRevenue:oe,completedSales:be,pendingSales:Ie,canceledSales:De,paymentPendingSales:Ne}},Vs=()=>{const $=Bi,ae={};return $.forEach(oe=>{const be=oe.cliente,Ie=Et(be);if(ae[be]||(ae[be]={clienteId:be,clienteName:Ie,totalPurchases:0,totalAmount:0,kombuchaCounts:{},lastPurchase:null}),oe.estado!=="cancelada"){if(oe.items&&Array.isArray(oe.items)&&oe.items.forEach(De=>{const Ne=Se(De.kombuchaId),Ve=parseFloat(De.cantidad)||0;ae[be].kombuchaCounts[Ne]||(ae[be].kombuchaCounts[Ne]=0),ae[be].kombuchaCounts[Ne]+=Ve,ae[be].totalPurchases+=Ve}),oe.packs&&Array.isArray(oe.packs))oe.packs.forEach(De=>{De.kombuchas&&Array.isArray(De.kombuchas)&&De.kombuchas.forEach(Ne=>{const Ve=Se(Ne);ae[be].kombuchaCounts[Ve]||(ae[be].kombuchaCounts[Ve]=0),ae[be].kombuchaCounts[Ve]+=1,ae[be].totalPurchases+=1})});else if(oe.kombucha){const De=Se(oe.kombucha),Ne=parseFloat(oe.cantidad)||0;ae[be].kombuchaCounts[De]||(ae[be].kombuchaCounts[De]=0),ae[be].kombuchaCounts[De]+=Ne,ae[be].totalPurchases+=Ne}ae[be].totalAmount+=parseFloat(oe.total)||0}(!ae[be].lastPurchase||oe.fecha>ae[be].lastPurchase)&&(ae[be].lastPurchase=oe.fecha)}),Object.values(ae).sort((oe,be)=>be.totalPurchases-oe.totalPurchases)},Vn=Ra(),pe=Vs(),ze=[...Bi].sort(($,ae)=>{const oe=$[f],be=ae[f];if(f==="precio"||f==="total"){const Ie=parseFloat(oe)||0,De=parseFloat(be)||0;return v==="asc"?Ie-De:De-Ie}return oe&&be?v==="asc"?oe.toString().localeCompare(be.toString()):be.toString().localeCompare(oe.toString()):0});return i?p.jsx("div",{className:"ventas-page",children:p.jsx("div",{className:"loading",children:"Cargando ventas..."})}):p.jsxs("div",{className:"ventas-page",children:[p.jsxs("div",{className:"ventas-header",children:[p.jsx("h1",{children:"Ventas"}),p.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[p.jsx("label",{style:{color:"#2d3748",fontWeight:"600",fontSize:"0.9rem"},children:"Filtrar por mes:"}),p.jsx("input",{type:"month",value:Y,onChange:$=>J($.target.value),style:{padding:"0.5rem",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem",backgroundColor:"white"}})]}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[p.jsx("button",{className:`view-toggle-btn ${F==="sales"?"active":""}`,onClick:()=>I("sales"),children:"Ventas"}),p.jsx("button",{className:`view-toggle-btn ${F==="clientSummary"?"active":""}`,onClick:()=>I("clientSummary"),children:"Resumen Clientes"})]}),p.jsx("button",{className:"add-venta-btn",onClick:()=>l(!0),children:"+ Nueva Venta"})]})]}),k&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:k}),p.jsxs("div",{className:"ventas-content",children:[p.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#f7fafc",borderBottom:"1px solid #e2e8f0",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Total Ventas"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#2d3748"},children:Vn.totalSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Ingresos Totales"}),p.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#38a169"},children:["$",Vn.totalRevenue.toFixed(2)]})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Completadas"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#38a169"},children:Vn.completedSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Pendientes"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#d69e2e"},children:Vn.pendingSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Canceladas"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#c53030"},children:Vn.canceledSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Pago Pendiente"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#d69e2e"},children:Vn.paymentPendingSales})]})]}),F==="clientSummary"&&p.jsxs("div",{style:{padding:"1.5rem"},children:[p.jsxs("h2",{style:{margin:"0 0 1.5rem 0",color:"#2d3748",fontSize:"1.5rem",fontWeight:"600",textAlign:"center"},children:["Resumen de Compras por Cliente - ",H_(Y)]}),pe.length===0?p.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#718096",fontSize:"1.1rem"},children:["No hay compras registradas para ",H_(Y)]}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:pe.map(($,ae)=>p.jsxs("div",{className:"client-summary-card",style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"1px solid #e2e8f0",transition:"transform 0.2s ease, box-shadow 0.2s ease"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"2px solid #f7fafc"},children:[p.jsxs("div",{children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#2d3748",fontSize:"1.2rem",fontWeight:"700"},children:$.clienteName}),p.jsxs("p",{style:{margin:0,color:"#718096",fontSize:"0.9rem"},children:["ltima compra: ",$.lastPurchase||"N/A"]})]}),p.jsxs("div",{style:{textAlign:"right"},children:[p.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#38a169",marginBottom:"0.25rem"},children:$.totalPurchases}),p.jsx("div",{style:{fontSize:"0.8rem",color:"#718096",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Kombuchas"})]})]}),p.jsx("div",{style:{marginBottom:"1rem"},children:p.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2d3748",marginBottom:"0.75rem"},children:["Total Gastado: $",$.totalAmount.toFixed(2)]})}),p.jsxs("div",{children:[p.jsx("h4",{style:{margin:"0 0 0.75rem 0",color:"#4a5568",fontSize:"0.95rem",fontWeight:"600"},children:"Detalle por Tipo:"}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries($.kombuchaCounts).map(([oe,be])=>p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:"#f7fafc",borderRadius:"6px",fontSize:"0.9rem"},children:[p.jsx("span",{style:{color:"#2d3748",fontWeight:"500"},children:oe}),p.jsx("span",{style:{color:"#38a169",fontWeight:"600",fontSize:"1rem"},children:be})]},oe))})]})]},$.clienteId))})]}),F==="sales"&&p.jsx(p.Fragment,{children:ze.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsxs("p",{children:["No hay ventas registradas para ",H_(Y)]}),p.jsx("button",{className:"add-venta-btn",onClick:()=>l(!0),children:"+ Nueva Venta"})]}):p.jsx("div",{className:"ventas-table-container",children:p.jsxs("table",{className:"ventas-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{className:"sortable",onClick:()=>je("fecha"),children:["Fecha ",_e("fecha")]}),p.jsxs("th",{className:"sortable",onClick:()=>je("cliente"),children:["Cliente ",_e("cliente")]}),p.jsx("th",{children:"Items"}),p.jsxs("th",{className:"sortable",onClick:()=>je("total"),children:["Total ",_e("total")]}),p.jsx("th",{children:"Precio"}),p.jsxs("th",{className:"sortable",onClick:()=>je("estado"),children:["Estado ",_e("estado")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:ze.map($=>p.jsxs("tr",{children:[p.jsx("td",{children:$.fecha}),p.jsx("td",{children:Et($.cliente)}),p.jsx("td",{children:p.jsxs("div",{style:{maxWidth:"300px"},children:[$.items&&Array.isArray($.items)&&$.items.map((ae,oe)=>p.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",backgroundColor:"#f7fafc",borderRadius:"4px",fontSize:"0.85rem"},children:[p.jsx("strong",{children:Se(ae.kombuchaId)}),p.jsx("br",{}),"Cantidad: ",ae.cantidad,"  $",(parseFloat(ae.precio)||0).toFixed(2)]},oe)),$.packs&&Array.isArray($.packs)&&$.packs.map((ae,oe)=>p.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",backgroundColor:"#e6fffa",borderRadius:"4px",fontSize:"0.85rem",border:"1px solid #38a169"},children:[p.jsx("strong",{style:{color:"#38a169"},children:"Pack de 6 Variedades"}),p.jsx("br",{}),p.jsxs("span",{style:{color:"#38a169",fontWeight:"600"},children:["$",(parseFloat(ae.precio)||0).toFixed(2)]}),ae.kombuchas&&Array.isArray(ae.kombuchas)&&p.jsx("div",{style:{marginTop:"0.25rem",fontSize:"0.75rem"},children:(()=>{const be={};return ae.kombuchas.forEach(Ie=>{be[Ie]=(be[Ie]||0)+1}),Object.entries(be).map(([Ie,De])=>p.jsxs("span",{style:{display:"inline-block",margin:"0.1rem",padding:"0.1rem 0.3rem",backgroundColor:"rgba(56, 161, 105, 0.2)",borderRadius:"3px",fontSize:"0.7rem"},children:[Se(Ie)," ",De>1?`${De}`:""]},Ie))})()})]},`pack-${oe}`)),(!$.items||!Array.isArray($.items))&&$.kombucha&&p.jsxs("div",{style:{padding:"0.5rem",backgroundColor:"#f7fafc",borderRadius:"4px",fontSize:"0.85rem"},children:[p.jsx("strong",{children:Se($.kombucha)}),p.jsx("br",{}),"Cantidad: ",$.cantidad,"  $",(parseFloat($.precio)||0).toFixed(2)]})]})}),p.jsxs("td",{className:"total-cell",children:["$",(parseFloat($.total)||0).toFixed(2)]}),p.jsx("td",{children:$.isWholesale?p.jsxs("div",{style:{padding:"0.5rem",backgroundColor:"rgba(56, 161, 105, 0.2)",borderRadius:"4px",fontSize:"0.85rem",textAlign:"center",border:"1px solid rgba(56, 161, 105, 0.4)"},children:[p.jsx("span",{style:{color:"#38a169",fontWeight:"600"},children:"Mayorista"}),p.jsx("br",{}),p.jsx("small",{style:{color:"#38a169",fontSize:"0.75rem"},children:"$36 c/u"})]}):p.jsx("div",{style:{padding:"0.5rem",backgroundColor:"rgba(102, 126, 234, 0.1)",borderRadius:"4px",fontSize:"0.85rem",textAlign:"center",border:"1px solid rgba(102, 126, 234, 0.3)"},children:p.jsx("span",{style:{color:"#667eea",fontWeight:"600"},children:"Regular"})})}),p.jsx("td",{children:p.jsx("span",{className:`status-badge status-${$.estado}`,children:$.estado})}),p.jsx("td",{children:p.jsxs("div",{className:"actions",children:[p.jsx("button",{className:"edit-btn",onClick:()=>ke($),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>$e($.id),children:"Eliminar"})]})})]},$.id))})]})})})]}),a&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:u?"Editar Venta":"Nueva Venta"}),k&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem"},children:k}),p.jsxs("form",{onSubmit:ge,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"fecha",children:"Fecha *"}),p.jsx("input",{type:"date",id:"fecha",name:"fecha",value:O.fecha,onChange:K,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"cliente",children:"Cliente *"}),p.jsxs("select",{id:"cliente",name:"cliente",value:O.cliente,onChange:K,required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un cliente"}),G.map($=>p.jsx("option",{value:$.id,children:$.nombre},$.id))]})]}),p.jsxs("div",{className:"form-group",style:{backgroundColor:"rgba(56, 161, 105, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(56, 161, 105, 0.3)",marginBottom:"1rem"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[p.jsx("input",{type:"checkbox",id:"isWholesale",name:"isWholesale",checked:O.isWholesale,onChange:K,style:{width:"18px",height:"18px",accentColor:"#38a169"}}),p.jsx("label",{htmlFor:"isWholesale",style:{color:"#38a169",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Precio Mayorista ($36 por kombucha)"})]}),p.jsxs("div",{style:{fontSize:"0.85rem",color:"#38a169",marginLeft:"1.5rem"},children:[p.jsxs("div",{style:{marginBottom:"0.5rem"},children:[p.jsx("button",{type:"button",onClick:mn,disabled:me(),style:{background:me()?"#718096":"#38a169",color:"white",border:"none",padding:"0.25rem 0.75rem",borderRadius:"3px",cursor:me()?"not-allowed":"pointer",fontSize:"0.8rem",marginRight:"0.5rem"},children:me()?"Ya aplicado":"Aplicar a todos"}),p.jsx("button",{type:"button",onClick:Ht,style:{background:"#e53e3e",color:"white",border:"none",padding:"0.25rem 0.75rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Restaurar precios"})]}),O.isWholesale?p.jsx("span",{style:{color:"#90ee90",fontWeight:"bold"},children:" Aplicando precio mayorista ($36 por kombucha)"}):p.jsx("span",{children:"Seleccin manual del precio mayorista"})]}),ee()>0&&p.jsxs("div",{style:{fontSize:"0.8rem",color:"#e2e8f0",marginLeft:"1.5rem",marginTop:"0.5rem"},children:[p.jsxs("span",{children:["Total de kombuchas: ",ee()]}),ee()>0&&p.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem"},children:p.jsx("span",{children:me()?p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#90ee90"},children:["Precio por kombucha: $",Re().toFixed(2)]}),p.jsxs("span",{style:{color:"#a0aec0"},children:[" "," Ahorro total: $",zi().toFixed(2)]}),p.jsxs("div",{style:{marginTop:"0.25rem",fontSize:"0.7rem",color:"#cbd5e0"},children:[O.items.filter($=>$.kombuchaId).map(($,ae)=>{const be=((gt($.kombuchaId)||0)-Re())*parseFloat($.cantidad);return be>0?p.jsxs("div",{children:[Se($.kombuchaId),": $",be.toFixed(2)," de ahorro"]},`item-${ae}`):null}),O.packs.filter($=>$.kombuchas&&$.kombuchas.length>0).map(($,ae)=>{let oe=0;if($.kombuchas.length===6)oe=250-Re()*6;else{const be=$.kombuchas.reduce((De,Ne)=>De+(gt(Ne)||0),0),Ie=$.kombuchas.length*Re();oe=be-Ie}return oe>0?p.jsxs("div",{children:["Pack ",ae+1," (",$.kombuchas.length," kombuchas): $",oe.toFixed(2)," de ahorro"]},`pack-${ae}`):null})]})]}):p.jsxs("span",{style:{color:"#a0aec0"},children:["Precio por kombucha: $",O.items.find($=>$.kombuchaId)?.precio||"0.00"]})})})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{children:["Productos de la Venta ",O.packs.length===0?"*":"(Opcional si hay packs)"]}),ee()>0&&p.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:me()?"rgba(56, 161, 105, 0.1)":"rgba(102, 126, 234, 0.1)",border:`1px solid ${me()?"#38a169":"#667eea"}`,borderRadius:"8px",fontSize:"0.9rem"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[p.jsx("strong",{style:{color:me()?"#38a169":"#667eea"},children:me()?"Precio Mayorista Aplicado":"Precio Regular"}),p.jsxs("span",{style:{color:me()?"#38a169":"#667eea",fontWeight:"bold"},children:["$",me()?Re().toFixed(2):"0.00"," por kombucha"]})]}),me()&&p.jsxs("div",{style:{color:"#38a169",fontSize:"0.8rem"},children:[" Ahorro total: $",zi().toFixed(2)]})]}),p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsx("button",{type:"button",onClick:Ee,style:{background:"#4299e1",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",marginRight:"0.5rem"},children:"+ Agregar Producto"}),p.jsx("button",{type:"button",onClick:Le,style:{background:"#38a169",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Agregar Pack 6"})]}),O.items.length===0&&O.packs.length>0&&p.jsx("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"rgba(56, 161, 105, 0.1)",border:"1px solid #38a169",borderRadius:"8px",textAlign:"center",fontSize:"0.9rem"},children:p.jsx("span",{style:{color:"#38a169",fontWeight:"600"},children:" Solo vendiendo packs - No se requieren productos individuales"})}),O.items.length===0&&O.packs.length===0&&p.jsx("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"rgba(102, 126, 234, 0.1)",border:"1px solid #667eea",borderRadius:"8px",textAlign:"center",fontSize:"0.9rem"},children:p.jsx("span",{style:{color:"#667eea",fontWeight:"600"},children:"Agrega productos individuales o packs para comenzar la venta"})}),O.items.map(($,ae)=>p.jsxs("div",{style:{border:"1px solid #667eea",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"rgb(102, 126, 234)",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Producto ",ae+1]}),(O.items.length>1||O.packs.length>0)&&p.jsx("button",{type:"button",onClick:()=>Ae(ae),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[p.jsxs("div",{children:[p.jsxs("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:["Kombucha ",O.packs.length===0?"*":"(Opcional)"]}),p.jsxs("select",{value:$.kombuchaId,onChange:oe=>se(ae,"kombuchaId",oe.target.value),style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:O.packs.length===0,children:[p.jsx("option",{value:"",children:"Selecciona una kombucha"}),j.map(oe=>p.jsxs("option",{value:oe.id,children:[oe.nombre," - $",oe.precio?.toFixed(2)||"0.00"]},oe.id))]})]}),p.jsxs("div",{children:[p.jsxs("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:["Cantidad ",O.packs.length===0?"*":"(Opcional)"]}),p.jsx("input",{type:"number",value:$.cantidad,onChange:oe=>se(ae,"cantidad",oe.target.value),min:"1",style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:O.packs.length===0})]}),p.jsxs("div",{children:[p.jsxs("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:["Precio ",O.packs.length===0?"*":"(Opcional)"]}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:$.precio,onChange:oe=>se(ae,"precio",oe.target.value),style:{width:"100%",padding:"0.5rem",border:gs($)?"2px solid #f56565":"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#4a5568"},placeholder:"0.00",required:O.packs.length===0}),p.jsx("small",{style:{color:"white",fontSize:"0.7rem"},children:$.kombuchaId&&gt($.kombuchaId)?p.jsxs(p.Fragment,{children:[me()?p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#90ee90",fontWeight:"bold"},children:["Precio mayorista: $",Re().toFixed(2)]}),p.jsxs("span",{style:{color:"#e2e8f0",fontSize:"0.65rem"},children:[" ","(Original: $",gt($.kombuchaId).toFixed(2),")"]})]}):p.jsxs(p.Fragment,{children:["Precio original: $",gt($.kombuchaId).toFixed(2),p.jsxs("span",{style:{color:"#90ee90",fontSize:"0.65rem"},children:[" ","(Mayorista: $",Re().toFixed(2),")"]})]}),gs($)&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#f56565",fontWeight:"bold"},children:[" "," Modificado"]}),p.jsx("button",{type:"button",onClick:()=>se(ae,"precio",et($.kombuchaId)),style:{background:"none",border:"none",color:"#4299e1",textDecoration:"underline",cursor:"pointer",fontSize:"0.7rem",marginLeft:"0.5rem"},children:"Restaurar"})]})]}):"Precio sugerido del producto (puede ser modificado)"})]})]}),p.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:p.jsxs("strong",{style:{color:"white"},children:["Subtotal: $",((parseFloat($.cantidad)||0)*(parseFloat($.precio)||0)).toFixed(2)]})})]},ae)),O.packs.length>0&&p.jsxs("div",{style:{marginTop:"2rem"},children:[p.jsx("h3",{style:{color:"#2d3748",marginBottom:"1rem",fontSize:"1.1rem"},children:"Packs de 6 Variedades"}),O.packs.map(($,ae)=>p.jsxs("div",{style:{border:"1px solid #38a169",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"#38a169",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Pack ",ae+1]}),p.jsx("button",{type:"button",onClick:()=>P(ae),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Selecciona hasta 6 Kombuchas (puedes repetir sabores) *"}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",maxHeight:"300px",overflowY:"auto",padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:j.map(oe=>{const be=($.kombuchas||[]).filter(Ie=>Ie===oe.id).length;return p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease"},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",flex:1},children:[p.jsx("span",{style:{fontSize:"0.9rem",color:"white",fontWeight:"500"},children:oe.nombre}),p.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:["$",oe.precio?.toFixed(2)||"0.00"," por unidad"]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",padding:"0.5rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[p.jsx("button",{type:"button",onClick:()=>{const De=[...$.kombuchas||[],oe.id];De.length<=6&&fe(ae,"kombuchas",De)},disabled:($.kombuchas?.length||0)>=6,style:{background:($.kombuchas?.length||0)>=6?"#718096":"#38a169",color:"white",border:"none",borderRadius:"4px",width:"28px",height:"28px",cursor:($.kombuchas?.length||0)>=6?"not-allowed":"pointer",fontSize:"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:"Agregar una unidad",children:"+"}),p.jsx("span",{style:{color:"white",fontWeight:"bold",fontSize:"1.1rem",minWidth:"30px",textAlign:"center",padding:"0.25rem 0.5rem",backgroundColor:"rgba(255, 255, 255, 0.15)",borderRadius:"4px"},children:be}),p.jsx("button",{type:"button",onClick:()=>{const Ie=$.kombuchas||[],De=Ie.indexOf(oe.id);if(De>-1){const Ne=[...Ie];Ne.splice(De,1),fe(ae,"kombuchas",Ne)}},disabled:be===0,style:{background:be===0?"#718096":"#f56565",color:"white",border:"none",borderRadius:"4px",width:"28px",height:"28px",cursor:be===0?"not-allowed":"pointer",fontSize:"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:"Quitar una unidad",children:"-"})]})]},oe.id)})}),p.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[p.jsxs("span",{style:{color:"white",fontSize:"0.9rem",fontWeight:"500"},children:[$.kombuchas?.length||0,"/6 kombuchas seleccionadas"]}),$.kombuchas?.length===6&&p.jsx("span",{style:{color:"#90ee90",fontWeight:"bold",fontSize:"0.85rem"},children:" Pack completo"})]}),$.kombuchas&&$.kombuchas.length>0&&p.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.8)"},children:(()=>{const oe={};return $.kombuchas.forEach(be=>{oe[be]=(oe[be]||0)+1}),Object.entries(oe).map(([be,Ie])=>p.jsxs("span",{style:{display:"inline-block",margin:"0.1rem",padding:"0.2rem 0.4rem",backgroundColor:"rgba(56, 161, 105, 0.3)",borderRadius:"4px",fontSize:"0.75rem",border:"1px solid rgba(56, 161, 105, 0.5)"},children:[Se(be)," ",Ie]},be))})()})]})]}),p.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:[p.jsx("div",{style:{color:"white"},children:$.kombuchas?.length===6?p.jsxs("div",{children:[p.jsxs("strong",{children:["Pack completo de 6 variedades:",me()?p.jsxs("span",{style:{color:"#90ee90"},children:["$",(Re()*6).toFixed(2)]}):p.jsxs("span",{children:["$",250]})]}),me()?p.jsxs("div",{children:[p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.7rem",color:"#90ee90"},children:["Precio mayorista ($",Re().toFixed(2),"  6)"]}),p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.7rem",color:"#cbd5e0"},children:["Precio regular: $",250]})]}):p.jsxs("div",{children:[p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.7rem",color:"#90ee90"},children:["Con precio mayorista: $",(Re()*6).toFixed(2)]})]})]}):$.kombuchas?.length>0?p.jsxs("div",{children:[p.jsxs("strong",{children:["Pack parcial (",$.kombuchas.length," kombuchas): $",$.precio.toFixed(2)]}),me()&&p.jsxs("div",{children:[p.jsx("br",{}),p.jsx("small",{style:{fontSize:"0.7rem",color:"#90ee90"},children:"Precio mayorista aplicado"})]}),p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.8rem"},children:["Selecciona 6 para obtener el precio pack de $",250,me()&&` o ${(Re()*6).toFixed(2)} con mayorista`]})]}):p.jsx("strong",{children:"Selecciona kombuchas para el pack"})}),$.kombuchas&&$.kombuchas.length>0&&p.jsx("div",{style:{marginTop:"0.75rem",textAlign:"center"},children:p.jsx("button",{type:"button",onClick:()=>{const oe={...$};$.kombuchas.length===6?oe.precio=250:oe.precio=$.kombuchas.reduce((be,Ie)=>be+(gt(Ie)||0),0),U(be=>{const Ie=[...be.packs];Ie[ae]=oe;const De=be.items.reduce((We,bt)=>{const mi=parseFloat(bt.cantidad)||0,ys=parseFloat(bt.precio)||0;return We+mi*ys},0),Ne=Ie.reduce((We,bt)=>We+bt.precio,0),Ve=De+Ne;return{...be,packs:Ie,total:Ve.toFixed(2)}})},style:{background:"none",border:"1px solid #90ee90",color:"#90ee90",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.2s ease"},onMouseOver:oe=>{oe.target.style.background="#90ee90",oe.target.style.color="white"},onMouseOut:oe=>{oe.target.style.background="none",oe.target.style.color="#90ee90"},title:"Restaurar precio original del pack",children:"Restaurar pack"})})]})]},ae))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"total",children:"Total *"}),p.jsx("input",{type:"number",id:"total",name:"total",value:O.total,readOnly:!0,style:{backgroundColor:"#f7fafc",color:"#4a5568",cursor:"not-allowed",fontSize:"1.2rem",fontWeight:"bold"}}),p.jsx("small",{style:{color:"white",fontSize:"0.8rem"},children:"Calculado automticamente (suma de todos los productos)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"estado",children:"Estado *"}),p.jsxs("select",{id:"estado",name:"estado",value:O.estado,onChange:K,required:!0,children:[p.jsx("option",{value:"pendiente",children:"Pendiente"}),p.jsx("option",{value:"cancelada",children:"Cancelada"}),p.jsx("option",{value:"pagoPendiente",children:"Pago Pendiente"}),p.jsx("option",{value:"completada",children:"Completada"})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:Pe,disabled:T,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:T,children:T?"Guardando...":u?"Actualizar":"Guardar"})]})]})]})})]})},xH=()=>{const n=Aa(),[e,t]=D.useState([]),[i,s]=D.useState([]),[a,l]=D.useState(!0),[u,h]=D.useState(!1),[f,y]=D.useState(null),[v,x]=D.useState("nombre"),[T,C]=D.useState("asc"),[k,R]=D.useState(!1),[j,q]=D.useState(""),[G,X]=D.useState([]),[Y,J]=D.useState(""),[F,I]=D.useState(!1),[O,U]=D.useState(null),[H,B]=D.useState({nombre:"",notas:"",clientes:[]}),z=async()=>{try{l(!0);const me=(await Pn(sn(At,"rutas"))).docs.map(Re=>({id:Re.id,...Re.data()}));t(me)}catch(ee){console.error("Error fetching routes:",ee),q("Error al cargar las rutas")}finally{l(!1)}},je=async()=>{try{const me=(await Pn(sn(At,"clientes"))).docs.map(Re=>({id:Re.id,...Re.data()}));s(me)}catch(ee){console.error("Error fetching clients:",ee)}};D.useEffect(()=>{z(),je()},[]),D.useEffect(()=>{n.state?.selectedCliente&&n.state?.showForm&&(X([n.state.selectedCliente.id]),B(ee=>({...ee,nombre:`Ruta para ${n.state.selectedCliente.nombre}`})),h(!0))},[n.state]);const _e=ee=>{x(ee),C(T==="asc"?"desc":"asc")},K=ee=>v===ee?T==="asc"?"":"":"",se=ee=>{const{name:me,value:Re}=ee.target;B(et=>({...et,[me]:Re}))},Ee=ee=>{X(me=>me.includes(ee)?me.filter(Re=>Re!==ee):[...me,ee])},Le=i.filter(ee=>ee.nombre.toLowerCase().includes(Y.toLowerCase())||ee.direccion.toLowerCase().includes(Y.toLowerCase())),P=async ee=>{if(ee.preventDefault(),!H.nombre.trim()){q("El nombre de la ruta es requerido");return}if(G.length===0){q("Debe seleccionar al menos un cliente");return}R(!0),q("");try{const me={...H,clientes:G,fechaCreacion:Ps()};f?await Mf(wa(At,"rutas",f.id),me):await jc(sn(At,"rutas"),me),h(!1),y(null),Pe(),z()}catch(me){console.error("Error saving route:",me),q("Error al guardar la ruta")}finally{R(!1)}},fe=ee=>{y(ee),B({nombre:ee.nombre,notas:ee.notas||"",clientes:ee.clientes||[]}),X(ee.clientes||[]),h(!0)},Ae=async ee=>{if(window.confirm("Est seguro de que desea eliminar esta ruta?"))try{await Ug(wa(At,"rutas",ee)),z()}catch(me){console.error("Error deleting route:",me),q("Error al eliminar la ruta")}},ge=()=>{h(!1),y(null),Pe()},ke=ee=>{U(ee),I(!0)},$e=()=>{I(!1),U(null)},Pe=()=>{B({nombre:"",notas:"",clientes:[]}),X([]),J(""),q("")},Ge=ee=>{const me=i.find(Re=>Re.id===ee);return me?me.nombre:"Cliente no encontrado"},Se=ee=>{const me=i.find(Re=>Re.id===ee);return me?me.direccion:"Direccin no encontrada"},Et=()=>{const ee=new Set;return e.forEach(me=>{me.clientes&&me.clientes.forEach(Re=>ee.add(Re))}),i.filter(me=>!ee.has(me.id))},gt=[...e].sort((ee,me)=>{let Re=ee[v]||"",et=me[v]||"";return typeof Re=="string"&&(Re=Re.toLowerCase(),et=et.toLowerCase()),T==="asc"?Re>et?1:-1:Re<et?1:-1});return a?p.jsx("div",{className:"loading",children:"Cargando rutas..."}):p.jsxs("div",{className:"ruta-page",children:[p.jsxs("div",{className:"ruta-header",children:[p.jsx("h1",{children:"Gestin de Rutas de Entrega"}),p.jsx("button",{className:"add-ruta-btn",onClick:()=>h(!0),children:"Crear Nueva Ruta"})]}),j&&p.jsx("div",{className:"error-message",children:j}),u&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:f?"Editar Ruta":"Crear Nueva Ruta"}),p.jsxs("form",{onSubmit:P,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nombre",children:"Nombre de la Ruta *"}),p.jsx("input",{type:"text",id:"nombre",name:"nombre",value:H.nombre,onChange:se,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"notas",children:"Notas"}),p.jsx("textarea",{id:"notas",name:"notas",value:H.notas,onChange:se,rows:"3"})]}),p.jsxs("div",{className:"clientes-selection",children:[p.jsx("h3",{children:"Seleccionar Clientes"}),p.jsx("div",{className:"search-container",children:p.jsx("input",{type:"text",placeholder:"Buscar clientes...",value:Y,onChange:ee=>J(ee.target.value),className:"search-input"})}),p.jsx("div",{className:"clientes-list",children:Le.map(ee=>p.jsxs("div",{className:`cliente-item ${G.includes(ee.id)?"selected":""}`,onClick:()=>Ee(ee.id),children:[p.jsx("input",{type:"checkbox",checked:G.includes(ee.id),onChange:me=>{me.stopPropagation(),Ee(ee.id)},onClick:me=>me.stopPropagation()}),p.jsxs("div",{className:"cliente-info",children:[p.jsx("strong",{children:ee.nombre}),p.jsx("span",{children:ee.direccion})]})]},ee.id))}),G.length>0&&p.jsxs("div",{className:"selected-clients",children:[p.jsxs("h4",{children:["Clientes Seleccionados (",G.length,")"]}),p.jsx("div",{className:"selected-list",children:G.map((ee,me)=>p.jsxs("div",{className:"ordered-client",children:[p.jsx("span",{className:"order-number",children:me+1}),p.jsx("span",{children:Ge(ee)}),p.jsx("span",{className:"address",children:Se(ee)})]},ee))})]}),G.length>0&&p.jsxs("div",{className:"map-section",children:[p.jsx("h4",{children:"Vista del Mapa"}),(()=>{const ee=G.map(me=>i.find(et=>et.id===me)).filter(me=>me&&me.direccionCoords);return ee.length>0?p.jsx("div",{className:"map-container",children:p.jsx(tv,{clientes:ee})}):p.jsxs("div",{className:"no-coordinates-message",children:[p.jsx("p",{children:"Los clientes seleccionados no tienen coordenadas de ubicacin configuradas."}),p.jsx("p",{children:"Para ver la ubicacin en el mapa, asegrate de que los clientes tengan su direccin configurada correctamente."})]})})()]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:ge,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:k,children:k?"Guardando...":f?"Actualizar":"Crear"})]})]})]})}),F&&O&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"route-map-modal",children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:["Mapa de la Ruta: ",O.nombre]}),p.jsx("button",{className:"close-btn",onClick:$e,children:""})]}),p.jsx("div",{className:"map-view",children:(()=>{const ee=O.clientes.map(me=>i.find(et=>et.id===me)).filter(me=>me&&me.direccionCoords);return ee.length>0?p.jsx("div",{className:"route-map-container",children:p.jsx(tv,{clientes:ee})}):p.jsxs("div",{className:"no-coordinates-message",children:[p.jsx("p",{children:"Esta ruta no tiene clientes con coordenadas de ubicacin configuradas."}),p.jsx("p",{children:"Para ver la ubicacin en el mapa, asegrate de que los clientes tengan su direccin configurada correctamente."})]})})()})]})}),p.jsxs("div",{className:"ruta-content",children:[p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"rutas-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{onClick:()=>_e("nombre"),children:["Nombre ",K("nombre")]}),p.jsx("th",{children:"Clientes"}),p.jsxs("th",{onClick:()=>_e("fechaCreacion"),children:["Fecha Creacin ",K("fechaCreacion")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:gt.map(ee=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsxs("div",{className:"ruta-name",children:[p.jsx("strong",{children:ee.nombre}),ee.notas&&p.jsx("span",{className:"description",children:ee.notas})]})}),p.jsxs("td",{children:[p.jsxs("div",{className:"clientes-count",children:[ee.clientes?.length||0," clientes"]}),ee.clientes&&ee.clientes.length>0&&p.jsxs("div",{className:"route-preview",children:[ee.clientes.slice(0,3).map((me,Re)=>p.jsxs("span",{className:"route-step",children:[Re+1,". ",Ge(me)]},me)),ee.clientes.length>3&&p.jsxs("span",{className:"more-clients",children:["+",ee.clientes.length-3," ms"]})]})]}),p.jsx("td",{children:ee.fechaCreacion}),p.jsx("td",{children:p.jsxs("div",{className:"actions",children:[p.jsx("button",{className:"view-btn",onClick:()=>ke(ee),children:"Ver Mapa"}),p.jsx("button",{className:"edit-btn",onClick:()=>fe(ee),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>Ae(ee.id),children:"Eliminar"})]})})]},ee.id))})]})}),gt.length===0&&p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No hay rutas creadas. Crea tu primera ruta para comenzar."})})]}),p.jsxs("div",{className:"unassigned-clients-section",children:[p.jsx("h2",{children:"Clientes No Asignados"}),p.jsx("div",{className:"unassigned-clients-list",children:Et().map(ee=>p.jsx("div",{className:"unassigned-client-item",children:p.jsxs("div",{className:"cliente-info",children:[p.jsx("strong",{children:ee.nombre}),p.jsx("span",{children:ee.direccion})]})},ee.id))}),Et().length===0&&p.jsx("div",{className:"no-unassigned-clients",children:p.jsx("p",{children:"Todos los clientes estn asignados a una ruta."})})]})]})},EH=({notifications:n,sales:e,onDateClick:t,onReminderClick:i,onSaleClick:s,onDateClickForSale:a})=>{const[l,u]=D.useState(new Date),[h,f]=D.useState([]),[y,v]=D.useState({}),[x,T]=D.useState({});D.useEffect(()=>{const I=l.getFullYear(),O=l.getMonth(),U=new Date(I,O,1),H=new Date(I,O+1,0),B=new Date(U);B.setDate(B.getDate()-U.getDay());const z=[],je=new Date(B);for(;je<=H||z.length<42;)z.push(new Date(je)),je.setDate(je.getDate()+1);f(z)},[l]),D.useEffect(()=>{const I={};n.filter(U=>U.status==="pending").forEach(U=>{const H=U.reminderDate;I[H]||(I[H]=[]),I[H].push(U)}),v(I)},[n]),D.useEffect(()=>{const I={};e&&e.length>0&&e.forEach(O=>{const U=O.fecha?O.fecha.split("T")[0]:null;U&&(I[U]||(I[U]=[]),I[U].push(O))}),T(I)},[e]);const C=I=>{u(O=>{const U=new Date(O);return U.setMonth(U.getMonth()+I),U})},k=I=>I.toLocaleDateString("es-ES",{month:"long",year:"numeric",timeZone:"America/Mexico_City"}),R=I=>{const O=new Date;return I.toDateString()===O.toDateString()},j=I=>I.getMonth()===l.getMonth(),q=I=>I.toISOString().split("T")[0],G=I=>{switch(Np(I)){case"high":return"#e74c3c";case"medium":return"#f39c12";case"low":return"#27ae60";default:return"#95a5a6"}},X=I=>{const O=q(I),U=y[O]||[];t(I,U)},Y=(I,O)=>{O.stopPropagation(),a&&a(I)},J=I=>{i(I)},F=I=>{s(I)};return p.jsxs("div",{className:"reminder-calendar",children:[p.jsxs("div",{className:"calendar-header",children:[p.jsx("button",{className:"calendar-nav-btn",onClick:()=>C(-1),children:""}),p.jsx("h3",{className:"calendar-title",children:k(l)}),p.jsx("button",{className:"calendar-nav-btn",onClick:()=>C(1),children:""})]}),p.jsxs("div",{className:"calendar-grid",children:[["Dom","Lun","Mar","Mi","Jue","Vie","Sb"].map(I=>p.jsx("div",{className:"calendar-day-header",children:I},I)),h.map((I,O)=>{const U=q(I),H=y[U]||[],B=x[U]||[],z=R(I),je=j(I);return p.jsxs("div",{className:`calendar-day ${z?"today":""} ${je?"":"other-month"}`,onClick:()=>X(I),children:[p.jsx("div",{className:"day-number",children:I.getDate()}),p.jsx("div",{className:"new-sale-button",children:p.jsx("button",{className:"new-sale-btn",onClick:_e=>Y(I,_e),title:"Registrar nueva venta",children:"+"})}),H.length>0&&p.jsxs("div",{className:"reminders-indicator",children:[H.map((_e,K)=>p.jsxs("div",{className:"reminder-item",children:[p.jsx("div",{className:"reminder-dot",style:{backgroundColor:G(_e)},onClick:se=>{se.stopPropagation(),J(_e)},title:`${_e.customerName} - ${_e.isDue?`${_e.daysOverdue} das vencido`:`${_e.daysUntilDue} das restantes`}`}),p.jsx("span",{className:"customer-name-tooltip",onClick:se=>{se.stopPropagation(),J(_e)},children:_e.customerName})]},_e.notificationId)),H.length>3&&p.jsxs("div",{className:"more-reminders",children:["+",H.length-3]})]}),B.length>0&&p.jsxs("div",{className:"sales-indicator",children:[B.map((_e,K)=>p.jsxs("div",{className:"sale-item",children:[p.jsx("div",{className:"sale-dot",style:{backgroundColor:(()=>{const se=_e.estado==="completada"||_e.estado==="completed"||_e.estado==="Completado";return console.log(`Sale ${_e.id} estado: "${_e.estado}", isCompleted: ${se}`),se?"#007bff":"#6f42c1"})()},onClick:se=>{se.stopPropagation(),F(_e)},title:`Venta ${_e.id} - ${_e.estado||"pendiente"} - $${parseFloat(_e.total||0).toFixed(2)}`}),p.jsxs("span",{className:"sale-info-tooltip",children:["Venta $",parseFloat(_e.total||0).toFixed(2)]})]},_e.id)),B.length>3&&p.jsxs("div",{className:"more-sales",children:["+",B.length-3]})]})]},O)})]}),p.jsxs("div",{className:"calendar-legend",children:[p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot high-priority"}),p.jsx("span",{children:"Alta prioridad"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot medium-priority"}),p.jsx("span",{children:"Media prioridad"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot low-priority"}),p.jsx("span",{children:"Baja prioridad"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot completed-sale"}),p.jsx("span",{children:"Venta completada"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot pending-sale"}),p.jsx("span",{children:"Venta pendiente"})]})]})]})},wH=()=>{const[n,e]=D.useState([]),[t,i]=D.useState(!0),[s,a]=D.useState("all"),[l,u]=D.useState({}),[h,f]=D.useState(null),[y,v]=D.useState(!1),[x,T]=D.useState(""),[C,k]=D.useState(!0),[R,j]=D.useState(null),[q,G]=D.useState([]),[X,Y]=D.useState([]),[J,F]=D.useState([]),[I,O]=D.useState([]),[U,H]=D.useState(!1),[B,z]=D.useState(null),[je,_e]=D.useState(!1),[K,se]=D.useState([]),[Ee,Le]=D.useState(!1),[P,fe]=D.useState({fecha:Ps(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),Ae=async()=>{try{i(!0);const[pe,ze,$,ae]=await Promise.all([Pn(sn(At,"ventas")),Pn(sn(At,"clientes")),Pn(sn(At,"kombuchas")),Pn(sn(At,"notifications"))]),oe=pe.docs.map(We=>({id:We.id,...We.data()})),be=ze.docs.map(We=>({id:We.id,...We.data()})),Ie=$.docs.map(We=>({id:We.id,...We.data()})),De={};ae.docs.forEach(We=>{const bt=We.data();De[bt.notificationId]=bt.status});const Ve=s0(oe,be).map(We=>({...We,status:De[We.notificationId]||"pending"}));e(Ve),u(og(Ve)),F(oe),O(be),se(Ie)}catch(pe){console.error("Error fetching notifications:",pe)}finally{i(!1)}};D.useEffect(()=>{Ae()},[]),D.useEffect(()=>{const pe=ze=>{ze.key==="Escape"&&(y&&(v(!1),f(null),T("")),U&&(H(!1),z(null)),je&&Xi())};return(y||U||je)&&document.addEventListener("keydown",pe),()=>{document.removeEventListener("keydown",pe)}},[y,U,je]);const ge=async(pe,ze,$="")=>{try{const ae={notificationId:pe,status:ze,notes:$,updatedAt:new Date().toISOString(),updatedBy:"user"},be=(await Pn(sn(At,"notifications"))).docs.find(Ie=>Ie.data().notificationId===pe);be?await Mf(wa(At,"notifications",be.id),ae):await jc(sn(At,"notifications"),ae),e(Ie=>Ie.map(De=>De.notificationId===pe?{...De,status:ze,notes:$}:De)),u(og(n))}catch(ae){console.error("Error saving notification status:",ae)}},ke=pe=>{f(pe),T(""),v(!0)},$e=async()=>{h&&(await ge(h.notificationId,"contacted",x),v(!1),f(null),T(""))},Pe=async pe=>{await ge(pe,"dismissed")},Ge=async pe=>{await ge(pe,"pending")},Se=(pe,ze)=>{j(pe),G(ze)},Et=pe=>{f(pe),T(""),v(!0)},gt=pe=>{z(pe),H(!0)},ee=pe=>{const ze=I.find($=>$.id===pe);return ze?ze.nombre:"Cliente no encontrado"},me=pe=>{const{name:ze,value:$}=pe.target;fe(ae=>({...ae,[ze]:$}))},Re=(pe,ze,$)=>{fe(ae=>{const oe=[...ae.items];if(oe[pe]={...oe[pe],[ze]:$},ze==="kombuchaId"&&$){const Ie=K.find(De=>De.id===$);Ie&&Ie.precio&&(oe[pe].precio=Ie.precio.toString())}const be=oe.reduce((Ie,De)=>{const Ne=(parseFloat(De.cantidad)||0)*(parseFloat(De.precio)||0);return Ie+Ne},0);return{...ae,items:oe,total:be.toFixed(2)}})},et=()=>{fe(pe=>({...pe,items:[...pe.items,{kombuchaId:"",cantidad:1,precio:""}]}))},it=pe=>{fe(ze=>({...ze,items:ze.items.filter(($,ae)=>ae!==pe)}))},mn=pe=>{const ze=K.find($=>$.id===pe);return ze?ze.precio:null},Ht=pe=>{if(!pe.kombuchaId)return!1;const ze=mn(pe.kombuchaId);return ze&&parseFloat(pe.precio)!==parseFloat(ze)},zi=async pe=>{pe.preventDefault(),Le(!0);try{const ze={...P,fecha:P.fecha,total:parseFloat(P.total),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await jc(sn(At,"ventas"),ze),fe({fecha:Ps(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),_e(!1),await Ae()}catch(ze){console.error("Error creating sale:",ze)}finally{Le(!1)}},Xi=()=>{fe({fecha:Ps(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),_e(!1)},gs=pe=>{j(pe);const ze=pe.toISOString().split("T")[0],$=n.filter(ae=>ae.status==="pending"&&ae.reminderDate===ze);G($),fe(ae=>({...ae,fecha:ze})),_e(!0)},Bi=()=>{switch(s){case"pending":return n.filter(pe=>pe.status==="pending");case"overdue":return n.filter(pe=>pe.status==="pending"&&pe.isDue);case"upcoming":return n.filter(pe=>pe.status==="pending"&&!pe.isDue);case"contacted":return n.filter(pe=>pe.status==="contacted");case"dismissed":return n.filter(pe=>pe.status==="dismissed");default:return n}},Ra=pe=>`priority-${Np(pe)}`,Vs=pe=>{switch(pe){case"pending":return"";case"contacted":return"";case"dismissed":return"";default:return""}};if(t)return p.jsx("div",{className:"recordatorios-page",children:p.jsx("div",{className:"loading",children:"Cargando recordatorios..."})});const Vn=Bi();return p.jsxs("div",{className:"recordatorios-page",children:[p.jsxs("div",{className:"recordatorios-header",children:[p.jsx("h1",{children:"Recordatorios de Clientes"}),p.jsxs("div",{className:"stats-summary",children:[p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-number",children:l.pending}),p.jsx("span",{className:"stat-label",children:"Pendientes"})]}),p.jsxs("div",{className:"stat-item overdue",children:[p.jsx("span",{className:"stat-number",children:l.overdue}),p.jsx("span",{className:"stat-label",children:"Vencidos"})]}),p.jsxs("div",{className:"stat-item upcoming",children:[p.jsx("span",{className:"stat-number",children:l.upcoming}),p.jsx("span",{className:"stat-label",children:"Prximos"})]})]})]}),p.jsxs("div",{className:"view-controls",children:[p.jsxs("div",{className:"view-toggle",children:[p.jsx("button",{className:`view-btn ${C?"active":""}`,onClick:()=>k(!0),children:" Vista Calendario"}),p.jsx("button",{className:`view-btn ${C?"":"active"}`,onClick:()=>k(!1),children:" Lista recordatorios"})]}),R&&p.jsxs("div",{className:"selected-date-info",children:[p.jsxs("span",{children:[da(R.toISOString().split("T")[0])," - Fecha seleccionada"]}),p.jsx("button",{className:"clear-date-btn",onClick:()=>{j(null),G([])},children:" Limpiar"})]})]}),C&&p.jsx(EH,{notifications:n,sales:J,onDateClick:Se,onReminderClick:Et,onSaleClick:gt,onDateClickForSale:gs}),p.jsxs("div",{className:"filter-controls",children:[p.jsxs("button",{className:`filter-btn ${s==="all"?"active":""}`,onClick:()=>a("all"),children:["Todos (",l.total,")"]}),p.jsxs("button",{className:`filter-btn ${s==="pending"?"active":""}`,onClick:()=>a("pending"),children:["Pendientes (",l.pending,")"]}),p.jsxs("button",{className:`filter-btn ${s==="overdue"?"active":""}`,onClick:()=>a("overdue"),children:["Vencidos (",l.overdue,")"]}),p.jsxs("button",{className:`filter-btn ${s==="upcoming"?"active":""}`,onClick:()=>a("upcoming"),children:["Prximos (",l.upcoming,")"]}),p.jsxs("button",{className:`filter-btn ${s==="contacted"?"active":""}`,onClick:()=>a("contacted"),children:["Contactados (",l.contacted,")"]}),p.jsxs("button",{className:`filter-btn ${s==="dismissed"?"active":""}`,onClick:()=>a("dismissed"),children:["Descartados (",l.dismissed,")"]})]}),p.jsx("div",{className:"notifications-content",children:Vn.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No hay recordatorios para mostrar"})}):p.jsx("div",{className:"notifications-grid",children:Vn.map(pe=>p.jsxs("div",{className:`notification-card ${Ra(pe)} ${pe.status}`,children:[p.jsxs("div",{className:"notification-header",children:[p.jsxs("div",{className:"customer-info",children:[p.jsx("h3",{children:pe.customerName}),p.jsxs("div",{className:"status-badge",children:[Vs(pe.status),pe.status==="pending"&&pe.isDue?"Vencido":pe.status==="pending"?"Pendiente":pe.status==="contacted"?"Contactado":"Descartado"]})]}),p.jsx("div",{className:"priority-indicator",children:Np(pe)==="high"?"":Np(pe)==="medium"?"":""})]}),p.jsxs("div",{className:"notification-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"ltima compra:"}),p.jsx("span",{className:"value",children:da(pe.lastSaleDate)})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Kombuchas:"}),p.jsx("span",{className:"value text-center",children:pe.totalKombuchas})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Recordatorio:"}),p.jsx("span",{className:"value",children:da(pe.reminderDate)})]}),pe.isDue&&p.jsxs("div",{className:"detail-row overdue",children:[p.jsx("span",{className:"label",children:"Das de retraso:"}),p.jsx("span",{className:"value",children:pe.daysOverdue})]}),!pe.isDue&&p.jsxs("div",{className:"detail-row upcoming",children:[p.jsx("span",{className:"label",children:"Das restantes:"}),p.jsx("span",{className:"value",children:pe.daysUntilDue})]})]}),p.jsx("div",{className:"notification-message",children:GR(pe)}),pe.notes&&p.jsxs("div",{className:"notification-notes",children:[p.jsx("strong",{children:"Notas:"})," ",pe.notes]}),p.jsxs("div",{className:"notification-actions",children:[pe.status==="pending"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"action-btn contact-btn",onClick:()=>ke(pe),children:" Contactar"}),p.jsx("button",{className:"action-btn dismiss-btn",onClick:()=>Pe(pe.notificationId),children:" Descartar"})]}),pe.status==="contacted"&&p.jsx("button",{className:"action-btn reset-btn",onClick:()=>Ge(pe.notificationId),children:" Reactivar"}),pe.status==="dismissed"&&p.jsx("button",{className:"action-btn reset-btn",onClick:()=>Ge(pe.notificationId),children:" Reactivar"})]})]},pe.notificationId))})}),y&&h&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h2",{children:"Contactar Cliente"}),p.jsxs("div",{className:"customer-summary",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Cliente:"})," ",h.customerName]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Telfono:"})," ",h.customerPhone||"No disponible"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"ltima compra:"})," ",da(h.lastSaleDate)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kombuchas compradas:"})," ",h.totalKombuchas]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"contactNotes",children:"Notas del contacto:"}),p.jsx("textarea",{id:"contactNotes",value:x,onChange:pe=>T(pe.target.value),placeholder:"Describe el resultado del contacto...",rows:"4"})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"cancel-btn",onClick:()=>v(!1),children:"Cancelar"}),p.jsx("button",{className:"submit-btn",onClick:$e,children:"Marcar como Contactado"})]})]})}),U&&B&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h2",{children:"Detalles de Venta"}),p.jsxs("div",{className:"sale-summary",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"ID de Venta:"})," ",B.id]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Fecha:"})," ",da(B.fecha)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Total:"})," $",parseFloat(B.total||0).toFixed(2)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Estado:"})," ",B.estado||"Pendiente"]}),B.cliente&&p.jsxs("p",{children:[p.jsx("strong",{children:"Cliente:"})," ",ee(B.cliente)]})]}),B.items&&B.items.length>0&&p.jsxs("div",{className:"sale-items",children:[p.jsx("h3",{children:"Productos Vendidos"}),p.jsx("div",{className:"items-list",children:B.items.map((pe,ze)=>p.jsxs("div",{className:"item-row",children:[p.jsxs("span",{className:"item-name",children:["Producto ",ze+1]}),p.jsxs("span",{className:"item-quantity",children:["Cantidad: ",pe.cantidad]}),p.jsxs("span",{className:"item-price",children:["Precio: $",parseFloat(pe.precio||0).toFixed(2)]})]},ze))})]}),p.jsx("div",{className:"modal-actions",children:p.jsx("button",{className:"cancel-btn",onClick:()=>H(!1),children:"Cerrar"})})]})}),je&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content sale-form-modal",children:[p.jsxs("h2",{children:["Nueva Venta - ",da(P.fecha)]}),p.jsxs("form",{onSubmit:zi,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"fecha",children:"Fecha *"}),p.jsx("input",{type:"date",id:"fecha",name:"fecha",value:P.fecha,onChange:me,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"cliente",children:"Cliente *"}),p.jsxs("select",{id:"cliente",name:"cliente",value:P.cliente,onChange:me,required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un cliente"}),I.map(pe=>p.jsx("option",{value:pe.id,children:pe.nombre},pe.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Productos de la Venta *"}),p.jsx("div",{style:{marginBottom:"1rem"},children:p.jsx("button",{type:"button",onClick:et,style:{background:"#4299e1",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Agregar Producto"})}),P.items.map((pe,ze)=>p.jsxs("div",{style:{border:"1px solid #667eea",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"rgb(102, 126, 234)",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Producto ",ze+1]}),P.items.length>1&&p.jsx("button",{type:"button",onClick:()=>it(ze),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Kombucha *"}),p.jsxs("select",{value:pe.kombuchaId,onChange:$=>Re(ze,"kombuchaId",$.target.value),style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0,children:[p.jsx("option",{value:"",children:"Selecciona una kombucha"}),K.map($=>p.jsxs("option",{value:$.id,children:[$.nombre," - $",$.precio?.toFixed(2)||"0.00"]},$.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Cantidad *"}),p.jsx("input",{type:"number",value:pe.cantidad,onChange:$=>Re(ze,"cantidad",$.target.value),min:"1",style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Precio *"}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:pe.precio,onChange:$=>Re(ze,"precio",$.target.value),style:{width:"100%",padding:"0.5rem",border:Ht(pe)?"2px solid #f56565":"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#4a5568"},placeholder:"0.00"}),p.jsx("small",{style:{color:"white",fontSize:"0.7rem"},children:pe.kombuchaId&&mn(pe.kombuchaId)?p.jsxs(p.Fragment,{children:["Precio original: $",mn(pe.kombuchaId).toFixed(2),Ht(pe)&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#f56565",fontWeight:"bold"},children:[" "," Modificado"]}),p.jsx("button",{type:"button",onClick:()=>Re(ze,"precio",mn(pe.kombuchaId)),style:{background:"none",border:"none",color:"#4299e1",textDecoration:"underline",cursor:"pointer",fontSize:"0.7rem",marginLeft:"0.5rem"},children:"Restaurar"})]})]}):"Precio sugerido del producto (puede ser modificado)"})]})]}),p.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:p.jsxs("strong",{style:{color:"white"},children:["Subtotal: $",((parseFloat(pe.cantidad)||0)*(parseFloat(pe.precio)||0)).toFixed(2)]})})]},ze))]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"total",children:"Total *"}),p.jsx("input",{type:"number",id:"total",name:"total",value:P.total,readOnly:!0,style:{backgroundColor:"#f7fafc",color:"#4a5568",cursor:"not-allowed",fontSize:"1.2rem",fontWeight:"bold"}}),p.jsx("small",{style:{color:"#666",fontSize:"0.8rem"},children:"Calculado automticamente (suma de todos los productos)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"estado",children:"Estado *"}),p.jsxs("select",{id:"estado",name:"estado",value:P.estado,onChange:me,required:!0,children:[p.jsx("option",{value:"pendiente",children:"Pendiente"}),p.jsx("option",{value:"completada",children:"Completada"})]})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:Xi,disabled:Ee,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:Ee,children:Ee?"Guardando...":"Guardar Venta"})]})]})]})})]})},TH=()=>{const[n,e]=D.useState(""),[t,i]=D.useState(""),[s,a]=D.useState(""),[l,u]=D.useState(!1),h=ch(),{user:f,loading:y}=N0();if(D.useEffect(()=>{!y&&f&&h("/KombuchaApp")},[f,y,h]),y)return p.jsx("div",{className:"login-container",children:p.jsx("div",{className:"login-card",children:p.jsxs("div",{className:"login-header",children:[p.jsx("h1",{children:"Kombucha App"}),p.jsx("p",{children:"Cargando..."})]})})});if(f)return null;const v=async x=>{x.preventDefault(),a(""),u(!0);try{await M6(rg,n,t),h("/KombuchaApp")}catch(T){switch(console.error("Login error:",T),T.code){case"auth/user-not-found":a("Usuario no encontrado. Contacte al administrador.");break;case"auth/wrong-password":a("Contrasea incorrecta.");break;case"auth/invalid-email":a("Email invlido.");break;case"auth/too-many-requests":a("Demasiados intentos fallidos. Intente ms tarde.");break;default:a("Error al iniciar sesin. Intente nuevamente.")}}finally{u(!1)}};return p.jsx("div",{className:"login-container",children:p.jsxs("div",{className:"login-card",children:[p.jsxs("div",{className:"login-header",children:[p.jsx("h1",{children:"Kombucha App"}),p.jsx("p",{children:"Iniciar Sesin"})]}),p.jsxs("form",{onSubmit:v,className:"login-form",children:[s&&p.jsx("div",{className:"error-message",children:s}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:n,onChange:x=>e(x.target.value),required:!0,disabled:l,placeholder:"Ingrese su email"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Contrasea"}),p.jsx("input",{type:"password",id:"password",value:t,onChange:x=>i(x.target.value),required:!0,disabled:l,placeholder:"Ingrese su contrasea"})]}),p.jsx("button",{type:"submit",className:"login-button",disabled:l,children:l?"Iniciando sesin...":"Iniciar Sesin"})]}),p.jsxs("div",{className:"login-footer",children:[p.jsx("p",{children:"Esta es una aplicacin privada. Solo usuarios autorizados pueden acceder."}),p.jsx("p",{children:"Para solicitar acceso, contacte al administrador."})]})]})})},nv=D.forwardRef(({bsPrefix:n,bg:e="primary",pill:t=!1,text:i,className:s,as:a="span",...l},u)=>{const h=on(n,"badge");return p.jsx(a,{ref:u,...l,className:Bt(s,h,t&&"rounded-pill",i&&`text-${i}`,e&&`bg-${e}`)})});nv.displayName="Badge";const D0=D.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=on(e,"card-body"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));D0.displayName="CardBody";const Ek=D.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=on(e,"card-footer"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));Ek.displayName="CardFooter";const wk=D.forwardRef(({bsPrefix:n,className:e,as:t="div",...i},s)=>{const a=on(n,"card-header"),l=D.useMemo(()=>({cardHeaderBsPrefix:a}),[a]);return p.jsx(T0.Provider,{value:l,children:p.jsx(t,{ref:s,...i,className:Bt(e,a)})})});wk.displayName="CardHeader";const Tk=D.forwardRef(({bsPrefix:n,className:e,variant:t,as:i="img",...s},a)=>{const l=on(n,"card-img");return p.jsx(i,{ref:a,className:Bt(t?`${l}-${t}`:l,e),...s})});Tk.displayName="CardImg";const Sk=D.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=on(e,"card-img-overlay"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));Sk.displayName="CardImgOverlay";const Ak=D.forwardRef(({className:n,bsPrefix:e,as:t="a",...i},s)=>(e=on(e,"card-link"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));Ak.displayName="CardLink";const SH=k0("h6"),Ck=D.forwardRef(({className:n,bsPrefix:e,as:t=SH,...i},s)=>(e=on(e,"card-subtitle"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));Ck.displayName="CardSubtitle";const Rk=D.forwardRef(({className:n,bsPrefix:e,as:t="p",...i},s)=>(e=on(e,"card-text"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));Rk.displayName="CardText";const AH=k0("h5"),Ik=D.forwardRef(({className:n,bsPrefix:e,as:t=AH,...i},s)=>(e=on(e,"card-title"),p.jsx(t,{ref:s,className:Bt(n,e),...i})));Ik.displayName="CardTitle";const kk=D.forwardRef(({bsPrefix:n,className:e,bg:t,text:i,border:s,body:a=!1,children:l,as:u="div",...h},f)=>{const y=on(n,"card");return p.jsx(u,{ref:f,...h,className:Bt(e,y,t&&`bg-${t}`,i&&`text-${i}`,s&&`border-${s}`),children:a?p.jsx(D0,{children:l}):l})});kk.displayName="Card";const Ld=Object.assign(kk,{Img:Tk,Title:Ik,Subtitle:Ck,Body:D0,Link:Ak,Text:Rk,Header:wk,Footer:Ek,ImgOverlay:Sk}),Nk=D.forwardRef(({bsPrefix:n,className:e,striped:t,bordered:i,borderless:s,hover:a,size:l,variant:u,responsive:h,...f},y)=>{const v=on(n,"table"),x=Bt(e,v,u&&`${v}-${u}`,l&&`${v}-${l}`,t&&`${v}-${typeof t=="string"?`striped-${t}`:"striped"}`,i&&`${v}-bordered`,s&&`${v}-borderless`,a&&`${v}-hover`),T=p.jsx("table",{...f,className:x,ref:y});if(h){let C=`${v}-responsive`;return typeof h=="string"&&(C=`${C}-${h}`),p.jsx("div",{className:C,children:T})}return T});Nk.displayName="Table";const CH=()=>{const[n,e]=D.useState([]),[t,i]=D.useState(!0),[s,a]=D.useState("");return D.useEffect(()=>{(async()=>{try{i(!0);const u=sn(At,"users"),f=(await Pn(u)).docs.map(y=>({id:y.id,...y.data()}));e(f)}catch(u){console.error("Error fetching users:",u),a("Error al cargar usuarios")}finally{i(!1)}})()},[]),t?p.jsx("div",{className:"user-management-container",children:p.jsx(Ld,{children:p.jsx(Ld.Body,{children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"spinner-border",role:"status",children:p.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),p.jsx("p",{className:"mt-2",children:"Cargando usuarios..."})]})})})}):p.jsx("div",{className:"user-management-container",children:p.jsxs(Ld,{children:[p.jsxs(Ld.Header,{children:[p.jsx("h4",{children:"Gestin de Usuarios"}),p.jsx("p",{className:"text-muted mb-0",children:"Vista de usuarios registrados en la aplicacin"})]}),p.jsxs(Ld.Body,{children:[s&&p.jsx("div",{className:"alert alert-warning",role:"alert",children:s}),p.jsx("div",{className:"admin-notice",children:p.jsxs("div",{className:"alert alert-info",role:"alert",children:[p.jsx("strong",{children:"Nota para Administradores:"}),p.jsx("br",{}),"Para agregar, editar o eliminar usuarios, use el"," ",p.jsx("a",{href:"https://console.firebase.google.com/project/kombuchaapp/authentication/users",target:"_blank",rel:"noopener noreferrer",className:"alert-link",children:"Firebase Console"}),"."]})}),n.length>0?p.jsxs(Nk,{responsive:!0,striped:!0,hover:!0,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"ID"}),p.jsx("th",{children:"Email"}),p.jsx("th",{children:"Nombre"}),p.jsx("th",{children:"Rol"}),p.jsx("th",{children:"Estado"}),p.jsx("th",{children:"ltima Actividad"})]})}),p.jsx("tbody",{children:n.map(l=>p.jsxs("tr",{children:[p.jsx("td",{children:l.id}),p.jsx("td",{children:l.email}),p.jsx("td",{children:l.name||"N/A"}),p.jsx("td",{children:p.jsx(nv,{bg:l.role==="admin"?"danger":"primary",children:l.role||"user"})}),p.jsx("td",{children:p.jsx(nv,{bg:l.active?"success":"secondary",children:l.active?"Activo":"Inactivo"})}),p.jsx("td",{children:l.lastActivity?new Date(l.lastActivity.toDate()).toLocaleDateString("es-ES"):"N/A"})]},l.id))})]}):p.jsx("div",{className:"text-center py-4",children:p.jsxs("p",{className:"text-muted",children:["No hay usuarios registrados en Firestore.",p.jsx("br",{}),"Los usuarios de autenticacin se gestionan desde Firebase Console."]})})]})]})})},yl=({children:n})=>{const{user:e,loading:t}=N0();return t?p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1.2rem",color:"#666"},children:"Cargando..."}):e?n:p.jsx(HA,{to:"/login",replace:!0})};function RH(){return p.jsxs(FD,{children:[p.jsx(Nr,{path:"/login",element:p.jsx(TH,{})}),p.jsx(Nr,{path:"/",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(A9,{})]})})}),p.jsx(Nr,{path:"/clientes",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(yH,{})]})})}),p.jsx(Nr,{path:"/kombuchas",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(bH,{})]})})}),p.jsx(Nr,{path:"/ventas",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(vH,{})]})})}),p.jsx(Nr,{path:"/rutas",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(xH,{})]})})}),p.jsx(Nr,{path:"/mapa",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(_H,{})]})})}),p.jsx(Nr,{path:"/recordatorios",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(wH,{})]})})}),p.jsx(Nr,{path:"/usuarios",element:p.jsx(yl,{children:p.jsxs(p.Fragment,{children:[p.jsx(gl,{}),p.jsx(CH,{})]})})}),p.jsx(Nr,{path:"*",element:p.jsx(HA,{to:"/",replace:!0})})]})}function IH(){return p.jsx(hH,{children:p.jsx("div",{className:"App",children:p.jsx(lO,{basename:"/KombuchaApp",children:p.jsx(RH,{})})})})}WN.createRoot(document.getElementById("root")).render(p.jsx(ur.StrictMode,{children:p.jsx(IH,{})}));
