(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Ef(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var y_={exports:{}},Ad={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function jN(){if($E)return Ad;$E=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Ad.Fragment=e,Ad.jsx=t,Ad.jsxs=t,Ad}var qE;function LN(){return qE||(qE=1,y_.exports=jN()),y_.exports}var p=LN(),__={exports:{}},xt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function VN(){if(WE)return xt;WE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function x(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function R(P,fe,Re){this.props=P,this.context=fe,this.refs=D,this.updater=Re||T}R.prototype.isReactComponent={},R.prototype.setState=function(P,fe){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,fe,"setState")},R.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function L(){}L.prototype=R.prototype;function $(P,fe,Re){this.props=P,this.context=fe,this.refs=D,this.updater=Re||T}var q=$.prototype=new L;q.constructor=$,C(q,R.prototype),q.isPureReactComponent=!0;var Z=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function F(P,fe,Re,pe,Ne,qe){return Re=qe.ref,{$$typeof:n,type:P,key:fe,ref:Re!==void 0?Re:null,props:qe}}function I(P,fe){return F(P.type,fe,void 0,void 0,void 0,P.props)}function O(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function U(P){var fe={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Re){return fe[Re]})}var H=/\/+/g;function B(P,fe){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):fe.toString(36)}function z(){}function Le(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(z,z):(P.status="pending",P.then(function(fe){P.status==="pending"&&(P.status="fulfilled",P.value=fe)},function(fe){P.status==="pending"&&(P.status="rejected",P.reason=fe)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function _e(P,fe,Re,pe,Ne){var qe=typeof P;(qe==="undefined"||qe==="boolean")&&(P=null);var je=!1;if(P===null)je=!0;else switch(qe){case"bigint":case"string":case"number":je=!0;break;case"object":switch(P.$$typeof){case n:case e:je=!0;break;case y:return je=P._init,_e(je(P._payload),fe,Re,pe,Ne)}}if(je)return Ne=Ne(P),je=pe===""?"."+B(P,0):pe,Z(Ne)?(Re="",je!=null&&(Re=je.replace(H,"$&/")+"/"),_e(Ne,fe,Re,"",function(Tt){return Tt})):Ne!=null&&(O(Ne)&&(Ne=I(Ne,Re+(Ne.key==null||P&&P.key===Ne.key?"":(""+Ne.key).replace(H,"$&/")+"/")+je)),fe.push(Ne)),1;je=0;var Ge=pe===""?".":pe+":";if(Z(P))for(var Se=0;Se<P.length;Se++)pe=P[Se],qe=Ge+B(pe,Se),je+=_e(pe,fe,Re,qe,Ne);else if(Se=x(P),typeof Se=="function")for(P=Se.call(P),Se=0;!(pe=P.next()).done;)pe=pe.value,qe=Ge+B(pe,Se++),je+=_e(pe,fe,Re,qe,Ne);else if(qe==="object"){if(typeof P.then=="function")return _e(Le(P),fe,Re,pe,Ne);throw fe=String(P),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return je}function G(P,fe,Re){if(P==null)return P;var pe=[],Ne=0;return _e(P,pe,"","",function(qe){return fe.call(Re,qe,Ne++)}),pe}function ie(P){if(P._status===-1){var fe=P._result;fe=fe(),fe.then(function(Re){(P._status===0||P._status===-1)&&(P._status=1,P._result=Re)},function(Re){(P._status===0||P._status===-1)&&(P._status=2,P._result=Re)}),P._status===-1&&(P._status=0,P._result=fe)}if(P._status===1)return P._result.default;throw P._result}var Ee=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Ve(){}return xt.Children={map:G,forEach:function(P,fe,Re){G(P,function(){fe.apply(this,arguments)},Re)},count:function(P){var fe=0;return G(P,function(){fe++}),fe},toArray:function(P){return G(P,function(fe){return fe})||[]},only:function(P){if(!O(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},xt.Component=R,xt.Fragment=t,xt.Profiler=s,xt.PureComponent=$,xt.StrictMode=i,xt.Suspense=h,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,xt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return Y.H.useMemoCache(P)}},xt.cache=function(P){return function(){return P.apply(null,arguments)}},xt.cloneElement=function(P,fe,Re){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var pe=C({},P.props),Ne=P.key,qe=void 0;if(fe!=null)for(je in fe.ref!==void 0&&(qe=void 0),fe.key!==void 0&&(Ne=""+fe.key),fe)!J.call(fe,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&fe.ref===void 0||(pe[je]=fe[je]);var je=arguments.length-2;if(je===1)pe.children=Re;else if(1<je){for(var Ge=Array(je),Se=0;Se<je;Se++)Ge[Se]=arguments[Se+2];pe.children=Ge}return F(P.type,Ne,void 0,void 0,qe,pe)},xt.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},xt.createElement=function(P,fe,Re){var pe,Ne={},qe=null;if(fe!=null)for(pe in fe.key!==void 0&&(qe=""+fe.key),fe)J.call(fe,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ne[pe]=fe[pe]);var je=arguments.length-2;if(je===1)Ne.children=Re;else if(1<je){for(var Ge=Array(je),Se=0;Se<je;Se++)Ge[Se]=arguments[Se+2];Ne.children=Ge}if(P&&P.defaultProps)for(pe in je=P.defaultProps,je)Ne[pe]===void 0&&(Ne[pe]=je[pe]);return F(P,qe,void 0,void 0,null,Ne)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(P){return{$$typeof:u,render:P}},xt.isValidElement=O,xt.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:ie}},xt.memo=function(P,fe){return{$$typeof:f,type:P,compare:fe===void 0?null:fe}},xt.startTransition=function(P){var fe=Y.T,Re={};Y.T=Re;try{var pe=P(),Ne=Y.S;Ne!==null&&Ne(Re,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Ve,Ee)}catch(qe){Ee(qe)}finally{Y.T=fe}},xt.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},xt.use=function(P){return Y.H.use(P)},xt.useActionState=function(P,fe,Re){return Y.H.useActionState(P,fe,Re)},xt.useCallback=function(P,fe){return Y.H.useCallback(P,fe)},xt.useContext=function(P){return Y.H.useContext(P)},xt.useDebugValue=function(){},xt.useDeferredValue=function(P,fe){return Y.H.useDeferredValue(P,fe)},xt.useEffect=function(P,fe,Re){var pe=Y.H;if(typeof Re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return pe.useEffect(P,fe)},xt.useId=function(){return Y.H.useId()},xt.useImperativeHandle=function(P,fe,Re){return Y.H.useImperativeHandle(P,fe,Re)},xt.useInsertionEffect=function(P,fe){return Y.H.useInsertionEffect(P,fe)},xt.useLayoutEffect=function(P,fe){return Y.H.useLayoutEffect(P,fe)},xt.useMemo=function(P,fe){return Y.H.useMemo(P,fe)},xt.useOptimistic=function(P,fe){return Y.H.useOptimistic(P,fe)},xt.useReducer=function(P,fe,Re){return Y.H.useReducer(P,fe,Re)},xt.useRef=function(P){return Y.H.useRef(P)},xt.useState=function(P){return Y.H.useState(P)},xt.useSyncExternalStore=function(P,fe,Re){return Y.H.useSyncExternalStore(P,fe,Re)},xt.useTransition=function(){return Y.H.useTransition()},xt.version="19.1.1",xt}var GE;function tv(){return GE||(GE=1,__.exports=VN()),__.exports}var N=tv();const fr=Ef(N);var b_={exports:{}},Cd={},v_={exports:{}},x_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function FN(){return KE||(KE=1,function(n){function e(G,ie){var Ee=G.length;G.push(ie);e:for(;0<Ee;){var Ve=Ee-1>>>1,P=G[Ve];if(0<s(P,ie))G[Ve]=ie,G[Ee]=P,Ee=Ve;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ie=G[0],Ee=G.pop();if(Ee!==ie){G[0]=Ee;e:for(var Ve=0,P=G.length,fe=P>>>1;Ve<fe;){var Re=2*(Ve+1)-1,pe=G[Re],Ne=Re+1,qe=G[Ne];if(0>s(pe,Ee))Ne<P&&0>s(qe,pe)?(G[Ve]=qe,G[Ne]=Ee,Ve=Ne):(G[Ve]=pe,G[Re]=Ee,Ve=Re);else if(Ne<P&&0>s(qe,Ee))G[Ve]=qe,G[Ne]=Ee,Ve=Ne;else break e}}return ie}function s(G,ie){var Ee=G.sortIndex-ie.sortIndex;return Ee!==0?Ee:G.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],y=1,v=null,x=3,T=!1,C=!1,D=!1,R=!1,L=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Z(G){for(var ie=t(f);ie!==null;){if(ie.callback===null)i(f);else if(ie.startTime<=G)i(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=t(f)}}function Y(G){if(D=!1,Z(G),!C)if(t(h)!==null)C=!0,J||(J=!0,B());else{var ie=t(f);ie!==null&&_e(Y,ie.startTime-G)}}var J=!1,F=-1,I=5,O=-1;function U(){return R?!0:!(n.unstable_now()-O<I)}function H(){if(R=!1,J){var G=n.unstable_now();O=G;var ie=!0;try{e:{C=!1,D&&(D=!1,$(F),F=-1),T=!0;var Ee=x;try{t:{for(Z(G),v=t(h);v!==null&&!(v.expirationTime>G&&U());){var Ve=v.callback;if(typeof Ve=="function"){v.callback=null,x=v.priorityLevel;var P=Ve(v.expirationTime<=G);if(G=n.unstable_now(),typeof P=="function"){v.callback=P,Z(G),ie=!0;break t}v===t(h)&&i(h),Z(G)}else i(h);v=t(h)}if(v!==null)ie=!0;else{var fe=t(f);fe!==null&&_e(Y,fe.startTime-G),ie=!1}}break e}finally{v=null,x=Ee,T=!1}ie=void 0}}finally{ie?B():J=!1}}}var B;if(typeof q=="function")B=function(){q(H)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Le=z.port2;z.port1.onmessage=H,B=function(){Le.postMessage(null)}}else B=function(){L(H,0)};function _e(G,ie){F=L(function(){G(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(G){switch(x){case 1:case 2:case 3:var ie=3;break;default:ie=x}var Ee=x;x=ie;try{return G()}finally{x=Ee}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(G,ie){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Ee=x;x=G;try{return ie()}finally{x=Ee}},n.unstable_scheduleCallback=function(G,ie,Ee){var Ve=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ve+Ee:Ve):Ee=Ve,G){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=Ee+P,G={id:y++,callback:ie,priorityLevel:G,startTime:Ee,expirationTime:P,sortIndex:-1},Ee>Ve?(G.sortIndex=Ee,e(f,G),t(h)===null&&G===t(f)&&(D?($(F),F=-1):D=!0,_e(Y,Ee-Ve))):(G.sortIndex=P,e(h,G),C||T||(C=!0,J||(J=!0,B()))),G},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(G){var ie=x;return function(){var Ee=x;x=ie;try{return G.apply(this,arguments)}finally{x=Ee}}}}(x_)),x_}var YE;function UN(){return YE||(YE=1,v_.exports=FN()),v_.exports}var E_={exports:{}},Fi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function zN(){if(XE)return Fi;XE=1;var n=tv();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,f,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:f,implementation:y}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Fi.createPortal=function(h,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,y)},Fi.flushSync=function(h){var f=l.T,y=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=y,i.d.f()}},Fi.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Fi.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Fi.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var y=f.as,v=u(y,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:T}):y==="script"&&i.d.X(h,{crossOrigin:v,integrity:x,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Fi.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Fi.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,v=u(y,f.crossOrigin);i.d.L(h,y,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Fi.preloadModule=function(h,f){if(typeof h=="string")if(f){var y=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Fi.requestFormReset=function(h){i.d.r(h)},Fi.unstable_batchedUpdates=function(h,f){return h(f)},Fi.useFormState=function(h,f,y){return l.H.useFormState(h,f,y)},Fi.useFormStatus=function(){return l.H.useHostTransitionStatus()},Fi.version="19.1.1",Fi}var QE;function NA(){if(QE)return E_.exports;QE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),E_.exports=zN(),E_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function BN(){if(ZE)return Cd;ZE=1;var n=UN(),e=tv(),t=NA();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var c=r,d=o;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return u(g),r;if(b===d)return u(g),o;b=b.sibling}throw Error(i(188))}if(c.return!==d.return)c=g,d=b;else{for(var A=!1,M=g.child;M;){if(M===c){A=!0,c=g,d=b;break}if(M===d){A=!0,d=g,c=b;break}M=M.sibling}if(!A){for(M=b.child;M;){if(M===c){A=!0,c=b,d=g;break}if(M===d){A=!0,d=b,c=g;break}M=M.sibling}if(!A)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:o}function f(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=f(r),o!==null)return o;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=H&&r[H]||r["@@iterator"],typeof r=="function"?r:null)}var z=Symbol.for("react.client.reference");function Le(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===z?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case R:return"Profiler";case D:return"StrictMode";case Y:return"Suspense";case J:return"SuspenseList";case O:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case q:return(r.displayName||"Context")+".Provider";case $:return(r._context.displayName||"Context")+".Consumer";case Z:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return o=r.displayName||null,o!==null?o:Le(r.type)||"Memo";case I:o=r._payload,r=r._init;try{return Le(r(o))}catch{}}return null}var _e=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Ve=[],P=-1;function fe(r){return{current:r}}function Re(r){0>P||(r.current=Ve[P],Ve[P]=null,P--)}function pe(r,o){P++,Ve[P]=r.current,r.current=o}var Ne=fe(null),qe=fe(null),je=fe(null),Ge=fe(null);function Se(r,o){switch(pe(je,o),pe(qe,r),pe(Ne,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?_E(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=_E(o),r=bE(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Re(Ne),pe(Ne,r)}function Tt(){Re(Ne),Re(qe),Re(je)}function xe(r){r.memoizedState!==null&&pe(Ge,r);var o=Ne.current,c=bE(o,r.type);o!==c&&(pe(qe,r),pe(Ne,c))}function ce(r){qe.current===r&&(Re(Ne),Re(qe)),Ge.current===r&&(Re(Ge),xd._currentValue=Ee)}var Ae=Object.prototype.hasOwnProperty,He=n.unstable_scheduleCallback,Je=n.unstable_cancelCallback,st=n.unstable_shouldYield,yn=n.unstable_requestPaint,Gt=n.unstable_now,Ki=n.unstable_getCurrentPriorityLevel,Yi=n.unstable_ImmediatePriority,Bs=n.unstable_UserBlockingPriority,xs=n.unstable_NormalPriority,Da=n.unstable_LowPriority,Es=n.unstable_IdlePriority,vi=n.log,me=n.unstable_setDisableYieldValue,ze=null,Ke=null;function St(r){if(typeof vi=="function"&&me(r),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ze,r)}catch{}}var Lt=Math.clz32?Math.clz32:ae,K=Math.log,re=Math.LN2;function ae(r){return r>>>=0,r===0?32:31-(K(r)/re|0)|0}var ye=256,ke=4194304;function Ce(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function De(r,o,c){var d=r.pendingLanes;if(d===0)return 0;var g=0,b=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var M=d&134217727;return M!==0?(d=M&~b,d!==0?g=Ce(d):(A&=M,A!==0?g=Ce(A):c||(c=M&~r,c!==0&&(g=Ce(c))))):(M=d&~b,M!==0?g=Ce(M):A!==0?g=Ce(A):c||(c=d&~r,c!==0&&(g=Ce(c)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:g}function Pe(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function et(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tt(){var r=ye;return ye<<=1,(ye&4194048)===0&&(ye=256),r}function lt(){var r=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),r}function Yt(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Ft(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function hi(r,o,c,d,g,b){var A=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var M=r.entanglements,W=r.expirationTimes,oe=r.hiddenUpdates;for(c=A&~c;0<c;){var ge=31-Lt(c),we=1<<ge;M[ge]=0,W[ge]=-1;var le=oe[ge];if(le!==null)for(oe[ge]=null,ge=0;ge<le.length;ge++){var ue=le[ge];ue!==null&&(ue.lane&=-536870913)}c&=~we}d!==0&&xi(r,d,0),b!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=b&~(A&~o))}function xi(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var d=31-Lt(o);r.entangledLanes|=o,r.entanglements[d]=r.entanglements[d]|1073741824|c&4194090}function _r(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var d=31-Lt(c),g=1<<d;g&o|r[d]&o&&(r[d]|=o),c&=~g}}function $r(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Po(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function qr(){var r=ie.p;return r!==0?r:(r=window.event,r===void 0?32:VE(r.type))}function br(r,o){var c=ie.p;try{return ie.p=r,o()}finally{ie.p=c}}var Xt=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Xt,Cn="__reactProps$"+Xt,is="__reactContainer$"+Xt,Yl="__reactEvents$"+Xt,_h="__reactListeners$"+Xt,Hs="__reactHandles$"+Xt,vr="__reactResources$"+Xt,$s="__reactMarker$"+Xt;function Wr(r){delete r[Nn],delete r[Cn],delete r[Yl],delete r[_h],delete r[Hs]}function ws(r){var o=r[Nn];if(o)return o;for(var c=r.parentNode;c;){if(o=c[is]||c[Nn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=wE(r);r!==null;){if(c=r[Nn])return c;r=wE(r)}return o}r=c,c=r.parentNode}return null}function qs(r){if(r=r[Nn]||r[is]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Ws(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Rn(r){var o=r[vr];return o||(o=r[vr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function At(r){r[$s]=!0}var Jn=new Set,$n={};function hn(r,o){ss(r,o),ss(r+"Capture",o)}function ss(r,o){for($n[r]=o,r=0;r<o.length;r++)Jn.add(o[r])}var xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gs={},rs={};function Xl(r){return Ae.call(rs,r)?!0:Ae.call(Gs,r)?!1:xr.test(r)?rs[r]=!0:(Gs[r]=!0,!1)}function Ks(r,o,c){if(Xl(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function Ei(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function qn(r,o,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+d)}}var Er,jo;function Ys(r){if(Er===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Er=o&&o[1]||"",jo=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Er+r+jo}var Oa=!1;function Ma(r,o){if(!r||Oa)return"";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ue){var le=ue}Reflect.construct(r,[],we)}else{try{we.call()}catch(ue){le=ue}r.call(we.prototype)}}else{try{throw Error()}catch(ue){le=ue}(we=r())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ue){if(ue&&le&&typeof ue.stack=="string")return[ue.stack,le.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),A=b[0],M=b[1];if(A&&M){var W=A.split(`
`),oe=M.split(`
`);for(g=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(d===W.length||g===oe.length)for(d=W.length-1,g=oe.length-1;1<=d&&0<=g&&W[d]!==oe[g];)g--;for(;1<=d&&0<=g;d--,g--)if(W[d]!==oe[g]){if(d!==1||g!==1)do if(d--,g--,0>g||W[d]!==oe[g]){var ge=`
`+W[d].replace(" at new "," at ");return r.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",r.displayName)),ge}while(1<=d&&0<=g);break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ys(c):""}function Lo(r){switch(r.tag){case 26:case 27:case 5:return Ys(r.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 15:return Ma(r.type,!1);case 11:return Ma(r.type.render,!1);case 1:return Ma(r.type,!0);case 31:return Ys("Activity");default:return""}}function Pa(r){try{var o="";do o+=Lo(r),r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function di(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Vo(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Kc(r){var o=Vo(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),d=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,b=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(A){d=""+A,b.call(this,A)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(A){d=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function ja(r){r._valueTracker||(r._valueTracker=Kc(r))}function Fo(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return r&&(d=Vo(r)?r.checked?"true":"false":r.value),r=d,r!==c?(o.setValue(r),!0):!1}function fi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var wi=/[\n"\\]/g;function an(r){return r.replace(wi,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function mn(r,o,c,d,g,b,A,M){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+di(o)):r.value!==""+di(o)&&(r.value=""+di(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?Xs(r,A,di(o)):c!=null?Xs(r,A,di(c)):d!=null&&r.removeAttribute("value"),g==null&&b!=null&&(r.defaultChecked=!!b),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.name=""+di(M):r.removeAttribute("name")}function wr(r,o,c,d,g,b,A,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+di(c):"",o=o!=null?""+di(o):c,M||o===r.value||(r.value=o),r.defaultValue=o}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=M?r.checked:!!d,r.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A)}function Xs(r,o,c){o==="number"&&fi(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Wn(r,o,c,d){if(r=r.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=o.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&d&&(r[c].defaultSelected=!0)}else{for(c=""+di(c),o=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,d&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function kt(r,o,c){if(o!=null&&(o=""+di(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+di(c):""}function Qs(r,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(i(92));if(_e(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=di(o),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d)}function ei(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var Tr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(r,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":d?r.setProperty(o,c):typeof c!="number"||c===0||Tr.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function Zs(r,o,c){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var g in o)d=o[g],o.hasOwnProperty(g)&&c[g]!==d&&Ql(r,g,d)}else for(var b in o)o.hasOwnProperty(b)&&Ql(r,b,o[b])}function La(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ts=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uo(r){return Ts.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var mi=null;function Ti(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Js=null,Xi=null;function Va(r){var o=qs(r);if(o&&(r=o.stateNode)){var c=r[Cn]||null;e:switch(r=o.stateNode,o.type){case"input":if(mn(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+an(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==r&&d.form===r.form){var g=d[Cn]||null;if(!g)throw Error(i(90));mn(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===r.form&&Fo(d)}break e;case"textarea":kt(r,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Wn(r,!!c.multiple,o,!1)}}}var Oi=!1;function Zl(r,o,c){if(Oi)return r(o,c);Oi=!0;try{var d=r(o);return d}finally{if(Oi=!1,(Js!==null||Xi!==null)&&(Tm(),Js&&(o=Js,r=Xi,Xi=Js=null,Va(o),r)))for(o=0;o<r.length;o++)Va(r[o])}}function Gr(r,o){var c=r.stateNode;if(c===null)return null;var d=c[Cn]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,o,typeof c));return c}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ti=!1;if(as)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){ti=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{ti=!1}var Ss=null,er=null,os=null;function Ua(){if(os)return os;var r,o=er,c=o.length,d,g="value"in Ss?Ss.value:Ss.textContent,b=g.length;for(r=0;r<c&&o[r]===g[r];r++);var A=c-r;for(d=1;d<=A&&o[c-d]===g[b-d];d++);return os=g.slice(r,1<d?1-d:void 0)}function tr(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Qi(){return!0}function Jl(){return!1}function Dn(r){function o(c,d,g,b,A){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var M in r)r.hasOwnProperty(M)&&(c=r[M],this[M]=c?c(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Qi:Jl,this.isPropagationStopped=Jl,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),o}var Ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=Dn(Ut),Sr=y({},Ut,{view:0,detail:0}),ec=Dn(Sr),nr,Yr,As,Xr=y({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==As&&(As&&r.type==="mousemove"?(nr=r.screenX-As.screenX,Yr=r.screenY-As.screenY):Yr=nr=0,As=r),nr)},movementY:function(r){return"movementY"in r?r.movementY:Yr}}),ni=Dn(Xr),Xc=y({},Xr,{dataTransfer:0}),Qc=Dn(Xc),Qr=y({},Sr,{relatedTarget:0}),za=Dn(Qr),zo=y({},Ut,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=Dn(zo),Bo=y({},Ut,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ha=Dn(Bo),bh=y({},Ut,{data:0}),tc=Dn(bh),Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ic(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=$a[r])?!!o[r]:!1}function qa(){return ic}var Ho=y({},Sr,{key:function(r){if(r.key){var o=Zr[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=tr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(r){return r.type==="keypress"?tr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?tr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Wa=Dn(Ho),sc=y({},Xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cs=Dn(sc),Rs=y({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),Zc=Dn(Rs),rc=y({},Ut,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jc=Dn(rc),eu=y({},Xr,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),$o=Dn(eu),Si=y({},Ut,{newState:0,oldState:0}),ac=Dn(Si),oc=[9,13,27,32],ir=as&&"CompositionEvent"in window,m=null;as&&"documentMode"in document&&(m=document.documentMode);var E=as&&"TextEvent"in window&&!m,S=as&&(!ir||m&&8<m&&11>=m),V=" ",ne=!1;function he(r,o){switch(r){case"keyup":return oc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Me(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Nt=!1;function On(r,o){switch(r){case"compositionend":return Me(o);case"keypress":return o.which!==32?null:(ne=!0,V);case"textInput":return r=o.data,r===V&&ne?null:r;default:return null}}function Dt(r,o){if(Nt)return r==="compositionend"||!ir&&he(r,o)?(r=Ua(),os=er=Ss=null,Nt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return S&&o.locale!=="ko"?null:o.data;default:return null}}var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Gn[r.type]:o==="textarea"}function Pn(r,o,c,d){Js?Xi?Xi.push(d):Xi=[d]:Js=d,o=km(o,"onChange"),0<o.length&&(c=new Kr("onChange","change",null,c,d),r.push({event:c,listeners:o}))}var Kn=null,Is=null;function qo(r){fE(r,0)}function tu(r){var o=Ws(r);if(Fo(o))return r}function Lf(r,o){if(r==="change")return o}var vh=!1;if(as){var Wo;if(as){var xh="oninput"in document;if(!xh){var Vf=document.createElement("div");Vf.setAttribute("oninput","return;"),xh=typeof Vf.oninput=="function"}Wo=xh}else Wo=!1;vh=Wo&&(!document.documentMode||9<document.documentMode)}function Eh(){Kn&&(Kn.detachEvent("onpropertychange",Ff),Is=Kn=null)}function Ff(r){if(r.propertyName==="value"&&tu(Is)){var o=[];Pn(o,Is,r,Ti(r)),Zl(qo,o)}}function ay(r,o,c){r==="focusin"?(Eh(),Kn=o,Is=c,Kn.attachEvent("onpropertychange",Ff)):r==="focusout"&&Eh()}function Uf(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return tu(Is)}function zf(r,o){if(r==="click")return tu(o)}function Bf(r,o){if(r==="input"||r==="change")return tu(o)}function nu(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Mi=typeof Object.is=="function"?Object.is:nu;function Ga(r,o){if(Mi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!Ae.call(o,g)||!Mi(r[g],o[g]))return!1}return!0}function Zi(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hf(r,o){var c=Zi(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=o&&d>=o)return{node:c,offset:o-r};r=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Zi(c)}}function $f(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?$f(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function wh(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=fi(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=fi(r.document)}return o}function iu(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var oy=as&&"documentMode"in document&&11>=document.documentMode,Go=null,Th=null,lc=null,Sh=!1;function qf(r,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Sh||Go==null||Go!==fi(d)||(d=Go,"selectionStart"in d&&iu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),lc&&Ga(lc,d)||(lc=d,d=km(Th,"onSelect"),0<d.length&&(o=new Kr("onSelect","select",null,o,c),r.push({event:o,listeners:d}),o.target=Go)))}function Jr(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var Ka={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},cc={},Wf={};as&&(Wf=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function Ya(r){if(cc[r])return cc[r];if(!Ka[r])return r;var o=Ka[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Wf)return cc[r]=o[c];return r}var ea=Ya("animationend"),sr=Ya("animationiteration"),Ah=Ya("animationstart"),ly=Ya("transitionrun"),Gf=Ya("transitionstart"),Kf=Ya("transitioncancel"),Ch=Ya("transitionend"),Rh=new Map,Ih="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ih.push("scrollEnd");function ks(r,o){Rh.set(r,o),hn(o,[r])}var Yf=new WeakMap;function Ji(r,o){if(typeof r=="object"&&r!==null){var c=Yf.get(r);return c!==void 0?c:(o={value:r,source:o,stack:Pa(o)},Yf.set(r,o),o)}return{value:r,source:o,stack:Pa(o)}}var es=[],Ko=0,kh=0;function su(){for(var r=Ko,o=kh=Ko=0;o<r;){var c=es[o];es[o++]=null;var d=es[o];es[o++]=null;var g=es[o];es[o++]=null;var b=es[o];if(es[o++]=null,d!==null&&g!==null){var A=d.pending;A===null?g.next=g:(g.next=A.next,A.next=g),d.pending=g}b!==0&&Dh(c,g,b)}}function ru(r,o,c,d){es[Ko++]=r,es[Ko++]=o,es[Ko++]=c,es[Ko++]=d,kh|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Nh(r,o,c,d){return ru(r,o,c,d),au(r)}function Pi(r,o){return ru(r,null,null,o),au(r)}function Dh(r,o,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var g=!1,b=r.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(g=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,g&&o!==null&&(g=31-Lt(c),r=b.hiddenUpdates,d=r[g],d===null?r[g]=[o]:d.push(o),o.lane=c|536870912),b):null}function au(r){if(50<fd)throw fd=0,zy=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Yo={};function cy(r,o,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(r,o,c,d){return new cy(r,o,c,d)}function Oh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ar(r,o){var c=r.alternate;return c===null?(c=ts(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Xf(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function ou(r,o,c,d,g,b){var A=0;if(d=r,typeof r=="function")Oh(r)&&(A=1);else if(typeof r=="string")A=wN(r,c,Ne.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case O:return r=ts(31,c,o,g),r.elementType=O,r.lanes=b,r;case C:return Cr(c.children,g,b,o);case D:A=8,g|=24;break;case R:return r=ts(12,c,o,g|2),r.elementType=R,r.lanes=b,r;case Y:return r=ts(13,c,o,g),r.elementType=Y,r.lanes=b,r;case J:return r=ts(19,c,o,g),r.elementType=J,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:case q:A=10;break e;case $:A=9;break e;case Z:A=11;break e;case F:A=14;break e;case I:A=16,d=null;break e}A=29,c=Error(i(130,r===null?"null":typeof r,"")),d=null}return o=ts(A,c,o,g),o.elementType=r,o.type=d,o.lanes=b,o}function Cr(r,o,c,d){return r=ts(7,r,d,o),r.lanes=c,r}function Xo(r,o,c){return r=ts(6,r,null,o),r.lanes=c,r}function Mh(r,o,c){return o=ts(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Xa=[],Qa=0,ta=null,Qo=0,ji=[],ls=0,Za=null,Rr=1,Ai="";function Ja(r,o){Xa[Qa++]=Qo,Xa[Qa++]=ta,ta=r,Qo=o}function Qf(r,o,c){ji[ls++]=Rr,ji[ls++]=Ai,ji[ls++]=Za,Za=r;var d=Rr;r=Ai;var g=32-Lt(d)-1;d&=~(1<<g),c+=1;var b=32-Lt(o)+g;if(30<b){var A=g-g%5;b=(d&(1<<A)-1).toString(32),d>>=A,g-=A,Rr=1<<32-Lt(o)+g|c<<g|d,Ai=b+r}else Rr=1<<b|c<<g|d,Ai=r}function Ph(r){r.return!==null&&(Ja(r,1),Qf(r,1,0))}function jh(r){for(;r===ta;)ta=Xa[--Qa],Xa[Qa]=null,Qo=Xa[--Qa],Xa[Qa]=null;for(;r===Za;)Za=ji[--ls],ji[ls]=null,Ai=ji[--ls],ji[ls]=null,Rr=ji[--ls],ji[ls]=null}var Yn=null,pn=null,$t=!1,na=null,rr=!1,ia=Error(i(519));function Ir(r){var o=Error(i(418,""));throw Ns(Ji(o,r)),ia}function Lh(r){var o=r.stateNode,c=r.type,d=r.memoizedProps;switch(o[Nn]=r,o[Cn]=d,c){case"dialog":Rt("cancel",o),Rt("close",o);break;case"iframe":case"object":case"embed":Rt("load",o);break;case"video":case"audio":for(c=0;c<pd.length;c++)Rt(pd[c],o);break;case"source":Rt("error",o);break;case"img":case"image":case"link":Rt("error",o),Rt("load",o);break;case"details":Rt("toggle",o);break;case"input":Rt("invalid",o),wr(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),ja(o);break;case"select":Rt("invalid",o);break;case"textarea":Rt("invalid",o),Qs(o,d.value,d.defaultValue,d.children),ja(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||yE(o.textContent,c)?(d.popover!=null&&(Rt("beforetoggle",o),Rt("toggle",o)),d.onScroll!=null&&Rt("scroll",o),d.onScrollEnd!=null&&Rt("scrollend",o),d.onClick!=null&&(o.onclick=Nm),o=!0):o=!1,o||Ir(r)}function Zf(r){for(Yn=r.return;Yn;)switch(Yn.tag){case 5:case 13:rr=!1;return;case 27:case 3:rr=!0;return;default:Yn=Yn.return}}function uc(r){if(r!==Yn)return!1;if(!$t)return Zf(r),$t=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||i_(r.type,r.memoizedProps)),c=!c),c&&pn&&Ir(r),Zf(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(o===0){pn=Or(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;r=r.nextSibling}pn=null}}else o===27?(o=pn,dl(r.type)?(r=o_,o_=null,pn=r):pn=o):pn=Yn?Or(r.stateNode.nextSibling):null;return!0}function hc(){pn=Yn=null,$t=!1}function Zo(){var r=na;return r!==null&&(ms===null?ms=r:ms.push.apply(ms,r),na=null),r}function Ns(r){na===null?na=[r]:na.push(r)}var Vh=fe(null),eo=null,kr=null;function sa(r,o,c){pe(Vh,o._currentValue),o._currentValue=c}function Nr(r){r._currentValue=Vh.current,Re(Vh)}function Fh(r,o,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),r===c)break;r=r.return}}function Uh(r,o,c,d){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var b=g.dependencies;if(b!==null){var A=g.child;b=b.firstContext;e:for(;b!==null;){var M=b;b=g;for(var W=0;W<o.length;W++)if(M.context===o[W]){b.lanes|=c,M=b.alternate,M!==null&&(M.lanes|=c),Fh(b.return,c,r),d||(A=null);break e}b=M.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=c,b=A.alternate,b!==null&&(b.lanes|=c),Fh(A,c,r),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===r){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function dc(r,o,c,d){r=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var M=g.type;Mi(g.pendingProps.value,A.value)||(r!==null?r.push(M):r=[M])}}else if(g===Ge.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(xd):r=[xd])}g=g.return}r!==null&&Uh(o,r,c,d),o.flags|=262144}function fc(r){for(r=r.firstContext;r!==null;){if(!Mi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function to(r){eo=r,kr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ii(r){return zh(eo,r)}function Jo(r,o){return eo===null&&to(r),zh(r,o)}function zh(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},kr===null){if(r===null)throw Error(i(308));kr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else kr=kr.next=o;return c}var no=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},Jf=n.unstable_scheduleCallback,Bh=n.unstable_NormalPriority,In={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mc(){return{controller:new no,data:new Map,refCount:0}}function el(r){r.refCount--,r.refCount===0&&Jf(Bh,function(){r.controller.abort()})}var io=null,Hh=0,cs=0,ns=null;function uy(r,o){if(io===null){var c=io=[];Hh=0,cs=Ky(),ns={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Hh++,o.then(em,em),o}function em(){if(--Hh===0&&io!==null){ns!==null&&(ns.status="fulfilled");var r=io;io=null,cs=0,ns=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function hy(r,o){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return r.then(function(){d.status="fulfilled",d.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var tm=G.S;G.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&uy(r,o),tm!==null&&tm(r,o)};var so=fe(null);function $h(){var r=so.current;return r!==null?r:gn.pooledCache}function lu(r,o){o===null?pe(so,so.current):pe(so,o.pool)}function nm(){var r=$h();return r===null?null:{parent:In._currentValue,pool:r}}var tl=Error(i(460)),pc=Error(i(474)),ro=Error(i(542)),qh={then:function(){}};function im(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ra(){}function k(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(ra,ra),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,j(r),r;default:if(typeof o.status=="string")o.then(ra,ra);else{if(r=gn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(d){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=d}},function(d){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,j(r),r}throw _=o,tl}}var _=null;function w(){if(_===null)throw Error(i(459));var r=_;return _=null,r}function j(r){if(r===tl||r===ro)throw Error(i(483))}var Q=!1;function ee(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function de(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function be(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Oe(r,o,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(tn&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,o=au(r),Dh(r,null,c),o}return ru(r,d,o,c),au(r)}function Be(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=r.pendingLanes,c|=d,o.lanes=c,_r(r,c)}}function $e(r,o){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=A:b=b.next=A,c=c.next}while(c!==null);b===null?g=b=o:b=b.next=o}else g=b=o;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var Fe=!1;function pt(){if(Fe){var r=ns;if(r!==null)throw r}}function nt(r,o,c,d){Fe=!1;var g=r.updateQueue;Q=!1;var b=g.firstBaseUpdate,A=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var W=M,oe=W.next;W.next=null,A===null?b=oe:A.next=oe,A=W;var ge=r.alternate;ge!==null&&(ge=ge.updateQueue,M=ge.lastBaseUpdate,M!==A&&(M===null?ge.firstBaseUpdate=oe:M.next=oe,ge.lastBaseUpdate=W))}if(b!==null){var we=g.baseState;A=0,ge=oe=W=null,M=b;do{var le=M.lane&-536870913,ue=le!==M.lane;if(ue?(Bt&le)===le:(d&le)===le){le!==0&&le===cs&&(Fe=!0),ge!==null&&(ge=ge.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var mt=r,at=M;le=o;var cn=c;switch(at.tag){case 1:if(mt=at.payload,typeof mt=="function"){we=mt.call(cn,we,le);break e}we=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=at.payload,le=typeof mt=="function"?mt.call(cn,we,le):mt,le==null)break e;we=y({},we,le);break e;case 2:Q=!0}}le=M.callback,le!==null&&(r.flags|=64,ue&&(r.flags|=8192),ue=g.callbacks,ue===null?g.callbacks=[le]:ue.push(le))}else ue={lane:le,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ge===null?(oe=ge=ue,W=we):ge=ge.next=ue,A|=le;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ue=M,M=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);ge===null&&(W=we),g.baseState=W,g.firstBaseUpdate=oe,g.lastBaseUpdate=ge,b===null&&(g.shared.lanes=0),ll|=A,r.lanes=A,r.memoizedState=we}}function gt(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function ct(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)gt(c[r],o)}var rt=fe(null),qt=fe(0);function Jt(r,o){r=fo,pe(qt,r),pe(rt,o),fo=r|o.baseLanes}function vt(){pe(qt,fo),pe(rt,rt.current)}function Vt(){fo=qt.current,Re(rt),Re(qt)}var ut=0,Ue=null,Qe=null,ht=null,zt=!1,on=!1,jn=!1,Li=0,Ln=0,si=null,us=0;function _t(){throw Error(i(321))}function hs(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!Mi(r[c],o[c]))return!1;return!0}function ds(r,o,c,d,g,b){return ut=b,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=r===null||r.memoizedState===null?Q0:Z0,jn=!1,b=c(d,g),jn=!1,on&&(b=Vn(o,c,d,g)),ao(r),b}function ao(r){G.H=hm;var o=Qe!==null&&Qe.next!==null;if(ut=0,ht=Qe=Ue=null,zt=!1,Ln=0,si=null,o)throw Error(i(300));r===null||pi||(r=r.dependencies,r!==null&&fc(r)&&(pi=!0))}function Vn(r,o,c,d){Ue=r;var g=0;do{if(on&&(si=null),Ln=0,on=!1,25<=g)throw Error(i(301));if(g+=1,ht=Qe=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}G.H=Mk,b=o(c,d)}while(on);return b}function en(){var r=G.H,o=r.useState()[0];return o=typeof o.then=="function"?aa(o):o,r=r.useState()[0],(Qe!==null?Qe.memoizedState:null)!==r&&(Ue.flags|=1024),o}function ri(){var r=Li!==0;return Li=0,r}function Vi(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function ar(r){if(zt){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}zt=!1}ut=0,ht=Qe=Ue=null,on=!1,Ln=Li=0,si=null}function ai(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ue.memoizedState=ht=r:ht=ht.next=r,ht}function wn(){if(Qe===null){var r=Ue.alternate;r=r!==null?r.memoizedState:null}else r=Qe.next;var o=ht===null?Ue.memoizedState:ht.next;if(o!==null)ht=o,Qe=r;else{if(r===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));Qe=r,r={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},ht===null?Ue.memoizedState=ht=r:ht=ht.next=r}return ht}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function aa(r){var o=Ln;return Ln+=1,si===null&&(si=[]),r=k(si,r,o),o=Ue,(ht===null?o.memoizedState:ht.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?Q0:Z0),r}function uu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return aa(r);if(r.$$typeof===q)return ii(r)}throw Error(i(438,String(r)))}function Wh(r){var o=null,c=Ue.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=Ue.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=cu(),Ue.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),d=0;d<r;d++)c[d]=U;return o.index++,c}function Ds(r,o){return typeof o=="function"?o(r):o}function hu(r){var o=wn();return du(o,Qe,r)}function du(r,o,c){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var g=r.baseQueue,b=d.pending;if(b!==null){if(g!==null){var A=g.next;g.next=b.next,b.next=A}o.baseQueue=g=b,d.pending=null}if(b=r.baseState,g===null)r.memoizedState=b;else{o=g.next;var M=A=null,W=null,oe=o,ge=!1;do{var we=oe.lane&-536870913;if(we!==oe.lane?(Bt&we)===we:(ut&we)===we){var le=oe.revertLane;if(le===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),we===cs&&(ge=!0);else if((ut&le)===le){oe=oe.next,le===cs&&(ge=!0);continue}else we={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(M=W=we,A=b):W=W.next=we,Ue.lanes|=le,ll|=le;we=oe.action,jn&&c(b,we),b=oe.hasEagerState?oe.eagerState:c(b,we)}else le={lane:we,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},W===null?(M=W=le,A=b):W=W.next=le,Ue.lanes|=we,ll|=we;oe=oe.next}while(oe!==null&&oe!==o);if(W===null?A=b:W.next=M,!Mi(b,r.memoizedState)&&(pi=!0,ge&&(c=ns,c!==null)))throw c;r.memoizedState=b,r.baseState=A,r.baseQueue=W,d.lastRenderedState=b}return g===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Gh(r){var o=wn(),c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var d=c.dispatch,g=c.pending,b=o.memoizedState;if(g!==null){c.pending=null;var A=g=g.next;do b=r(b,A.action),A=A.next;while(A!==g);Mi(b,o.memoizedState)||(pi=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Kh(r,o,c){var d=Ue,g=wn(),b=$t;if(b){if(c===void 0)throw Error(i(407));c=c()}else c=o();var A=!Mi((Qe||g).memoizedState,c);A&&(g.memoizedState=c,pi=!0),g=g.queue;var M=rm.bind(null,d,g,r);if(nd(2048,8,M,[r]),g.getSnapshot!==o||A||ht!==null&&ht.memoizedState.tag&1){if(d.flags|=2048,gu(9,lm(),sm.bind(null,d,g,c,o),null),gn===null)throw Error(i(349));b||(ut&124)!==0||Yh(d,o,c)}return c}function Yh(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Ue.updateQueue,o===null?(o=cu(),Ue.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function sm(r,o,c,d){o.value=c,o.getSnapshot=d,oa(o)&&gc(r)}function rm(r,o,c){return c(function(){oa(o)&&gc(r)})}function oa(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!Mi(r,c)}catch{return!0}}function gc(r){var o=Pi(r,2);o!==null&&Ls(o,r,2)}function fu(r){var o=ai();if(typeof r=="function"){var c=r;if(r=c(),jn){St(!0);try{c()}finally{St(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:r},o}function Xh(r,o,c,d){return r.baseState=c,du(r,Qe,typeof d=="function"?d:Ds)}function Qh(r,o,c,d,g){if(um(r))throw Error(i(485));if(r=o.action,r!==null){var b={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};G.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Zh(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Zh(r,o){var c=o.action,d=o.payload,g=r.state;if(o.isTransition){var b=G.T,A={};G.T=A;try{var M=c(g,d),W=G.S;W!==null&&W(A,M),Jh(r,o,M)}catch(oe){mu(r,o,oe)}finally{G.T=b}}else try{b=c(g,d),Jh(r,o,b)}catch(oe){mu(r,o,oe)}}function Jh(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){ed(r,o,d)},function(d){return mu(r,o,d)}):ed(r,o,c)}function ed(r,o,c){o.status="fulfilled",o.value=c,am(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,Zh(r,c)))}function mu(r,o,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,am(o),o=o.next;while(o!==d)}r.action=null}function am(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function om(r,o){return o}function pu(r,o){if($t){var c=gn.formState;if(c!==null){e:{var d=Ue;if($t){if(pn){t:{for(var g=pn,b=rr;g.nodeType!==8;){if(!b){g=null;break t}if(g=Or(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){pn=Or(g.nextSibling),d=g.data==="F!";break e}}Ir(d)}d=!1}d&&(o=c[0])}}return c=ai(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:om,lastRenderedState:o},c.queue=d,c=K0.bind(null,Ue,d),d.dispatch=c,d=fu(!1),b=gy.bind(null,Ue,!1,d.queue),d=ai(),g={state:o,dispatch:null,action:r,pending:null},d.queue=g,c=Qh.bind(null,Ue,g,b,c),g.dispatch=c,d.memoizedState=r,[o,c,!1]}function td(r){var o=wn();return N0(o,Qe,r)}function N0(r,o,c){if(o=du(r,o,om)[0],r=hu(Ds)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=aa(o)}catch(A){throw A===tl?ro:A}else d=o;o=wn();var g=o.queue,b=g.dispatch;return c!==o.memoizedState&&(Ue.flags|=2048,gu(9,lm(),kk.bind(null,g,c),null)),[d,b,r]}function kk(r,o){r.action=o}function D0(r){var o=wn(),c=Qe;if(c!==null)return N0(o,c,r);wn(),o=o.memoizedState,c=wn();var d=c.queue.dispatch;return c.memoizedState=r,[o,d,!1]}function gu(r,o,c,d){return r={tag:r,create:c,deps:d,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=cu(),Ue.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,o.lastEffect=r),r}function lm(){return{destroy:void 0,resource:void 0}}function O0(){return wn().memoizedState}function cm(r,o,c,d){var g=ai();d=d===void 0?null:d,Ue.flags|=r,g.memoizedState=gu(1|o,lm(),c,d)}function nd(r,o,c,d){var g=wn();d=d===void 0?null:d;var b=g.memoizedState.inst;Qe!==null&&d!==null&&hs(d,Qe.memoizedState.deps)?g.memoizedState=gu(o,b,c,d):(Ue.flags|=r,g.memoizedState=gu(1|o,b,c,d))}function M0(r,o){cm(8390656,8,r,o)}function P0(r,o){nd(2048,8,r,o)}function j0(r,o){return nd(4,2,r,o)}function L0(r,o){return nd(4,4,r,o)}function V0(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function F0(r,o,c){c=c!=null?c.concat([r]):null,nd(4,4,V0.bind(null,o,r),c)}function dy(){}function U0(r,o){var c=wn();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&hs(o,d[1])?d[0]:(c.memoizedState=[r,o],r)}function z0(r,o){var c=wn();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&hs(o,d[1]))return d[0];if(d=r(),jn){St(!0);try{r()}finally{St(!1)}}return c.memoizedState=[d,o],d}function fy(r,o,c){return c===void 0||(ut&1073741824)!==0?r.memoizedState=o:(r.memoizedState=c,r=$x(),Ue.lanes|=r,ll|=r,c)}function B0(r,o,c,d){return Mi(c,o)?c:rt.current!==null?(r=fy(r,c,d),Mi(r,o)||(pi=!0),r):(ut&42)===0?(pi=!0,r.memoizedState=c):(r=$x(),Ue.lanes|=r,ll|=r,o)}function H0(r,o,c,d,g){var b=ie.p;ie.p=b!==0&&8>b?b:8;var A=G.T,M={};G.T=M,gy(r,!1,o,c);try{var W=g(),oe=G.S;if(oe!==null&&oe(M,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ge=hy(W,d);id(r,o,ge,js(r))}else id(r,o,d,js(r))}catch(we){id(r,o,{then:function(){},status:"rejected",reason:we},js())}finally{ie.p=b,G.T=A}}function Nk(){}function my(r,o,c,d){if(r.tag!==5)throw Error(i(476));var g=$0(r).queue;H0(r,g,o,Ee,c===null?Nk:function(){return q0(r),c(d)})}function $0(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:Ee},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function q0(r){var o=$0(r).next.queue;id(r,o,{},js())}function py(){return ii(xd)}function W0(){return wn().memoizedState}function G0(){return wn().memoizedState}function Dk(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=js();r=be(c);var d=Oe(o,r,c);d!==null&&(Ls(d,o,c),Be(d,o,c)),o={cache:mc()},r.payload=o;return}o=o.return}}function Ok(r,o,c){var d=js();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},um(r)?Y0(o,c):(c=Nh(r,o,c,d),c!==null&&(Ls(c,r,d),X0(c,o,d)))}function K0(r,o,c){var d=js();id(r,o,c,d)}function id(r,o,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(um(r))Y0(o,g);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var A=o.lastRenderedState,M=b(A,c);if(g.hasEagerState=!0,g.eagerState=M,Mi(M,A))return ru(r,o,g,0),gn===null&&su(),!1}catch{}finally{}if(c=Nh(r,o,g,d),c!==null)return Ls(c,r,d),X0(c,o,d),!0}return!1}function gy(r,o,c,d){if(d={lane:2,revertLane:Ky(),action:d,hasEagerState:!1,eagerState:null,next:null},um(r)){if(o)throw Error(i(479))}else o=Nh(r,c,d,2),o!==null&&Ls(o,r,2)}function um(r){var o=r.alternate;return r===Ue||o!==null&&o===Ue}function Y0(r,o){on=zt=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function X0(r,o,c){if((c&4194048)!==0){var d=o.lanes;d&=r.pendingLanes,c|=d,o.lanes=c,_r(r,c)}}var hm={readContext:ii,use:uu,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},Q0={readContext:ii,use:uu,useCallback:function(r,o){return ai().memoizedState=[r,o===void 0?null:o],r},useContext:ii,useEffect:M0,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,cm(4194308,4,V0.bind(null,o,r),c)},useLayoutEffect:function(r,o){return cm(4194308,4,r,o)},useInsertionEffect:function(r,o){cm(4,2,r,o)},useMemo:function(r,o){var c=ai();o=o===void 0?null:o;var d=r();if(jn){St(!0);try{r()}finally{St(!1)}}return c.memoizedState=[d,o],d},useReducer:function(r,o,c){var d=ai();if(c!==void 0){var g=c(o);if(jn){St(!0);try{c(o)}finally{St(!1)}}}else g=o;return d.memoizedState=d.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},d.queue=r,r=r.dispatch=Ok.bind(null,Ue,r),[d.memoizedState,r]},useRef:function(r){var o=ai();return r={current:r},o.memoizedState=r},useState:function(r){r=fu(r);var o=r.queue,c=K0.bind(null,Ue,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:dy,useDeferredValue:function(r,o){var c=ai();return fy(c,r,o)},useTransition:function(){var r=fu(!1);return r=H0.bind(null,Ue,r.queue,!0,!1),ai().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var d=Ue,g=ai();if($t){if(c===void 0)throw Error(i(407));c=c()}else{if(c=o(),gn===null)throw Error(i(349));(Bt&124)!==0||Yh(d,o,c)}g.memoizedState=c;var b={value:c,getSnapshot:o};return g.queue=b,M0(rm.bind(null,d,b,r),[r]),d.flags|=2048,gu(9,lm(),sm.bind(null,d,b,c,o),null),c},useId:function(){var r=ai(),o=gn.identifierPrefix;if($t){var c=Ai,d=Rr;c=(d&~(1<<32-Lt(d)-1)).toString(32)+c,o=""+o+"R"+c,c=Li++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=us++,o=""+o+"r"+c.toString(32)+"";return r.memoizedState=o},useHostTransitionStatus:py,useFormState:pu,useActionState:pu,useOptimistic:function(r){var o=ai();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=gy.bind(null,Ue,!0,c),c.dispatch=o,[r,o]},useMemoCache:Wh,useCacheRefresh:function(){return ai().memoizedState=Dk.bind(null,Ue)}},Z0={readContext:ii,use:uu,useCallback:U0,useContext:ii,useEffect:P0,useImperativeHandle:F0,useInsertionEffect:j0,useLayoutEffect:L0,useMemo:z0,useReducer:hu,useRef:O0,useState:function(){return hu(Ds)},useDebugValue:dy,useDeferredValue:function(r,o){var c=wn();return B0(c,Qe.memoizedState,r,o)},useTransition:function(){var r=hu(Ds)[0],o=wn().memoizedState;return[typeof r=="boolean"?r:aa(r),o]},useSyncExternalStore:Kh,useId:W0,useHostTransitionStatus:py,useFormState:td,useActionState:td,useOptimistic:function(r,o){var c=wn();return Xh(c,Qe,r,o)},useMemoCache:Wh,useCacheRefresh:G0},Mk={readContext:ii,use:uu,useCallback:U0,useContext:ii,useEffect:P0,useImperativeHandle:F0,useInsertionEffect:j0,useLayoutEffect:L0,useMemo:z0,useReducer:Gh,useRef:O0,useState:function(){return Gh(Ds)},useDebugValue:dy,useDeferredValue:function(r,o){var c=wn();return Qe===null?fy(c,r,o):B0(c,Qe.memoizedState,r,o)},useTransition:function(){var r=Gh(Ds)[0],o=wn().memoizedState;return[typeof r=="boolean"?r:aa(r),o]},useSyncExternalStore:Kh,useId:W0,useHostTransitionStatus:py,useFormState:D0,useActionState:D0,useOptimistic:function(r,o){var c=wn();return Qe!==null?Xh(c,Qe,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:G0},yu=null,sd=0;function dm(r){var o=sd;return sd+=1,yu===null&&(yu=[]),k(yu,r,o)}function rd(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function fm(r,o){throw o.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function J0(r){var o=r._init;return o(r._payload)}function ex(r){function o(te,X){if(r){var se=te.deletions;se===null?(te.deletions=[X],te.flags|=16):se.push(X)}}function c(te,X){if(!r)return null;for(;X!==null;)o(te,X),X=X.sibling;return null}function d(te){for(var X=new Map;te!==null;)te.key!==null?X.set(te.key,te):X.set(te.index,te),te=te.sibling;return X}function g(te,X){return te=Ar(te,X),te.index=0,te.sibling=null,te}function b(te,X,se){return te.index=se,r?(se=te.alternate,se!==null?(se=se.index,se<X?(te.flags|=67108866,X):se):(te.flags|=67108866,X)):(te.flags|=1048576,X)}function A(te){return r&&te.alternate===null&&(te.flags|=67108866),te}function M(te,X,se,ve){return X===null||X.tag!==6?(X=Xo(se,te.mode,ve),X.return=te,X):(X=g(X,se),X.return=te,X)}function W(te,X,se,ve){var Ye=se.type;return Ye===C?ge(te,X,se.props.children,ve,se.key):X!==null&&(X.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===I&&J0(Ye)===X.type)?(X=g(X,se.props),rd(X,se),X.return=te,X):(X=ou(se.type,se.key,se.props,null,te.mode,ve),rd(X,se),X.return=te,X)}function oe(te,X,se,ve){return X===null||X.tag!==4||X.stateNode.containerInfo!==se.containerInfo||X.stateNode.implementation!==se.implementation?(X=Mh(se,te.mode,ve),X.return=te,X):(X=g(X,se.children||[]),X.return=te,X)}function ge(te,X,se,ve,Ye){return X===null||X.tag!==7?(X=Cr(se,te.mode,ve,Ye),X.return=te,X):(X=g(X,se),X.return=te,X)}function we(te,X,se){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Xo(""+X,te.mode,se),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case x:return se=ou(X.type,X.key,X.props,null,te.mode,se),rd(se,X),se.return=te,se;case T:return X=Mh(X,te.mode,se),X.return=te,X;case I:var ve=X._init;return X=ve(X._payload),we(te,X,se)}if(_e(X)||B(X))return X=Cr(X,te.mode,se,null),X.return=te,X;if(typeof X.then=="function")return we(te,dm(X),se);if(X.$$typeof===q)return we(te,Jo(te,X),se);fm(te,X)}return null}function le(te,X,se,ve){var Ye=X!==null?X.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ye!==null?null:M(te,X,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return se.key===Ye?W(te,X,se,ve):null;case T:return se.key===Ye?oe(te,X,se,ve):null;case I:return Ye=se._init,se=Ye(se._payload),le(te,X,se,ve)}if(_e(se)||B(se))return Ye!==null?null:ge(te,X,se,ve,null);if(typeof se.then=="function")return le(te,X,dm(se),ve);if(se.$$typeof===q)return le(te,X,Jo(te,se),ve);fm(te,se)}return null}function ue(te,X,se,ve,Ye){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return te=te.get(se)||null,M(X,te,""+ve,Ye);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case x:return te=te.get(ve.key===null?se:ve.key)||null,W(X,te,ve,Ye);case T:return te=te.get(ve.key===null?se:ve.key)||null,oe(X,te,ve,Ye);case I:var wt=ve._init;return ve=wt(ve._payload),ue(te,X,se,ve,Ye)}if(_e(ve)||B(ve))return te=te.get(se)||null,ge(X,te,ve,Ye,null);if(typeof ve.then=="function")return ue(te,X,se,dm(ve),Ye);if(ve.$$typeof===q)return ue(te,X,se,Jo(X,ve),Ye);fm(X,ve)}return null}function mt(te,X,se,ve){for(var Ye=null,wt=null,Ze=X,ot=X=0,yi=null;Ze!==null&&ot<se.length;ot++){Ze.index>ot?(yi=Ze,Ze=null):yi=Ze.sibling;var Wt=le(te,Ze,se[ot],ve);if(Wt===null){Ze===null&&(Ze=yi);break}r&&Ze&&Wt.alternate===null&&o(te,Ze),X=b(Wt,X,ot),wt===null?Ye=Wt:wt.sibling=Wt,wt=Wt,Ze=yi}if(ot===se.length)return c(te,Ze),$t&&Ja(te,ot),Ye;if(Ze===null){for(;ot<se.length;ot++)Ze=we(te,se[ot],ve),Ze!==null&&(X=b(Ze,X,ot),wt===null?Ye=Ze:wt.sibling=Ze,wt=Ze);return $t&&Ja(te,ot),Ye}for(Ze=d(Ze);ot<se.length;ot++)yi=ue(Ze,te,ot,se[ot],ve),yi!==null&&(r&&yi.alternate!==null&&Ze.delete(yi.key===null?ot:yi.key),X=b(yi,X,ot),wt===null?Ye=yi:wt.sibling=yi,wt=yi);return r&&Ze.forEach(function(yl){return o(te,yl)}),$t&&Ja(te,ot),Ye}function at(te,X,se,ve){if(se==null)throw Error(i(151));for(var Ye=null,wt=null,Ze=X,ot=X=0,yi=null,Wt=se.next();Ze!==null&&!Wt.done;ot++,Wt=se.next()){Ze.index>ot?(yi=Ze,Ze=null):yi=Ze.sibling;var yl=le(te,Ze,Wt.value,ve);if(yl===null){Ze===null&&(Ze=yi);break}r&&Ze&&yl.alternate===null&&o(te,Ze),X=b(yl,X,ot),wt===null?Ye=yl:wt.sibling=yl,wt=yl,Ze=yi}if(Wt.done)return c(te,Ze),$t&&Ja(te,ot),Ye;if(Ze===null){for(;!Wt.done;ot++,Wt=se.next())Wt=we(te,Wt.value,ve),Wt!==null&&(X=b(Wt,X,ot),wt===null?Ye=Wt:wt.sibling=Wt,wt=Wt);return $t&&Ja(te,ot),Ye}for(Ze=d(Ze);!Wt.done;ot++,Wt=se.next())Wt=ue(Ze,te,ot,Wt.value,ve),Wt!==null&&(r&&Wt.alternate!==null&&Ze.delete(Wt.key===null?ot:Wt.key),X=b(Wt,X,ot),wt===null?Ye=Wt:wt.sibling=Wt,wt=Wt);return r&&Ze.forEach(function(PN){return o(te,PN)}),$t&&Ja(te,ot),Ye}function cn(te,X,se,ve){if(typeof se=="object"&&se!==null&&se.type===C&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case x:e:{for(var Ye=se.key;X!==null;){if(X.key===Ye){if(Ye=se.type,Ye===C){if(X.tag===7){c(te,X.sibling),ve=g(X,se.props.children),ve.return=te,te=ve;break e}}else if(X.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===I&&J0(Ye)===X.type){c(te,X.sibling),ve=g(X,se.props),rd(ve,se),ve.return=te,te=ve;break e}c(te,X);break}else o(te,X);X=X.sibling}se.type===C?(ve=Cr(se.props.children,te.mode,ve,se.key),ve.return=te,te=ve):(ve=ou(se.type,se.key,se.props,null,te.mode,ve),rd(ve,se),ve.return=te,te=ve)}return A(te);case T:e:{for(Ye=se.key;X!==null;){if(X.key===Ye)if(X.tag===4&&X.stateNode.containerInfo===se.containerInfo&&X.stateNode.implementation===se.implementation){c(te,X.sibling),ve=g(X,se.children||[]),ve.return=te,te=ve;break e}else{c(te,X);break}else o(te,X);X=X.sibling}ve=Mh(se,te.mode,ve),ve.return=te,te=ve}return A(te);case I:return Ye=se._init,se=Ye(se._payload),cn(te,X,se,ve)}if(_e(se))return mt(te,X,se,ve);if(B(se)){if(Ye=B(se),typeof Ye!="function")throw Error(i(150));return se=Ye.call(se),at(te,X,se,ve)}if(typeof se.then=="function")return cn(te,X,dm(se),ve);if(se.$$typeof===q)return cn(te,X,Jo(te,se),ve);fm(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,X!==null&&X.tag===6?(c(te,X.sibling),ve=g(X,se),ve.return=te,te=ve):(c(te,X),ve=Xo(se,te.mode,ve),ve.return=te,te=ve),A(te)):c(te,X)}return function(te,X,se,ve){try{sd=0;var Ye=cn(te,X,se,ve);return yu=null,Ye}catch(Ze){if(Ze===tl||Ze===ro)throw Ze;var wt=ts(29,Ze,null,te.mode);return wt.lanes=ve,wt.return=te,wt}finally{}}}var _u=ex(!0),tx=ex(!1),or=fe(null),la=null;function nl(r){var o=r.alternate;pe(oi,oi.current&1),pe(or,r),la===null&&(o===null||rt.current!==null||o.memoizedState!==null)&&(la=r)}function nx(r){if(r.tag===22){if(pe(oi,oi.current),pe(or,r),la===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(la=r)}}else il()}function il(){pe(oi,oi.current),pe(or,or.current)}function oo(r){Re(or),la===r&&(la=null),Re(oi)}var oi=fe(0);function mm(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||a_(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function yy(r,o,c,d){o=r.memoizedState,c=c(d,o),c=c==null?o:y({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var _y={enqueueSetState:function(r,o,c){r=r._reactInternals;var d=js(),g=be(d);g.payload=o,c!=null&&(g.callback=c),o=Oe(r,g,d),o!==null&&(Ls(o,r,d),Be(o,r,d))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var d=js(),g=be(d);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=Oe(r,g,d),o!==null&&(Ls(o,r,d),Be(o,r,d))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=js(),d=be(c);d.tag=2,o!=null&&(d.callback=o),o=Oe(r,d,c),o!==null&&(Ls(o,r,c),Be(o,r,c))}};function ix(r,o,c,d,g,b,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,b,A):o.prototype&&o.prototype.isPureReactComponent?!Ga(c,d)||!Ga(g,b):!0}function sx(r,o,c,d){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==r&&_y.enqueueReplaceState(o,o.state,null)}function yc(r,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(r=r.defaultProps){c===o&&(c=y({},c));for(var g in r)c[g]===void 0&&(c[g]=r[g])}return c}var pm=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function rx(r){pm(r)}function ax(r){console.error(r)}function ox(r){pm(r)}function gm(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function lx(r,o,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function by(r,o,c){return c=be(c),c.tag=3,c.payload={element:null},c.callback=function(){gm(r,o)},c}function cx(r){return r=be(r),r.tag=3,r}function ux(r,o,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;r.payload=function(){return g(b)},r.callback=function(){lx(o,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){lx(o,c,d),typeof g!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function Pk(r,o,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&dc(o,c,g,!0),c=or.current,c!==null){switch(c.tag){case 13:return la===null?Hy():c.alternate===null&&kn===0&&(kn=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===qh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),qy(r,d,g)),!1;case 22:return c.flags|=65536,d===qh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),qy(r,d,g)),!1}throw Error(i(435,c.tag))}return qy(r,d,g),Hy(),!1}if($t)return o=or.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,d!==ia&&(r=Error(i(422),{cause:d}),Ns(Ji(r,c)))):(d!==ia&&(o=Error(i(423),{cause:d}),Ns(Ji(o,c))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,d=Ji(d,c),g=by(r.stateNode,d,g),$e(r,g),kn!==4&&(kn=2)),!1;var b=Error(i(520),{cause:d});if(b=Ji(b,c),dd===null?dd=[b]:dd.push(b),kn!==4&&(kn=2),o===null)return!0;d=Ji(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=g&-g,c.lanes|=r,r=by(c.stateNode,d,r),$e(c,r),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(cl===null||!cl.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=cx(g),ux(g,r,c,d),$e(c,g),!1}c=c.return}while(c!==null);return!1}var hx=Error(i(461)),pi=!1;function Ci(r,o,c,d){o.child=r===null?tx(o,null,c,d):_u(o,r.child,c,d)}function dx(r,o,c,d,g){c=c.render;var b=o.ref;if("ref"in d){var A={};for(var M in d)M!=="ref"&&(A[M]=d[M])}else A=d;return to(o),d=ds(r,o,c,A,b,g),M=ri(),r!==null&&!pi?(Vi(r,o,g),lo(r,o,g)):($t&&M&&Ph(o),o.flags|=1,Ci(r,o,d,g),o.child)}function fx(r,o,c,d,g){if(r===null){var b=c.type;return typeof b=="function"&&!Oh(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,mx(r,o,b,d,g)):(r=ou(c.type,null,d,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(b=r.child,!Cy(r,g)){var A=b.memoizedProps;if(c=c.compare,c=c!==null?c:Ga,c(A,d)&&r.ref===o.ref)return lo(r,o,g)}return o.flags|=1,r=Ar(b,d),r.ref=o.ref,r.return=o,o.child=r}function mx(r,o,c,d,g){if(r!==null){var b=r.memoizedProps;if(Ga(b,d)&&r.ref===o.ref)if(pi=!1,o.pendingProps=d=b,Cy(r,g))(r.flags&131072)!==0&&(pi=!0);else return o.lanes=r.lanes,lo(r,o,g)}return vy(r,o,c,d,g)}function px(r,o,c){var d=o.pendingProps,g=d.children,b=r!==null?r.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=b!==null?b.baseLanes|c:c,r!==null){for(g=o.child=r.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~d}else o.childLanes=0,o.child=null;return gx(r,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&lu(o,b!==null?b.cachePool:null),b!==null?Jt(o,b):vt(),nx(o);else return o.lanes=o.childLanes=536870912,gx(r,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(lu(o,b.cachePool),Jt(o,b),il(),o.memoizedState=null):(r!==null&&lu(o,null),vt(),il());return Ci(r,o,g,c),o.child}function gx(r,o,c,d){var g=$h();return g=g===null?null:{parent:In._currentValue,pool:g},o.memoizedState={baseLanes:c,cachePool:g},r!==null&&lu(o,null),vt(),nx(o),r!==null&&dc(r,o,d,!0),null}function ym(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function vy(r,o,c,d,g){return to(o),c=ds(r,o,c,d,void 0,g),d=ri(),r!==null&&!pi?(Vi(r,o,g),lo(r,o,g)):($t&&d&&Ph(o),o.flags|=1,Ci(r,o,c,g),o.child)}function yx(r,o,c,d,g,b){return to(o),o.updateQueue=null,c=Vn(o,d,c,g),ao(r),d=ri(),r!==null&&!pi?(Vi(r,o,b),lo(r,o,b)):($t&&d&&Ph(o),o.flags|=1,Ci(r,o,c,b),o.child)}function _x(r,o,c,d,g){if(to(o),o.stateNode===null){var b=Yo,A=c.contextType;typeof A=="object"&&A!==null&&(b=ii(A)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=_y,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},ee(o),A=c.contextType,b.context=typeof A=="object"&&A!==null?ii(A):Yo,b.state=o.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(yy(o,c,A,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&_y.enqueueReplaceState(b,b.state,null),nt(o,d,b,g),pt(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(r===null){b=o.stateNode;var M=o.memoizedProps,W=yc(c,M);b.props=W;var oe=b.context,ge=c.contextType;A=Yo,typeof ge=="object"&&ge!==null&&(A=ii(ge));var we=c.getDerivedStateFromProps;ge=typeof we=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=o.pendingProps!==M,ge||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||oe!==A)&&sx(o,b,d,A),Q=!1;var le=o.memoizedState;b.state=le,nt(o,d,b,g),pt(),oe=o.memoizedState,M||le!==oe||Q?(typeof we=="function"&&(yy(o,c,we,d),oe=o.memoizedState),(W=Q||ix(o,c,W,d,le,oe,A))?(ge||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=oe),b.props=d,b.state=oe,b.context=A,d=W):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,de(r,o),A=o.memoizedProps,ge=yc(c,A),b.props=ge,we=o.pendingProps,le=b.context,oe=c.contextType,W=Yo,typeof oe=="object"&&oe!==null&&(W=ii(oe)),M=c.getDerivedStateFromProps,(oe=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==we||le!==W)&&sx(o,b,d,W),Q=!1,le=o.memoizedState,b.state=le,nt(o,d,b,g),pt();var ue=o.memoizedState;A!==we||le!==ue||Q||r!==null&&r.dependencies!==null&&fc(r.dependencies)?(typeof M=="function"&&(yy(o,c,M,d),ue=o.memoizedState),(ge=Q||ix(o,c,ge,d,le,ue,W)||r!==null&&r.dependencies!==null&&fc(r.dependencies))?(oe||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ue,W),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ue,W)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===r.memoizedProps&&le===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&le===r.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ue),b.props=d,b.state=ue,b.context=W,d=ge):(typeof b.componentDidUpdate!="function"||A===r.memoizedProps&&le===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&le===r.memoizedState||(o.flags|=1024),d=!1)}return b=d,ym(r,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,r!==null&&d?(o.child=_u(o,r.child,null,g),o.child=_u(o,null,c,g)):Ci(r,o,c,g),o.memoizedState=b.state,r=o.child):r=lo(r,o,g),r}function bx(r,o,c,d){return hc(),o.flags|=256,Ci(r,o,c,d),o.child}var xy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ey(r){return{baseLanes:r,cachePool:nm()}}function wy(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=lr),r}function vx(r,o,c){var d=o.pendingProps,g=!1,b=(o.flags&128)!==0,A;if((A=b)||(A=r!==null&&r.memoizedState===null?!1:(oi.current&2)!==0),A&&(g=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if($t){if(g?nl(o):il(),$t){var M=pn,W;if(W=M){e:{for(W=M,M=rr;W.nodeType!==8;){if(!M){M=null;break e}if(W=Or(W.nextSibling),W===null){M=null;break e}}M=W}M!==null?(o.memoizedState={dehydrated:M,treeContext:Za!==null?{id:Rr,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},W=ts(18,null,null,0),W.stateNode=M,W.return=o,o.child=W,Yn=o,pn=null,W=!0):W=!1}W||Ir(o)}if(M=o.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return a_(M)?o.lanes=32:o.lanes=536870912,null;oo(o)}return M=d.children,d=d.fallback,g?(il(),g=o.mode,M=_m({mode:"hidden",children:M},g),d=Cr(d,g,c,null),M.return=o,d.return=o,M.sibling=d,o.child=M,g=o.child,g.memoizedState=Ey(c),g.childLanes=wy(r,A,c),o.memoizedState=xy,d):(nl(o),Ty(o,M))}if(W=r.memoizedState,W!==null&&(M=W.dehydrated,M!==null)){if(b)o.flags&256?(nl(o),o.flags&=-257,o=Sy(r,o,c)):o.memoizedState!==null?(il(),o.child=r.child,o.flags|=128,o=null):(il(),g=d.fallback,M=o.mode,d=_m({mode:"visible",children:d.children},M),g=Cr(g,M,c,null),g.flags|=2,d.return=o,g.return=o,d.sibling=g,o.child=d,_u(o,r.child,null,c),d=o.child,d.memoizedState=Ey(c),d.childLanes=wy(r,A,c),o.memoizedState=xy,o=g);else if(nl(o),a_(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var oe=A.dgst;A=oe,d=Error(i(419)),d.stack="",d.digest=A,Ns({value:d,source:null,stack:null}),o=Sy(r,o,c)}else if(pi||dc(r,o,c,!1),A=(c&r.childLanes)!==0,pi||A){if(A=gn,A!==null&&(d=c&-c,d=(d&42)!==0?1:$r(d),d=(d&(A.suspendedLanes|c))!==0?0:d,d!==0&&d!==W.retryLane))throw W.retryLane=d,Pi(r,d),Ls(A,r,d),hx;M.data==="$?"||Hy(),o=Sy(r,o,c)}else M.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=W.treeContext,pn=Or(M.nextSibling),Yn=o,$t=!0,na=null,rr=!1,r!==null&&(ji[ls++]=Rr,ji[ls++]=Ai,ji[ls++]=Za,Rr=r.id,Ai=r.overflow,Za=o),o=Ty(o,d.children),o.flags|=4096);return o}return g?(il(),g=d.fallback,M=o.mode,W=r.child,oe=W.sibling,d=Ar(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,oe!==null?g=Ar(oe,g):(g=Cr(g,M,c,null),g.flags|=2),g.return=o,d.return=o,d.sibling=g,o.child=d,d=g,g=o.child,M=r.child.memoizedState,M===null?M=Ey(c):(W=M.cachePool,W!==null?(oe=In._currentValue,W=W.parent!==oe?{parent:oe,pool:oe}:W):W=nm(),M={baseLanes:M.baseLanes|c,cachePool:W}),g.memoizedState=M,g.childLanes=wy(r,A,c),o.memoizedState=xy,d):(nl(o),c=r.child,r=c.sibling,c=Ar(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=c,o.memoizedState=null,c)}function Ty(r,o){return o=_m({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function _m(r,o){return r=ts(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Sy(r,o,c){return _u(o,r.child,null,c),r=Ty(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function xx(r,o,c){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o),Fh(r.return,o,c)}function Ay(r,o,c,d,g){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=g)}function Ex(r,o,c){var d=o.pendingProps,g=d.revealOrder,b=d.tail;if(Ci(r,o,d.children,c),d=oi.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&xx(r,c,o);else if(r.tag===19)xx(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(pe(oi,d),g){case"forwards":for(c=o.child,g=null;c!==null;)r=c.alternate,r!==null&&mm(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Ay(o,!1,g,c,b);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&mm(r)===null){o.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}Ay(o,!0,c,null,b);break;case"together":Ay(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function lo(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),ll|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(dc(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,c=Ar(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Ar(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function Cy(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&fc(r)))}function jk(r,o,c){switch(o.tag){case 3:Se(o,o.stateNode.containerInfo),sa(o,In,r.memoizedState.cache),hc();break;case 27:case 5:xe(o);break;case 4:Se(o,o.stateNode.containerInfo);break;case 10:sa(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(nl(o),o.flags|=128,null):(c&o.child.childLanes)!==0?vx(r,o,c):(nl(o),r=lo(r,o,c),r!==null?r.sibling:null);nl(o);break;case 19:var g=(r.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(dc(r,o,c,!1),d=(c&o.childLanes)!==0),g){if(d)return Ex(r,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),pe(oi,oi.current),d)break;return null;case 22:case 23:return o.lanes=0,px(r,o,c);case 24:sa(o,In,r.memoizedState.cache)}return lo(r,o,c)}function wx(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)pi=!0;else{if(!Cy(r,c)&&(o.flags&128)===0)return pi=!1,jk(r,o,c);pi=(r.flags&131072)!==0}else pi=!1,$t&&(o.flags&1048576)!==0&&Qf(o,Qo,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var d=o.elementType,g=d._init;if(d=g(d._payload),o.type=d,typeof d=="function")Oh(d)?(r=yc(d,r),o.tag=1,o=_x(null,o,d,r,c)):(o.tag=0,o=vy(null,o,d,r,c));else{if(d!=null){if(g=d.$$typeof,g===Z){o.tag=11,o=dx(null,o,d,r,c);break e}else if(g===F){o.tag=14,o=fx(null,o,d,r,c);break e}}throw o=Le(d)||d,Error(i(306,o,""))}}return o;case 0:return vy(r,o,o.type,o.pendingProps,c);case 1:return d=o.type,g=yc(d,o.pendingProps),_x(r,o,d,g,c);case 3:e:{if(Se(o,o.stateNode.containerInfo),r===null)throw Error(i(387));d=o.pendingProps;var b=o.memoizedState;g=b.element,de(r,o),nt(o,d,null,c);var A=o.memoizedState;if(d=A.cache,sa(o,In,d),d!==b.cache&&Uh(o,[In],c,!0),pt(),d=A.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=bx(r,o,d,c);break e}else if(d!==g){g=Ji(Error(i(424)),o),Ns(g),o=bx(r,o,d,c);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(pn=Or(r.firstChild),Yn=o,$t=!0,na=null,rr=!0,c=tx(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(hc(),d===g){o=lo(r,o,c);break e}Ci(r,o,d,c)}o=o.child}return o;case 26:return ym(r,o),r===null?(c=CE(o.type,null,o.pendingProps,null))?o.memoizedState=c:$t||(c=o.type,r=o.pendingProps,d=Dm(je.current).createElement(c),d[Nn]=o,d[Cn]=r,Ii(d,c,r),At(d),o.stateNode=d):o.memoizedState=CE(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return xe(o),r===null&&$t&&(d=o.stateNode=TE(o.type,o.pendingProps,je.current),Yn=o,rr=!0,g=pn,dl(o.type)?(o_=g,pn=Or(d.firstChild)):pn=g),Ci(r,o,o.pendingProps.children,c),ym(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&$t&&((g=d=pn)&&(d=uN(d,o.type,o.pendingProps,rr),d!==null?(o.stateNode=d,Yn=o,pn=Or(d.firstChild),rr=!1,g=!0):g=!1),g||Ir(o)),xe(o),g=o.type,b=o.pendingProps,A=r!==null?r.memoizedProps:null,d=b.children,i_(g,b)?d=null:A!==null&&i_(g,A)&&(o.flags|=32),o.memoizedState!==null&&(g=ds(r,o,en,null,null,c),xd._currentValue=g),ym(r,o),Ci(r,o,d,c),o.child;case 6:return r===null&&$t&&((r=c=pn)&&(c=hN(c,o.pendingProps,rr),c!==null?(o.stateNode=c,Yn=o,pn=null,r=!0):r=!1),r||Ir(o)),null;case 13:return vx(r,o,c);case 4:return Se(o,o.stateNode.containerInfo),d=o.pendingProps,r===null?o.child=_u(o,null,d,c):Ci(r,o,d,c),o.child;case 11:return dx(r,o,o.type,o.pendingProps,c);case 7:return Ci(r,o,o.pendingProps,c),o.child;case 8:return Ci(r,o,o.pendingProps.children,c),o.child;case 12:return Ci(r,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,sa(o,o.type,d.value),Ci(r,o,d.children,c),o.child;case 9:return g=o.type._context,d=o.pendingProps.children,to(o),g=ii(g),d=d(g),o.flags|=1,Ci(r,o,d,c),o.child;case 14:return fx(r,o,o.type,o.pendingProps,c);case 15:return mx(r,o,o.type,o.pendingProps,c);case 19:return Ex(r,o,c);case 31:return d=o.pendingProps,c=o.mode,d={mode:d.mode,children:d.children},r===null?(c=_m(d,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Ar(r.child,d),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return px(r,o,c);case 24:return to(o),d=ii(In),r===null?(g=$h(),g===null&&(g=gn,b=mc(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),o.memoizedState={parent:d,cache:g},ee(o),sa(o,In,g)):((r.lanes&c)!==0&&(de(r,o),nt(o,null,null,c),pt()),g=r.memoizedState,b=o.memoizedState,g.parent!==d?(g={parent:d,cache:d},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),sa(o,In,d)):(d=b.cache,sa(o,In,d),d!==g.cache&&Uh(o,[In],c,!0))),Ci(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function co(r){r.flags|=4}function Tx(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!DE(o)){if(o=or.current,o!==null&&((Bt&4194048)===Bt?la!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||o!==la))throw _=qh,pc;r.flags|=8192}}function bm(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?lt():536870912,r.lanes|=o,Eu|=o)}function ad(r,o){if(!$t)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Tn(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(o)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=d,r.childLanes=c,o}function Lk(r,o,c){var d=o.pendingProps;switch(jh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(o),null;case 1:return Tn(o),null;case 3:return c=o.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Nr(In),Tt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(uc(o)?co(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Zo())),Tn(o),null;case 26:return c=o.memoizedState,r===null?(co(o),c!==null?(Tn(o),Tx(o,c)):(Tn(o),o.flags&=-16777217)):c?c!==r.memoizedState?(co(o),Tn(o),Tx(o,c)):(Tn(o),o.flags&=-16777217):(r.memoizedProps!==d&&co(o),Tn(o),o.flags&=-16777217),null;case 27:ce(o),c=je.current;var g=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==d&&co(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return Tn(o),null}r=Ne.current,uc(o)?Lh(o):(r=TE(g,d,c),o.stateNode=r,co(o))}return Tn(o),null;case 5:if(ce(o),c=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&co(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return Tn(o),null}if(r=Ne.current,uc(o))Lh(o);else{switch(g=Dm(je.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}r[Nn]=o,r[Cn]=d;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=r;e:switch(Ii(r,c,d),c){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&co(o)}}return Tn(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==d&&co(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(i(166));if(r=je.current,uc(o)){if(r=o.stateNode,c=o.memoizedProps,d=null,g=Yn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}r[Nn]=o,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||yE(r.nodeValue,c)),r||Ir(o)}else r=Dm(r).createTextNode(d),r[Nn]=o,o.stateNode=r}return Tn(o),null;case 13:if(d=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=uc(o),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Nn]=o}else hc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tn(o),g=!1}else g=Zo(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(oo(o),o):(oo(o),null)}if(oo(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,r=r!==null&&r.memoizedState!==null,c){d=o.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)}return c!==r&&c&&(o.child.flags|=8192),bm(o,o.updateQueue),Tn(o),null;case 4:return Tt(),r===null&&Zy(o.stateNode.containerInfo),Tn(o),null;case 10:return Nr(o.type),Tn(o),null;case 19:if(Re(oi),g=o.memoizedState,g===null)return Tn(o),null;if(d=(o.flags&128)!==0,b=g.rendering,b===null)if(d)ad(g,!1);else{if(kn!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(b=mm(r),b!==null){for(o.flags|=128,ad(g,!1),r=b.updateQueue,o.updateQueue=r,bm(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)Xf(c,r),c=c.sibling;return pe(oi,oi.current&1|2),o.child}r=r.sibling}g.tail!==null&&Gt()>Em&&(o.flags|=128,d=!0,ad(g,!1),o.lanes=4194304)}else{if(!d)if(r=mm(b),r!==null){if(o.flags|=128,d=!0,r=r.updateQueue,o.updateQueue=r,bm(o,r),ad(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!$t)return Tn(o),null}else 2*Gt()-g.renderingStartTime>Em&&c!==536870912&&(o.flags|=128,d=!0,ad(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(r=g.last,r!==null?r.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Gt(),o.sibling=null,r=oi.current,pe(oi,d?r&1|2:r&1),o):(Tn(o),null);case 22:case 23:return oo(o),Vt(),d=o.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(Tn(o),o.subtreeFlags&6&&(o.flags|=8192)):Tn(o),c=o.updateQueue,c!==null&&bm(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),r!==null&&Re(so),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Nr(In),Tn(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Vk(r,o){switch(jh(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Nr(In),Tt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ce(o),null;case 13:if(oo(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));hc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Re(oi),null;case 4:return Tt(),null;case 10:return Nr(o.type),null;case 22:case 23:return oo(o),Vt(),r!==null&&Re(so),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Nr(In),null;case 25:return null;default:return null}}function Sx(r,o){switch(jh(o),o.tag){case 3:Nr(In),Tt();break;case 26:case 27:case 5:ce(o);break;case 4:Tt();break;case 13:oo(o);break;case 19:Re(oi);break;case 10:Nr(o.type);break;case 22:case 23:oo(o),Vt(),r!==null&&Re(so);break;case 24:Nr(In)}}function od(r,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&r)===r){d=void 0;var b=c.create,A=c.inst;d=b(),A.destroy=d}c=c.next}while(c!==g)}}catch(M){dn(o,o.return,M)}}function sl(r,o,c){try{var d=o.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&r)===r){var A=d.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,g=o;var W=c,oe=M;try{oe()}catch(ge){dn(g,W,ge)}}}d=d.next}while(d!==b)}}catch(ge){dn(o,o.return,ge)}}function Ax(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{ct(o,c)}catch(d){dn(r,r.return,d)}}}function Cx(r,o,c){c.props=yc(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){dn(r,o,d)}}function ld(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(g){dn(r,o,g)}}function ca(r,o){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){dn(r,o,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){dn(r,o,g)}else c.current=null}function Rx(r){var o=r.type,c=r.memoizedProps,d=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){dn(r,r.return,g)}}function Ry(r,o,c){try{var d=r.stateNode;rN(d,r.type,c,o),d[Cn]=o}catch(g){dn(r,r.return,g)}}function Ix(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&dl(r.type)||r.tag===4}function Iy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ix(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&dl(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ky(r,o,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Nm));else if(d!==4&&(d===27&&dl(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(ky(r,o,c),r=r.sibling;r!==null;)ky(r,o,c),r=r.sibling}function vm(r,o,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(d!==4&&(d===27&&dl(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(vm(r,o,c),r=r.sibling;r!==null;)vm(r,o,c),r=r.sibling}function kx(r){var o=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Ii(o,d,c),o[Nn]=r,o[Cn]=c}catch(b){dn(r,r.return,b)}}var uo=!1,Fn=!1,Ny=!1,Nx=typeof WeakSet=="function"?WeakSet:Set,gi=null;function Fk(r,o){if(r=r.containerInfo,t_=Vm,r=wh(r),iu(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var A=0,M=-1,W=-1,oe=0,ge=0,we=r,le=null;t:for(;;){for(var ue;we!==c||g!==0&&we.nodeType!==3||(M=A+g),we!==b||d!==0&&we.nodeType!==3||(W=A+d),we.nodeType===3&&(A+=we.nodeValue.length),(ue=we.firstChild)!==null;)le=we,we=ue;for(;;){if(we===r)break t;if(le===c&&++oe===g&&(M=A),le===b&&++ge===d&&(W=A),(ue=we.nextSibling)!==null)break;we=le,le=we.parentNode}we=ue}c=M===-1||W===-1?null:{start:M,end:W}}else c=null}c=c||{start:0,end:0}}else c=null;for(n_={focusedElem:r,selectionRange:c},Vm=!1,gi=o;gi!==null;)if(o=gi,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,gi=r;else for(;gi!==null;){switch(o=gi,b=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=o,g=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var mt=yc(c.type,g,c.elementType===c.type);r=d.getSnapshotBeforeUpdate(mt,b),d.__reactInternalSnapshotBeforeUpdate=r}catch(at){dn(c,c.return,at)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)r_(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":r_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,gi=r;break}gi=o.return}}function Dx(r,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:rl(r,c),d&4&&od(5,c);break;case 1:if(rl(r,c),d&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(A){dn(c,c.return,A)}else{var g=yc(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(g,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){dn(c,c.return,A)}}d&64&&Ax(c),d&512&&ld(c,c.return);break;case 3:if(rl(r,c),d&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{ct(r,o)}catch(A){dn(c,c.return,A)}}break;case 27:o===null&&d&4&&kx(c);case 26:case 5:rl(r,c),o===null&&d&4&&Rx(c),d&512&&ld(c,c.return);break;case 12:rl(r,c);break;case 13:rl(r,c),d&4&&Px(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=Kk.bind(null,c),dN(r,c))));break;case 22:if(d=c.memoizedState!==null||uo,!d){o=o!==null&&o.memoizedState!==null||Fn,g=uo;var b=Fn;uo=d,(Fn=o)&&!b?al(r,c,(c.subtreeFlags&8772)!==0):rl(r,c),uo=g,Fn=b}break;case 30:break;default:rl(r,c)}}function Ox(r){var o=r.alternate;o!==null&&(r.alternate=null,Ox(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Wr(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var xn=null,fs=!1;function ho(r,o,c){for(c=c.child;c!==null;)Mx(r,o,c),c=c.sibling}function Mx(r,o,c){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ze,c)}catch{}switch(c.tag){case 26:Fn||ca(c,o),ho(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Fn||ca(c,o);var d=xn,g=fs;dl(c.type)&&(xn=c.stateNode,fs=!1),ho(r,o,c),yd(c.stateNode),xn=d,fs=g;break;case 5:Fn||ca(c,o);case 6:if(d=xn,g=fs,xn=null,ho(r,o,c),xn=d,fs=g,xn!==null)if(fs)try{(xn.nodeType===9?xn.body:xn.nodeName==="HTML"?xn.ownerDocument.body:xn).removeChild(c.stateNode)}catch(b){dn(c,o,b)}else try{xn.removeChild(c.stateNode)}catch(b){dn(c,o,b)}break;case 18:xn!==null&&(fs?(r=xn,EE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Sd(r)):EE(xn,c.stateNode));break;case 4:d=xn,g=fs,xn=c.stateNode.containerInfo,fs=!0,ho(r,o,c),xn=d,fs=g;break;case 0:case 11:case 14:case 15:Fn||sl(2,c,o),Fn||sl(4,c,o),ho(r,o,c);break;case 1:Fn||(ca(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Cx(c,o,d)),ho(r,o,c);break;case 21:ho(r,o,c);break;case 22:Fn=(d=Fn)||c.memoizedState!==null,ho(r,o,c),Fn=d;break;default:ho(r,o,c)}}function Px(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Sd(r)}catch(c){dn(o,o.return,c)}}function Uk(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Nx),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Nx),o;default:throw Error(i(435,r.tag))}}function Dy(r,o){var c=Uk(r);o.forEach(function(d){var g=Yk.bind(null,r,d);c.has(d)||(c.add(d),d.then(g,g))})}function Os(r,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],b=r,A=o,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(dl(M.type)){xn=M.stateNode,fs=!1;break e}break;case 5:xn=M.stateNode,fs=!1;break e;case 3:case 4:xn=M.stateNode.containerInfo,fs=!0;break e}M=M.return}if(xn===null)throw Error(i(160));Mx(b,A,g),xn=null,fs=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)jx(o,r),o=o.sibling}var Dr=null;function jx(r,o){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Os(o,r),Ms(r),d&4&&(sl(3,r,r.return),od(3,r),sl(5,r,r.return));break;case 1:Os(o,r),Ms(r),d&512&&(Fn||c===null||ca(c,c.return)),d&64&&uo&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Dr;if(Os(o,r),Ms(r),d&512&&(Fn||c===null||ca(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){e:{d=r.type,c=r.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[$s]||b[Nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),Ii(b,d,c),b[Nn]=r,At(b),d=b;break e;case"link":var A=kE("link","href",g).get(d+(c.href||""));if(A){for(var M=0;M<A.length;M++)if(b=A[M],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(M,1);break t}}b=g.createElement(d),Ii(b,d,c),g.head.appendChild(b);break;case"meta":if(A=kE("meta","content",g).get(d+(c.content||""))){for(M=0;M<A.length;M++)if(b=A[M],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(M,1);break t}}b=g.createElement(d),Ii(b,d,c),g.head.appendChild(b);break;default:throw Error(i(468,d))}b[Nn]=r,At(b),d=b}r.stateNode=d}else NE(g,r.type,r.stateNode);else r.stateNode=IE(g,d,r.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?NE(g,r.type,r.stateNode):IE(g,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Ry(r,r.memoizedProps,c.memoizedProps)}break;case 27:Os(o,r),Ms(r),d&512&&(Fn||c===null||ca(c,c.return)),c!==null&&d&4&&Ry(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Os(o,r),Ms(r),d&512&&(Fn||c===null||ca(c,c.return)),r.flags&32){g=r.stateNode;try{ei(g,"")}catch(ue){dn(r,r.return,ue)}}d&4&&r.stateNode!=null&&(g=r.memoizedProps,Ry(r,g,c!==null?c.memoizedProps:g)),d&1024&&(Ny=!0);break;case 6:if(Os(o,r),Ms(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(ue){dn(r,r.return,ue)}}break;case 3:if(Pm=null,g=Dr,Dr=Om(o.containerInfo),Os(o,r),Dr=g,Ms(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Sd(o.containerInfo)}catch(ue){dn(r,r.return,ue)}Ny&&(Ny=!1,Lx(r));break;case 4:d=Dr,Dr=Om(r.stateNode.containerInfo),Os(o,r),Ms(r),Dr=d;break;case 12:Os(o,r),Ms(r);break;case 13:Os(o,r),Ms(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Vy=Gt()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Dy(r,d)));break;case 22:g=r.memoizedState!==null;var W=c!==null&&c.memoizedState!==null,oe=uo,ge=Fn;if(uo=oe||g,Fn=ge||W,Os(o,r),Fn=ge,uo=oe,Ms(r),d&8192)e:for(o=r.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||W||uo||Fn||_c(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){W=c=o;try{if(b=W.stateNode,g)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=W.stateNode;var we=W.memoizedProps.style,le=we!=null&&we.hasOwnProperty("display")?we.display:null;M.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ue){dn(W,W.return,ue)}}}else if(o.tag===6){if(c===null){W=o;try{W.stateNode.nodeValue=g?"":W.memoizedProps}catch(ue){dn(W,W.return,ue)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Dy(r,c))));break;case 19:Os(o,r),Ms(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Dy(r,d)));break;case 30:break;case 21:break;default:Os(o,r),Ms(r)}}function Ms(r){var o=r.flags;if(o&2){try{for(var c,d=r.return;d!==null;){if(Ix(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,b=Iy(r);vm(r,b,g);break;case 5:var A=c.stateNode;c.flags&32&&(ei(A,""),c.flags&=-33);var M=Iy(r);vm(r,M,A);break;case 3:case 4:var W=c.stateNode.containerInfo,oe=Iy(r);ky(r,oe,W);break;default:throw Error(i(161))}}catch(ge){dn(r,r.return,ge)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Lx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;Lx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function rl(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Dx(r,o.alternate,o),o=o.sibling}function _c(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:sl(4,o,o.return),_c(o);break;case 1:ca(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Cx(o,o.return,c),_c(o);break;case 27:yd(o.stateNode);case 26:case 5:ca(o,o.return),_c(o);break;case 22:o.memoizedState===null&&_c(o);break;case 30:_c(o);break;default:_c(o)}r=r.sibling}}function al(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,g=r,b=o,A=b.flags;switch(b.tag){case 0:case 11:case 15:al(g,b,c),od(4,b);break;case 1:if(al(g,b,c),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){dn(d,d.return,oe)}if(d=b,g=d.updateQueue,g!==null){var M=d.stateNode;try{var W=g.shared.hiddenCallbacks;if(W!==null)for(g.shared.hiddenCallbacks=null,g=0;g<W.length;g++)gt(W[g],M)}catch(oe){dn(d,d.return,oe)}}c&&A&64&&Ax(b),ld(b,b.return);break;case 27:kx(b);case 26:case 5:al(g,b,c),c&&d===null&&A&4&&Rx(b),ld(b,b.return);break;case 12:al(g,b,c);break;case 13:al(g,b,c),c&&A&4&&Px(g,b);break;case 22:b.memoizedState===null&&al(g,b,c),ld(b,b.return);break;case 30:break;default:al(g,b,c)}o=o.sibling}}function Oy(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&el(c))}function My(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&el(r))}function ua(r,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Vx(r,o,c,d),o=o.sibling}function Vx(r,o,c,d){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ua(r,o,c,d),g&2048&&od(9,o);break;case 1:ua(r,o,c,d);break;case 3:ua(r,o,c,d),g&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&el(r)));break;case 12:if(g&2048){ua(r,o,c,d),r=o.stateNode;try{var b=o.memoizedProps,A=b.id,M=b.onPostCommit;typeof M=="function"&&M(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(W){dn(o,o.return,W)}}else ua(r,o,c,d);break;case 13:ua(r,o,c,d);break;case 23:break;case 22:b=o.stateNode,A=o.alternate,o.memoizedState!==null?b._visibility&2?ua(r,o,c,d):cd(r,o):b._visibility&2?ua(r,o,c,d):(b._visibility|=2,bu(r,o,c,d,(o.subtreeFlags&10256)!==0)),g&2048&&Oy(A,o);break;case 24:ua(r,o,c,d),g&2048&&My(o.alternate,o);break;default:ua(r,o,c,d)}}function bu(r,o,c,d,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=r,A=o,M=c,W=d,oe=A.flags;switch(A.tag){case 0:case 11:case 15:bu(b,A,M,W,g),od(8,A);break;case 23:break;case 22:var ge=A.stateNode;A.memoizedState!==null?ge._visibility&2?bu(b,A,M,W,g):cd(b,A):(ge._visibility|=2,bu(b,A,M,W,g)),g&&oe&2048&&Oy(A.alternate,A);break;case 24:bu(b,A,M,W,g),g&&oe&2048&&My(A.alternate,A);break;default:bu(b,A,M,W,g)}o=o.sibling}}function cd(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,d=o,g=d.flags;switch(d.tag){case 22:cd(c,d),g&2048&&Oy(d.alternate,d);break;case 24:cd(c,d),g&2048&&My(d.alternate,d);break;default:cd(c,d)}o=o.sibling}}var ud=8192;function vu(r){if(r.subtreeFlags&ud)for(r=r.child;r!==null;)Fx(r),r=r.sibling}function Fx(r){switch(r.tag){case 26:vu(r),r.flags&ud&&r.memoizedState!==null&&SN(Dr,r.memoizedState,r.memoizedProps);break;case 5:vu(r);break;case 3:case 4:var o=Dr;Dr=Om(r.stateNode.containerInfo),vu(r),Dr=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=ud,ud=16777216,vu(r),ud=o):vu(r));break;default:vu(r)}}function Ux(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function hd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];gi=d,Bx(d,r)}Ux(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zx(r),r=r.sibling}function zx(r){switch(r.tag){case 0:case 11:case 15:hd(r),r.flags&2048&&sl(9,r,r.return);break;case 3:hd(r);break;case 12:hd(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,xm(r)):hd(r);break;default:hd(r)}}function xm(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];gi=d,Bx(d,r)}Ux(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:sl(8,o,o.return),xm(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,xm(o));break;default:xm(o)}r=r.sibling}}function Bx(r,o){for(;gi!==null;){var c=gi;switch(c.tag){case 0:case 11:case 15:sl(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:el(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,gi=d;else e:for(c=r;gi!==null;){d=gi;var g=d.sibling,b=d.return;if(Ox(d),d===c){gi=null;break e}if(g!==null){g.return=b,gi=g;break e}gi=b}}}var zk={getCacheForType:function(r){var o=ii(In),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c}},Bk=typeof WeakMap=="function"?WeakMap:Map,tn=0,gn=null,Ct=null,Bt=0,nn=0,Ps=null,ol=!1,xu=!1,Py=!1,fo=0,kn=0,ll=0,bc=0,jy=0,lr=0,Eu=0,dd=null,ms=null,Ly=!1,Vy=0,Em=1/0,wm=null,cl=null,Ri=0,ul=null,wu=null,Tu=0,Fy=0,Uy=null,Hx=null,fd=0,zy=null;function js(){if((tn&2)!==0&&Bt!==0)return Bt&-Bt;if(G.T!==null){var r=cs;return r!==0?r:Ky()}return qr()}function $x(){lr===0&&(lr=(Bt&536870912)===0||$t?tt():536870912);var r=or.current;return r!==null&&(r.flags|=32),lr}function Ls(r,o,c){(r===gn&&(nn===2||nn===9)||r.cancelPendingCommit!==null)&&(Su(r,0),hl(r,Bt,lr,!1)),Ft(r,c),((tn&2)===0||r!==gn)&&(r===gn&&((tn&2)===0&&(bc|=c),kn===4&&hl(r,Bt,lr,!1)),ha(r))}function qx(r,o,c){if((tn&6)!==0)throw Error(i(327));var d=!c&&(o&124)===0&&(o&r.expiredLanes)===0||Pe(r,o),g=d?qk(r,o):$y(r,o,!0),b=d;do{if(g===0){xu&&!d&&hl(r,o,0,!1);break}else{if(c=r.current.alternate,b&&!Hk(c)){g=$y(r,o,!1),b=!1;continue}if(g===2){if(b=o,r.errorRecoveryDisabledLanes&b)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var M=r;g=dd;var W=M.current.memoizedState.isDehydrated;if(W&&(Su(M,A).flags|=256),A=$y(M,A,!1),A!==2){if(Py&&!W){M.errorRecoveryDisabledLanes|=b,bc|=b,g=4;break e}b=ms,ms=g,b!==null&&(ms===null?ms=b:ms.push.apply(ms,b))}g=A}if(b=!1,g!==2)continue}}if(g===1){Su(r,0),hl(r,o,0,!0);break}e:{switch(d=r,b=g,b){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:hl(d,o,lr,!ol);break e;case 2:ms=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=Vy+300-Gt(),10<g)){if(hl(d,o,lr,!ol),De(d,0,!0)!==0)break e;d.timeoutHandle=vE(Wx.bind(null,d,c,ms,wm,Ly,o,lr,bc,Eu,ol,b,2,-0,0),g);break e}Wx(d,c,ms,wm,Ly,o,lr,bc,Eu,ol,b,0,-0,0)}}break}while(!0);ha(r)}function Wx(r,o,c,d,g,b,A,M,W,oe,ge,we,le,ue){if(r.timeoutHandle=-1,we=o.subtreeFlags,(we&8192||(we&16785408)===16785408)&&(vd={stylesheets:null,count:0,unsuspend:TN},Fx(o),we=AN(),we!==null)){r.cancelPendingCommit=we(Jx.bind(null,r,o,b,c,d,g,A,M,W,ge,1,le,ue)),hl(r,b,A,!oe);return}Jx(r,o,b,c,d,g,A,M,W)}function Hk(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],b=g.getSnapshot;g=g.value;try{if(!Mi(b(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function hl(r,o,c,d){o&=~jy,o&=~bc,r.suspendedLanes|=o,r.pingedLanes&=~o,d&&(r.warmLanes|=o),d=r.expirationTimes;for(var g=o;0<g;){var b=31-Lt(g),A=1<<b;d[b]=-1,g&=~A}c!==0&&xi(r,c,o)}function Tm(){return(tn&6)===0?(md(0),!1):!0}function By(){if(Ct!==null){if(nn===0)var r=Ct.return;else r=Ct,kr=eo=null,ar(r),yu=null,sd=0,r=Ct;for(;r!==null;)Sx(r.alternate,r),r=r.return;Ct=null}}function Su(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,oN(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),By(),gn=r,Ct=c=Ar(r.current,null),Bt=o,nn=0,Ps=null,ol=!1,xu=Pe(r,o),Py=!1,Eu=lr=jy=bc=ll=kn=0,ms=dd=null,Ly=!1,(o&8)!==0&&(o|=o&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=o;0<d;){var g=31-Lt(d),b=1<<g;o|=r[g],d&=~b}return fo=o,su(),c}function Gx(r,o){Ue=null,G.H=hm,o===tl||o===ro?(o=w(),nn=3):o===pc?(o=w(),nn=4):nn=o===hx?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ps=o,Ct===null&&(kn=1,gm(r,Ji(o,r.current)))}function Kx(){var r=G.H;return G.H=hm,r===null?hm:r}function Yx(){var r=G.A;return G.A=zk,r}function Hy(){kn=4,ol||(Bt&4194048)!==Bt&&or.current!==null||(xu=!0),(ll&134217727)===0&&(bc&134217727)===0||gn===null||hl(gn,Bt,lr,!1)}function $y(r,o,c){var d=tn;tn|=2;var g=Kx(),b=Yx();(gn!==r||Bt!==o)&&(wm=null,Su(r,o)),o=!1;var A=kn;e:do try{if(nn!==0&&Ct!==null){var M=Ct,W=Ps;switch(nn){case 8:By(),A=6;break e;case 3:case 2:case 9:case 6:or.current===null&&(o=!0);var oe=nn;if(nn=0,Ps=null,Au(r,M,W,oe),c&&xu){A=0;break e}break;default:oe=nn,nn=0,Ps=null,Au(r,M,W,oe)}}$k(),A=kn;break}catch(ge){Gx(r,ge)}while(!0);return o&&r.shellSuspendCounter++,kr=eo=null,tn=d,G.H=g,G.A=b,Ct===null&&(gn=null,Bt=0,su()),A}function $k(){for(;Ct!==null;)Xx(Ct)}function qk(r,o){var c=tn;tn|=2;var d=Kx(),g=Yx();gn!==r||Bt!==o?(wm=null,Em=Gt()+500,Su(r,o)):xu=Pe(r,o);e:do try{if(nn!==0&&Ct!==null){o=Ct;var b=Ps;t:switch(nn){case 1:nn=0,Ps=null,Au(r,o,b,1);break;case 2:case 9:if(im(b)){nn=0,Ps=null,Qx(o);break}o=function(){nn!==2&&nn!==9||gn!==r||(nn=7),ha(r)},b.then(o,o);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:im(b)?(nn=0,Ps=null,Qx(o)):(nn=0,Ps=null,Au(r,o,b,7));break;case 5:var A=null;switch(Ct.tag){case 26:A=Ct.memoizedState;case 5:case 27:var M=Ct;if(!A||DE(A)){nn=0,Ps=null;var W=M.sibling;if(W!==null)Ct=W;else{var oe=M.return;oe!==null?(Ct=oe,Sm(oe)):Ct=null}break t}}nn=0,Ps=null,Au(r,o,b,5);break;case 6:nn=0,Ps=null,Au(r,o,b,6);break;case 8:By(),kn=6;break e;default:throw Error(i(462))}}Wk();break}catch(ge){Gx(r,ge)}while(!0);return kr=eo=null,G.H=d,G.A=g,tn=c,Ct!==null?0:(gn=null,Bt=0,su(),kn)}function Wk(){for(;Ct!==null&&!st();)Xx(Ct)}function Xx(r){var o=wx(r.alternate,r,fo);r.memoizedProps=r.pendingProps,o===null?Sm(r):Ct=o}function Qx(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=yx(c,o,o.pendingProps,o.type,void 0,Bt);break;case 11:o=yx(c,o,o.pendingProps,o.type.render,o.ref,Bt);break;case 5:ar(o);default:Sx(c,o),o=Ct=Xf(o,fo),o=wx(c,o,fo)}r.memoizedProps=r.pendingProps,o===null?Sm(r):Ct=o}function Au(r,o,c,d){kr=eo=null,ar(o),yu=null,sd=0;var g=o.return;try{if(Pk(r,g,o,c,Bt)){kn=1,gm(r,Ji(c,r.current)),Ct=null;return}}catch(b){if(g!==null)throw Ct=g,b;kn=1,gm(r,Ji(c,r.current)),Ct=null;return}o.flags&32768?($t||d===1?r=!0:xu||(Bt&536870912)!==0?r=!1:(ol=r=!0,(d===2||d===9||d===3||d===6)&&(d=or.current,d!==null&&d.tag===13&&(d.flags|=16384))),Zx(o,r)):Sm(o)}function Sm(r){var o=r;do{if((o.flags&32768)!==0){Zx(o,ol);return}r=o.return;var c=Lk(o.alternate,o,fo);if(c!==null){Ct=c;return}if(o=o.sibling,o!==null){Ct=o;return}Ct=o=r}while(o!==null);kn===0&&(kn=5)}function Zx(r,o){do{var c=Vk(r.alternate,r);if(c!==null){c.flags&=32767,Ct=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Ct=r;return}Ct=r=c}while(r!==null);kn=6,Ct=null}function Jx(r,o,c,d,g,b,A,M,W){r.cancelPendingCommit=null;do Am();while(Ri!==0);if((tn&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(b=o.lanes|o.childLanes,b|=kh,hi(r,c,b,A,M,W),r===gn&&(Ct=gn=null,Bt=0),wu=o,ul=r,Tu=c,Fy=b,Uy=g,Hx=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Xk(xs,function(){return sE(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=G.T,G.T=null,g=ie.p,ie.p=2,A=tn,tn|=4;try{Fk(r,o,c)}finally{tn=A,ie.p=g,G.T=d}}Ri=1,eE(),tE(),nE()}}function eE(){if(Ri===1){Ri=0;var r=ul,o=wu,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var d=ie.p;ie.p=2;var g=tn;tn|=4;try{jx(o,r);var b=n_,A=wh(r.containerInfo),M=b.focusedElem,W=b.selectionRange;if(A!==M&&M&&M.ownerDocument&&$f(M.ownerDocument.documentElement,M)){if(W!==null&&iu(M)){var oe=W.start,ge=W.end;if(ge===void 0&&(ge=oe),"selectionStart"in M)M.selectionStart=oe,M.selectionEnd=Math.min(ge,M.value.length);else{var we=M.ownerDocument||document,le=we&&we.defaultView||window;if(le.getSelection){var ue=le.getSelection(),mt=M.textContent.length,at=Math.min(W.start,mt),cn=W.end===void 0?at:Math.min(W.end,mt);!ue.extend&&at>cn&&(A=cn,cn=at,at=A);var te=Hf(M,at),X=Hf(M,cn);if(te&&X&&(ue.rangeCount!==1||ue.anchorNode!==te.node||ue.anchorOffset!==te.offset||ue.focusNode!==X.node||ue.focusOffset!==X.offset)){var se=we.createRange();se.setStart(te.node,te.offset),ue.removeAllRanges(),at>cn?(ue.addRange(se),ue.extend(X.node,X.offset)):(se.setEnd(X.node,X.offset),ue.addRange(se))}}}}for(we=[],ue=M;ue=ue.parentNode;)ue.nodeType===1&&we.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<we.length;M++){var ve=we[M];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Vm=!!t_,n_=t_=null}finally{tn=g,ie.p=d,G.T=c}}r.current=o,Ri=2}}function tE(){if(Ri===2){Ri=0;var r=ul,o=wu,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var d=ie.p;ie.p=2;var g=tn;tn|=4;try{Dx(r,o.alternate,o)}finally{tn=g,ie.p=d,G.T=c}}Ri=3}}function nE(){if(Ri===4||Ri===3){Ri=0,yn();var r=ul,o=wu,c=Tu,d=Hx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ri=5:(Ri=0,wu=ul=null,iE(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(cl=null),Po(c),o=o.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ze,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=G.T,g=ie.p,ie.p=2,G.T=null;try{for(var b=r.onRecoverableError,A=0;A<d.length;A++){var M=d[A];b(M.value,{componentStack:M.stack})}}finally{G.T=o,ie.p=g}}(Tu&3)!==0&&Am(),ha(r),g=r.pendingLanes,(c&4194090)!==0&&(g&42)!==0?r===zy?fd++:(fd=0,zy=r):fd=0,md(0)}}function iE(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,el(o)))}function Am(r){return eE(),tE(),nE(),sE()}function sE(){if(Ri!==5)return!1;var r=ul,o=Fy;Fy=0;var c=Po(Tu),d=G.T,g=ie.p;try{ie.p=32>c?32:c,G.T=null,c=Uy,Uy=null;var b=ul,A=Tu;if(Ri=0,wu=ul=null,Tu=0,(tn&6)!==0)throw Error(i(331));var M=tn;if(tn|=4,zx(b.current),Vx(b,b.current,A,c),tn=M,md(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ze,b)}catch{}return!0}finally{ie.p=g,G.T=d,iE(r,o)}}function rE(r,o,c){o=Ji(c,o),o=by(r.stateNode,o,2),r=Oe(r,o,2),r!==null&&(Ft(r,2),ha(r))}function dn(r,o,c){if(r.tag===3)rE(r,r,c);else for(;o!==null;){if(o.tag===3){rE(o,r,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(cl===null||!cl.has(d))){r=Ji(c,r),c=cx(2),d=Oe(o,c,2),d!==null&&(ux(c,d,o,r),Ft(d,2),ha(d));break}}o=o.return}}function qy(r,o,c){var d=r.pingCache;if(d===null){d=r.pingCache=new Bk;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(c)||(Py=!0,g.add(c),r=Gk.bind(null,r,o,c),o.then(r,r))}function Gk(r,o,c){var d=r.pingCache;d!==null&&d.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,gn===r&&(Bt&c)===c&&(kn===4||kn===3&&(Bt&62914560)===Bt&&300>Gt()-Vy?(tn&2)===0&&Su(r,0):jy|=c,Eu===Bt&&(Eu=0)),ha(r)}function aE(r,o){o===0&&(o=lt()),r=Pi(r,o),r!==null&&(Ft(r,o),ha(r))}function Kk(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),aE(r,c)}function Yk(r,o){var c=0;switch(r.tag){case 13:var d=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(o),aE(r,c)}function Xk(r,o){return He(r,o)}var Cm=null,Cu=null,Wy=!1,Rm=!1,Gy=!1,vc=0;function ha(r){r!==Cu&&r.next===null&&(Cu===null?Cm=Cu=r:Cu=Cu.next=r),Rm=!0,Wy||(Wy=!0,Zk())}function md(r,o){if(!Gy&&Rm){Gy=!0;do for(var c=!1,d=Cm;d!==null;){if(r!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var A=d.suspendedLanes,M=d.pingedLanes;b=(1<<31-Lt(42|r)+1)-1,b&=g&~(A&~M),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,uE(d,b))}else b=Bt,b=De(d,d===gn?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Pe(d,b)||(c=!0,uE(d,b));d=d.next}while(c);Gy=!1}}function Qk(){oE()}function oE(){Rm=Wy=!1;var r=0;vc!==0&&(aN()&&(r=vc),vc=0);for(var o=Gt(),c=null,d=Cm;d!==null;){var g=d.next,b=lE(d,o);b===0?(d.next=null,c===null?Cm=g:c.next=g,g===null&&(Cu=c)):(c=d,(r!==0||(b&3)!==0)&&(Rm=!0)),d=g}md(r)}function lE(r,o){for(var c=r.suspendedLanes,d=r.pingedLanes,g=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var A=31-Lt(b),M=1<<A,W=g[A];W===-1?((M&c)===0||(M&d)!==0)&&(g[A]=et(M,o)):W<=o&&(r.expiredLanes|=M),b&=~M}if(o=gn,c=Bt,c=De(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===o&&(nn===2||nn===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Je(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Pe(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(d!==null&&Je(d),Po(c)){case 2:case 8:c=Bs;break;case 32:c=xs;break;case 268435456:c=Es;break;default:c=xs}return d=cE.bind(null,r),c=He(c,d),r.callbackPriority=o,r.callbackNode=c,o}return d!==null&&d!==null&&Je(d),r.callbackPriority=2,r.callbackNode=null,2}function cE(r,o){if(Ri!==0&&Ri!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Am()&&r.callbackNode!==c)return null;var d=Bt;return d=De(r,r===gn?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(qx(r,d,o),lE(r,Gt()),r.callbackNode!=null&&r.callbackNode===c?cE.bind(null,r):null)}function uE(r,o){if(Am())return null;qx(r,o,!0)}function Zk(){lN(function(){(tn&6)!==0?He(Yi,Qk):oE()})}function Ky(){return vc===0&&(vc=tt()),vc}function hE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Uo(""+r)}function dE(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function Jk(r,o,c,d,g){if(o==="submit"&&c&&c.stateNode===g){var b=hE((g[Cn]||null).action),A=d.submitter;A&&(o=(o=A[Cn]||null)?hE(o.formAction):A.getAttribute("formAction"),o!==null&&(b=o,A=null));var M=new Kr("action","action",null,d,g);r.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(vc!==0){var W=A?dE(g,A):new FormData(g);my(c,{pending:!0,data:W,method:g.method,action:b},null,W)}}else typeof b=="function"&&(M.preventDefault(),W=A?dE(g,A):new FormData(g),my(c,{pending:!0,data:W,method:g.method,action:b},b,W))},currentTarget:g}]})}}for(var Yy=0;Yy<Ih.length;Yy++){var Xy=Ih[Yy],eN=Xy.toLowerCase(),tN=Xy[0].toUpperCase()+Xy.slice(1);ks(eN,"on"+tN)}ks(ea,"onAnimationEnd"),ks(sr,"onAnimationIteration"),ks(Ah,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(ly,"onTransitionRun"),ks(Gf,"onTransitionStart"),ks(Kf,"onTransitionCancel"),ks(Ch,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pd));function fE(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],g=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var A=d.length-1;0<=A;A--){var M=d[A],W=M.instance,oe=M.currentTarget;if(M=M.listener,W!==b&&g.isPropagationStopped())break e;b=M,g.currentTarget=oe;try{b(g)}catch(ge){pm(ge)}g.currentTarget=null,b=W}else for(A=0;A<d.length;A++){if(M=d[A],W=M.instance,oe=M.currentTarget,M=M.listener,W!==b&&g.isPropagationStopped())break e;b=M,g.currentTarget=oe;try{b(g)}catch(ge){pm(ge)}g.currentTarget=null,b=W}}}}function Rt(r,o){var c=o[Yl];c===void 0&&(c=o[Yl]=new Set);var d=r+"__bubble";c.has(d)||(mE(o,r,2,!1),c.add(d))}function Qy(r,o,c){var d=0;o&&(d|=4),mE(c,r,d,o)}var Im="_reactListening"+Math.random().toString(36).slice(2);function Zy(r){if(!r[Im]){r[Im]=!0,Jn.forEach(function(c){c!=="selectionchange"&&(nN.has(c)||Qy(c,!1,r),Qy(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Im]||(o[Im]=!0,Qy("selectionchange",!1,o))}}function mE(r,o,c,d){switch(VE(o)){case 2:var g=IN;break;case 8:g=kN;break;default:g=d_}c=g.bind(null,o,c,r),g=void 0,!ti||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?r.addEventListener(o,c,{capture:!0,passive:g}):r.addEventListener(o,c,!0):g!==void 0?r.addEventListener(o,c,{passive:g}):r.addEventListener(o,c,!1)}function Jy(r,o,c,d,g){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var M=d.stateNode.containerInfo;if(M===g)break;if(A===4)for(A=d.return;A!==null;){var W=A.tag;if((W===3||W===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;M!==null;){if(A=ws(M),A===null)return;if(W=A.tag,W===5||W===6||W===26||W===27){d=b=A;continue e}M=M.parentNode}}d=d.return}Zl(function(){var oe=b,ge=Ti(c),we=[];e:{var le=Rh.get(r);if(le!==void 0){var ue=Kr,mt=r;switch(r){case"keypress":if(tr(c)===0)break e;case"keydown":case"keyup":ue=Wa;break;case"focusin":mt="focus",ue=za;break;case"focusout":mt="blur",ue=za;break;case"beforeblur":case"afterblur":ue=za;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Zc;break;case ea:case sr:case Ah:ue=Ba;break;case Ch:ue=Jc;break;case"scroll":case"scrollend":ue=ec;break;case"wheel":ue=$o;break;case"copy":case"cut":case"paste":ue=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Cs;break;case"toggle":case"beforetoggle":ue=ac}var at=(o&4)!==0,cn=!at&&(r==="scroll"||r==="scrollend"),te=at?le!==null?le+"Capture":null:le;at=[];for(var X=oe,se;X!==null;){var ve=X;if(se=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||se===null||te===null||(ve=Gr(X,te),ve!=null&&at.push(gd(X,ve,se))),cn)break;X=X.return}0<at.length&&(le=new ue(le,mt,null,c,ge),we.push({event:le,listeners:at}))}}if((o&7)===0){e:{if(le=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",le&&c!==mi&&(mt=c.relatedTarget||c.fromElement)&&(ws(mt)||mt[is]))break e;if((ue||le)&&(le=ge.window===ge?ge:(le=ge.ownerDocument)?le.defaultView||le.parentWindow:window,ue?(mt=c.relatedTarget||c.toElement,ue=oe,mt=mt?ws(mt):null,mt!==null&&(cn=a(mt),at=mt.tag,mt!==cn||at!==5&&at!==27&&at!==6)&&(mt=null)):(ue=null,mt=oe),ue!==mt)){if(at=ni,ve="onMouseLeave",te="onMouseEnter",X="mouse",(r==="pointerout"||r==="pointerover")&&(at=Cs,ve="onPointerLeave",te="onPointerEnter",X="pointer"),cn=ue==null?le:Ws(ue),se=mt==null?le:Ws(mt),le=new at(ve,X+"leave",ue,c,ge),le.target=cn,le.relatedTarget=se,ve=null,ws(ge)===oe&&(at=new at(te,X+"enter",mt,c,ge),at.target=se,at.relatedTarget=cn,ve=at),cn=ve,ue&&mt)t:{for(at=ue,te=mt,X=0,se=at;se;se=Ru(se))X++;for(se=0,ve=te;ve;ve=Ru(ve))se++;for(;0<X-se;)at=Ru(at),X--;for(;0<se-X;)te=Ru(te),se--;for(;X--;){if(at===te||te!==null&&at===te.alternate)break t;at=Ru(at),te=Ru(te)}at=null}else at=null;ue!==null&&pE(we,le,ue,at,!1),mt!==null&&cn!==null&&pE(we,cn,mt,at,!0)}}e:{if(le=oe?Ws(oe):window,ue=le.nodeName&&le.nodeName.toLowerCase(),ue==="select"||ue==="input"&&le.type==="file")var Ye=Lf;else if(Mn(le))if(vh)Ye=Bf;else{Ye=Uf;var wt=ay}else ue=le.nodeName,!ue||ue.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&La(oe.elementType)&&(Ye=Lf):Ye=zf;if(Ye&&(Ye=Ye(r,oe))){Pn(we,Ye,c,ge);break e}wt&&wt(r,le,oe),r==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&Xs(le,"number",le.value)}switch(wt=oe?Ws(oe):window,r){case"focusin":(Mn(wt)||wt.contentEditable==="true")&&(Go=wt,Th=oe,lc=null);break;case"focusout":lc=Th=Go=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,qf(we,c,ge);break;case"selectionchange":if(oy)break;case"keydown":case"keyup":qf(we,c,ge)}var Ze;if(ir)e:{switch(r){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Nt?he(r,c)&&(ot="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(ot="onCompositionStart");ot&&(S&&c.locale!=="ko"&&(Nt||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Nt&&(Ze=Ua()):(Ss=ge,er="value"in Ss?Ss.value:Ss.textContent,Nt=!0)),wt=km(oe,ot),0<wt.length&&(ot=new tc(ot,r,null,c,ge),we.push({event:ot,listeners:wt}),Ze?ot.data=Ze:(Ze=Me(c),Ze!==null&&(ot.data=Ze)))),(Ze=E?On(r,c):Dt(r,c))&&(ot=km(oe,"onBeforeInput"),0<ot.length&&(wt=new tc("onBeforeInput","beforeinput",null,c,ge),we.push({event:wt,listeners:ot}),wt.data=Ze)),Jk(we,r,oe,c,ge)}fE(we,o)})}function gd(r,o,c){return{instance:r,listener:o,currentTarget:c}}function km(r,o){for(var c=o+"Capture",d=[];r!==null;){var g=r,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Gr(r,c),g!=null&&d.unshift(gd(r,g,b)),g=Gr(r,o),g!=null&&d.push(gd(r,g,b))),r.tag===3)return d;r=r.return}return[]}function Ru(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function pE(r,o,c,d,g){for(var b=o._reactName,A=[];c!==null&&c!==d;){var M=c,W=M.alternate,oe=M.stateNode;if(M=M.tag,W!==null&&W===d)break;M!==5&&M!==26&&M!==27||oe===null||(W=oe,g?(oe=Gr(c,b),oe!=null&&A.unshift(gd(c,oe,W))):g||(oe=Gr(c,b),oe!=null&&A.push(gd(c,oe,W)))),c=c.return}A.length!==0&&r.push({event:o,listeners:A})}var iN=/\r\n?/g,sN=/\u0000|\uFFFD/g;function gE(r){return(typeof r=="string"?r:""+r).replace(iN,`
`).replace(sN,"")}function yE(r,o){return o=gE(o),gE(r)===o}function Nm(){}function ln(r,o,c,d,g,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||ei(r,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&ei(r,""+d);break;case"className":Ei(r,"class",d);break;case"tabIndex":Ei(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(r,c,d);break;case"style":Zs(r,d,b);break;case"data":if(o!=="object"){Ei(r,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=Uo(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&ln(r,o,"name",g.name,g,null),ln(r,o,"formEncType",g.formEncType,g,null),ln(r,o,"formMethod",g.formMethod,g,null),ln(r,o,"formTarget",g.formTarget,g,null)):(ln(r,o,"encType",g.encType,g,null),ln(r,o,"method",g.method,g,null),ln(r,o,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=Uo(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=Nm);break;case"onScroll":d!=null&&Rt("scroll",r);break;case"onScrollEnd":d!=null&&Rt("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=Uo(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":Rt("beforetoggle",r),Rt("toggle",r),Ks(r,"popover",d);break;case"xlinkActuate":qn(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":qn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":qn(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":qn(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":qn(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":qn(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":qn(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":qn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":qn(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ks(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Yc.get(c)||c,Ks(r,c,d))}}function e_(r,o,c,d,g,b){switch(c){case"style":Zs(r,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof d=="string"?ei(r,d):(typeof d=="number"||typeof d=="bigint")&&ei(r,""+d);break;case"onScroll":d!=null&&Rt("scroll",r);break;case"onScrollEnd":d!=null&&Rt("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Nm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$n.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),b=r[Cn]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(o,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,d,g);break e}c in r?r[c]=d:d===!0?r.setAttribute(c,""):Ks(r,c,d)}}}function Ii(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",r),Rt("load",r);var d=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var A=c[b];if(A!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ln(r,o,b,A,c,null)}}g&&ln(r,o,"srcSet",c.srcSet,c,null),d&&ln(r,o,"src",c.src,c,null);return;case"input":Rt("invalid",r);var M=b=A=g=null,W=null,oe=null;for(d in c)if(c.hasOwnProperty(d)){var ge=c[d];if(ge!=null)switch(d){case"name":g=ge;break;case"type":A=ge;break;case"checked":W=ge;break;case"defaultChecked":oe=ge;break;case"value":b=ge;break;case"defaultValue":M=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,o));break;default:ln(r,o,d,ge,c,null)}}wr(r,b,M,W,oe,A,g,!1),ja(r);return;case"select":Rt("invalid",r),d=A=b=null;for(g in c)if(c.hasOwnProperty(g)&&(M=c[g],M!=null))switch(g){case"value":b=M;break;case"defaultValue":A=M;break;case"multiple":d=M;default:ln(r,o,g,M,c,null)}o=b,c=A,r.multiple=!!d,o!=null?Wn(r,!!d,o,!1):c!=null&&Wn(r,!!d,c,!0);return;case"textarea":Rt("invalid",r),b=g=d=null;for(A in c)if(c.hasOwnProperty(A)&&(M=c[A],M!=null))switch(A){case"value":d=M;break;case"defaultValue":g=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:ln(r,o,A,M,c,null)}Qs(r,d,g,b),ja(r);return;case"option":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ln(r,o,W,d,c,null)}return;case"dialog":Rt("beforetoggle",r),Rt("toggle",r),Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":Rt("load",r);break;case"video":case"audio":for(d=0;d<pd.length;d++)Rt(pd[d],r);break;case"image":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"embed":case"source":case"link":Rt("error",r),Rt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in c)if(c.hasOwnProperty(oe)&&(d=c[oe],d!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ln(r,o,oe,d,c,null)}return;default:if(La(o)){for(ge in c)c.hasOwnProperty(ge)&&(d=c[ge],d!==void 0&&e_(r,o,ge,d,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(d=c[M],d!=null&&ln(r,o,M,d,c,null))}function rN(r,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,A=null,M=null,W=null,oe=null,ge=null;for(ue in c){var we=c[ue];if(c.hasOwnProperty(ue)&&we!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":W=we;default:d.hasOwnProperty(ue)||ln(r,o,ue,null,d,we)}}for(var le in d){var ue=d[le];if(we=c[le],d.hasOwnProperty(le)&&(ue!=null||we!=null))switch(le){case"type":b=ue;break;case"name":g=ue;break;case"checked":oe=ue;break;case"defaultChecked":ge=ue;break;case"value":A=ue;break;case"defaultValue":M=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,o));break;default:ue!==we&&ln(r,o,le,ue,d,we)}}mn(r,A,M,W,oe,ge,b,g);return;case"select":ue=A=M=le=null;for(b in c)if(W=c[b],c.hasOwnProperty(b)&&W!=null)switch(b){case"value":break;case"multiple":ue=W;default:d.hasOwnProperty(b)||ln(r,o,b,null,d,W)}for(g in d)if(b=d[g],W=c[g],d.hasOwnProperty(g)&&(b!=null||W!=null))switch(g){case"value":le=b;break;case"defaultValue":M=b;break;case"multiple":A=b;default:b!==W&&ln(r,o,g,b,d,W)}o=M,c=A,d=ue,le!=null?Wn(r,!!c,le,!1):!!d!=!!c&&(o!=null?Wn(r,!!c,o,!0):Wn(r,!!c,c?[]:"",!1));return;case"textarea":ue=le=null;for(M in c)if(g=c[M],c.hasOwnProperty(M)&&g!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:ln(r,o,M,null,d,g)}for(A in d)if(g=d[A],b=c[A],d.hasOwnProperty(A)&&(g!=null||b!=null))switch(A){case"value":le=g;break;case"defaultValue":ue=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==b&&ln(r,o,A,g,d,b)}kt(r,le,ue);return;case"option":for(var mt in c)if(le=c[mt],c.hasOwnProperty(mt)&&le!=null&&!d.hasOwnProperty(mt))switch(mt){case"selected":r.selected=!1;break;default:ln(r,o,mt,null,d,le)}for(W in d)if(le=d[W],ue=c[W],d.hasOwnProperty(W)&&le!==ue&&(le!=null||ue!=null))switch(W){case"selected":r.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:ln(r,o,W,le,d,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in c)le=c[at],c.hasOwnProperty(at)&&le!=null&&!d.hasOwnProperty(at)&&ln(r,o,at,null,d,le);for(oe in d)if(le=d[oe],ue=c[oe],d.hasOwnProperty(oe)&&le!==ue&&(le!=null||ue!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,o));break;default:ln(r,o,oe,le,d,ue)}return;default:if(La(o)){for(var cn in c)le=c[cn],c.hasOwnProperty(cn)&&le!==void 0&&!d.hasOwnProperty(cn)&&e_(r,o,cn,void 0,d,le);for(ge in d)le=d[ge],ue=c[ge],!d.hasOwnProperty(ge)||le===ue||le===void 0&&ue===void 0||e_(r,o,ge,le,d,ue);return}}for(var te in c)le=c[te],c.hasOwnProperty(te)&&le!=null&&!d.hasOwnProperty(te)&&ln(r,o,te,null,d,le);for(we in d)le=d[we],ue=c[we],!d.hasOwnProperty(we)||le===ue||le==null&&ue==null||ln(r,o,we,le,d,ue)}var t_=null,n_=null;function Dm(r){return r.nodeType===9?r:r.ownerDocument}function _E(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bE(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function i_(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var s_=null;function aN(){var r=window.event;return r&&r.type==="popstate"?r===s_?!1:(s_=r,!0):(s_=null,!1)}var vE=typeof setTimeout=="function"?setTimeout:void 0,oN=typeof clearTimeout=="function"?clearTimeout:void 0,xE=typeof Promise=="function"?Promise:void 0,lN=typeof queueMicrotask=="function"?queueMicrotask:typeof xE<"u"?function(r){return xE.resolve(null).then(r).catch(cN)}:vE;function cN(r){setTimeout(function(){throw r})}function dl(r){return r==="head"}function EE(r,o){var c=o,d=0,g=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<d&&8>d){c=d;var A=r.ownerDocument;if(c&1&&yd(A.documentElement),c&2&&yd(A.body),c&4)for(c=A.head,yd(c),A=c.firstChild;A;){var M=A.nextSibling,W=A.nodeName;A[$s]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=M}}if(g===0){r.removeChild(b),Sd(o);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:d=c.charCodeAt(0)-48;else d=0;c=b}while(c);Sd(o)}function r_(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":r_(c),Wr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function uN(r,o,c,d){for(;r.nodeType===1;){var g=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[$s])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Or(r.nextSibling),r===null)break}return null}function hN(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Or(r.nextSibling),r===null))return null;return r}function a_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function dN(r,o){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Or(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var o_=null;function wE(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}function TE(r,o,c){switch(o=Dm(c),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function yd(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Wr(r)}var cr=new Map,SE=new Set;function Om(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var mo=ie.d;ie.d={f:fN,r:mN,D:pN,C:gN,L:yN,m:_N,X:vN,S:bN,M:xN};function fN(){var r=mo.f(),o=Tm();return r||o}function mN(r){var o=qs(r);o!==null&&o.tag===5&&o.type==="form"?q0(o):mo.r(r)}var Iu=typeof document>"u"?null:document;function AE(r,o,c){var d=Iu;if(d&&typeof o=="string"&&o){var g=an(o);g='link[rel="'+r+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),SE.has(g)||(SE.add(g),r={rel:r,crossOrigin:c,href:o},d.querySelector(g)===null&&(o=d.createElement("link"),Ii(o,"link",r),At(o),d.head.appendChild(o)))}}function pN(r){mo.D(r),AE("dns-prefetch",r,null)}function gN(r,o){mo.C(r,o),AE("preconnect",r,o)}function yN(r,o,c){mo.L(r,o,c);var d=Iu;if(d&&r&&o){var g='link[rel="preload"][as="'+an(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+an(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+an(c.imageSizes)+'"]')):g+='[href="'+an(r)+'"]';var b=g;switch(o){case"style":b=ku(r);break;case"script":b=Nu(r)}cr.has(b)||(r=y({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),cr.set(b,r),d.querySelector(g)!==null||o==="style"&&d.querySelector(_d(b))||o==="script"&&d.querySelector(bd(b))||(o=d.createElement("link"),Ii(o,"link",r),At(o),d.head.appendChild(o)))}}function _N(r,o){mo.m(r,o);var c=Iu;if(c&&r){var d=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+an(d)+'"][href="'+an(r)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Nu(r)}if(!cr.has(b)&&(r=y({rel:"modulepreload",href:r},o),cr.set(b,r),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(bd(b)))return}d=c.createElement("link"),Ii(d,"link",r),At(d),c.head.appendChild(d)}}}function bN(r,o,c){mo.S(r,o,c);var d=Iu;if(d&&r){var g=Rn(d).hoistableStyles,b=ku(r);o=o||"default";var A=g.get(b);if(!A){var M={loading:0,preload:null};if(A=d.querySelector(_d(b)))M.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":o},c),(c=cr.get(b))&&l_(r,c);var W=A=d.createElement("link");At(W),Ii(W,"link",r),W._p=new Promise(function(oe,ge){W.onload=oe,W.onerror=ge}),W.addEventListener("load",function(){M.loading|=1}),W.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Mm(A,o,d)}A={type:"stylesheet",instance:A,count:1,state:M},g.set(b,A)}}}function vN(r,o){mo.X(r,o);var c=Iu;if(c&&r){var d=Rn(c).hoistableScripts,g=Nu(r),b=d.get(g);b||(b=c.querySelector(bd(g)),b||(r=y({src:r,async:!0},o),(o=cr.get(g))&&c_(r,o),b=c.createElement("script"),At(b),Ii(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function xN(r,o){mo.M(r,o);var c=Iu;if(c&&r){var d=Rn(c).hoistableScripts,g=Nu(r),b=d.get(g);b||(b=c.querySelector(bd(g)),b||(r=y({src:r,async:!0,type:"module"},o),(o=cr.get(g))&&c_(r,o),b=c.createElement("script"),At(b),Ii(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function CE(r,o,c,d){var g=(g=je.current)?Om(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=ku(c.href),c=Rn(g).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=ku(c.href);var b=Rn(g).hoistableStyles,A=b.get(r);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,A),(b=g.querySelector(_d(r)))&&!b._p&&(A.instance=b,A.state.loading=5),cr.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},cr.set(r,c),b||EN(g,r,c,A.state))),o&&d===null)throw Error(i(528,""));return A}if(o&&d!==null)throw Error(i(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Nu(c),c=Rn(g).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ku(r){return'href="'+an(r)+'"'}function _d(r){return'link[rel="stylesheet"]['+r+"]"}function RE(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function EN(r,o,c,d){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=r.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Ii(o,"link",c),At(o),r.head.appendChild(o))}function Nu(r){return'[src="'+an(r)+'"]'}function bd(r){return"script[async]"+r}function IE(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=r.querySelector('style[data-href~="'+an(c.href)+'"]');if(d)return o.instance=d,At(d),d;var g=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),At(d),Ii(d,"style",g),Mm(d,c.precedence,r),o.instance=d;case"stylesheet":g=ku(c.href);var b=r.querySelector(_d(g));if(b)return o.state.loading|=4,o.instance=b,At(b),b;d=RE(c),(g=cr.get(g))&&l_(d,g),b=(r.ownerDocument||r).createElement("link"),At(b);var A=b;return A._p=new Promise(function(M,W){A.onload=M,A.onerror=W}),Ii(b,"link",d),o.state.loading|=4,Mm(b,c.precedence,r),o.instance=b;case"script":return b=Nu(c.src),(g=r.querySelector(bd(b)))?(o.instance=g,At(g),g):(d=c,(g=cr.get(b))&&(d=y({},c),c_(d,g)),r=r.ownerDocument||r,g=r.createElement("script"),At(g),Ii(g,"link",d),r.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Mm(d,c.precedence,r));return o.instance}function Mm(r,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,A=0;A<d.length;A++){var M=d[A];if(M.dataset.precedence===o)b=M;else if(b!==g)break}b?b.parentNode.insertBefore(r,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function l_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function c_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Pm=null;function kE(r,o,c){if(Pm===null){var d=new Map,g=Pm=new Map;g.set(c,d)}else g=Pm,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),g=0;g<c.length;g++){var b=c[g];if(!(b[$s]||b[Nn]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(o)||"";A=r+A;var M=d.get(A);M?M.push(b):d.set(A,[b])}}return d}function NE(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function wN(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function DE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var vd=null;function TN(){}function SN(r,o,c){if(vd===null)throw Error(i(475));var d=vd;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=ku(c.href),b=r.querySelector(_d(g));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=jm.bind(d),r.then(d,d)),o.state.loading|=4,o.instance=b,At(b);return}b=r.ownerDocument||r,c=RE(c),(g=cr.get(g))&&l_(c,g),b=b.createElement("link"),At(b);var A=b;A._p=new Promise(function(M,W){A.onload=M,A.onerror=W}),Ii(b,"link",c),o.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=jm.bind(d),r.addEventListener("load",o),r.addEventListener("error",o))}}function AN(){if(vd===null)throw Error(i(475));var r=vd;return r.stylesheets&&r.count===0&&u_(r,r.stylesheets),0<r.count?function(o){var c=setTimeout(function(){if(r.stylesheets&&u_(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c)}}:null}function jm(){if(this.count--,this.count===0){if(this.stylesheets)u_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Lm=null;function u_(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Lm=new Map,o.forEach(CN,r),Lm=null,jm.call(r))}function CN(r,o){if(!(o.state.loading&4)){var c=Lm.get(r);if(c)var d=c.get(null);else{c=new Map,Lm.set(r,c);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var A=g[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}g=o.instance,A=g.getAttribute("data-precedence"),b=c.get(A)||d,b===d&&c.set(null,g),c.set(A,g),this.count++,d=jm.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),o.state.loading|=4}}var xd={$$typeof:q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function RN(r,o,c,d,g,b,A,M){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.hiddenUpdates=Yt(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function OE(r,o,c,d,g,b,A,M,W,oe,ge,we){return r=new RN(r,o,c,A,M,W,oe,we),o=1,b===!0&&(o|=24),b=ts(3,null,null,o),r.current=b,b.stateNode=r,o=mc(),o.refCount++,r.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},ee(b),r}function ME(r){return r?(r=Yo,r):Yo}function PE(r,o,c,d,g,b){g=ME(g),d.context===null?d.context=g:d.pendingContext=g,d=be(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Oe(r,d,o),c!==null&&(Ls(c,r,o),Be(c,r,o))}function jE(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function h_(r,o){jE(r,o),(r=r.alternate)&&jE(r,o)}function LE(r){if(r.tag===13){var o=Pi(r,67108864);o!==null&&Ls(o,r,67108864),h_(r,67108864)}}var Vm=!0;function IN(r,o,c,d){var g=G.T;G.T=null;var b=ie.p;try{ie.p=2,d_(r,o,c,d)}finally{ie.p=b,G.T=g}}function kN(r,o,c,d){var g=G.T;G.T=null;var b=ie.p;try{ie.p=8,d_(r,o,c,d)}finally{ie.p=b,G.T=g}}function d_(r,o,c,d){if(Vm){var g=f_(d);if(g===null)Jy(r,o,d,Fm,c),FE(r,d);else if(DN(g,r,o,c,d))d.stopPropagation();else if(FE(r,d),o&4&&-1<NN.indexOf(r)){for(;g!==null;){var b=qs(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=Ce(b.pendingLanes);if(A!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var W=1<<31-Lt(A);M.entanglements[1]|=W,A&=~W}ha(b),(tn&6)===0&&(Em=Gt()+500,md(0))}}break;case 13:M=Pi(b,2),M!==null&&Ls(M,b,2),Tm(),h_(b,2)}if(b=f_(d),b===null&&Jy(r,o,d,Fm,c),b===g)break;g=b}g!==null&&d.stopPropagation()}else Jy(r,o,d,null,c)}}function f_(r){return r=Ti(r),m_(r)}var Fm=null;function m_(r){if(Fm=null,r=ws(r),r!==null){var o=a(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=l(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Fm=r,null}function VE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ki()){case Yi:return 2;case Bs:return 8;case xs:case Da:return 32;case Es:return 268435456;default:return 32}default:return 32}}var p_=!1,fl=null,ml=null,pl=null,Ed=new Map,wd=new Map,gl=[],NN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FE(r,o){switch(r){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":Ed.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":wd.delete(o.pointerId)}}function Td(r,o,c,d,g,b){return r===null||r.nativeEvent!==b?(r={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},o!==null&&(o=qs(o),o!==null&&LE(o)),r):(r.eventSystemFlags|=d,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function DN(r,o,c,d,g){switch(o){case"focusin":return fl=Td(fl,r,o,c,d,g),!0;case"dragenter":return ml=Td(ml,r,o,c,d,g),!0;case"mouseover":return pl=Td(pl,r,o,c,d,g),!0;case"pointerover":var b=g.pointerId;return Ed.set(b,Td(Ed.get(b)||null,r,o,c,d,g)),!0;case"gotpointercapture":return b=g.pointerId,wd.set(b,Td(wd.get(b)||null,r,o,c,d,g)),!0}return!1}function UE(r){var o=ws(r.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){r.blockedOn=o,br(r.priority,function(){if(c.tag===13){var d=js();d=$r(d);var g=Pi(c,d);g!==null&&Ls(g,c,d),h_(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Um(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=f_(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);mi=d,c.target.dispatchEvent(d),mi=null}else return o=qs(c),o!==null&&LE(o),r.blockedOn=c,!1;o.shift()}return!0}function zE(r,o,c){Um(r)&&c.delete(o)}function ON(){p_=!1,fl!==null&&Um(fl)&&(fl=null),ml!==null&&Um(ml)&&(ml=null),pl!==null&&Um(pl)&&(pl=null),Ed.forEach(zE),wd.forEach(zE)}function zm(r,o){r.blockedOn===o&&(r.blockedOn=null,p_||(p_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ON)))}var Bm=null;function BE(r){Bm!==r&&(Bm=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bm===r&&(Bm=null);for(var o=0;o<r.length;o+=3){var c=r[o],d=r[o+1],g=r[o+2];if(typeof d!="function"){if(m_(d||c)===null)continue;break}var b=qs(c);b!==null&&(r.splice(o,3),o-=3,my(b,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function Sd(r){function o(W){return zm(W,r)}fl!==null&&zm(fl,r),ml!==null&&zm(ml,r),pl!==null&&zm(pl,r),Ed.forEach(o),wd.forEach(o);for(var c=0;c<gl.length;c++){var d=gl[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<gl.length&&(c=gl[0],c.blockedOn===null);)UE(c),c.blockedOn===null&&gl.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],b=c[d+1],A=g[Cn]||null;if(typeof b=="function")A||BE(c);else if(A){var M=null;if(b&&b.hasAttribute("formAction")){if(g=b,A=b[Cn]||null)M=A.formAction;else if(m_(g)!==null)continue}else M=A.action;typeof M=="function"?c[d+1]=M:(c.splice(d,3),d-=3),BE(c)}}}function g_(r){this._internalRoot=r}Hm.prototype.render=g_.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var c=o.current,d=js();PE(c,d,r,o,null,null)},Hm.prototype.unmount=g_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;PE(r.current,2,null,r,null,null),Tm(),o[is]=null}};function Hm(r){this._internalRoot=r}Hm.prototype.unstable_scheduleHydration=function(r){if(r){var o=qr();r={blockedOn:null,target:r,priority:o};for(var c=0;c<gl.length&&o!==0&&o<gl[c].priority;c++);gl.splice(c,0,r),c===0&&UE(r)}};var HE=e.version;if(HE!=="19.1.1")throw Error(i(527,HE,"19.1.1"));ie.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var MN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$m.isDisabled&&$m.supportsFiber)try{ze=$m.inject(MN),Ke=$m}catch{}}return Cd.createRoot=function(r,o){if(!s(r))throw Error(i(299));var c=!1,d="",g=rx,b=ax,A=ox,M=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks)),o=OE(r,1,!1,null,null,c,d,g,b,A,M,null),r[is]=o.current,Zy(r),new g_(o)},Cd.hydrateRoot=function(r,o,c){if(!s(r))throw Error(i(299));var d=!1,g="",b=rx,A=ax,M=ox,W=null,oe=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(W=c.unstable_transitionCallbacks),c.formState!==void 0&&(oe=c.formState)),o=OE(r,1,!0,o,c??null,d,g,b,A,M,W,oe),o.context=ME(null),c=o.current,d=js(),d=$r(d),g=be(d),g.callback=null,Oe(c,g,d),c=d,o.current.lanes=c,Ft(o,c),ha(o),r[is]=o.current,Zy(r),new Hm(o)},Cd.version="19.1.1",Cd}var JE;function HN(){if(JE)return b_.exports;JE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),b_.exports=BN(),b_.exports}var $N=HN();const qN=Ef($N);var gp={exports:{}};/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var WN=gp.exports,ew;function GN(){return ew||(ew=1,function(n,e){(function(t,i){n.exports=i()})(WN,function(){const t=new Map,i={set(k,_,w){t.has(k)||t.set(k,new Map);const j=t.get(k);j.has(_)||j.size===0?j.set(_,w):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(j.keys())[0]}.`)},get:(k,_)=>t.has(k)&&t.get(k).get(_)||null,remove(k,_){if(!t.has(k))return;const w=t.get(k);w.delete(_),w.size===0&&t.delete(k)}},s="transitionend",a=k=>(k&&window.CSS&&window.CSS.escape&&(k=k.replace(/#([^\s"#']+)/g,(_,w)=>`#${CSS.escape(w)}`)),k),l=k=>{k.dispatchEvent(new Event(s))},u=k=>!(!k||typeof k!="object")&&(k.jquery!==void 0&&(k=k[0]),k.nodeType!==void 0),h=k=>u(k)?k.jquery?k[0]:k:typeof k=="string"&&k.length>0?document.querySelector(a(k)):null,f=k=>{if(!u(k)||k.getClientRects().length===0)return!1;const _=getComputedStyle(k).getPropertyValue("visibility")==="visible",w=k.closest("details:not([open])");if(!w)return _;if(w!==k){const j=k.closest("summary");if(j&&j.parentNode!==w||j===null)return!1}return _},y=k=>!k||k.nodeType!==Node.ELEMENT_NODE||!!k.classList.contains("disabled")||(k.disabled!==void 0?k.disabled:k.hasAttribute("disabled")&&k.getAttribute("disabled")!=="false"),v=k=>{if(!document.documentElement.attachShadow)return null;if(typeof k.getRootNode=="function"){const _=k.getRootNode();return _ instanceof ShadowRoot?_:null}return k instanceof ShadowRoot?k:k.parentNode?v(k.parentNode):null},x=()=>{},T=k=>{k.offsetHeight},C=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,D=[],R=()=>document.documentElement.dir==="rtl",L=k=>{var _;_=()=>{const w=C();if(w){const j=k.NAME,Q=w.fn[j];w.fn[j]=k.jQueryInterface,w.fn[j].Constructor=k,w.fn[j].noConflict=()=>(w.fn[j]=Q,k.jQueryInterface)}},document.readyState==="loading"?(D.length||document.addEventListener("DOMContentLoaded",()=>{for(const w of D)w()}),D.push(_)):_()},$=(k,_=[],w=k)=>typeof k=="function"?k.call(..._):w,q=(k,_,w=!0)=>{if(!w)return void $(k);const j=(de=>{if(!de)return 0;let{transitionDuration:be,transitionDelay:Oe}=window.getComputedStyle(de);const Be=Number.parseFloat(be),$e=Number.parseFloat(Oe);return Be||$e?(be=be.split(",")[0],Oe=Oe.split(",")[0],1e3*(Number.parseFloat(be)+Number.parseFloat(Oe))):0})(_)+5;let Q=!1;const ee=({target:de})=>{de===_&&(Q=!0,_.removeEventListener(s,ee),$(k))};_.addEventListener(s,ee),setTimeout(()=>{Q||l(_)},j)},Z=(k,_,w,j)=>{const Q=k.length;let ee=k.indexOf(_);return ee===-1?!w&&j?k[Q-1]:k[0]:(ee+=w?1:-1,j&&(ee=(ee+Q)%Q),k[Math.max(0,Math.min(ee,Q-1))])},Y=/[^.]*(?=\..*)\.|.*/,J=/\..*/,F=/::\d+$/,I={};let O=1;const U={mouseenter:"mouseover",mouseleave:"mouseout"},H=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function B(k,_){return _&&`${_}::${O++}`||k.uidEvent||O++}function z(k){const _=B(k);return k.uidEvent=_,I[_]=I[_]||{},I[_]}function Le(k,_,w=null){return Object.values(k).find(j=>j.callable===_&&j.delegationSelector===w)}function _e(k,_,w){const j=typeof _=="string",Q=j?w:_||w;let ee=Ve(k);return H.has(ee)||(ee=k),[j,Q,ee]}function G(k,_,w,j,Q){if(typeof _!="string"||!k)return;let[ee,de,be]=_e(_,w,j);_ in U&&(de=(gt=>function(ct){if(!ct.relatedTarget||ct.relatedTarget!==ct.delegateTarget&&!ct.delegateTarget.contains(ct.relatedTarget))return gt.call(this,ct)})(de));const Oe=z(k),Be=Oe[be]||(Oe[be]={}),$e=Le(Be,de,ee?w:null);if($e)return void($e.oneOff=$e.oneOff&&Q);const Fe=B(de,_.replace(Y,"")),pt=ee?function(nt,gt,ct){return function rt(qt){const Jt=nt.querySelectorAll(gt);for(let{target:vt}=qt;vt&&vt!==this;vt=vt.parentNode)for(const Vt of Jt)if(Vt===vt)return fe(qt,{delegateTarget:vt}),rt.oneOff&&P.off(nt,qt.type,gt,ct),ct.apply(vt,[qt])}}(k,w,de):function(nt,gt){return function ct(rt){return fe(rt,{delegateTarget:nt}),ct.oneOff&&P.off(nt,rt.type,gt),gt.apply(nt,[rt])}}(k,de);pt.delegationSelector=ee?w:null,pt.callable=de,pt.oneOff=Q,pt.uidEvent=Fe,Be[Fe]=pt,k.addEventListener(be,pt,ee)}function ie(k,_,w,j,Q){const ee=Le(_[w],j,Q);ee&&(k.removeEventListener(w,ee,!!Q),delete _[w][ee.uidEvent])}function Ee(k,_,w,j){const Q=_[w]||{};for(const[ee,de]of Object.entries(Q))ee.includes(j)&&ie(k,_,w,de.callable,de.delegationSelector)}function Ve(k){return k=k.replace(J,""),U[k]||k}const P={on(k,_,w,j){G(k,_,w,j,!1)},one(k,_,w,j){G(k,_,w,j,!0)},off(k,_,w,j){if(typeof _!="string"||!k)return;const[Q,ee,de]=_e(_,w,j),be=de!==_,Oe=z(k),Be=Oe[de]||{},$e=_.startsWith(".");if(ee===void 0){if($e)for(const Fe of Object.keys(Oe))Ee(k,Oe,Fe,_.slice(1));for(const[Fe,pt]of Object.entries(Be)){const nt=Fe.replace(F,"");be&&!_.includes(nt)||ie(k,Oe,de,pt.callable,pt.delegationSelector)}}else{if(!Object.keys(Be).length)return;ie(k,Oe,de,ee,Q?w:null)}},trigger(k,_,w){if(typeof _!="string"||!k)return null;const j=C();let Q=null,ee=!0,de=!0,be=!1;_!==Ve(_)&&j&&(Q=j.Event(_,w),j(k).trigger(Q),ee=!Q.isPropagationStopped(),de=!Q.isImmediatePropagationStopped(),be=Q.isDefaultPrevented());const Oe=fe(new Event(_,{bubbles:ee,cancelable:!0}),w);return be&&Oe.preventDefault(),de&&k.dispatchEvent(Oe),Oe.defaultPrevented&&Q&&Q.preventDefault(),Oe}};function fe(k,_={}){for(const[w,j]of Object.entries(_))try{k[w]=j}catch{Object.defineProperty(k,w,{configurable:!0,get:()=>j})}return k}function Re(k){if(k==="true")return!0;if(k==="false")return!1;if(k===Number(k).toString())return Number(k);if(k===""||k==="null")return null;if(typeof k!="string")return k;try{return JSON.parse(decodeURIComponent(k))}catch{return k}}function pe(k){return k.replace(/[A-Z]/g,_=>`-${_.toLowerCase()}`)}const Ne={setDataAttribute(k,_,w){k.setAttribute(`data-bs-${pe(_)}`,w)},removeDataAttribute(k,_){k.removeAttribute(`data-bs-${pe(_)}`)},getDataAttributes(k){if(!k)return{};const _={},w=Object.keys(k.dataset).filter(j=>j.startsWith("bs")&&!j.startsWith("bsConfig"));for(const j of w){let Q=j.replace(/^bs/,"");Q=Q.charAt(0).toLowerCase()+Q.slice(1),_[Q]=Re(k.dataset[j])}return _},getDataAttribute:(k,_)=>Re(k.getAttribute(`data-bs-${pe(_)}`))};class qe{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(_){return _=this._mergeConfigObj(_),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}_configAfterMerge(_){return _}_mergeConfigObj(_,w){const j=u(w)?Ne.getDataAttribute(w,"config"):{};return{...this.constructor.Default,...typeof j=="object"?j:{},...u(w)?Ne.getDataAttributes(w):{},...typeof _=="object"?_:{}}}_typeCheckConfig(_,w=this.constructor.DefaultType){for(const[Q,ee]of Object.entries(w)){const de=_[Q],be=u(de)?"element":(j=de)==null?`${j}`:Object.prototype.toString.call(j).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(be))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Q}" provided type "${be}" but expected type "${ee}".`)}var j}}class je extends qe{constructor(_,w){super(),(_=h(_))&&(this._element=_,this._config=this._getConfig(w),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const _ of Object.getOwnPropertyNames(this))this[_]=null}_queueCallback(_,w,j=!0){q(_,w,j)}_getConfig(_){return _=this._mergeConfigObj(_,this._element),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}static getInstance(_){return i.get(h(_),this.DATA_KEY)}static getOrCreateInstance(_,w={}){return this.getInstance(_)||new this(_,typeof w=="object"?w:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(_){return`${_}${this.EVENT_KEY}`}}const Ge=k=>{let _=k.getAttribute("data-bs-target");if(!_||_==="#"){let w=k.getAttribute("href");if(!w||!w.includes("#")&&!w.startsWith("."))return null;w.includes("#")&&!w.startsWith("#")&&(w=`#${w.split("#")[1]}`),_=w&&w!=="#"?w.trim():null}return _?_.split(",").map(w=>a(w)).join(","):null},Se={find:(k,_=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(_,k)),findOne:(k,_=document.documentElement)=>Element.prototype.querySelector.call(_,k),children:(k,_)=>[].concat(...k.children).filter(w=>w.matches(_)),parents(k,_){const w=[];let j=k.parentNode.closest(_);for(;j;)w.push(j),j=j.parentNode.closest(_);return w},prev(k,_){let w=k.previousElementSibling;for(;w;){if(w.matches(_))return[w];w=w.previousElementSibling}return[]},next(k,_){let w=k.nextElementSibling;for(;w;){if(w.matches(_))return[w];w=w.nextElementSibling}return[]},focusableChildren(k){const _=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(w=>`${w}:not([tabindex^="-"])`).join(",");return this.find(_,k).filter(w=>!y(w)&&f(w))},getSelectorFromElement(k){const _=Ge(k);return _&&Se.findOne(_)?_:null},getElementFromSelector(k){const _=Ge(k);return _?Se.findOne(_):null},getMultipleElementsFromSelector(k){const _=Ge(k);return _?Se.find(_):[]}},Tt=(k,_="hide")=>{const w=`click.dismiss${k.EVENT_KEY}`,j=k.NAME;P.on(document,w,`[data-bs-dismiss="${j}"]`,function(Q){if(["A","AREA"].includes(this.tagName)&&Q.preventDefault(),y(this))return;const ee=Se.getElementFromSelector(this)||this.closest(`.${j}`);k.getOrCreateInstance(ee)[_]()})},xe=".bs.alert",ce=`close${xe}`,Ae=`closed${xe}`;class He extends je{static get NAME(){return"alert"}close(){if(P.trigger(this._element,ce).defaultPrevented)return;this._element.classList.remove("show");const _=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,_)}_destroyElement(){this._element.remove(),P.trigger(this._element,Ae),this.dispose()}static jQueryInterface(_){return this.each(function(){const w=He.getOrCreateInstance(this);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_](this)}})}}Tt(He,"close"),L(He);const Je='[data-bs-toggle="button"]';class st extends je{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(_){return this.each(function(){const w=st.getOrCreateInstance(this);_==="toggle"&&w[_]()})}}P.on(document,"click.bs.button.data-api",Je,k=>{k.preventDefault();const _=k.target.closest(Je);st.getOrCreateInstance(_).toggle()}),L(st);const yn=".bs.swipe",Gt=`touchstart${yn}`,Ki=`touchmove${yn}`,Yi=`touchend${yn}`,Bs=`pointerdown${yn}`,xs=`pointerup${yn}`,Da={endCallback:null,leftCallback:null,rightCallback:null},Es={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class vi extends qe{constructor(_,w){super(),this._element=_,_&&vi.isSupported()&&(this._config=this._getConfig(w),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Da}static get DefaultType(){return Es}static get NAME(){return"swipe"}dispose(){P.off(this._element,yn)}_start(_){this._supportPointerEvents?this._eventIsPointerPenTouch(_)&&(this._deltaX=_.clientX):this._deltaX=_.touches[0].clientX}_end(_){this._eventIsPointerPenTouch(_)&&(this._deltaX=_.clientX-this._deltaX),this._handleSwipe(),$(this._config.endCallback)}_move(_){this._deltaX=_.touches&&_.touches.length>1?0:_.touches[0].clientX-this._deltaX}_handleSwipe(){const _=Math.abs(this._deltaX);if(_<=40)return;const w=_/this._deltaX;this._deltaX=0,w&&$(w>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,Bs,_=>this._start(_)),P.on(this._element,xs,_=>this._end(_)),this._element.classList.add("pointer-event")):(P.on(this._element,Gt,_=>this._start(_)),P.on(this._element,Ki,_=>this._move(_)),P.on(this._element,Yi,_=>this._end(_)))}_eventIsPointerPenTouch(_){return this._supportPointerEvents&&(_.pointerType==="pen"||_.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const me=".bs.carousel",ze=".data-api",Ke="ArrowLeft",St="ArrowRight",Lt="next",K="prev",re="left",ae="right",ye=`slide${me}`,ke=`slid${me}`,Ce=`keydown${me}`,De=`mouseenter${me}`,Pe=`mouseleave${me}`,et=`dragstart${me}`,tt=`load${me}${ze}`,lt=`click${me}${ze}`,Yt="carousel",Ft="active",hi=".active",xi=".carousel-item",_r=hi+xi,$r={[Ke]:ae,[St]:re},Po={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},qr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class br extends je{constructor(_,w){super(_,w),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Se.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Yt&&this.cycle()}static get Default(){return Po}static get DefaultType(){return qr}static get NAME(){return"carousel"}next(){this._slide(Lt)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(K)}pause(){this._isSliding&&l(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,ke,()=>this.cycle()):this.cycle())}to(_){const w=this._getItems();if(_>w.length-1||_<0)return;if(this._isSliding)return void P.one(this._element,ke,()=>this.to(_));const j=this._getItemIndex(this._getActive());if(j===_)return;const Q=_>j?Lt:K;this._slide(Q,w[_])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(_){return _.defaultInterval=_.interval,_}_addEventListeners(){this._config.keyboard&&P.on(this._element,Ce,_=>this._keydown(_)),this._config.pause==="hover"&&(P.on(this._element,De,()=>this.pause()),P.on(this._element,Pe,()=>this._maybeEnableCycle())),this._config.touch&&vi.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const w of Se.find(".carousel-item img",this._element))P.on(w,et,j=>j.preventDefault());const _={leftCallback:()=>this._slide(this._directionToOrder(re)),rightCallback:()=>this._slide(this._directionToOrder(ae)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new vi(this._element,_)}_keydown(_){if(/input|textarea/i.test(_.target.tagName))return;const w=$r[_.key];w&&(_.preventDefault(),this._slide(this._directionToOrder(w)))}_getItemIndex(_){return this._getItems().indexOf(_)}_setActiveIndicatorElement(_){if(!this._indicatorsElement)return;const w=Se.findOne(hi,this._indicatorsElement);w.classList.remove(Ft),w.removeAttribute("aria-current");const j=Se.findOne(`[data-bs-slide-to="${_}"]`,this._indicatorsElement);j&&(j.classList.add(Ft),j.setAttribute("aria-current","true"))}_updateInterval(){const _=this._activeElement||this._getActive();if(!_)return;const w=Number.parseInt(_.getAttribute("data-bs-interval"),10);this._config.interval=w||this._config.defaultInterval}_slide(_,w=null){if(this._isSliding)return;const j=this._getActive(),Q=_===Lt,ee=w||Z(this._getItems(),j,Q,this._config.wrap);if(ee===j)return;const de=this._getItemIndex(ee),be=Fe=>P.trigger(this._element,Fe,{relatedTarget:ee,direction:this._orderToDirection(_),from:this._getItemIndex(j),to:de});if(be(ye).defaultPrevented||!j||!ee)return;const Oe=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(de),this._activeElement=ee;const Be=Q?"carousel-item-start":"carousel-item-end",$e=Q?"carousel-item-next":"carousel-item-prev";ee.classList.add($e),T(ee),j.classList.add(Be),ee.classList.add(Be),this._queueCallback(()=>{ee.classList.remove(Be,$e),ee.classList.add(Ft),j.classList.remove(Ft,$e,Be),this._isSliding=!1,be(ke)},j,this._isAnimated()),Oe&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Se.findOne(_r,this._element)}_getItems(){return Se.find(xi,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(_){return R()?_===re?K:Lt:_===re?Lt:K}_orderToDirection(_){return R()?_===K?re:ae:_===K?ae:re}static jQueryInterface(_){return this.each(function(){const w=br.getOrCreateInstance(this,_);if(typeof _!="number"){if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_]()}}else w.to(_)})}}P.on(document,lt,"[data-bs-slide], [data-bs-slide-to]",function(k){const _=Se.getElementFromSelector(this);if(!_||!_.classList.contains(Yt))return;k.preventDefault();const w=br.getOrCreateInstance(_),j=this.getAttribute("data-bs-slide-to");return j?(w.to(j),void w._maybeEnableCycle()):Ne.getDataAttribute(this,"slide")==="next"?(w.next(),void w._maybeEnableCycle()):(w.prev(),void w._maybeEnableCycle())}),P.on(window,tt,()=>{const k=Se.find('[data-bs-ride="carousel"]');for(const _ of k)br.getOrCreateInstance(_)}),L(br);const Xt=".bs.collapse",Nn=`show${Xt}`,Cn=`shown${Xt}`,is=`hide${Xt}`,Yl=`hidden${Xt}`,_h=`click${Xt}.data-api`,Hs="show",vr="collapse",$s="collapsing",Wr=`:scope .${vr} .${vr}`,ws='[data-bs-toggle="collapse"]',qs={parent:null,toggle:!0},Ws={parent:"(null|element)",toggle:"boolean"};class Rn extends je{constructor(_,w){super(_,w),this._isTransitioning=!1,this._triggerArray=[];const j=Se.find(ws);for(const Q of j){const ee=Se.getSelectorFromElement(Q),de=Se.find(ee).filter(be=>be===this._element);ee!==null&&de.length&&this._triggerArray.push(Q)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return qs}static get DefaultType(){return Ws}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let _=[];if(this._config.parent&&(_=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(Q=>Q!==this._element).map(Q=>Rn.getOrCreateInstance(Q,{toggle:!1}))),_.length&&_[0]._isTransitioning||P.trigger(this._element,Nn).defaultPrevented)return;for(const Q of _)Q.hide();const w=this._getDimension();this._element.classList.remove(vr),this._element.classList.add($s),this._element.style[w]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const j=`scroll${w[0].toUpperCase()+w.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove($s),this._element.classList.add(vr,Hs),this._element.style[w]="",P.trigger(this._element,Cn)},this._element,!0),this._element.style[w]=`${this._element[j]}px`}hide(){if(this._isTransitioning||!this._isShown()||P.trigger(this._element,is).defaultPrevented)return;const _=this._getDimension();this._element.style[_]=`${this._element.getBoundingClientRect()[_]}px`,T(this._element),this._element.classList.add($s),this._element.classList.remove(vr,Hs);for(const w of this._triggerArray){const j=Se.getElementFromSelector(w);j&&!this._isShown(j)&&this._addAriaAndCollapsedClass([w],!1)}this._isTransitioning=!0,this._element.style[_]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove($s),this._element.classList.add(vr),P.trigger(this._element,Yl)},this._element,!0)}_isShown(_=this._element){return _.classList.contains(Hs)}_configAfterMerge(_){return _.toggle=!!_.toggle,_.parent=h(_.parent),_}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const _=this._getFirstLevelChildren(ws);for(const w of _){const j=Se.getElementFromSelector(w);j&&this._addAriaAndCollapsedClass([w],this._isShown(j))}}_getFirstLevelChildren(_){const w=Se.find(Wr,this._config.parent);return Se.find(_,this._config.parent).filter(j=>!w.includes(j))}_addAriaAndCollapsedClass(_,w){if(_.length)for(const j of _)j.classList.toggle("collapsed",!w),j.setAttribute("aria-expanded",w)}static jQueryInterface(_){const w={};return typeof _=="string"&&/show|hide/.test(_)&&(w.toggle=!1),this.each(function(){const j=Rn.getOrCreateInstance(this,w);if(typeof _=="string"){if(j[_]===void 0)throw new TypeError(`No method named "${_}"`);j[_]()}})}}P.on(document,_h,ws,function(k){(k.target.tagName==="A"||k.delegateTarget&&k.delegateTarget.tagName==="A")&&k.preventDefault();for(const _ of Se.getMultipleElementsFromSelector(this))Rn.getOrCreateInstance(_,{toggle:!1}).toggle()}),L(Rn);var At="top",Jn="bottom",$n="right",hn="left",ss="auto",xr=[At,Jn,$n,hn],Gs="start",rs="end",Xl="clippingParents",Ks="viewport",Ei="popper",qn="reference",Er=xr.reduce(function(k,_){return k.concat([_+"-"+Gs,_+"-"+rs])},[]),jo=[].concat(xr,[ss]).reduce(function(k,_){return k.concat([_,_+"-"+Gs,_+"-"+rs])},[]),Ys="beforeRead",Oa="read",Ma="afterRead",Lo="beforeMain",Pa="main",di="afterMain",Vo="beforeWrite",Kc="write",ja="afterWrite",Fo=[Ys,Oa,Ma,Lo,Pa,di,Vo,Kc,ja];function fi(k){return k?(k.nodeName||"").toLowerCase():null}function wi(k){if(k==null)return window;if(k.toString()!=="[object Window]"){var _=k.ownerDocument;return _&&_.defaultView||window}return k}function an(k){return k instanceof wi(k).Element||k instanceof Element}function mn(k){return k instanceof wi(k).HTMLElement||k instanceof HTMLElement}function wr(k){return typeof ShadowRoot<"u"&&(k instanceof wi(k).ShadowRoot||k instanceof ShadowRoot)}const Xs={name:"applyStyles",enabled:!0,phase:"write",fn:function(k){var _=k.state;Object.keys(_.elements).forEach(function(w){var j=_.styles[w]||{},Q=_.attributes[w]||{},ee=_.elements[w];mn(ee)&&fi(ee)&&(Object.assign(ee.style,j),Object.keys(Q).forEach(function(de){var be=Q[de];be===!1?ee.removeAttribute(de):ee.setAttribute(de,be===!0?"":be)}))})},effect:function(k){var _=k.state,w={popper:{position:_.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(_.elements.popper.style,w.popper),_.styles=w,_.elements.arrow&&Object.assign(_.elements.arrow.style,w.arrow),function(){Object.keys(_.elements).forEach(function(j){var Q=_.elements[j],ee=_.attributes[j]||{},de=Object.keys(_.styles.hasOwnProperty(j)?_.styles[j]:w[j]).reduce(function(be,Oe){return be[Oe]="",be},{});mn(Q)&&fi(Q)&&(Object.assign(Q.style,de),Object.keys(ee).forEach(function(be){Q.removeAttribute(be)}))})}},requires:["computeStyles"]};function Wn(k){return k.split("-")[0]}var kt=Math.max,Qs=Math.min,ei=Math.round;function Tr(){var k=navigator.userAgentData;return k!=null&&k.brands&&Array.isArray(k.brands)?k.brands.map(function(_){return _.brand+"/"+_.version}).join(" "):navigator.userAgent}function Ql(){return!/^((?!chrome|android).)*safari/i.test(Tr())}function Zs(k,_,w){_===void 0&&(_=!1),w===void 0&&(w=!1);var j=k.getBoundingClientRect(),Q=1,ee=1;_&&mn(k)&&(Q=k.offsetWidth>0&&ei(j.width)/k.offsetWidth||1,ee=k.offsetHeight>0&&ei(j.height)/k.offsetHeight||1);var de=(an(k)?wi(k):window).visualViewport,be=!Ql()&&w,Oe=(j.left+(be&&de?de.offsetLeft:0))/Q,Be=(j.top+(be&&de?de.offsetTop:0))/ee,$e=j.width/Q,Fe=j.height/ee;return{width:$e,height:Fe,top:Be,right:Oe+$e,bottom:Be+Fe,left:Oe,x:Oe,y:Be}}function La(k){var _=Zs(k),w=k.offsetWidth,j=k.offsetHeight;return Math.abs(_.width-w)<=1&&(w=_.width),Math.abs(_.height-j)<=1&&(j=_.height),{x:k.offsetLeft,y:k.offsetTop,width:w,height:j}}function Yc(k,_){var w=_.getRootNode&&_.getRootNode();if(k.contains(_))return!0;if(w&&wr(w)){var j=_;do{if(j&&k.isSameNode(j))return!0;j=j.parentNode||j.host}while(j)}return!1}function Ts(k){return wi(k).getComputedStyle(k)}function Uo(k){return["table","td","th"].indexOf(fi(k))>=0}function mi(k){return((an(k)?k.ownerDocument:k.document)||window.document).documentElement}function Ti(k){return fi(k)==="html"?k:k.assignedSlot||k.parentNode||(wr(k)?k.host:null)||mi(k)}function Js(k){return mn(k)&&Ts(k).position!=="fixed"?k.offsetParent:null}function Xi(k){for(var _=wi(k),w=Js(k);w&&Uo(w)&&Ts(w).position==="static";)w=Js(w);return w&&(fi(w)==="html"||fi(w)==="body"&&Ts(w).position==="static")?_:w||function(j){var Q=/firefox/i.test(Tr());if(/Trident/i.test(Tr())&&mn(j)&&Ts(j).position==="fixed")return null;var ee=Ti(j);for(wr(ee)&&(ee=ee.host);mn(ee)&&["html","body"].indexOf(fi(ee))<0;){var de=Ts(ee);if(de.transform!=="none"||de.perspective!=="none"||de.contain==="paint"||["transform","perspective"].indexOf(de.willChange)!==-1||Q&&de.willChange==="filter"||Q&&de.filter&&de.filter!=="none")return ee;ee=ee.parentNode}return null}(k)||_}function Va(k){return["top","bottom"].indexOf(k)>=0?"x":"y"}function Oi(k,_,w){return kt(k,Qs(_,w))}function Zl(k){return Object.assign({},{top:0,right:0,bottom:0,left:0},k)}function Gr(k,_){return _.reduce(function(w,j){return w[j]=k,w},{})}const as={name:"arrow",enabled:!0,phase:"main",fn:function(k){var _,w=k.state,j=k.name,Q=k.options,ee=w.elements.arrow,de=w.modifiersData.popperOffsets,be=Wn(w.placement),Oe=Va(be),Be=[hn,$n].indexOf(be)>=0?"height":"width";if(ee&&de){var $e=function(ht,zt){return Zl(typeof(ht=typeof ht=="function"?ht(Object.assign({},zt.rects,{placement:zt.placement})):ht)!="number"?ht:Gr(ht,xr))}(Q.padding,w),Fe=La(ee),pt=Oe==="y"?At:hn,nt=Oe==="y"?Jn:$n,gt=w.rects.reference[Be]+w.rects.reference[Oe]-de[Oe]-w.rects.popper[Be],ct=de[Oe]-w.rects.reference[Oe],rt=Xi(ee),qt=rt?Oe==="y"?rt.clientHeight||0:rt.clientWidth||0:0,Jt=gt/2-ct/2,vt=$e[pt],Vt=qt-Fe[Be]-$e[nt],ut=qt/2-Fe[Be]/2+Jt,Ue=Oi(vt,ut,Vt),Qe=Oe;w.modifiersData[j]=((_={})[Qe]=Ue,_.centerOffset=Ue-ut,_)}},effect:function(k){var _=k.state,w=k.options.element,j=w===void 0?"[data-popper-arrow]":w;j!=null&&(typeof j!="string"||(j=_.elements.popper.querySelector(j)))&&Yc(_.elements.popper,j)&&(_.elements.arrow=j)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ti(k){return k.split("-")[1]}var Fa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ss(k){var _,w=k.popper,j=k.popperRect,Q=k.placement,ee=k.variation,de=k.offsets,be=k.position,Oe=k.gpuAcceleration,Be=k.adaptive,$e=k.roundOffsets,Fe=k.isFixed,pt=de.x,nt=pt===void 0?0:pt,gt=de.y,ct=gt===void 0?0:gt,rt=typeof $e=="function"?$e({x:nt,y:ct}):{x:nt,y:ct};nt=rt.x,ct=rt.y;var qt=de.hasOwnProperty("x"),Jt=de.hasOwnProperty("y"),vt=hn,Vt=At,ut=window;if(Be){var Ue=Xi(w),Qe="clientHeight",ht="clientWidth";Ue===wi(w)&&Ts(Ue=mi(w)).position!=="static"&&be==="absolute"&&(Qe="scrollHeight",ht="scrollWidth"),(Q===At||(Q===hn||Q===$n)&&ee===rs)&&(Vt=Jn,ct-=(Fe&&Ue===ut&&ut.visualViewport?ut.visualViewport.height:Ue[Qe])-j.height,ct*=Oe?1:-1),Q!==hn&&(Q!==At&&Q!==Jn||ee!==rs)||(vt=$n,nt-=(Fe&&Ue===ut&&ut.visualViewport?ut.visualViewport.width:Ue[ht])-j.width,nt*=Oe?1:-1)}var zt,on=Object.assign({position:be},Be&&Fa),jn=$e===!0?function(Li,Ln){var si=Li.x,us=Li.y,_t=Ln.devicePixelRatio||1;return{x:ei(si*_t)/_t||0,y:ei(us*_t)/_t||0}}({x:nt,y:ct},wi(w)):{x:nt,y:ct};return nt=jn.x,ct=jn.y,Oe?Object.assign({},on,((zt={})[Vt]=Jt?"0":"",zt[vt]=qt?"0":"",zt.transform=(ut.devicePixelRatio||1)<=1?"translate("+nt+"px, "+ct+"px)":"translate3d("+nt+"px, "+ct+"px, 0)",zt)):Object.assign({},on,((_={})[Vt]=Jt?ct+"px":"",_[vt]=qt?nt+"px":"",_.transform="",_))}const er={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(k){var _=k.state,w=k.options,j=w.gpuAcceleration,Q=j===void 0||j,ee=w.adaptive,de=ee===void 0||ee,be=w.roundOffsets,Oe=be===void 0||be,Be={placement:Wn(_.placement),variation:ti(_.placement),popper:_.elements.popper,popperRect:_.rects.popper,gpuAcceleration:Q,isFixed:_.options.strategy==="fixed"};_.modifiersData.popperOffsets!=null&&(_.styles.popper=Object.assign({},_.styles.popper,Ss(Object.assign({},Be,{offsets:_.modifiersData.popperOffsets,position:_.options.strategy,adaptive:de,roundOffsets:Oe})))),_.modifiersData.arrow!=null&&(_.styles.arrow=Object.assign({},_.styles.arrow,Ss(Object.assign({},Be,{offsets:_.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Oe})))),_.attributes.popper=Object.assign({},_.attributes.popper,{"data-popper-placement":_.placement})},data:{}};var os={passive:!0};const Ua={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(k){var _=k.state,w=k.instance,j=k.options,Q=j.scroll,ee=Q===void 0||Q,de=j.resize,be=de===void 0||de,Oe=wi(_.elements.popper),Be=[].concat(_.scrollParents.reference,_.scrollParents.popper);return ee&&Be.forEach(function($e){$e.addEventListener("scroll",w.update,os)}),be&&Oe.addEventListener("resize",w.update,os),function(){ee&&Be.forEach(function($e){$e.removeEventListener("scroll",w.update,os)}),be&&Oe.removeEventListener("resize",w.update,os)}},data:{}};var tr={left:"right",right:"left",bottom:"top",top:"bottom"};function Qi(k){return k.replace(/left|right|bottom|top/g,function(_){return tr[_]})}var Jl={start:"end",end:"start"};function Dn(k){return k.replace(/start|end/g,function(_){return Jl[_]})}function Ut(k){var _=wi(k);return{scrollLeft:_.pageXOffset,scrollTop:_.pageYOffset}}function Kr(k){return Zs(mi(k)).left+Ut(k).scrollLeft}function Sr(k){var _=Ts(k),w=_.overflow,j=_.overflowX,Q=_.overflowY;return/auto|scroll|overlay|hidden/.test(w+Q+j)}function ec(k){return["html","body","#document"].indexOf(fi(k))>=0?k.ownerDocument.body:mn(k)&&Sr(k)?k:ec(Ti(k))}function nr(k,_){var w;_===void 0&&(_=[]);var j=ec(k),Q=j===((w=k.ownerDocument)==null?void 0:w.body),ee=wi(j),de=Q?[ee].concat(ee.visualViewport||[],Sr(j)?j:[]):j,be=_.concat(de);return Q?be:be.concat(nr(Ti(de)))}function Yr(k){return Object.assign({},k,{left:k.x,top:k.y,right:k.x+k.width,bottom:k.y+k.height})}function As(k,_,w){return _===Ks?Yr(function(j,Q){var ee=wi(j),de=mi(j),be=ee.visualViewport,Oe=de.clientWidth,Be=de.clientHeight,$e=0,Fe=0;if(be){Oe=be.width,Be=be.height;var pt=Ql();(pt||!pt&&Q==="fixed")&&($e=be.offsetLeft,Fe=be.offsetTop)}return{width:Oe,height:Be,x:$e+Kr(j),y:Fe}}(k,w)):an(_)?function(j,Q){var ee=Zs(j,!1,Q==="fixed");return ee.top=ee.top+j.clientTop,ee.left=ee.left+j.clientLeft,ee.bottom=ee.top+j.clientHeight,ee.right=ee.left+j.clientWidth,ee.width=j.clientWidth,ee.height=j.clientHeight,ee.x=ee.left,ee.y=ee.top,ee}(_,w):Yr(function(j){var Q,ee=mi(j),de=Ut(j),be=(Q=j.ownerDocument)==null?void 0:Q.body,Oe=kt(ee.scrollWidth,ee.clientWidth,be?be.scrollWidth:0,be?be.clientWidth:0),Be=kt(ee.scrollHeight,ee.clientHeight,be?be.scrollHeight:0,be?be.clientHeight:0),$e=-de.scrollLeft+Kr(j),Fe=-de.scrollTop;return Ts(be||ee).direction==="rtl"&&($e+=kt(ee.clientWidth,be?be.clientWidth:0)-Oe),{width:Oe,height:Be,x:$e,y:Fe}}(mi(k)))}function Xr(k){var _,w=k.reference,j=k.element,Q=k.placement,ee=Q?Wn(Q):null,de=Q?ti(Q):null,be=w.x+w.width/2-j.width/2,Oe=w.y+w.height/2-j.height/2;switch(ee){case At:_={x:be,y:w.y-j.height};break;case Jn:_={x:be,y:w.y+w.height};break;case $n:_={x:w.x+w.width,y:Oe};break;case hn:_={x:w.x-j.width,y:Oe};break;default:_={x:w.x,y:w.y}}var Be=ee?Va(ee):null;if(Be!=null){var $e=Be==="y"?"height":"width";switch(de){case Gs:_[Be]=_[Be]-(w[$e]/2-j[$e]/2);break;case rs:_[Be]=_[Be]+(w[$e]/2-j[$e]/2)}}return _}function ni(k,_){_===void 0&&(_={});var w=_,j=w.placement,Q=j===void 0?k.placement:j,ee=w.strategy,de=ee===void 0?k.strategy:ee,be=w.boundary,Oe=be===void 0?Xl:be,Be=w.rootBoundary,$e=Be===void 0?Ks:Be,Fe=w.elementContext,pt=Fe===void 0?Ei:Fe,nt=w.altBoundary,gt=nt!==void 0&&nt,ct=w.padding,rt=ct===void 0?0:ct,qt=Zl(typeof rt!="number"?rt:Gr(rt,xr)),Jt=pt===Ei?qn:Ei,vt=k.rects.popper,Vt=k.elements[gt?Jt:pt],ut=function(Ln,si,us,_t){var hs=si==="clippingParents"?function(en){var ri=nr(Ti(en)),Vi=["absolute","fixed"].indexOf(Ts(en).position)>=0&&mn(en)?Xi(en):en;return an(Vi)?ri.filter(function(ar){return an(ar)&&Yc(ar,Vi)&&fi(ar)!=="body"}):[]}(Ln):[].concat(si),ds=[].concat(hs,[us]),ao=ds[0],Vn=ds.reduce(function(en,ri){var Vi=As(Ln,ri,_t);return en.top=kt(Vi.top,en.top),en.right=Qs(Vi.right,en.right),en.bottom=Qs(Vi.bottom,en.bottom),en.left=kt(Vi.left,en.left),en},As(Ln,ao,_t));return Vn.width=Vn.right-Vn.left,Vn.height=Vn.bottom-Vn.top,Vn.x=Vn.left,Vn.y=Vn.top,Vn}(an(Vt)?Vt:Vt.contextElement||mi(k.elements.popper),Oe,$e,de),Ue=Zs(k.elements.reference),Qe=Xr({reference:Ue,element:vt,placement:Q}),ht=Yr(Object.assign({},vt,Qe)),zt=pt===Ei?ht:Ue,on={top:ut.top-zt.top+qt.top,bottom:zt.bottom-ut.bottom+qt.bottom,left:ut.left-zt.left+qt.left,right:zt.right-ut.right+qt.right},jn=k.modifiersData.offset;if(pt===Ei&&jn){var Li=jn[Q];Object.keys(on).forEach(function(Ln){var si=[$n,Jn].indexOf(Ln)>=0?1:-1,us=[At,Jn].indexOf(Ln)>=0?"y":"x";on[Ln]+=Li[us]*si})}return on}function Xc(k,_){_===void 0&&(_={});var w=_,j=w.placement,Q=w.boundary,ee=w.rootBoundary,de=w.padding,be=w.flipVariations,Oe=w.allowedAutoPlacements,Be=Oe===void 0?jo:Oe,$e=ti(j),Fe=$e?be?Er:Er.filter(function(gt){return ti(gt)===$e}):xr,pt=Fe.filter(function(gt){return Be.indexOf(gt)>=0});pt.length===0&&(pt=Fe);var nt=pt.reduce(function(gt,ct){return gt[ct]=ni(k,{placement:ct,boundary:Q,rootBoundary:ee,padding:de})[Wn(ct)],gt},{});return Object.keys(nt).sort(function(gt,ct){return nt[gt]-nt[ct]})}const Qc={name:"flip",enabled:!0,phase:"main",fn:function(k){var _=k.state,w=k.options,j=k.name;if(!_.modifiersData[j]._skip){for(var Q=w.mainAxis,ee=Q===void 0||Q,de=w.altAxis,be=de===void 0||de,Oe=w.fallbackPlacements,Be=w.padding,$e=w.boundary,Fe=w.rootBoundary,pt=w.altBoundary,nt=w.flipVariations,gt=nt===void 0||nt,ct=w.allowedAutoPlacements,rt=_.options.placement,qt=Wn(rt),Jt=Oe||(qt!==rt&&gt?function(en){if(Wn(en)===ss)return[];var ri=Qi(en);return[Dn(en),ri,Dn(ri)]}(rt):[Qi(rt)]),vt=[rt].concat(Jt).reduce(function(en,ri){return en.concat(Wn(ri)===ss?Xc(_,{placement:ri,boundary:$e,rootBoundary:Fe,padding:Be,flipVariations:gt,allowedAutoPlacements:ct}):ri)},[]),Vt=_.rects.reference,ut=_.rects.popper,Ue=new Map,Qe=!0,ht=vt[0],zt=0;zt<vt.length;zt++){var on=vt[zt],jn=Wn(on),Li=ti(on)===Gs,Ln=[At,Jn].indexOf(jn)>=0,si=Ln?"width":"height",us=ni(_,{placement:on,boundary:$e,rootBoundary:Fe,altBoundary:pt,padding:Be}),_t=Ln?Li?$n:hn:Li?Jn:At;Vt[si]>ut[si]&&(_t=Qi(_t));var hs=Qi(_t),ds=[];if(ee&&ds.push(us[jn]<=0),be&&ds.push(us[_t]<=0,us[hs]<=0),ds.every(function(en){return en})){ht=on,Qe=!1;break}Ue.set(on,ds)}if(Qe)for(var ao=function(en){var ri=vt.find(function(Vi){var ar=Ue.get(Vi);if(ar)return ar.slice(0,en).every(function(ai){return ai})});if(ri)return ht=ri,"break"},Vn=gt?3:1;Vn>0&&ao(Vn)!=="break";Vn--);_.placement!==ht&&(_.modifiersData[j]._skip=!0,_.placement=ht,_.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Qr(k,_,w){return w===void 0&&(w={x:0,y:0}),{top:k.top-_.height-w.y,right:k.right-_.width+w.x,bottom:k.bottom-_.height+w.y,left:k.left-_.width-w.x}}function za(k){return[At,$n,Jn,hn].some(function(_){return k[_]>=0})}const zo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(k){var _=k.state,w=k.name,j=_.rects.reference,Q=_.rects.popper,ee=_.modifiersData.preventOverflow,de=ni(_,{elementContext:"reference"}),be=ni(_,{altBoundary:!0}),Oe=Qr(de,j),Be=Qr(be,Q,ee),$e=za(Oe),Fe=za(Be);_.modifiersData[w]={referenceClippingOffsets:Oe,popperEscapeOffsets:Be,isReferenceHidden:$e,hasPopperEscaped:Fe},_.attributes.popper=Object.assign({},_.attributes.popper,{"data-popper-reference-hidden":$e,"data-popper-escaped":Fe})}},Ba={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(k){var _=k.state,w=k.options,j=k.name,Q=w.offset,ee=Q===void 0?[0,0]:Q,de=jo.reduce(function($e,Fe){return $e[Fe]=function(pt,nt,gt){var ct=Wn(pt),rt=[hn,At].indexOf(ct)>=0?-1:1,qt=typeof gt=="function"?gt(Object.assign({},nt,{placement:pt})):gt,Jt=qt[0],vt=qt[1];return Jt=Jt||0,vt=(vt||0)*rt,[hn,$n].indexOf(ct)>=0?{x:vt,y:Jt}:{x:Jt,y:vt}}(Fe,_.rects,ee),$e},{}),be=de[_.placement],Oe=be.x,Be=be.y;_.modifiersData.popperOffsets!=null&&(_.modifiersData.popperOffsets.x+=Oe,_.modifiersData.popperOffsets.y+=Be),_.modifiersData[j]=de}},Bo={name:"popperOffsets",enabled:!0,phase:"read",fn:function(k){var _=k.state,w=k.name;_.modifiersData[w]=Xr({reference:_.rects.reference,element:_.rects.popper,placement:_.placement})},data:{}},Ha={name:"preventOverflow",enabled:!0,phase:"main",fn:function(k){var _=k.state,w=k.options,j=k.name,Q=w.mainAxis,ee=Q===void 0||Q,de=w.altAxis,be=de!==void 0&&de,Oe=w.boundary,Be=w.rootBoundary,$e=w.altBoundary,Fe=w.padding,pt=w.tether,nt=pt===void 0||pt,gt=w.tetherOffset,ct=gt===void 0?0:gt,rt=ni(_,{boundary:Oe,rootBoundary:Be,padding:Fe,altBoundary:$e}),qt=Wn(_.placement),Jt=ti(_.placement),vt=!Jt,Vt=Va(qt),ut=Vt==="x"?"y":"x",Ue=_.modifiersData.popperOffsets,Qe=_.rects.reference,ht=_.rects.popper,zt=typeof ct=="function"?ct(Object.assign({},_.rects,{placement:_.placement})):ct,on=typeof zt=="number"?{mainAxis:zt,altAxis:zt}:Object.assign({mainAxis:0,altAxis:0},zt),jn=_.modifiersData.offset?_.modifiersData.offset[_.placement]:null,Li={x:0,y:0};if(Ue){if(ee){var Ln,si=Vt==="y"?At:hn,us=Vt==="y"?Jn:$n,_t=Vt==="y"?"height":"width",hs=Ue[Vt],ds=hs+rt[si],ao=hs-rt[us],Vn=nt?-ht[_t]/2:0,en=Jt===Gs?Qe[_t]:ht[_t],ri=Jt===Gs?-ht[_t]:-Qe[_t],Vi=_.elements.arrow,ar=nt&&Vi?La(Vi):{width:0,height:0},ai=_.modifiersData["arrow#persistent"]?_.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},wn=ai[si],cu=ai[us],aa=Oi(0,Qe[_t],ar[_t]),uu=vt?Qe[_t]/2-Vn-aa-wn-on.mainAxis:en-aa-wn-on.mainAxis,Wh=vt?-Qe[_t]/2+Vn+aa+cu+on.mainAxis:ri+aa+cu+on.mainAxis,Ds=_.elements.arrow&&Xi(_.elements.arrow),hu=Ds?Vt==="y"?Ds.clientTop||0:Ds.clientLeft||0:0,du=(Ln=jn?.[Vt])!=null?Ln:0,Gh=hs+Wh-du,Kh=Oi(nt?Qs(ds,hs+uu-du-hu):ds,hs,nt?kt(ao,Gh):ao);Ue[Vt]=Kh,Li[Vt]=Kh-hs}if(be){var Yh,sm=Vt==="x"?At:hn,rm=Vt==="x"?Jn:$n,oa=Ue[ut],gc=ut==="y"?"height":"width",fu=oa+rt[sm],Xh=oa-rt[rm],Qh=[At,hn].indexOf(qt)!==-1,Zh=(Yh=jn?.[ut])!=null?Yh:0,Jh=Qh?fu:oa-Qe[gc]-ht[gc]-Zh+on.altAxis,ed=Qh?oa+Qe[gc]+ht[gc]-Zh-on.altAxis:Xh,mu=nt&&Qh?function(am,om,pu){var td=Oi(am,om,pu);return td>pu?pu:td}(Jh,oa,ed):Oi(nt?Jh:fu,oa,nt?ed:Xh);Ue[ut]=mu,Li[ut]=mu-oa}_.modifiersData[j]=Li}},requiresIfExists:["offset"]};function bh(k,_,w){w===void 0&&(w=!1);var j,Q,ee=mn(_),de=mn(_)&&function(Fe){var pt=Fe.getBoundingClientRect(),nt=ei(pt.width)/Fe.offsetWidth||1,gt=ei(pt.height)/Fe.offsetHeight||1;return nt!==1||gt!==1}(_),be=mi(_),Oe=Zs(k,de,w),Be={scrollLeft:0,scrollTop:0},$e={x:0,y:0};return(ee||!ee&&!w)&&((fi(_)!=="body"||Sr(be))&&(Be=(j=_)!==wi(j)&&mn(j)?{scrollLeft:(Q=j).scrollLeft,scrollTop:Q.scrollTop}:Ut(j)),mn(_)?(($e=Zs(_,!0)).x+=_.clientLeft,$e.y+=_.clientTop):be&&($e.x=Kr(be))),{x:Oe.left+Be.scrollLeft-$e.x,y:Oe.top+Be.scrollTop-$e.y,width:Oe.width,height:Oe.height}}function tc(k){var _=new Map,w=new Set,j=[];function Q(ee){w.add(ee.name),[].concat(ee.requires||[],ee.requiresIfExists||[]).forEach(function(de){if(!w.has(de)){var be=_.get(de);be&&Q(be)}}),j.push(ee)}return k.forEach(function(ee){_.set(ee.name,ee)}),k.forEach(function(ee){w.has(ee.name)||Q(ee)}),j}var Zr={placement:"bottom",modifiers:[],strategy:"absolute"};function nc(){for(var k=arguments.length,_=new Array(k),w=0;w<k;w++)_[w]=arguments[w];return!_.some(function(j){return!(j&&typeof j.getBoundingClientRect=="function")})}function $a(k){k===void 0&&(k={});var _=k,w=_.defaultModifiers,j=w===void 0?[]:w,Q=_.defaultOptions,ee=Q===void 0?Zr:Q;return function(de,be,Oe){Oe===void 0&&(Oe=ee);var Be,$e,Fe={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zr,ee),modifiersData:{},elements:{reference:de,popper:be},attributes:{},styles:{}},pt=[],nt=!1,gt={state:Fe,setOptions:function(rt){var qt=typeof rt=="function"?rt(Fe.options):rt;ct(),Fe.options=Object.assign({},ee,Fe.options,qt),Fe.scrollParents={reference:an(de)?nr(de):de.contextElement?nr(de.contextElement):[],popper:nr(be)};var Jt,vt,Vt=function(ut){var Ue=tc(ut);return Fo.reduce(function(Qe,ht){return Qe.concat(Ue.filter(function(zt){return zt.phase===ht}))},[])}((Jt=[].concat(j,Fe.options.modifiers),vt=Jt.reduce(function(ut,Ue){var Qe=ut[Ue.name];return ut[Ue.name]=Qe?Object.assign({},Qe,Ue,{options:Object.assign({},Qe.options,Ue.options),data:Object.assign({},Qe.data,Ue.data)}):Ue,ut},{}),Object.keys(vt).map(function(ut){return vt[ut]})));return Fe.orderedModifiers=Vt.filter(function(ut){return ut.enabled}),Fe.orderedModifiers.forEach(function(ut){var Ue=ut.name,Qe=ut.options,ht=Qe===void 0?{}:Qe,zt=ut.effect;if(typeof zt=="function"){var on=zt({state:Fe,name:Ue,instance:gt,options:ht});pt.push(on||function(){})}}),gt.update()},forceUpdate:function(){if(!nt){var rt=Fe.elements,qt=rt.reference,Jt=rt.popper;if(nc(qt,Jt)){Fe.rects={reference:bh(qt,Xi(Jt),Fe.options.strategy==="fixed"),popper:La(Jt)},Fe.reset=!1,Fe.placement=Fe.options.placement,Fe.orderedModifiers.forEach(function(zt){return Fe.modifiersData[zt.name]=Object.assign({},zt.data)});for(var vt=0;vt<Fe.orderedModifiers.length;vt++)if(Fe.reset!==!0){var Vt=Fe.orderedModifiers[vt],ut=Vt.fn,Ue=Vt.options,Qe=Ue===void 0?{}:Ue,ht=Vt.name;typeof ut=="function"&&(Fe=ut({state:Fe,options:Qe,name:ht,instance:gt})||Fe)}else Fe.reset=!1,vt=-1}}},update:(Be=function(){return new Promise(function(rt){gt.forceUpdate(),rt(Fe)})},function(){return $e||($e=new Promise(function(rt){Promise.resolve().then(function(){$e=void 0,rt(Be())})})),$e}),destroy:function(){ct(),nt=!0}};if(!nc(de,be))return gt;function ct(){pt.forEach(function(rt){return rt()}),pt=[]}return gt.setOptions(Oe).then(function(rt){!nt&&Oe.onFirstUpdate&&Oe.onFirstUpdate(rt)}),gt}}var ic=$a(),qa=$a({defaultModifiers:[Ua,Bo,er,Xs]}),Ho=$a({defaultModifiers:[Ua,Bo,er,Xs,Ba,Qc,Ha,as,zo]});const Wa=Object.freeze(Object.defineProperty({__proto__:null,afterMain:di,afterRead:Ma,afterWrite:ja,applyStyles:Xs,arrow:as,auto:ss,basePlacements:xr,beforeMain:Lo,beforeRead:Ys,beforeWrite:Vo,bottom:Jn,clippingParents:Xl,computeStyles:er,createPopper:Ho,createPopperBase:ic,createPopperLite:qa,detectOverflow:ni,end:rs,eventListeners:Ua,flip:Qc,hide:zo,left:hn,main:Pa,modifierPhases:Fo,offset:Ba,placements:jo,popper:Ei,popperGenerator:$a,popperOffsets:Bo,preventOverflow:Ha,read:Oa,reference:qn,right:$n,start:Gs,top:At,variationPlacements:Er,viewport:Ks,write:Kc},Symbol.toStringTag,{value:"Module"})),sc="dropdown",Cs=".bs.dropdown",Rs=".data-api",Zc="ArrowUp",rc="ArrowDown",Jc=`hide${Cs}`,eu=`hidden${Cs}`,$o=`show${Cs}`,Si=`shown${Cs}`,ac=`click${Cs}${Rs}`,oc=`keydown${Cs}${Rs}`,ir=`keyup${Cs}${Rs}`,m="show",E='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',S=`${E}.${m}`,V=".dropdown-menu",ne=R()?"top-end":"top-start",he=R()?"top-start":"top-end",Me=R()?"bottom-end":"bottom-start",Nt=R()?"bottom-start":"bottom-end",On=R()?"left-start":"right-start",Dt=R()?"right-start":"left-start",Gn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Mn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Pn extends je{constructor(_,w){super(_,w),this._popper=null,this._parent=this._element.parentNode,this._menu=Se.next(this._element,V)[0]||Se.prev(this._element,V)[0]||Se.findOne(V,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Gn}static get DefaultType(){return Mn}static get NAME(){return sc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const _={relatedTarget:this._element};if(!P.trigger(this._element,$o,_).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const w of[].concat(...document.body.children))P.on(w,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(m),this._element.classList.add(m),P.trigger(this._element,Si,_)}}hide(){if(y(this._element)||!this._isShown())return;const _={relatedTarget:this._element};this._completeHide(_)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(_){if(!P.trigger(this._element,Jc,_).defaultPrevented){if("ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))P.off(w,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(m),this._element.classList.remove(m),this._element.setAttribute("aria-expanded","false"),Ne.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,eu,_),this._element.focus()}}_getConfig(_){if(typeof(_=super._getConfig(_)).reference=="object"&&!u(_.reference)&&typeof _.reference.getBoundingClientRect!="function")throw new TypeError(`${sc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return _}_createPopper(){if(Wa===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let _=this._element;this._config.reference==="parent"?_=this._parent:u(this._config.reference)?_=h(this._config.reference):typeof this._config.reference=="object"&&(_=this._config.reference);const w=this._getPopperConfig();this._popper=Ho(_,this._menu,w)}_isShown(){return this._menu.classList.contains(m)}_getPlacement(){const _=this._parent;if(_.classList.contains("dropend"))return On;if(_.classList.contains("dropstart"))return Dt;if(_.classList.contains("dropup-center"))return"top";if(_.classList.contains("dropdown-center"))return"bottom";const w=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return _.classList.contains("dropup")?w?he:ne:w?Nt:Me}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:_}=this._config;return typeof _=="string"?_.split(",").map(w=>Number.parseInt(w,10)):typeof _=="function"?w=>_(w,this._element):_}_getPopperConfig(){const _={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ne.setDataAttribute(this._menu,"popper","static"),_.modifiers=[{name:"applyStyles",enabled:!1}]),{..._,...$(this._config.popperConfig,[void 0,_])}}_selectMenuItem({key:_,target:w}){const j=Se.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Q=>f(Q));j.length&&Z(j,w,_===rc,!j.includes(w)).focus()}static jQueryInterface(_){return this.each(function(){const w=Pn.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_]()}})}static clearMenus(_){if(_.button===2||_.type==="keyup"&&_.key!=="Tab")return;const w=Se.find(S);for(const j of w){const Q=Pn.getInstance(j);if(!Q||Q._config.autoClose===!1)continue;const ee=_.composedPath(),de=ee.includes(Q._menu);if(ee.includes(Q._element)||Q._config.autoClose==="inside"&&!de||Q._config.autoClose==="outside"&&de||Q._menu.contains(_.target)&&(_.type==="keyup"&&_.key==="Tab"||/input|select|option|textarea|form/i.test(_.target.tagName)))continue;const be={relatedTarget:Q._element};_.type==="click"&&(be.clickEvent=_),Q._completeHide(be)}}static dataApiKeydownHandler(_){const w=/input|textarea/i.test(_.target.tagName),j=_.key==="Escape",Q=[Zc,rc].includes(_.key);if(!Q&&!j||w&&!j)return;_.preventDefault();const ee=this.matches(E)?this:Se.prev(this,E)[0]||Se.next(this,E)[0]||Se.findOne(E,_.delegateTarget.parentNode),de=Pn.getOrCreateInstance(ee);if(Q)return _.stopPropagation(),de.show(),void de._selectMenuItem(_);de._isShown()&&(_.stopPropagation(),de.hide(),ee.focus())}}P.on(document,oc,E,Pn.dataApiKeydownHandler),P.on(document,oc,V,Pn.dataApiKeydownHandler),P.on(document,ac,Pn.clearMenus),P.on(document,ir,Pn.clearMenus),P.on(document,ac,E,function(k){k.preventDefault(),Pn.getOrCreateInstance(this).toggle()}),L(Pn);const Kn="backdrop",Is="show",qo=`mousedown.bs.${Kn}`,tu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Lf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class vh extends qe{constructor(_){super(),this._config=this._getConfig(_),this._isAppended=!1,this._element=null}static get Default(){return tu}static get DefaultType(){return Lf}static get NAME(){return Kn}show(_){if(!this._config.isVisible)return void $(_);this._append();const w=this._getElement();this._config.isAnimated&&T(w),w.classList.add(Is),this._emulateAnimation(()=>{$(_)})}hide(_){this._config.isVisible?(this._getElement().classList.remove(Is),this._emulateAnimation(()=>{this.dispose(),$(_)})):$(_)}dispose(){this._isAppended&&(P.off(this._element,qo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const _=document.createElement("div");_.className=this._config.className,this._config.isAnimated&&_.classList.add("fade"),this._element=_}return this._element}_configAfterMerge(_){return _.rootElement=h(_.rootElement),_}_append(){if(this._isAppended)return;const _=this._getElement();this._config.rootElement.append(_),P.on(_,qo,()=>{$(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(_){q(_,this._getElement(),this._config.isAnimated)}}const Wo=".bs.focustrap",xh=`focusin${Wo}`,Vf=`keydown.tab${Wo}`,Eh="backward",Ff={autofocus:!0,trapElement:null},ay={autofocus:"boolean",trapElement:"element"};class Uf extends qe{constructor(_){super(),this._config=this._getConfig(_),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ff}static get DefaultType(){return ay}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,Wo),P.on(document,xh,_=>this._handleFocusin(_)),P.on(document,Vf,_=>this._handleKeydown(_)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,Wo))}_handleFocusin(_){const{trapElement:w}=this._config;if(_.target===document||_.target===w||w.contains(_.target))return;const j=Se.focusableChildren(w);j.length===0?w.focus():this._lastTabNavDirection===Eh?j[j.length-1].focus():j[0].focus()}_handleKeydown(_){_.key==="Tab"&&(this._lastTabNavDirection=_.shiftKey?Eh:"forward")}}const zf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Bf=".sticky-top",nu="padding-right",Mi="margin-right";class Ga{constructor(){this._element=document.body}getWidth(){const _=document.documentElement.clientWidth;return Math.abs(window.innerWidth-_)}hide(){const _=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,nu,w=>w+_),this._setElementAttributes(zf,nu,w=>w+_),this._setElementAttributes(Bf,Mi,w=>w-_)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,nu),this._resetElementAttributes(zf,nu),this._resetElementAttributes(Bf,Mi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(_,w,j){const Q=this.getWidth();this._applyManipulationCallback(_,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+Q)return;this._saveInitialAttribute(ee,w);const de=window.getComputedStyle(ee).getPropertyValue(w);ee.style.setProperty(w,`${j(Number.parseFloat(de))}px`)})}_saveInitialAttribute(_,w){const j=_.style.getPropertyValue(w);j&&Ne.setDataAttribute(_,w,j)}_resetElementAttributes(_,w){this._applyManipulationCallback(_,j=>{const Q=Ne.getDataAttribute(j,w);Q!==null?(Ne.removeDataAttribute(j,w),j.style.setProperty(w,Q)):j.style.removeProperty(w)})}_applyManipulationCallback(_,w){if(u(_))w(_);else for(const j of Se.find(_,this._element))w(j)}}const Zi=".bs.modal",Hf=`hide${Zi}`,$f=`hidePrevented${Zi}`,wh=`hidden${Zi}`,iu=`show${Zi}`,oy=`shown${Zi}`,Go=`resize${Zi}`,Th=`click.dismiss${Zi}`,lc=`mousedown.dismiss${Zi}`,Sh=`keydown.dismiss${Zi}`,qf=`click${Zi}.data-api`,Jr="modal-open",Ka="show",cc="modal-static",Wf={backdrop:!0,focus:!0,keyboard:!0},Ya={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ea extends je{constructor(_,w){super(_,w),this._dialog=Se.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ga,this._addEventListeners()}static get Default(){return Wf}static get DefaultType(){return Ya}static get NAME(){return"modal"}toggle(_){return this._isShown?this.hide():this.show(_)}show(_){this._isShown||this._isTransitioning||P.trigger(this._element,iu,{relatedTarget:_}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Jr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(_)))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,Hf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ka),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){P.off(window,Zi),P.off(this._dialog,Zi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new vh({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Uf({trapElement:this._element})}_showElement(_){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const w=Se.findOne(".modal-body",this._dialog);w&&(w.scrollTop=0),T(this._element),this._element.classList.add(Ka),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,oy,{relatedTarget:_})},this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,Sh,_=>{_.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),P.on(window,Go,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),P.on(this._element,lc,_=>{P.one(this._element,Th,w=>{this._element===_.target&&this._element===w.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Jr),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,wh)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,$f).defaultPrevented)return;const _=this._element.scrollHeight>document.documentElement.clientHeight,w=this._element.style.overflowY;w==="hidden"||this._element.classList.contains(cc)||(_||(this._element.style.overflowY="hidden"),this._element.classList.add(cc),this._queueCallback(()=>{this._element.classList.remove(cc),this._queueCallback(()=>{this._element.style.overflowY=w},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const _=this._element.scrollHeight>document.documentElement.clientHeight,w=this._scrollBar.getWidth(),j=w>0;if(j&&!_){const Q=R()?"paddingLeft":"paddingRight";this._element.style[Q]=`${w}px`}if(!j&&_){const Q=R()?"paddingRight":"paddingLeft";this._element.style[Q]=`${w}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(_,w){return this.each(function(){const j=ea.getOrCreateInstance(this,_);if(typeof _=="string"){if(j[_]===void 0)throw new TypeError(`No method named "${_}"`);j[_](w)}})}}P.on(document,qf,'[data-bs-toggle="modal"]',function(k){const _=Se.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&k.preventDefault(),P.one(_,iu,j=>{j.defaultPrevented||P.one(_,wh,()=>{f(this)&&this.focus()})});const w=Se.findOne(".modal.show");w&&ea.getInstance(w).hide(),ea.getOrCreateInstance(_).toggle(this)}),Tt(ea),L(ea);const sr=".bs.offcanvas",Ah=".data-api",ly=`load${sr}${Ah}`,Gf="show",Kf="showing",Ch="hiding",Rh=".offcanvas.show",Ih=`show${sr}`,ks=`shown${sr}`,Yf=`hide${sr}`,Ji=`hidePrevented${sr}`,es=`hidden${sr}`,Ko=`resize${sr}`,kh=`click${sr}${Ah}`,su=`keydown.dismiss${sr}`,ru={backdrop:!0,keyboard:!0,scroll:!1},Nh={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Pi extends je{constructor(_,w){super(_,w),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ru}static get DefaultType(){return Nh}static get NAME(){return"offcanvas"}toggle(_){return this._isShown?this.hide():this.show(_)}show(_){this._isShown||P.trigger(this._element,Ih,{relatedTarget:_}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ga().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Kf),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Gf),this._element.classList.remove(Kf),P.trigger(this._element,ks,{relatedTarget:_})},this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,Yf).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ch),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Gf,Ch),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ga().reset(),P.trigger(this._element,es)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const _=!!this._config.backdrop;return new vh({className:"offcanvas-backdrop",isVisible:_,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:_?()=>{this._config.backdrop!=="static"?this.hide():P.trigger(this._element,Ji)}:null})}_initializeFocusTrap(){return new Uf({trapElement:this._element})}_addEventListeners(){P.on(this._element,su,_=>{_.key==="Escape"&&(this._config.keyboard?this.hide():P.trigger(this._element,Ji))})}static jQueryInterface(_){return this.each(function(){const w=Pi.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_](this)}})}}P.on(document,kh,'[data-bs-toggle="offcanvas"]',function(k){const _=Se.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&k.preventDefault(),y(this))return;P.one(_,es,()=>{f(this)&&this.focus()});const w=Se.findOne(Rh);w&&w!==_&&Pi.getInstance(w).hide(),Pi.getOrCreateInstance(_).toggle(this)}),P.on(window,ly,()=>{for(const k of Se.find(Rh))Pi.getOrCreateInstance(k).show()}),P.on(window,Ko,()=>{for(const k of Se.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(k).position!=="fixed"&&Pi.getOrCreateInstance(k).hide()}),Tt(Pi),L(Pi);const Dh={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},au=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yo=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,cy=(k,_)=>{const w=k.nodeName.toLowerCase();return _.includes(w)?!au.has(w)||!!Yo.test(k.nodeValue):_.filter(j=>j instanceof RegExp).some(j=>j.test(w))},ts={allowList:Dh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Oh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ar={entry:"(string|element|function|null)",selector:"(string|element)"};class Xf extends qe{constructor(_){super(),this._config=this._getConfig(_)}static get Default(){return ts}static get DefaultType(){return Oh}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(_=>this._resolvePossibleFunction(_)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(_){return this._checkContent(_),this._config.content={...this._config.content,..._},this}toHtml(){const _=document.createElement("div");_.innerHTML=this._maybeSanitize(this._config.template);for(const[Q,ee]of Object.entries(this._config.content))this._setContent(_,ee,Q);const w=_.children[0],j=this._resolvePossibleFunction(this._config.extraClass);return j&&w.classList.add(...j.split(" ")),w}_typeCheckConfig(_){super._typeCheckConfig(_),this._checkContent(_.content)}_checkContent(_){for(const[w,j]of Object.entries(_))super._typeCheckConfig({selector:w,entry:j},Ar)}_setContent(_,w,j){const Q=Se.findOne(j,_);Q&&((w=this._resolvePossibleFunction(w))?u(w)?this._putElementInTemplate(h(w),Q):this._config.html?Q.innerHTML=this._maybeSanitize(w):Q.textContent=w:Q.remove())}_maybeSanitize(_){return this._config.sanitize?function(w,j,Q){if(!w.length)return w;if(Q&&typeof Q=="function")return Q(w);const ee=new window.DOMParser().parseFromString(w,"text/html"),de=[].concat(...ee.body.querySelectorAll("*"));for(const be of de){const Oe=be.nodeName.toLowerCase();if(!Object.keys(j).includes(Oe)){be.remove();continue}const Be=[].concat(...be.attributes),$e=[].concat(j["*"]||[],j[Oe]||[]);for(const Fe of Be)cy(Fe,$e)||be.removeAttribute(Fe.nodeName)}return ee.body.innerHTML}(_,this._config.allowList,this._config.sanitizeFn):_}_resolvePossibleFunction(_){return $(_,[void 0,this])}_putElementInTemplate(_,w){if(this._config.html)return w.innerHTML="",void w.append(_);w.textContent=_.textContent}}const ou=new Set(["sanitize","allowList","sanitizeFn"]),Cr="fade",Xo="show",Mh=".tooltip-inner",Xa=".modal",Qa="hide.bs.modal",ta="hover",Qo="focus",ji="click",ls={AUTO:"auto",TOP:"top",RIGHT:R()?"left":"right",BOTTOM:"bottom",LEFT:R()?"right":"left"},Za={allowList:Dh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Rr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ai extends je{constructor(_,w){if(Wa===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(_,w),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Za}static get DefaultType(){return Rr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(Xa),Qa,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const _=P.trigger(this._element,this.constructor.eventName("show")),w=(v(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(_.defaultPrevented||!w)return;this._disposePopper();const j=this._getTipElement();this._element.setAttribute("aria-describedby",j.getAttribute("id"));const{container:Q}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Q.append(j),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(j),j.classList.add(Xo),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))P.on(ee,"mouseover",x);this._queueCallback(()=>{P.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Xo),"ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))P.off(_,"mouseover",x);this._activeTrigger[ji]=!1,this._activeTrigger[Qo]=!1,this._activeTrigger[ta]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(_){const w=this._getTemplateFactory(_).toHtml();if(!w)return null;w.classList.remove(Cr,Xo),w.classList.add(`bs-${this.constructor.NAME}-auto`);const j=(Q=>{do Q+=Math.floor(1e6*Math.random());while(document.getElementById(Q));return Q})(this.constructor.NAME).toString();return w.setAttribute("id",j),this._isAnimated()&&w.classList.add(Cr),w}setContent(_){this._newContent=_,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(_){return this._templateFactory?this._templateFactory.changeContent(_):this._templateFactory=new Xf({...this._config,content:_,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Mh]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(_){return this.constructor.getOrCreateInstance(_.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Cr)}_isShown(){return this.tip&&this.tip.classList.contains(Xo)}_createPopper(_){const w=$(this._config.placement,[this,_,this._element]),j=ls[w.toUpperCase()];return Ho(this._element,_,this._getPopperConfig(j))}_getOffset(){const{offset:_}=this._config;return typeof _=="string"?_.split(",").map(w=>Number.parseInt(w,10)):typeof _=="function"?w=>_(w,this._element):_}_resolvePossibleFunction(_){return $(_,[this._element,this._element])}_getPopperConfig(_){const w={placement:_,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:j=>{this._getTipElement().setAttribute("data-popper-placement",j.state.placement)}}]};return{...w,...$(this._config.popperConfig,[void 0,w])}}_setListeners(){const _=this._config.trigger.split(" ");for(const w of _)if(w==="click")P.on(this._element,this.constructor.eventName("click"),this._config.selector,j=>{const Q=this._initializeOnDelegatedTarget(j);Q._activeTrigger[ji]=!(Q._isShown()&&Q._activeTrigger[ji]),Q.toggle()});else if(w!=="manual"){const j=w===ta?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),Q=w===ta?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,j,this._config.selector,ee=>{const de=this._initializeOnDelegatedTarget(ee);de._activeTrigger[ee.type==="focusin"?Qo:ta]=!0,de._enter()}),P.on(this._element,Q,this._config.selector,ee=>{const de=this._initializeOnDelegatedTarget(ee);de._activeTrigger[ee.type==="focusout"?Qo:ta]=de._element.contains(ee.relatedTarget),de._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(Xa),Qa,this._hideModalHandler)}_fixTitle(){const _=this._element.getAttribute("title");_&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",_),this._element.setAttribute("data-bs-original-title",_),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(_,w){clearTimeout(this._timeout),this._timeout=setTimeout(_,w)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(_){const w=Ne.getDataAttributes(this._element);for(const j of Object.keys(w))ou.has(j)&&delete w[j];return _={...w,...typeof _=="object"&&_?_:{}},_=this._mergeConfigObj(_),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}_configAfterMerge(_){return _.container=_.container===!1?document.body:h(_.container),typeof _.delay=="number"&&(_.delay={show:_.delay,hide:_.delay}),typeof _.title=="number"&&(_.title=_.title.toString()),typeof _.content=="number"&&(_.content=_.content.toString()),_}_getDelegateConfig(){const _={};for(const[w,j]of Object.entries(this._config))this.constructor.Default[w]!==j&&(_[w]=j);return _.selector=!1,_.trigger="manual",_}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(_){return this.each(function(){const w=Ai.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_]()}})}}L(Ai);const Ja=".popover-header",Qf=".popover-body",Ph={...Ai.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},jh={...Ai.DefaultType,content:"(null|string|element|function)"};class Yn extends Ai{static get Default(){return Ph}static get DefaultType(){return jh}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ja]:this._getTitle(),[Qf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(_){return this.each(function(){const w=Yn.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_]()}})}}L(Yn);const pn=".bs.scrollspy",$t=`activate${pn}`,na=`click${pn}`,rr=`load${pn}.data-api`,ia="active",Ir="[href]",Lh=".nav-link",Zf=`${Lh}, .nav-item > ${Lh}, .list-group-item`,uc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},hc={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Zo extends je{constructor(_,w){super(_,w),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return uc}static get DefaultType(){return hc}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const _ of this._observableSections.values())this._observer.observe(_)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(_){return _.target=h(_.target)||document.body,_.rootMargin=_.offset?`${_.offset}px 0px -30%`:_.rootMargin,typeof _.threshold=="string"&&(_.threshold=_.threshold.split(",").map(w=>Number.parseFloat(w))),_}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,na),P.on(this._config.target,na,Ir,_=>{const w=this._observableSections.get(_.target.hash);if(w){_.preventDefault();const j=this._rootElement||window,Q=w.offsetTop-this._element.offsetTop;if(j.scrollTo)return void j.scrollTo({top:Q,behavior:"smooth"});j.scrollTop=Q}}))}_getNewObserver(){const _={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(w=>this._observerCallback(w),_)}_observerCallback(_){const w=de=>this._targetLinks.get(`#${de.target.id}`),j=de=>{this._previousScrollData.visibleEntryTop=de.target.offsetTop,this._process(w(de))},Q=(this._rootElement||document.documentElement).scrollTop,ee=Q>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Q;for(const de of _){if(!de.isIntersecting){this._activeTarget=null,this._clearActiveClass(w(de));continue}const be=de.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&be){if(j(de),!Q)return}else ee||be||j(de)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const _=Se.find(Ir,this._config.target);for(const w of _){if(!w.hash||y(w))continue;const j=Se.findOne(decodeURI(w.hash),this._element);f(j)&&(this._targetLinks.set(decodeURI(w.hash),w),this._observableSections.set(w.hash,j))}}_process(_){this._activeTarget!==_&&(this._clearActiveClass(this._config.target),this._activeTarget=_,_.classList.add(ia),this._activateParents(_),P.trigger(this._element,$t,{relatedTarget:_}))}_activateParents(_){if(_.classList.contains("dropdown-item"))Se.findOne(".dropdown-toggle",_.closest(".dropdown")).classList.add(ia);else for(const w of Se.parents(_,".nav, .list-group"))for(const j of Se.prev(w,Zf))j.classList.add(ia)}_clearActiveClass(_){_.classList.remove(ia);const w=Se.find(`${Ir}.${ia}`,_);for(const j of w)j.classList.remove(ia)}static jQueryInterface(_){return this.each(function(){const w=Zo.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_]()}})}}P.on(window,rr,()=>{for(const k of Se.find('[data-bs-spy="scroll"]'))Zo.getOrCreateInstance(k)}),L(Zo);const Ns=".bs.tab",Vh=`hide${Ns}`,eo=`hidden${Ns}`,kr=`show${Ns}`,sa=`shown${Ns}`,Nr=`click${Ns}`,Fh=`keydown${Ns}`,Uh=`load${Ns}`,dc="ArrowLeft",fc="ArrowRight",to="ArrowUp",ii="ArrowDown",Jo="Home",zh="End",no="active",Jf="fade",Bh="show",In=".dropdown-toggle",mc=`:not(${In})`,el='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',io=`.nav-link${mc}, .list-group-item${mc}, [role="tab"]${mc}, ${el}`,Hh=`.${no}[data-bs-toggle="tab"], .${no}[data-bs-toggle="pill"], .${no}[data-bs-toggle="list"]`;class cs extends je{constructor(_){super(_),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,Fh,w=>this._keydown(w)))}static get NAME(){return"tab"}show(){const _=this._element;if(this._elemIsActive(_))return;const w=this._getActiveElem(),j=w?P.trigger(w,Vh,{relatedTarget:_}):null;P.trigger(_,kr,{relatedTarget:w}).defaultPrevented||j&&j.defaultPrevented||(this._deactivate(w,_),this._activate(_,w))}_activate(_,w){_&&(_.classList.add(no),this._activate(Se.getElementFromSelector(_)),this._queueCallback(()=>{_.getAttribute("role")==="tab"?(_.removeAttribute("tabindex"),_.setAttribute("aria-selected",!0),this._toggleDropDown(_,!0),P.trigger(_,sa,{relatedTarget:w})):_.classList.add(Bh)},_,_.classList.contains(Jf)))}_deactivate(_,w){_&&(_.classList.remove(no),_.blur(),this._deactivate(Se.getElementFromSelector(_)),this._queueCallback(()=>{_.getAttribute("role")==="tab"?(_.setAttribute("aria-selected",!1),_.setAttribute("tabindex","-1"),this._toggleDropDown(_,!1),P.trigger(_,eo,{relatedTarget:w})):_.classList.remove(Bh)},_,_.classList.contains(Jf)))}_keydown(_){if(![dc,fc,to,ii,Jo,zh].includes(_.key))return;_.stopPropagation(),_.preventDefault();const w=this._getChildren().filter(Q=>!y(Q));let j;if([Jo,zh].includes(_.key))j=w[_.key===Jo?0:w.length-1];else{const Q=[fc,ii].includes(_.key);j=Z(w,_.target,Q,!0)}j&&(j.focus({preventScroll:!0}),cs.getOrCreateInstance(j).show())}_getChildren(){return Se.find(io,this._parent)}_getActiveElem(){return this._getChildren().find(_=>this._elemIsActive(_))||null}_setInitialAttributes(_,w){this._setAttributeIfNotExists(_,"role","tablist");for(const j of w)this._setInitialAttributesOnChild(j)}_setInitialAttributesOnChild(_){_=this._getInnerElement(_);const w=this._elemIsActive(_),j=this._getOuterElement(_);_.setAttribute("aria-selected",w),j!==_&&this._setAttributeIfNotExists(j,"role","presentation"),w||_.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(_,"role","tab"),this._setInitialAttributesOnTargetPanel(_)}_setInitialAttributesOnTargetPanel(_){const w=Se.getElementFromSelector(_);w&&(this._setAttributeIfNotExists(w,"role","tabpanel"),_.id&&this._setAttributeIfNotExists(w,"aria-labelledby",`${_.id}`))}_toggleDropDown(_,w){const j=this._getOuterElement(_);if(!j.classList.contains("dropdown"))return;const Q=(ee,de)=>{const be=Se.findOne(ee,j);be&&be.classList.toggle(de,w)};Q(In,no),Q(".dropdown-menu",Bh),j.setAttribute("aria-expanded",w)}_setAttributeIfNotExists(_,w,j){_.hasAttribute(w)||_.setAttribute(w,j)}_elemIsActive(_){return _.classList.contains(no)}_getInnerElement(_){return _.matches(io)?_:Se.findOne(io,_)}_getOuterElement(_){return _.closest(".nav-item, .list-group-item")||_}static jQueryInterface(_){return this.each(function(){const w=cs.getOrCreateInstance(this);if(typeof _=="string"){if(w[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);w[_]()}})}}P.on(document,Nr,el,function(k){["A","AREA"].includes(this.tagName)&&k.preventDefault(),y(this)||cs.getOrCreateInstance(this).show()}),P.on(window,Uh,()=>{for(const k of Se.find(Hh))cs.getOrCreateInstance(k)}),L(cs);const ns=".bs.toast",uy=`mouseover${ns}`,em=`mouseout${ns}`,hy=`focusin${ns}`,tm=`focusout${ns}`,so=`hide${ns}`,$h=`hidden${ns}`,lu=`show${ns}`,nm=`shown${ns}`,tl="hide",pc="show",ro="showing",qh={animation:"boolean",autohide:"boolean",delay:"number"},im={animation:!0,autohide:!0,delay:5e3};class ra extends je{constructor(_,w){super(_,w),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return im}static get DefaultType(){return qh}static get NAME(){return"toast"}show(){P.trigger(this._element,lu).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(tl),T(this._element),this._element.classList.add(pc,ro),this._queueCallback(()=>{this._element.classList.remove(ro),P.trigger(this._element,nm),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,so).defaultPrevented||(this._element.classList.add(ro),this._queueCallback(()=>{this._element.classList.add(tl),this._element.classList.remove(ro,pc),P.trigger(this._element,$h)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(pc),super.dispose()}isShown(){return this._element.classList.contains(pc)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(_,w){switch(_.type){case"mouseover":case"mouseout":this._hasMouseInteraction=w;break;case"focusin":case"focusout":this._hasKeyboardInteraction=w}if(w)return void this._clearTimeout();const j=_.relatedTarget;this._element===j||this._element.contains(j)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,uy,_=>this._onInteraction(_,!0)),P.on(this._element,em,_=>this._onInteraction(_,!1)),P.on(this._element,hy,_=>this._onInteraction(_,!0)),P.on(this._element,tm,_=>this._onInteraction(_,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(_){return this.each(function(){const w=ra.getOrCreateInstance(this,_);if(typeof _=="string"){if(w[_]===void 0)throw new TypeError(`No method named "${_}"`);w[_](this)}})}}return Tt(ra),L(ra),{Alert:He,Button:st,Carousel:br,Collapse:Rn,Dropdown:Pn,Modal:ea,Offcanvas:Pi,Popover:Yn,ScrollSpy:Zo,Tab:cs,Toast:ra,Tooltip:Ai}})}(gp)),gp.exports}GN();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tw="popstate";function KN(n={}){function e(i,s){let{pathname:a,search:l,hash:u}=i.location;return db("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:nf(s)}return XN(e,t,null,n)}function En(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ur(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YN(){return Math.random().toString(36).substring(2,10)}function nw(n,e){return{usr:n.state,key:n.key,idx:e}}function db(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?rh(e):e,state:t,key:e&&e.key||i||YN()}}function nf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function rh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function XN(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,u="POP",h=null,f=y();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function y(){return(l.state||{idx:null}).idx}function v(){u="POP";let R=y(),L=R==null?null:R-f;f=R,h&&h({action:u,location:D.location,delta:L})}function x(R,L){u="PUSH";let $=db(D.location,R,L);f=y()+1;let q=nw($,f),Z=D.createHref($);try{l.pushState(q,"",Z)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(Z)}a&&h&&h({action:u,location:D.location,delta:1})}function T(R,L){u="REPLACE";let $=db(D.location,R,L);f=y();let q=nw($,f),Z=D.createHref($);l.replaceState(q,"",Z),a&&h&&h({action:u,location:D.location,delta:0})}function C(R){return QN(R)}let D={get action(){return u},get location(){return n(s,l)},listen(R){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(tw,v),h=R,()=>{s.removeEventListener(tw,v),h=null}},createHref(R){return e(s,R)},createURL:C,encodeLocation(R){let L=C(R);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:x,replace:T,go(R){return l.go(R)}};return D}function QN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),En(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:nf(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function DA(n,e,t="/"){return ZN(n,e,t,!1)}function ZN(n,e,t,i){let s=typeof e=="string"?rh(e):e,a=Ro(s.pathname||"/",t);if(a==null)return null;let l=OA(n);JN(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=uD(a);u=lD(l[h],f,i)}return u}function OA(n,e=[],t=[],i=""){let s=(a,l,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(En(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length));let f=Ao([i,h.relativePath]),y=t.concat(h);a.children&&a.children.length>0&&(En(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),OA(a.children,e,y,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:aD(f,a.index),routesMeta:y})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let u of MA(a.path))s(a,l,u)}),e}function MA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=MA(i.join("/")),u=[];return u.push(...l.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...l),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function JN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oD(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var eD=/^:[\w-]+$/,tD=3,nD=2,iD=1,sD=10,rD=-2,iw=n=>n==="*";function aD(n,e){let t=n.split("/"),i=t.length;return t.some(iw)&&(i+=rD),e&&(i+=nD),t.filter(s=>!iw(s)).reduce((s,a)=>s+(eD.test(a)?tD:a===""?iD:sD),i)}function oD(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function lD(n,e,t=!1){let{routesMeta:i}=n,s={},a="/",l=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,y=a==="/"?e:e.slice(a.length)||"/",v=Dp({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},y),x=h.route;if(!v&&f&&t&&!i[i.length-1].route.index&&(v=Dp({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Ao([a,v.pathname]),pathnameBase:mD(Ao([a,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(a=Ao([a,v.pathnameBase]))}return l}function Dp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=cD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((f,{paramName:y,isOptional:v},x)=>{if(y==="*"){let C=u[x]||"";l=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const T=u[x];return v&&!T?f[y]=void 0:f[y]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:n}}function cD(n,e=!1,t=!0){Ur(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function uD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ur(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ro(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function hD(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?rh(n):n;return{pathname:t?t.startsWith("/")?t:dD(t,e):e,search:pD(i),hash:gD(s)}}function dD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function w_(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function nv(n){let e=fD(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function iv(n,e,t,i=!1){let s;typeof n=="string"?s=rh(n):(s={...n},En(!s.pathname||!s.pathname.includes("?"),w_("?","pathname","search",s)),En(!s.pathname||!s.pathname.includes("#"),w_("#","pathname","hash",s)),En(!s.search||!s.search.includes("#"),w_("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!i&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}u=v>=0?e[v]:"/"}let h=hD(s,u),f=l&&l!=="/"&&l.endsWith("/"),y=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||y)&&(h.pathname+="/"),h}var Ao=n=>n.join("/").replace(/\/\/+/g,"/"),mD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function yD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var PA=["POST","PUT","PATCH","DELETE"];new Set(PA);var _D=["GET",...PA];new Set(_D);var ah=N.createContext(null);ah.displayName="DataRouter";var gg=N.createContext(null);gg.displayName="DataRouterState";N.createContext(!1);var jA=N.createContext({isTransitioning:!1});jA.displayName="ViewTransition";var bD=N.createContext(new Map);bD.displayName="Fetchers";var vD=N.createContext(null);vD.displayName="Await";var Hr=N.createContext(null);Hr.displayName="Navigation";var wf=N.createContext(null);wf.displayName="Location";var Ia=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ia.displayName="Route";var sv=N.createContext(null);sv.displayName="RouteError";function xD(n,{relative:e}={}){En(oh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=N.useContext(Hr),{hash:s,pathname:a,search:l}=Tf(n,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Ao([t,a])),i.createHref({pathname:u,search:l,hash:s})}function oh(){return N.useContext(wf)!=null}function ka(){return En(oh(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(wf).location}var LA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function VA(n){N.useContext(Hr).static||N.useLayoutEffect(n)}function lh(){let{isDataRoute:n}=N.useContext(Ia);return n?MD():ED()}function ED(){En(oh(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(ah),{basename:e,navigator:t}=N.useContext(Hr),{matches:i}=N.useContext(Ia),{pathname:s}=ka(),a=JSON.stringify(nv(i)),l=N.useRef(!1);return VA(()=>{l.current=!0}),N.useCallback((h,f={})=>{if(Ur(l.current,LA),!l.current)return;if(typeof h=="number"){t.go(h);return}let y=iv(h,JSON.parse(a),s,f.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ao([e,y.pathname])),(f.replace?t.replace:t.push)(y,f.state,f)},[e,t,a,s,n])}N.createContext(null);function Tf(n,{relative:e}={}){let{matches:t}=N.useContext(Ia),{pathname:i}=ka(),s=JSON.stringify(nv(t));return N.useMemo(()=>iv(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function wD(n,e){return FA(n,e)}function FA(n,e,t,i){En(oh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=N.useContext(Hr),{matches:a}=N.useContext(Ia),l=a[a.length-1],u=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",y=l&&l.route;{let L=y&&y.path||"";UA(h,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let v=ka(),x;if(e){let L=typeof e=="string"?rh(e):e;En(f==="/"||L.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${L.pathname}" was given in the \`location\` prop.`),x=L}else x=v;let T=x.pathname||"/",C=T;if(f!=="/"){let L=f.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let D=DA(n,{pathname:C});Ur(y||D!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ur(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=RD(D&&D.map(L=>Object.assign({},L,{params:Object.assign({},u,L.params),pathname:Ao([f,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:Ao([f,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),a,t,i);return e&&R?N.createElement(wf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},R):R}function TD(){let n=OD(),e=yD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,l)}var SD=N.createElement(TD,null),AD=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?N.createElement(Ia.Provider,{value:this.props.routeContext},N.createElement(sv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CD({routeContext:n,match:e,children:t}){let i=N.useContext(ah);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Ia.Provider,{value:n},t)}function RD(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let h=s.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);En(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,u=-1;if(t)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:y,errors:v}=t,x=f.route.loader&&!y.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((h,f,y)=>{let v,x=!1,T=null,C=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,T=f.route.errorElement||SD,l&&(u<0&&y===0?(UA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,C=null):u===y&&(x=!0,C=f.route.hydrateFallbackElement||null)));let D=e.concat(s.slice(0,y+1)),R=()=>{let L;return v?L=T:x?L=C:f.route.Component?L=N.createElement(f.route.Component,null):f.route.element?L=f.route.element:L=h,N.createElement(CD,{match:f,routeContext:{outlet:h,matches:D,isDataRoute:t!=null},children:L})};return t&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?N.createElement(AD,{location:t.location,revalidation:t.revalidation,component:T,error:v,children:R(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):R()},null)}function rv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ID(n){let e=N.useContext(ah);return En(e,rv(n)),e}function kD(n){let e=N.useContext(gg);return En(e,rv(n)),e}function ND(n){let e=N.useContext(Ia);return En(e,rv(n)),e}function av(n){let e=ND(n),t=e.matches[e.matches.length-1];return En(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function DD(){return av("useRouteId")}function OD(){let n=N.useContext(sv),e=kD("useRouteError"),t=av("useRouteError");return n!==void 0?n:e.errors?.[t]}function MD(){let{router:n}=ID("useNavigate"),e=av("useNavigate"),t=N.useRef(!1);return VA(()=>{t.current=!0}),N.useCallback(async(s,a={})=>{Ur(t.current,LA),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var sw={};function UA(n,e,t){!e&&!sw[n]&&(sw[n]=!0,Ur(!1,t))}N.memo(PD);function PD({routes:n,future:e,state:t}){return FA(n,void 0,t,e)}function zA({to:n,replace:e,state:t,relative:i}){En(oh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Hr);Ur(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(Ia),{pathname:l}=ka(),u=lh(),h=iv(n,nv(a),l,i==="path"),f=JSON.stringify(h);return N.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:i})},[u,f,i,e,t]),null}function Pr(n){En(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1}){En(!oh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=rh(t));let{pathname:h="/",search:f="",hash:y="",state:v=null,key:x="default"}=t,T=N.useMemo(()=>{let C=Ro(h,l);return C==null?null:{location:{pathname:C,search:f,hash:y,state:v,key:x},navigationType:i}},[l,h,f,y,v,x,i]);return Ur(T!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:N.createElement(Hr.Provider,{value:u},N.createElement(wf.Provider,{children:e,value:T}))}function LD({children:n,location:e}){return wD(fb(n),e)}function fb(n,e=[]){let t=[];return N.Children.forEach(n,(i,s)=>{if(!N.isValidElement(i))return;let a=[...e,s];if(i.type===N.Fragment){t.push.apply(t,fb(i.props.children,a));return}En(i.type===Pr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),En(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=fb(i.props.children,a)),t.push(l)}),t}var yp="get",_p="application/x-www-form-urlencoded";function yg(n){return n!=null&&typeof n.tagName=="string"}function VD(n){return yg(n)&&n.tagName.toLowerCase()==="button"}function FD(n){return yg(n)&&n.tagName.toLowerCase()==="form"}function UD(n){return yg(n)&&n.tagName.toLowerCase()==="input"}function zD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BD(n,e){return n.button===0&&(!e||e==="_self")&&!zD(n)}var qm=null;function HD(){if(qm===null)try{new FormData(document.createElement("form"),0),qm=!1}catch{qm=!0}return qm}var $D=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function T_(n){return n!=null&&!$D.has(n)?(Ur(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_p}"`),null):n}function qD(n,e){let t,i,s,a,l;if(FD(n)){let u=n.getAttribute("action");i=u?Ro(u,e):null,t=n.getAttribute("method")||yp,s=T_(n.getAttribute("enctype"))||_p,a=new FormData(n)}else if(VD(n)||UD(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(i=h?Ro(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||yp,s=T_(n.getAttribute("formenctype"))||T_(u.getAttribute("enctype"))||_p,a=new FormData(u,n),!HD()){let{name:f,type:y,value:v}=n;if(y==="image"){let x=f?`${f}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else f&&a.append(f,v)}}else{if(yg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yp,i=null,s=_p,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ov(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function WD(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ro(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function GD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function YD(n,e,t){let i=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await GD(a,t);return l.links?l.links():[]}return[]}));return JD(i.flat(1).filter(KD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function rw(n,e,t,i,s,a){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return a==="assets"?e.filter((h,f)=>l(h,f)||u(h,f)):a==="data"?e.filter((h,f)=>{let y=i.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function XD(n,e,{includeHydrateFallback:t}={}){return QD(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function QD(n){return[...new Set(n)]}function ZD(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function JD(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let a=JSON.stringify(ZD(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function BA(){let n=N.useContext(ah);return ov(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function eO(){let n=N.useContext(gg);return ov(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var lv=N.createContext(void 0);lv.displayName="FrameworkContext";function HA(){let n=N.useContext(lv);return ov(n,"You must render this element inside a <HydratedRouter> element"),n}function tO(n,e){let t=N.useContext(lv),[i,s]=N.useState(!1),[a,l]=N.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:y,onTouchStart:v}=e,x=N.useRef(null);N.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let D=L=>{L.forEach($=>{l($.isIntersecting)})},R=new IntersectionObserver(D,{threshold:.5});return x.current&&R.observe(x.current),()=>{R.disconnect()}}},[n]),N.useEffect(()=>{if(i){let D=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(D)}}},[i]);let T=()=>{s(!0)},C=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:Rd(u,T),onBlur:Rd(h,C),onMouseEnter:Rd(f,T),onMouseLeave:Rd(y,C),onTouchStart:Rd(v,T)}]:[!1,x,{}]}function Rd(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function nO({page:n,...e}){let{router:t}=BA(),i=N.useMemo(()=>DA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?N.createElement(sO,{page:n,matches:i,...e}):null}function iO(n){let{manifest:e,routeModules:t}=HA(),[i,s]=N.useState([]);return N.useEffect(()=>{let a=!1;return YD(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),i}function sO({page:n,matches:e,...t}){let i=ka(),{manifest:s,routeModules:a}=HA(),{basename:l}=BA(),{loaderData:u,matches:h}=eO(),f=N.useMemo(()=>rw(n,e,h,s,i,"data"),[n,e,h,s,i]),y=N.useMemo(()=>rw(n,e,h,s,i,"assets"),[n,e,h,s,i]),v=N.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,D=!1;if(e.forEach(L=>{let $=s.routes[L.route.id];!$||!$.hasLoader||(!f.some(q=>q.route.id===L.route.id)&&L.route.id in u&&a[L.route.id]?.shouldRevalidate||$.hasClientLoader?D=!0:C.add(L.route.id))}),C.size===0)return[];let R=WD(n,l,"data");return D&&C.size>0&&R.searchParams.set("_routes",e.filter(L=>C.has(L.route.id)).map(L=>L.route.id).join(",")),[R.pathname+R.search]},[l,u,i,s,f,e,n,a]),x=N.useMemo(()=>XD(y,s),[y,s]),T=iO(y);return N.createElement(N.Fragment,null,v.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),x.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),T.map(({key:C,link:D})=>N.createElement("link",{key:C,...D})))}function rO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $A=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$A&&(window.__reactRouterVersion="7.7.1")}catch{}function aO({basename:n,children:e,window:t}){let i=N.useRef();i.current==null&&(i.current=KN({window:t,v5Compat:!0}));let s=i.current,[a,l]=N.useState({action:s.action,location:s.location}),u=N.useCallback(h=>{N.startTransition(()=>l(h))},[l]);return N.useLayoutEffect(()=>s.listen(u),[s,u]),N.createElement(jD,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var qA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WA=N.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:l,state:u,target:h,to:f,preventScrollReset:y,viewTransition:v,...x},T){let{basename:C}=N.useContext(Hr),D=typeof f=="string"&&qA.test(f),R,L=!1;if(typeof f=="string"&&D&&(R=f,$A))try{let O=new URL(window.location.href),U=f.startsWith("//")?new URL(O.protocol+f):new URL(f),H=Ro(U.pathname,C);U.origin===O.origin&&H!=null?f=H+U.search+U.hash:L=!0}catch{Ur(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=xD(f,{relative:s}),[q,Z,Y]=tO(i,x),J=cO(f,{replace:l,state:u,target:h,preventScrollReset:y,relative:s,viewTransition:v});function F(O){e&&e(O),O.defaultPrevented||J(O)}let I=N.createElement("a",{...x,...Y,href:R||$,onClick:L||a?e:F,ref:rO(T,Z),target:h,"data-discover":!D&&t==="render"?"true":void 0});return q&&!D?N.createElement(N.Fragment,null,I,N.createElement(nO,{page:$})):I});WA.displayName="Link";var go=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:l,viewTransition:u,children:h,...f},y){let v=Tf(l,{relative:f.relative}),x=ka(),T=N.useContext(gg),{navigator:C,basename:D}=N.useContext(Hr),R=T!=null&&mO(v)&&u===!0,L=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,$=x.pathname,q=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||($=$.toLowerCase(),q=q?q.toLowerCase():null,L=L.toLowerCase()),q&&D&&(q=Ro(q,D)||q);const Z=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Y=$===L||!s&&$.startsWith(L)&&$.charAt(Z)==="/",J=q!=null&&(q===L||!s&&q.startsWith(L)&&q.charAt(L.length)==="/"),F={isActive:Y,isPending:J,isTransitioning:R},I=Y?e:void 0,O;typeof i=="function"?O=i(F):O=[i,Y?"active":null,J?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let U=typeof a=="function"?a(F):a;return N.createElement(WA,{...f,"aria-current":I,className:O,ref:y,style:U,to:l,viewTransition:u},typeof h=="function"?h(F):h)});go.displayName="NavLink";var oO=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:l=yp,action:u,onSubmit:h,relative:f,preventScrollReset:y,viewTransition:v,...x},T)=>{let C=dO(),D=fO(u,{relative:f}),R=l.toLowerCase()==="get"?"get":"post",L=typeof u=="string"&&qA.test(u),$=q=>{if(h&&h(q),q.defaultPrevented)return;q.preventDefault();let Z=q.nativeEvent.submitter,Y=Z?.getAttribute("formmethod")||l;C(Z||q.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:s,state:a,relative:f,preventScrollReset:y,viewTransition:v})};return N.createElement("form",{ref:T,method:R,action:D,onSubmit:i?h:$,...x,"data-discover":!L&&n==="render"?"true":void 0})});oO.displayName="Form";function lO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GA(n){let e=N.useContext(ah);return En(e,lO(n)),e}function cO(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=lh(),h=ka(),f=Tf(n,{relative:a});return N.useCallback(y=>{if(BD(y,e)){y.preventDefault();let v=t!==void 0?t:nf(h)===nf(f);u(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[h,u,f,t,i,e,n,s,a,l])}var uO=0,hO=()=>`__${String(++uO)}__`;function dO(){let{router:n}=GA("useSubmit"),{basename:e}=N.useContext(Hr),t=DD();return N.useCallback(async(i,s={})=>{let{action:a,method:l,encType:u,formData:h,body:f}=qD(i,e);if(s.navigate===!1){let y=s.fetcherKey||hO();await n.fetch(y,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function fO(n,{relative:e}={}){let{basename:t}=N.useContext(Hr),i=N.useContext(Ia);En(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Tf(n||".",{relative:e})},l=ka();if(n==null){a.search=l.search;let u=new URLSearchParams(a.search),h=u.getAll("index");if(h.some(y=>y==="")){u.delete("index"),h.filter(v=>v).forEach(v=>u.append("index",v));let y=u.toString();a.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ao([t,a.pathname])),nf(a)}function mO(n,{relative:e}={}){let t=N.useContext(jA);En(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=GA("useViewTransitionState"),s=Tf(n,{relative:e});if(!t.isTransitioning)return!1;let a=Ro(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Ro(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Dp(s.pathname,l)!=null||Dp(s.pathname,a)!=null}var pO=NA();const Uu=Ef(pO),gO=()=>{};var aw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},yO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],u=n[t++],h=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},YA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,u=l?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,y=a>>2,v=(a&3)<<4|u>>4;let x=(u&15)<<2|f>>6,T=f&63;h||(T=64,l||(x=64)),i.push(t[y],t[v],t[x],t[T])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||u==null||f==null||v==null)throw new _O;const x=a<<2|u>>4;if(i.push(x),f!==64){const T=u<<4&240|f>>2;if(i.push(T),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bO=function(n){const e=KA(n);return YA.encodeByteArray(e,!0)},Op=function(n){return bO(n).replace(/\./g,"")},XA=function(n){try{return YA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=()=>vO().__FIREBASE_DEFAULTS__,EO=()=>{if(typeof process>"u"||typeof aw>"u")return;const n=aw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&XA(n[1]);return e&&JSON.parse(e)},_g=()=>{try{return gO()||xO()||EO()||wO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},QA=n=>_g()?.emulatorHosts?.[n],ZA=n=>{const e=QA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},JA=()=>_g()?.config,eC=n=>_g()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Op(JSON.stringify(t)),Op(JSON.stringify(l)),""].join(".")}const qd={};function SO(){const n={prod:[],emulator:[]};for(const e of Object.keys(qd))qd[e]?n.emulator.push(e):n.prod.push(e);return n}function AO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ow=!1;function uv(n,e){if(typeof window>"u"||typeof document>"u"||!zc(window.location.host)||qd[n]===e||qd[n]||ow)return;qd[n]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",a=SO().prod.length>0;function l(){const x=document.getElementById(i);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function h(x,T){x.setAttribute("width","24"),x.setAttribute("id",T),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{ow=!0,l()},x}function y(x,T){x.setAttribute("id",T),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function v(){const x=AO(i),T=t("text"),C=document.getElementById(T)||document.createElement("span"),D=t("learnmore"),R=document.getElementById(D)||document.createElement("a"),L=t("preprendIcon"),$=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const q=x.element;u(q),y(R,D);const Z=f();h($,L),q.append($,C,R,Z),document.body.appendChild(q)}a?(C.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wi())}function RO(){const n=_g()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NO(){const n=Wi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DO(){return!RO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iC(){try{return typeof indexedDB=="object"}catch{return!1}}function sC(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function OO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="FirebaseError";class yr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=MO,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bc.prototype.create)}}class Bc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?PO(a,i):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new yr(s,u,i)}}function PO(n,e){return n.replace(jO,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const jO=/\{\$([^}]+)}/g;function LO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jl(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],l=e[s];if(lw(a)&&lw(l)){if(!jl(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function lw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Ld(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function VO(n,e){const t=new FO(n,e);return t.subscribe.bind(t)}class FO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");UO(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=S_),s.error===void 0&&(s.error=S_),s.complete===void 0&&(s.complete=S_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function S_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=1e3,BO=2,HO=14400*1e3,$O=.5;function cw(n,e=zO,t=BO){const i=e*Math.pow(t,n),s=Math.round($O*i*(Math.random()-.5)*2);return Math.min(HO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n){return n&&n._delegate?n._delegate:n}class pr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qO=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new TO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GO(e))try{this.getOrInitializeService({instanceIdentifier:Tc})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tc){return this.instances.has(e)}getOptions(e=Tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);i===u&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Tc){return this.component?this.component.multipleInstances?e:Tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WO(n){return n===Tc?void 0:n}function GO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ot||(Ot={}));const YO={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},XO=Ot.INFO,QO={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},ZO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=QO[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bg{constructor(e){this.name=e,this._logLevel=XO,this._logHandler=ZO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...e),this._logHandler(this,Ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...e),this._logHandler(this,Ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...e),this._logHandler(this,Ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...e),this._logHandler(this,Ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...e),this._logHandler(this,Ot.ERROR,...e)}}const JO=(n,e)=>e.some(t=>n instanceof t);let uw,hw;function eM(){return uw||(uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tM(){return hw||(hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rC=new WeakMap,mb=new WeakMap,aC=new WeakMap,A_=new WeakMap,hv=new WeakMap;function nM(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Il(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&rC.set(t,n)}).catch(()=>{}),hv.set(e,n),e}function iM(n){if(mb.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});mb.set(n,e)}let pb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Il(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sM(n){pb=n(pb)}function rM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(C_(this),e,...t);return aC.set(i,e.sort?e.sort():[e]),Il(i)}:tM().includes(n)?function(...e){return n.apply(C_(this),e),Il(rC.get(this))}:function(...e){return Il(n.apply(C_(this),e))}}function aM(n){return typeof n=="function"?rM(n):(n instanceof IDBTransaction&&iM(n),JO(n,eM())?new Proxy(n,pb):n)}function Il(n){if(n instanceof IDBRequest)return nM(n);if(A_.has(n))return A_.get(n);const e=aM(n);return e!==n&&(A_.set(n,e),hv.set(e,n)),e}const C_=n=>hv.get(n);function oC(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),u=Il(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Il(l.result),h.oldVersion,h.newVersion,Il(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const oM=["get","getKey","getAll","getAllKeys","count"],lM=["put","add","delete","clear"],R_=new Map;function dw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(R_.get(e))return R_.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=lM.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||oM.includes(t)))return;const a=async function(l,...u){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&h.done]))[0]};return R_.set(e,a),a}sM(n=>({...n,get:(e,t,i)=>dw(e,t)||n.get(e,t,i),has:(e,t)=>!!dw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uM(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function uM(n){return n.getComponent()?.type==="VERSION"}const gb="@firebase/app",fw="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new bg("@firebase/app"),hM="@firebase/app-compat",dM="@firebase/analytics-compat",fM="@firebase/analytics",mM="@firebase/app-check-compat",pM="@firebase/app-check",gM="@firebase/auth",yM="@firebase/auth-compat",_M="@firebase/database",bM="@firebase/data-connect",vM="@firebase/database-compat",xM="@firebase/functions",EM="@firebase/functions-compat",wM="@firebase/installations",TM="@firebase/installations-compat",SM="@firebase/messaging",AM="@firebase/messaging-compat",CM="@firebase/performance",RM="@firebase/performance-compat",IM="@firebase/remote-config",kM="@firebase/remote-config-compat",NM="@firebase/storage",DM="@firebase/storage-compat",OM="@firebase/firestore",MM="@firebase/ai",PM="@firebase/firestore-compat",jM="firebase",LM="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="[DEFAULT]",VM={[gb]:"fire-core",[hM]:"fire-core-compat",[fM]:"fire-analytics",[dM]:"fire-analytics-compat",[pM]:"fire-app-check",[mM]:"fire-app-check-compat",[gM]:"fire-auth",[yM]:"fire-auth-compat",[_M]:"fire-rtdb",[bM]:"fire-data-connect",[vM]:"fire-rtdb-compat",[xM]:"fire-fn",[EM]:"fire-fn-compat",[wM]:"fire-iid",[TM]:"fire-iid-compat",[SM]:"fire-fcm",[AM]:"fire-fcm-compat",[CM]:"fire-perf",[RM]:"fire-perf-compat",[IM]:"fire-rc",[kM]:"fire-rc-compat",[NM]:"fire-gcs",[DM]:"fire-gcs-compat",[OM]:"fire-fst",[PM]:"fire-fst-compat",[MM]:"fire-vertex","fire-js":"fire-js",[jM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new Map,FM=new Map,_b=new Map;function mw(n,e){try{n.container.addComponent(e)}catch(t){Io.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zr(n){const e=n.name;if(_b.has(e))return Io.debug(`There were multiple attempts to register component ${e}.`),!1;_b.set(e,n);for(const t of Mp.values())mw(t,n);for(const t of FM.values())mw(t,n);return!0}function ql(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kl=new Bc("app","Firebase",UM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=LM;function lC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:yb,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw kl.create("bad-app-name",{appName:String(s)});if(t||(t=JA()),!t)throw kl.create("no-options");const a=Mp.get(s);if(a){if(jl(t,a.options)&&jl(i,a.config))return a;throw kl.create("duplicate-app",{appName:s})}const l=new KO(s);for(const h of _b.values())l.addComponent(h);const u=new zM(t,i,l);return Mp.set(s,u),u}function vg(n=yb){const e=Mp.get(n);if(!e&&n===yb&&JA())return lC();if(!e)throw kl.create("no-app",{appName:n});return e}function bs(n,e,t){let i=VM[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Io.warn(l.join(" "));return}zr(new pr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="firebase-heartbeat-database",HM=1,sf="firebase-heartbeat-store";let I_=null;function cC(){return I_||(I_=oC(BM,HM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sf)}catch(t){console.warn(t)}}}}).catch(n=>{throw kl.create("idb-open",{originalErrorMessage:n.message})})),I_}async function $M(n){try{const t=(await cC()).transaction(sf),i=await t.objectStore(sf).get(uC(n));return await t.done,i}catch(e){if(e instanceof yr)Io.warn(e.message);else{const t=kl.create("idb-get",{originalErrorMessage:e?.message});Io.warn(t.message)}}}async function pw(n,e){try{const i=(await cC()).transaction(sf,"readwrite");await i.objectStore(sf).put(e,uC(n)),await i.done}catch(t){if(t instanceof yr)Io.warn(t.message);else{const i=kl.create("idb-set",{originalErrorMessage:t?.message});Io.warn(i.message)}}}function uC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=1024,WM=30;class GM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YM(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>WM){const s=XM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Io.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gw(),{heartbeatsToSend:t,unsentEntries:i}=KM(this._heartbeatsCache.heartbeats),s=Op(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Io.warn(e),""}}}function gw(){return new Date().toISOString().substring(0,10)}function KM(n,e=qM){const t=[];let i=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),yw(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),yw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class YM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iC()?sC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $M(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return pw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return pw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yw(n){return Op(JSON.stringify({version:2,heartbeats:n})).length}function XM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(n){zr(new pr("platform-logger",e=>new cM(e),"PRIVATE")),zr(new pr("heartbeat",e=>new GM(e),"PRIVATE")),bs(gb,fw,n),bs(gb,fw,"esm2020"),bs("fire-js","")}QM("");var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nl,hC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,I){function O(){}O.prototype=I.prototype,F.D=I.prototype,F.prototype=new O,F.prototype.constructor=F,F.C=function(U,H,B){for(var z=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)z[Le-2]=arguments[Le];return I.prototype[H].apply(U,z)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(F,I,O){O||(O=0);var U=Array(16);if(typeof I=="string")for(var H=0;16>H;++H)U[H]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for(H=0;16>H;++H)U[H]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=F.g[0],O=F.g[1],H=F.g[2];var B=F.g[3],z=I+(B^O&(H^B))+U[0]+3614090360&4294967295;I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[1]+3905402710&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[2]+606105819&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[3]+3250441966&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(B^O&(H^B))+U[4]+4118548399&4294967295,I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[5]+1200080426&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[6]+2821735955&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[7]+4249261313&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(B^O&(H^B))+U[8]+1770035416&4294967295,I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[9]+2336552879&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[10]+4294925233&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[11]+2304563134&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(B^O&(H^B))+U[12]+1804603682&4294967295,I=O+(z<<7&4294967295|z>>>25),z=B+(H^I&(O^H))+U[13]+4254626195&4294967295,B=I+(z<<12&4294967295|z>>>20),z=H+(O^B&(I^O))+U[14]+2792965006&4294967295,H=B+(z<<17&4294967295|z>>>15),z=O+(I^H&(B^I))+U[15]+1236535329&4294967295,O=H+(z<<22&4294967295|z>>>10),z=I+(H^B&(O^H))+U[1]+4129170786&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[6]+3225465664&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[11]+643717713&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[0]+3921069994&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(H^B&(O^H))+U[5]+3593408605&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[10]+38016083&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[15]+3634488961&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[4]+3889429448&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(H^B&(O^H))+U[9]+568446438&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[14]+3275163606&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[3]+4107603335&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[8]+1163531501&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(H^B&(O^H))+U[13]+2850285829&4294967295,I=O+(z<<5&4294967295|z>>>27),z=B+(O^H&(I^O))+U[2]+4243563512&4294967295,B=I+(z<<9&4294967295|z>>>23),z=H+(I^O&(B^I))+U[7]+1735328473&4294967295,H=B+(z<<14&4294967295|z>>>18),z=O+(B^I&(H^B))+U[12]+2368359562&4294967295,O=H+(z<<20&4294967295|z>>>12),z=I+(O^H^B)+U[5]+4294588738&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[8]+2272392833&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[11]+1839030562&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[14]+4259657740&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(O^H^B)+U[1]+2763975236&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[4]+1272893353&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[7]+4139469664&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[10]+3200236656&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(O^H^B)+U[13]+681279174&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[0]+3936430074&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[3]+3572445317&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[6]+76029189&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(O^H^B)+U[9]+3654602809&4294967295,I=O+(z<<4&4294967295|z>>>28),z=B+(I^O^H)+U[12]+3873151461&4294967295,B=I+(z<<11&4294967295|z>>>21),z=H+(B^I^O)+U[15]+530742520&4294967295,H=B+(z<<16&4294967295|z>>>16),z=O+(H^B^I)+U[2]+3299628645&4294967295,O=H+(z<<23&4294967295|z>>>9),z=I+(H^(O|~B))+U[0]+4096336452&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[7]+1126891415&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[14]+2878612391&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[5]+4237533241&4294967295,O=H+(z<<21&4294967295|z>>>11),z=I+(H^(O|~B))+U[12]+1700485571&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[3]+2399980690&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[10]+4293915773&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[1]+2240044497&4294967295,O=H+(z<<21&4294967295|z>>>11),z=I+(H^(O|~B))+U[8]+1873313359&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[15]+4264355552&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[6]+2734768916&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[13]+1309151649&4294967295,O=H+(z<<21&4294967295|z>>>11),z=I+(H^(O|~B))+U[4]+4149444226&4294967295,I=O+(z<<6&4294967295|z>>>26),z=B+(O^(I|~H))+U[11]+3174756917&4294967295,B=I+(z<<10&4294967295|z>>>22),z=H+(I^(B|~O))+U[2]+718787259&4294967295,H=B+(z<<15&4294967295|z>>>17),z=O+(B^(H|~I))+U[9]+3951481745&4294967295,F.g[0]=F.g[0]+I&4294967295,F.g[1]=F.g[1]+(H+(z<<21&4294967295|z>>>11))&4294967295,F.g[2]=F.g[2]+H&4294967295,F.g[3]=F.g[3]+B&4294967295}i.prototype.u=function(F,I){I===void 0&&(I=F.length);for(var O=I-this.blockSize,U=this.B,H=this.h,B=0;B<I;){if(H==0)for(;B<=O;)s(this,F,B),B+=this.blockSize;if(typeof F=="string"){for(;B<I;)if(U[H++]=F.charCodeAt(B++),H==this.blockSize){s(this,U),H=0;break}}else for(;B<I;)if(U[H++]=F[B++],H==this.blockSize){s(this,U),H=0;break}}this.h=H,this.o+=I},i.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var I=1;I<F.length-8;++I)F[I]=0;var O=8*this.o;for(I=F.length-8;I<F.length;++I)F[I]=O&255,O/=256;for(this.u(F),F=Array(16),I=O=0;4>I;++I)for(var U=0;32>U;U+=8)F[O++]=this.g[I]>>>U&255;return F};function a(F,I){var O=u;return Object.prototype.hasOwnProperty.call(O,F)?O[F]:O[F]=I(F)}function l(F,I){this.h=I;for(var O=[],U=!0,H=F.length-1;0<=H;H--){var B=F[H]|0;U&&B==I||(O[H]=B,U=!1)}this.g=O}var u={};function h(F){return-128<=F&&128>F?a(F,function(I){return new l([I|0],0>I?-1:0)}):new l([F|0],0>F?-1:0)}function f(F){if(isNaN(F)||!isFinite(F))return v;if(0>F)return R(f(-F));for(var I=[],O=1,U=0;F>=O;U++)I[U]=F/O|0,O*=4294967296;return new l(I,0)}function y(F,I){if(F.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(F.charAt(0)=="-")return R(y(F.substring(1),I));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=f(Math.pow(I,8)),U=v,H=0;H<F.length;H+=8){var B=Math.min(8,F.length-H),z=parseInt(F.substring(H,H+B),I);8>B?(B=f(Math.pow(I,B)),U=U.j(B).add(f(z))):(U=U.j(O),U=U.add(f(z)))}return U}var v=h(0),x=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(D(this))return-R(this).m();for(var F=0,I=1,O=0;O<this.g.length;O++){var U=this.i(O);F+=(0<=U?U:4294967296+U)*I,I*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(C(this))return"0";if(D(this))return"-"+R(this).toString(F);for(var I=f(Math.pow(F,6)),O=this,U="";;){var H=Z(O,I).g;O=L(O,H.j(I));var B=((0<O.g.length?O.g[0]:O.h)>>>0).toString(F);if(O=H,C(O))return B+U;for(;6>B.length;)B="0"+B;U=B+U}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function C(F){if(F.h!=0)return!1;for(var I=0;I<F.g.length;I++)if(F.g[I]!=0)return!1;return!0}function D(F){return F.h==-1}n.l=function(F){return F=L(this,F),D(F)?-1:C(F)?0:1};function R(F){for(var I=F.g.length,O=[],U=0;U<I;U++)O[U]=~F.g[U];return new l(O,~F.h).add(x)}n.abs=function(){return D(this)?R(this):this},n.add=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0,H=0;H<=I;H++){var B=U+(this.i(H)&65535)+(F.i(H)&65535),z=(B>>>16)+(this.i(H)>>>16)+(F.i(H)>>>16);U=z>>>16,B&=65535,z&=65535,O[H]=z<<16|B}return new l(O,O[O.length-1]&-2147483648?-1:0)};function L(F,I){return F.add(R(I))}n.j=function(F){if(C(this)||C(F))return v;if(D(this))return D(F)?R(this).j(R(F)):R(R(this).j(F));if(D(F))return R(this.j(R(F)));if(0>this.l(T)&&0>F.l(T))return f(this.m()*F.m());for(var I=this.g.length+F.g.length,O=[],U=0;U<2*I;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<F.g.length;H++){var B=this.i(U)>>>16,z=this.i(U)&65535,Le=F.i(H)>>>16,_e=F.i(H)&65535;O[2*U+2*H]+=z*_e,$(O,2*U+2*H),O[2*U+2*H+1]+=B*_e,$(O,2*U+2*H+1),O[2*U+2*H+1]+=z*Le,$(O,2*U+2*H+1),O[2*U+2*H+2]+=B*Le,$(O,2*U+2*H+2)}for(U=0;U<I;U++)O[U]=O[2*U+1]<<16|O[2*U];for(U=I;U<2*I;U++)O[U]=0;return new l(O,0)};function $(F,I){for(;(F[I]&65535)!=F[I];)F[I+1]+=F[I]>>>16,F[I]&=65535,I++}function q(F,I){this.g=F,this.h=I}function Z(F,I){if(C(I))throw Error("division by zero");if(C(F))return new q(v,v);if(D(F))return I=Z(R(F),I),new q(R(I.g),R(I.h));if(D(I))return I=Z(F,R(I)),new q(R(I.g),I.h);if(30<F.g.length){if(D(F)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var O=x,U=I;0>=U.l(F);)O=Y(O),U=Y(U);var H=J(O,1),B=J(U,1);for(U=J(U,2),O=J(O,2);!C(U);){var z=B.add(U);0>=z.l(F)&&(H=H.add(O),B=z),U=J(U,1),O=J(O,1)}return I=L(F,H.j(I)),new q(H,I)}for(H=v;0<=F.l(I);){for(O=Math.max(1,Math.floor(F.m()/I.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),B=f(O),z=B.j(I);D(z)||0<z.l(F);)O-=U,B=f(O),z=B.j(I);C(B)&&(B=x),H=H.add(B),F=L(F,z)}return new q(H,F)}n.A=function(F){return Z(this,F).h},n.and=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)&F.i(U);return new l(O,this.h&F.h)},n.or=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)|F.i(U);return new l(O,this.h|F.h)},n.xor=function(F){for(var I=Math.max(this.g.length,F.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)^F.i(U);return new l(O,this.h^F.h)};function Y(F){for(var I=F.g.length+1,O=[],U=0;U<I;U++)O[U]=F.i(U)<<1|F.i(U-1)>>>31;return new l(O,F.h)}function J(F,I){var O=I>>5;I%=32;for(var U=F.g.length-O,H=[],B=0;B<U;B++)H[B]=0<I?F.i(B+O)>>>I|F.i(B+O+1)<<32-I:F.i(B+O);return new l(H,F.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,hC=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=y,Nl=l}).apply(typeof _w<"u"?_w:typeof self<"u"?self:typeof window<"u"?window:{});var Wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dC,Vd,fC,bp,bb,mC,pC,gC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,S){return m==Array.prototype||m==Object.prototype||(m[E]=S.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wm=="object"&&Wm];for(var E=0;E<m.length;++E){var S=m[E];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function s(m,E){if(E)e:{var S=i;m=m.split(".");for(var V=0;V<m.length-1;V++){var ne=m[V];if(!(ne in S))break e;S=S[ne]}m=m[m.length-1],V=S[m],E=E(V),E!=V&&E!=null&&e(S,m,{configurable:!0,writable:!0,value:E})}}function a(m,E){m instanceof String&&(m+="");var S=0,V=!1,ne={next:function(){if(!V&&S<m.length){var he=S++;return{value:E(he,m[he]),done:!1}}return V=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}s("Array.prototype.values",function(m){return m||function(){return a(this,function(E,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function y(m,E,S){return m.call.apply(m.bind,arguments)}function v(m,E,S){if(!m)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,V),m.apply(E,ne)}}return function(){return m.apply(E,arguments)}}function x(m,E,S){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,x.apply(null,arguments)}function T(m,E){var S=Array.prototype.slice.call(arguments,1);return function(){var V=S.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function C(m,E){function S(){}S.prototype=E.prototype,m.aa=E.prototype,m.prototype=new S,m.prototype.constructor=m,m.Qb=function(V,ne,he){for(var Me=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)Me[Nt-2]=arguments[Nt];return E.prototype[ne].apply(V,Me)}}function D(m){const E=m.length;if(0<E){const S=Array(E);for(let V=0;V<E;V++)S[V]=m[V];return S}return[]}function R(m,E){for(let S=1;S<arguments.length;S++){const V=arguments[S];if(h(V)){const ne=m.length||0,he=V.length||0;m.length=ne+he;for(let Me=0;Me<he;Me++)m[ne+Me]=V[Me]}else m.push(V)}}class L{constructor(E,S){this.i=E,this.j=S,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function $(m){return/^[\s\xa0]*$/.test(m)}function q(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function Z(m){return Z[" "](m),m}Z[" "]=function(){};var Y=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function J(m,E,S){for(const V in m)E.call(S,m[V],V,m)}function F(m,E){for(const S in m)E.call(void 0,m[S],S,m)}function I(m){const E={};for(const S in m)E[S]=m[S];return E}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(m,E){let S,V;for(let ne=1;ne<arguments.length;ne++){V=arguments[ne];for(S in V)m[S]=V[S];for(let he=0;he<O.length;he++)S=O[he],Object.prototype.hasOwnProperty.call(V,S)&&(m[S]=V[S])}}function H(m){var E=1;m=m.split(":");const S=[];for(;0<E&&m.length;)S.push(m.shift()),E--;return m.length&&S.push(m.join(":")),S}function B(m){u.setTimeout(()=>{throw m},0)}function z(){var m=Ve;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class Le{constructor(){this.h=this.g=null}add(E,S){const V=_e.get();V.set(E,S),this.h?this.h.next=V:this.g=V,this.h=V}}var _e=new L(()=>new G,m=>m.reset());class G{constructor(){this.next=this.g=this.h=null}set(E,S){this.h=E,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,Ee=!1,Ve=new Le,P=()=>{const m=u.Promise.resolve(void 0);ie=()=>{m.then(fe)}};var fe=()=>{for(var m;m=z();){try{m.h.call(m.g)}catch(S){B(S)}var E=_e;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}Ee=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};u.addEventListener("test",S,E),u.removeEventListener("test",S,E)}catch{}return m}();function qe(m,E){if(pe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var S=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(Y){e:{try{Z(E.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(E=null)}}else S=="mouseover"?E=m.fromElement:S=="mouseout"&&(E=m.toElement);this.relatedTarget=E,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:je[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&qe.aa.h.call(this)}}C(qe,pe);var je={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Tt(m,E,S,V,ne){this.listener=m,this.proxy=null,this.src=E,this.type=S,this.capture=!!V,this.ha=ne,this.key=++Se,this.da=this.fa=!1}function xe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ce(m){this.src=m,this.g={},this.h=0}ce.prototype.add=function(m,E,S,V,ne){var he=m.toString();m=this.g[he],m||(m=this.g[he]=[],this.h++);var Me=He(m,E,V,ne);return-1<Me?(E=m[Me],S||(E.fa=!1)):(E=new Tt(E,this.src,he,!!V,ne),E.fa=S,m.push(E)),E};function Ae(m,E){var S=E.type;if(S in m.g){var V=m.g[S],ne=Array.prototype.indexOf.call(V,E,void 0),he;(he=0<=ne)&&Array.prototype.splice.call(V,ne,1),he&&(xe(E),m.g[S].length==0&&(delete m.g[S],m.h--))}}function He(m,E,S,V){for(var ne=0;ne<m.length;++ne){var he=m[ne];if(!he.da&&he.listener==E&&he.capture==!!S&&he.ha==V)return ne}return-1}var Je="closure_lm_"+(1e6*Math.random()|0),st={};function yn(m,E,S,V,ne){if(Array.isArray(E)){for(var he=0;he<E.length;he++)yn(m,E[he],S,V,ne);return null}return S=me(S),m&&m[Ge]?m.K(E,S,f(V)?!!V.capture:!1,ne):Gt(m,E,S,!1,V,ne)}function Gt(m,E,S,V,ne,he){if(!E)throw Error("Invalid event type");var Me=f(ne)?!!ne.capture:!!ne,Nt=Es(m);if(Nt||(m[Je]=Nt=new ce(m)),S=Nt.add(E,S,V,Me,he),S.proxy)return S;if(V=Ki(),S.proxy=V,V.src=m,V.listener=S,m.addEventListener)Ne||(ne=Me),ne===void 0&&(ne=!1),m.addEventListener(E.toString(),V,ne);else if(m.attachEvent)m.attachEvent(xs(E.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Ki(){function m(S){return E.call(m.src,m.listener,S)}const E=Da;return m}function Yi(m,E,S,V,ne){if(Array.isArray(E))for(var he=0;he<E.length;he++)Yi(m,E[he],S,V,ne);else V=f(V)?!!V.capture:!!V,S=me(S),m&&m[Ge]?(m=m.i,E=String(E).toString(),E in m.g&&(he=m.g[E],S=He(he,S,V,ne),-1<S&&(xe(he[S]),Array.prototype.splice.call(he,S,1),he.length==0&&(delete m.g[E],m.h--)))):m&&(m=Es(m))&&(E=m.g[E.toString()],m=-1,E&&(m=He(E,S,V,ne)),(S=-1<m?E[m]:null)&&Bs(S))}function Bs(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Ge])Ae(E.i,m);else{var S=m.type,V=m.proxy;E.removeEventListener?E.removeEventListener(S,V,m.capture):E.detachEvent?E.detachEvent(xs(S),V):E.addListener&&E.removeListener&&E.removeListener(V),(S=Es(E))?(Ae(S,m),S.h==0&&(S.src=null,E[Je]=null)):xe(m)}}}function xs(m){return m in st?st[m]:st[m]="on"+m}function Da(m,E){if(m.da)m=!0;else{E=new qe(E,this);var S=m.listener,V=m.ha||m.src;m.fa&&Bs(m),m=S.call(V,E)}return m}function Es(m){return m=m[Je],m instanceof ce?m:null}var vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(m){return typeof m=="function"?m:(m[vi]||(m[vi]=function(E){return m.handleEvent(E)}),m[vi])}function ze(){Re.call(this),this.i=new ce(this),this.M=this,this.F=null}C(ze,Re),ze.prototype[Ge]=!0,ze.prototype.removeEventListener=function(m,E,S,V){Yi(this,m,E,S,V)};function Ke(m,E){var S,V=m.F;if(V)for(S=[];V;V=V.F)S.push(V);if(m=m.M,V=E.type||E,typeof E=="string")E=new pe(E,m);else if(E instanceof pe)E.target=E.target||m;else{var ne=E;E=new pe(V,m),U(E,ne)}if(ne=!0,S)for(var he=S.length-1;0<=he;he--){var Me=E.g=S[he];ne=St(Me,V,!0,E)&&ne}if(Me=E.g=m,ne=St(Me,V,!0,E)&&ne,ne=St(Me,V,!1,E)&&ne,S)for(he=0;he<S.length;he++)Me=E.g=S[he],ne=St(Me,V,!1,E)&&ne}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var S=m.g[E],V=0;V<S.length;V++)xe(S[V]);delete m.g[E],m.h--}}this.F=null},ze.prototype.K=function(m,E,S,V){return this.i.add(String(m),E,!1,S,V)},ze.prototype.L=function(m,E,S,V){return this.i.add(String(m),E,!0,S,V)};function St(m,E,S,V){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var ne=!0,he=0;he<E.length;++he){var Me=E[he];if(Me&&!Me.da&&Me.capture==S){var Nt=Me.listener,On=Me.ha||Me.src;Me.fa&&Ae(m.i,Me),ne=Nt.call(On,V)!==!1&&ne}}return ne&&!V.defaultPrevented}function Lt(m,E,S){if(typeof m=="function")S&&(m=x(m,S));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:u.setTimeout(m,E||0)}function K(m){m.g=Lt(()=>{m.g=null,m.i&&(m.i=!1,K(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class re extends Re{constructor(E,S){super(),this.m=E,this.l=S,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:K(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(m){Re.call(this),this.h=m,this.g={}}C(ae,Re);var ye=[];function ke(m){J(m.g,function(E,S){this.g.hasOwnProperty(S)&&Bs(E)},m),m.g={}}ae.prototype.N=function(){ae.aa.N.call(this),ke(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ce=u.JSON.stringify,De=u.JSON.parse,Pe=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function et(){}et.prototype.h=null;function tt(m){return m.h||(m.h=m.i())}function lt(){}var Yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ft(){pe.call(this,"d")}C(Ft,pe);function hi(){pe.call(this,"c")}C(hi,pe);var xi={},_r=null;function $r(){return _r=_r||new ze}xi.La="serverreachability";function Po(m){pe.call(this,xi.La,m)}C(Po,pe);function qr(m){const E=$r();Ke(E,new Po(E))}xi.STAT_EVENT="statevent";function br(m,E){pe.call(this,xi.STAT_EVENT,m),this.stat=E}C(br,pe);function Xt(m){const E=$r();Ke(E,new br(E,m))}xi.Ma="timingevent";function Nn(m,E){pe.call(this,xi.Ma,m),this.size=E}C(Nn,pe);function Cn(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function is(){this.g=!0}is.prototype.xa=function(){this.g=!1};function Yl(m,E,S,V,ne,he){m.info(function(){if(m.g)if(he)for(var Me="",Nt=he.split("&"),On=0;On<Nt.length;On++){var Dt=Nt[On].split("=");if(1<Dt.length){var Gn=Dt[0];Dt=Dt[1];var Mn=Gn.split("_");Me=2<=Mn.length&&Mn[1]=="type"?Me+(Gn+"="+Dt+"&"):Me+(Gn+"=redacted&")}}else Me=null;else Me=he;return"XMLHTTP REQ ("+V+") [attempt "+ne+"]: "+E+`
`+S+`
`+Me})}function _h(m,E,S,V,ne,he,Me){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ne+"]: "+E+`
`+S+`
`+he+" "+Me})}function Hs(m,E,S,V){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+$s(m,S)+(V?" "+V:"")})}function vr(m,E){m.info(function(){return"TIMEOUT: "+E})}is.prototype.info=function(){};function $s(m,E){if(!m.g)return E;if(!E)return null;try{var S=JSON.parse(E);if(S){for(m=0;m<S.length;m++)if(Array.isArray(S[m])){var V=S[m];if(!(2>V.length)){var ne=V[1];if(Array.isArray(ne)&&!(1>ne.length)){var he=ne[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Me=1;Me<ne.length;Me++)ne[Me]=""}}}}return Ce(S)}catch{return E}}var Wr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qs;function Ws(){}C(Ws,et),Ws.prototype.g=function(){return new XMLHttpRequest},Ws.prototype.i=function(){return{}},qs=new Ws;function Rn(m,E,S,V){this.j=m,this.i=E,this.l=S,this.R=V||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Jn={},$n={};function hn(m,E,S){m.L=1,m.v=Qs(mn(E)),m.m=S,m.P=!0,ss(m,null)}function ss(m,E){m.F=Date.now(),rs(m),m.A=mn(m.v);var S=m.A,V=m.R;Array.isArray(V)||(V=[String(V)]),Va(S.i,"t",V),m.C=0,S=m.j.J,m.h=new At,m.g=Jc(m.j,S?E:null,!m.m),0<m.O&&(m.M=new re(x(m.Y,m,m.g),m.O)),E=m.U,S=m.g,V=m.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(ye[0]=ne.toString()),ne=ye);for(var he=0;he<ne.length;he++){var Me=yn(S,ne[he],V||E.handleEvent,!1,E.h||E);if(!Me)break;E.g[Me.key]=Me}E=m.H?I(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),qr(),Yl(m.i,m.u,m.A,m.l,m.R,m.m)}Rn.prototype.ca=function(m){m=m.target;const E=this.M;E&&ni(m)==3?E.j():this.Y(m)},Rn.prototype.Y=function(m){try{if(m==this.g)e:{const Mn=ni(this.g);var E=this.g.Ba();const Pn=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||Xc(this.g)))){this.J||Mn!=4||E==7||(E==8||0>=Pn?qr(3):qr(2)),Ks(this);var S=this.g.Z();this.X=S;t:if(xr(this)){var V=Xc(this.g);m="";var ne=V.length,he=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Ei(this);var Me="";break t}this.h.i=new u.TextDecoder}for(E=0;E<ne;E++)this.h.h=!0,m+=this.h.i.decode(V[E],{stream:!(he&&E==ne-1)});V.length=0,this.h.g+=m,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=S==200,_h(this.i,this.u,this.A,this.l,this.R,Mn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,On=this.g;if((Nt=On.g?On.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Nt)){var Dt=Nt;break t}}Dt=null}if(S=Dt)Hs(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Er(this,S);else{this.o=!1,this.s=3,Xt(12),qn(this),Ei(this);break e}}if(this.P){S=!0;let Kn;for(;!this.J&&this.C<Me.length;)if(Kn=Gs(this,Me),Kn==$n){Mn==4&&(this.s=4,Xt(14),S=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==Jn){this.s=4,Xt(15),Hs(this.i,this.l,Me,"[Invalid Chunk]"),S=!1;break}else Hs(this.i,this.l,Kn,null),Er(this,Kn);if(xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||Me.length!=0||this.h.h||(this.s=1,Xt(16),S=!1),this.o=this.o&&S,!S)Hs(this.i,this.l,Me,"[Invalid Chunked Response]"),qn(this),Ei(this);else if(0<Me.length&&!this.W){this.W=!0;var Gn=this.j;Gn.g==this&&Gn.ba&&!Gn.M&&(Gn.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),qa(Gn),Gn.M=!0,Xt(11))}}else Hs(this.i,this.l,Me,null),Er(this,Me);Mn==4&&qn(this),this.o&&!this.J&&(Mn==4?sc(this.j,this):(this.o=!1,rs(this)))}else Qc(this.g),S==400&&0<Me.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),qn(this),Ei(this)}}}catch{}finally{}};function xr(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Gs(m,E){var S=m.C,V=E.indexOf(`
`,S);return V==-1?$n:(S=Number(E.substring(S,V)),isNaN(S)?Jn:(V+=1,V+S>E.length?$n:(E=E.slice(V,V+S),m.C=V+S,E)))}Rn.prototype.cancel=function(){this.J=!0,qn(this)};function rs(m){m.S=Date.now()+m.I,Xl(m,m.I)}function Xl(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Cn(x(m.ba,m),E)}function Ks(m){m.B&&(u.clearTimeout(m.B),m.B=null)}Rn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(vr(this.i,this.A),this.L!=2&&(qr(),Xt(17)),qn(this),this.s=2,Ei(this)):Xl(this,this.S-m)};function Ei(m){m.j.G==0||m.J||sc(m.j,m)}function qn(m){Ks(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,ke(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function Er(m,E){try{var S=m.j;if(S.G!=0&&(S.g==m||Lo(S.h,m))){if(!m.K&&Lo(S.h,m)&&S.G==3){try{var V=S.Da.g.parse(E)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ne=V;if(ne[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<m.F)Wa(S),Ba(S);else break e;ic(S),Xt(18)}}else S.za=ne[1],0<S.za-S.T&&37500>ne[2]&&S.F&&S.v==0&&!S.C&&(S.C=Cn(x(S.Za,S),6e3));if(1>=Ma(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Rs(S,11)}else if((m.K||S.g==m)&&Wa(S),!$(E))for(ne=S.Da.g.parse(E),E=0;E<ne.length;E++){let Dt=ne[E];if(S.T=Dt[0],Dt=Dt[1],S.G==2)if(Dt[0]=="c"){S.K=Dt[1],S.ia=Dt[2];const Gn=Dt[3];Gn!=null&&(S.la=Gn,S.j.info("VER="+S.la));const Mn=Dt[4];Mn!=null&&(S.Aa=Mn,S.j.info("SVER="+S.Aa));const Pn=Dt[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(V=1.5*Pn,S.L=V,S.j.info("backChannelRequestTimeoutMs_="+V)),V=S;const Kn=m.g;if(Kn){const Is=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var he=V.h;he.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Pa(he,he.h),he.h=null))}if(V.D){const qo=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(V.ya=qo,kt(V.I,V.D,qo))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-m.F,S.j.info("Handshake RTT: "+S.R+"ms")),V=S;var Me=m;if(V.qa=rc(V,V.J?V.ia:null,V.W),Me.K){di(V.h,Me);var Nt=Me,On=V.L;On&&(Nt.I=On),Nt.B&&(Ks(Nt),rs(Nt)),V.g=Me}else $a(V);0<S.i.length&&Ha(S)}else Dt[0]!="stop"&&Dt[0]!="close"||Rs(S,7);else S.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Rs(S,7):zo(S):Dt[0]!="noop"&&S.l&&S.l.ta(Dt),S.v=0)}}qr(4)}catch{}}var jo=class{constructor(m,E){this.g=m,this.map=E}};function Ys(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ma(m){return m.h?1:m.g?m.g.size:0}function Lo(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Pa(m,E){m.g?m.g.add(E):m.h=E}function di(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Ys.prototype.cancel=function(){if(this.i=Vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Vo(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const S of m.g.values())E=E.concat(S.D);return E}return D(m.i)}function Kc(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var E=[],S=m.length,V=0;V<S;V++)E.push(m[V]);return E}E=[],S=0;for(V in m)E[S++]=m[V];return E}function ja(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var E=[];m=m.length;for(var S=0;S<m;S++)E.push(S);return E}E=[],S=0;for(const V in m)E[S++]=V;return E}}}function Fo(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var S=ja(m),V=Kc(m),ne=V.length,he=0;he<ne;he++)E.call(void 0,V[he],S&&S[he],m)}var fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wi(m,E){if(m){m=m.split("&");for(var S=0;S<m.length;S++){var V=m[S].indexOf("="),ne=null;if(0<=V){var he=m[S].substring(0,V);ne=m[S].substring(V+1)}else he=m[S];E(he,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function an(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof an){this.h=m.h,wr(this,m.j),this.o=m.o,this.g=m.g,Xs(this,m.s),this.l=m.l;var E=m.i,S=new mi;S.i=E.i,E.g&&(S.g=new Map(E.g),S.h=E.h),Wn(this,S),this.m=m.m}else m&&(E=String(m).match(fi))?(this.h=!1,wr(this,E[1]||"",!0),this.o=ei(E[2]||""),this.g=ei(E[3]||"",!0),Xs(this,E[4]),this.l=ei(E[5]||"",!0),Wn(this,E[6]||"",!0),this.m=ei(E[7]||"")):(this.h=!1,this.i=new mi(null,this.h))}an.prototype.toString=function(){var m=[],E=this.j;E&&m.push(Tr(E,Zs,!0),":");var S=this.g;return(S||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Tr(E,Zs,!0),"@"),m.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&m.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(Tr(S,S.charAt(0)=="/"?Yc:La,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",Tr(S,Uo)),m.join("")};function mn(m){return new an(m)}function wr(m,E,S){m.j=S?ei(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Xs(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function Wn(m,E,S){E instanceof mi?(m.i=E,Zl(m.i,m.h)):(S||(E=Tr(E,Ts)),m.i=new mi(E,m.h))}function kt(m,E,S){m.i.set(E,S)}function Qs(m){return kt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function ei(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Tr(m,E,S){return typeof m=="string"?(m=encodeURI(m).replace(E,Ql),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ql(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Zs=/[#\/\?@]/g,La=/[#\?:]/g,Yc=/[#\?]/g,Ts=/[#\?@]/g,Uo=/#/g;function mi(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Ti(m){m.g||(m.g=new Map,m.h=0,m.i&&wi(m.i,function(E,S){m.add(decodeURIComponent(E.replace(/\+/g," ")),S)}))}n=mi.prototype,n.add=function(m,E){Ti(this),this.i=null,m=Oi(this,m);var S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(E),this.h+=1,this};function Js(m,E){Ti(m),E=Oi(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Xi(m,E){return Ti(m),E=Oi(m,E),m.g.has(E)}n.forEach=function(m,E){Ti(this),this.g.forEach(function(S,V){S.forEach(function(ne){m.call(E,ne,V,this)},this)},this)},n.na=function(){Ti(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),S=[];for(let V=0;V<E.length;V++){const ne=m[V];for(let he=0;he<ne.length;he++)S.push(E[V])}return S},n.V=function(m){Ti(this);let E=[];if(typeof m=="string")Xi(this,m)&&(E=E.concat(this.g.get(Oi(this,m))));else{m=Array.from(this.g.values());for(let S=0;S<m.length;S++)E=E.concat(m[S])}return E},n.set=function(m,E){return Ti(this),this.i=null,m=Oi(this,m),Xi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function Va(m,E,S){Js(m,E),0<S.length&&(m.i=null,m.g.set(Oi(m,E),D(S)),m.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var S=0;S<E.length;S++){var V=E[S];const he=encodeURIComponent(String(V)),Me=this.V(V);for(V=0;V<Me.length;V++){var ne=he;Me[V]!==""&&(ne+="="+encodeURIComponent(String(Me[V]))),m.push(ne)}}return this.i=m.join("&")};function Oi(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Zl(m,E){E&&!m.j&&(Ti(m),m.i=null,m.g.forEach(function(S,V){var ne=V.toLowerCase();V!=ne&&(Js(this,V),Va(this,ne,S))},m)),m.j=E}function Gr(m,E){const S=new is;if(u.Image){const V=new Image;V.onload=T(ti,S,"TestLoadImage: loaded",!0,E,V),V.onerror=T(ti,S,"TestLoadImage: error",!1,E,V),V.onabort=T(ti,S,"TestLoadImage: abort",!1,E,V),V.ontimeout=T(ti,S,"TestLoadImage: timeout",!1,E,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else E(!1)}function as(m,E){const S=new is,V=new AbortController,ne=setTimeout(()=>{V.abort(),ti(S,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:V.signal}).then(he=>{clearTimeout(ne),he.ok?ti(S,"TestPingServer: ok",!0,E):ti(S,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ne),ti(S,"TestPingServer: error",!1,E)})}function ti(m,E,S,V,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),V(S)}catch{}}function Fa(){this.g=new Pe}function Ss(m,E,S){const V=S||"";try{Fo(m,function(ne,he){let Me=ne;f(ne)&&(Me=Ce(ne)),E.push(V+he+"="+encodeURIComponent(Me))})}catch(ne){throw E.push(V+"type="+encodeURIComponent("_badmap")),ne}}function er(m){this.l=m.Ub||null,this.j=m.eb||!1}C(er,et),er.prototype.g=function(){return new os(this.l,this.j)},er.prototype.i=function(m){return function(){return m}}({});function os(m,E){ze.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(os,ze),n=os.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,Qi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||u).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tr(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ua(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ua(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?tr(this):Qi(this),this.readyState==3&&Ua(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,tr(this))},n.Qa=function(m){this.g&&(this.response=m,tr(this))},n.ga=function(){this.g&&tr(this)};function tr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Qi(m)}n.setRequestHeader=function(m,E){this.u.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var S=E.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=E.next();return m.join(`\r
`)};function Qi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Jl(m){let E="";return J(m,function(S,V){E+=V,E+=":",E+=S,E+=`\r
`}),E}function Dn(m,E,S){e:{for(V in S){var V=!1;break e}V=!0}V||(S=Jl(S),typeof m=="string"?S!=null&&encodeURIComponent(String(S)):kt(m,E,S))}function Ut(m){ze.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ut,ze);var Kr=/^https?$/i,Sr=["POST","PUT"];n=Ut.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,E,S,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qs.g(),this.v=this.o?tt(this.o):tt(qs),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(he){ec(this,he);return}if(m=S||"",S=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ne in V)S.set(ne,V[ne]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const he of V.keys())S.set(he,V.get(he));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(S.keys()).find(he=>he.toLowerCase()=="content-type"),ne=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Sr,E,void 0))||V||ne||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Me]of S)this.g.setRequestHeader(he,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xr(this),this.u=!0,this.g.send(m),this.u=!1}catch(he){ec(this,he)}};function ec(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,nr(m),As(m)}function nr(m){m.A||(m.A=!0,Ke(m,"complete"),Ke(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ke(this,"complete"),Ke(this,"abort"),As(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),As(this,!0)),Ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Yr(this):this.bb())},n.bb=function(){Yr(this)};function Yr(m){if(m.h&&typeof l<"u"&&(!m.v[1]||ni(m)!=4||m.Z()!=2)){if(m.u&&ni(m)==4)Lt(m.Ea,0,m);else if(Ke(m,"readystatechange"),ni(m)==4){m.h=!1;try{const Me=m.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var S;if(!(S=E)){var V;if(V=Me===0){var ne=String(m.D).match(fi)[1]||null;!ne&&u.self&&u.self.location&&(ne=u.self.location.protocol.slice(0,-1)),V=!Kr.test(ne?ne.toLowerCase():"")}S=V}if(S)Ke(m,"complete"),Ke(m,"success");else{m.m=6;try{var he=2<ni(m)?m.g.statusText:""}catch{he=""}m.l=he+" ["+m.Z()+"]",nr(m)}}finally{As(m)}}}}function As(m,E){if(m.g){Xr(m);const S=m.g,V=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||Ke(m,"ready");try{S.onreadystatechange=V}catch{}}}function Xr(m){m.I&&(u.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function ni(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),De(E)}};function Xc(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Qc(m){const E={};m=(m.g&&2<=ni(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if($(m[V]))continue;var S=H(m[V]);const ne=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const he=E[ne]||[];E[ne]=he,he.push(S)}F(E,function(V){return V.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qr(m,E,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||E}function za(m){this.Aa=0,this.i=[],this.j=new is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qr("baseRetryDelayMs",5e3,m),this.cb=Qr("retryDelaySeedMs",1e4,m),this.Wa=Qr("forwardChannelMaxRetries",2,m),this.wa=Qr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ys(m&&m.concurrentRequestLimit),this.Da=new Fa,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=za.prototype,n.la=8,n.G=1,n.connect=function(m,E,S,V){Xt(0),this.W=m,this.H=E||{},S&&V!==void 0&&(this.H.OSID=S,this.H.OAID=V),this.F=this.X,this.I=rc(this,null,this.W),Ha(this)};function zo(m){if(Bo(m),m.G==3){var E=m.U++,S=mn(m.I);if(kt(S,"SID",m.K),kt(S,"RID",E),kt(S,"TYPE","terminate"),Zr(m,S),E=new Rn(m,m.j,E),E.L=2,E.v=Qs(mn(S)),S=!1,u.navigator&&u.navigator.sendBeacon)try{S=u.navigator.sendBeacon(E.v.toString(),"")}catch{}!S&&u.Image&&(new Image().src=E.v,S=!0),S||(E.g=Jc(E.j,null),E.g.ea(E.v)),E.F=Date.now(),rs(E)}Zc(m)}function Ba(m){m.g&&(qa(m),m.g.cancel(),m.g=null)}function Bo(m){Ba(m),m.u&&(u.clearTimeout(m.u),m.u=null),Wa(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Ha(m){if(!Oa(m.h)&&!m.s){m.s=!0;var E=m.Ga;ie||P(),Ee||(ie(),Ee=!0),Ve.add(E,m),m.B=0}}function bh(m,E){return Ma(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Cn(x(m.Ga,m,E),Cs(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ne=new Rn(this,this.j,m);let he=this.o;if(this.S&&(he?(he=I(he),U(he,this.S)):he=this.S),this.m!==null||this.O||(ne.H=he,he=null),this.P)e:{for(var E=0,S=0;S<this.i.length;S++){t:{var V=this.i[S];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(E+=V,4096<E){E=S;break e}if(E===4096||S===this.i.length-1){E=S+1;break e}}E=1e3}else E=1e3;E=nc(this,ne,E),S=mn(this.I),kt(S,"RID",m),kt(S,"CVER",22),this.D&&kt(S,"X-HTTP-Session-Id",this.D),Zr(this,S),he&&(this.O?E="headers="+encodeURIComponent(String(Jl(he)))+"&"+E:this.m&&Dn(S,this.m,he)),Pa(this.h,ne),this.Ua&&kt(S,"TYPE","init"),this.P?(kt(S,"$req",E),kt(S,"SID","null"),ne.T=!0,hn(ne,S,null)):hn(ne,S,E),this.G=2}}else this.G==3&&(m?tc(this,m):this.i.length==0||Oa(this.h)||tc(this))};function tc(m,E){var S;E?S=E.l:S=m.U++;const V=mn(m.I);kt(V,"SID",m.K),kt(V,"RID",S),kt(V,"AID",m.T),Zr(m,V),m.m&&m.o&&Dn(V,m.m,m.o),S=new Rn(m,m.j,S,m.B+1),m.m===null&&(S.H=m.o),E&&(m.i=E.D.concat(m.i)),E=nc(m,S,1e3),S.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Pa(m.h,S),hn(S,V,E)}function Zr(m,E){m.H&&J(m.H,function(S,V){kt(E,V,S)}),m.l&&Fo({},function(S,V){kt(E,V,S)})}function nc(m,E,S){S=Math.min(m.i.length,S);var V=m.l?x(m.l.Na,m.l,m):null;e:{var ne=m.i;let he=-1;for(;;){const Me=["count="+S];he==-1?0<S?(he=ne[0].g,Me.push("ofs="+he)):he=0:Me.push("ofs="+he);let Nt=!0;for(let On=0;On<S;On++){let Dt=ne[On].g;const Gn=ne[On].map;if(Dt-=he,0>Dt)he=Math.max(0,ne[On].g-100),Nt=!1;else try{Ss(Gn,Me,"req"+Dt+"_")}catch{V&&V(Gn)}}if(Nt){V=Me.join("&");break e}}}return m=m.i.splice(0,S),E.D=m,V}function $a(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;ie||P(),Ee||(ie(),Ee=!0),Ve.add(E,m),m.v=0}}function ic(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Cn(x(m.Fa,m),Cs(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Ho(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Cn(x(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Ba(this),Ho(this))};function qa(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function Ho(m){m.g=new Rn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=mn(m.qa);kt(E,"RID","rpc"),kt(E,"SID",m.K),kt(E,"AID",m.T),kt(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&kt(E,"TO",m.ja),kt(E,"TYPE","xmlhttp"),Zr(m,E),m.m&&m.o&&Dn(E,m.m,m.o),m.L&&(m.g.I=m.L);var S=m.g;m=m.ia,S.L=1,S.v=Qs(mn(E)),S.m=null,S.P=!0,ss(S,m)}n.Za=function(){this.C!=null&&(this.C=null,Ba(this),ic(this),Xt(19))};function Wa(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function sc(m,E){var S=null;if(m.g==E){Wa(m),qa(m),m.g=null;var V=2}else if(Lo(m.h,E))S=E.D,di(m.h,E),V=1;else return;if(m.G!=0){if(E.o)if(V==1){S=E.m?E.m.length:0,E=Date.now()-E.F;var ne=m.B;V=$r(),Ke(V,new Nn(V,S)),Ha(m)}else $a(m);else if(ne=E.s,ne==3||ne==0&&0<E.X||!(V==1&&bh(m,E)||V==2&&ic(m)))switch(S&&0<S.length&&(E=m.h,E.i=E.i.concat(S)),ne){case 1:Rs(m,5);break;case 4:Rs(m,10);break;case 3:Rs(m,6);break;default:Rs(m,2)}}}function Cs(m,E){let S=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(S*=2),S*E}function Rs(m,E){if(m.j.info("Error code "+E),E==2){var S=x(m.fb,m),V=m.Xa;const ne=!V;V=new an(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||wr(V,"https"),Qs(V),ne?Gr(V.toString(),S):as(V.toString(),S)}else Xt(2);m.G=0,m.l&&m.l.sa(E),Zc(m),Bo(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function Zc(m){if(m.G=0,m.ka=[],m.l){const E=Vo(m.h);(E.length!=0||m.i.length!=0)&&(R(m.ka,E),R(m.ka,m.i),m.h.i.length=0,D(m.i),m.i.length=0),m.l.ra()}}function rc(m,E,S){var V=S instanceof an?mn(S):new an(S);if(V.g!="")E&&(V.g=E+"."+V.g),Xs(V,V.s);else{var ne=u.location;V=ne.protocol,E=E?E+"."+ne.hostname:ne.hostname,ne=+ne.port;var he=new an(null);V&&wr(he,V),E&&(he.g=E),ne&&Xs(he,ne),S&&(he.l=S),V=he}return S=m.D,E=m.ya,S&&E&&kt(V,S,E),kt(V,"VER",m.la),Zr(m,V),V}function Jc(m,E,S){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new Ut(new er({eb:S})):new Ut(m.pa),E.Ha(m.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}n=eu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $o(){}$o.prototype.g=function(m,E){return new Si(m,E)};function Si(m,E){ze.call(this),this.g=new za(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!$(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!$(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new ir(this)}C(Si,ze),Si.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Si.prototype.close=function(){zo(this.g)},Si.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.u&&(S={},S.__data__=Ce(m),m=S);E.i.push(new jo(E.Ya++,m)),E.G==3&&Ha(E)},Si.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,Si.aa.N.call(this)};function ac(m){Ft.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const S in E){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}C(ac,Ft);function oc(){hi.call(this),this.status=1}C(oc,hi);function ir(m){this.g=m}C(ir,eu),ir.prototype.ua=function(){Ke(this.g,"a")},ir.prototype.ta=function(m){Ke(this.g,new ac(m))},ir.prototype.sa=function(m){Ke(this.g,new oc)},ir.prototype.ra=function(){Ke(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,Si.prototype.send=Si.prototype.o,Si.prototype.open=Si.prototype.m,Si.prototype.close=Si.prototype.close,gC=function(){return new $o},pC=function(){return $r()},mC=xi,bb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wr.NO_ERROR=0,Wr.TIMEOUT=8,Wr.HTTP_ERROR=6,bp=Wr,ws.COMPLETE="complete",fC=ws,lt.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Vd=lt,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,dC=Ut}).apply(typeof Wm<"u"?Wm:typeof self<"u"?self:typeof window<"u"?window:{});const bw="@firebase/firestore",vw="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new bg("@firebase/firestore");function ju(){return Dc.logLevel}function We(n,...e){if(Dc.logLevel<=Ot.DEBUG){const t=e.map(dv);Dc.debug(`Firestore (${ch}): ${n}`,...t)}}function ko(n,...e){if(Dc.logLevel<=Ot.ERROR){const t=e.map(dv);Dc.error(`Firestore (${ch}): ${n}`,...t)}}function Xu(n,...e){if(Dc.logLevel<=Ot.WARN){const t=e.map(dv);Dc.warn(`Firestore (${ch}): ${n}`,...t)}}function dv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,yC(n,i,t)}function yC(n,e,t){let i=`FIRESTORE (${ch}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ko(i),new Error(i)}function Zt(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||yC(e,s,i)}function bt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bi.UNAUTHENTICATED))}shutdown(){}}class JM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class e2{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zt(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let a=new Dl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Dl,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Dl)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Zt(typeof i.accessToken=="string",31837,{l:i}),new _C(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string",2055,{h:e}),new Bi(e)}}class t2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new t2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zt(this.o===void 0,3512);const i=a=>{a.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,We("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=s2(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function Mt(n,e){return n<e?-1:n>e?1:0}function vb(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),a=e.charAt(i);if(s!==a)return k_(s)===k_(a)?Mt(s,a):k_(s)?1:-1}return Mt(n.length,e.length)}const r2=55296,a2=57343;function k_(n){const e=n.charCodeAt(0);return e>=r2&&e<=a2}function Qu(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="__name__";class pa{constructor(e,t,i){t===void 0?t=0:t>e.length&&ft(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ft(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return pa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pa?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=pa.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Mt(e.length,t.length)}static compareSegments(e,t){const i=pa.isNumericId(e),s=pa.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?pa.extractNumericId(e).compare(pa.extractNumericId(t)):vb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nl.fromString(e.substring(4,e.length-2))}}class bn extends pa{construct(e,t,i){return new bn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Xe(Ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const o2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends pa{construct(e,t,i){return new Ni(e,t,i)}static isValidIdentifier(e){return o2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ew}static keyField(){return new Ni([Ew])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Xe(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Xe(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Xe(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(i+=u,s++):(a(),s++)}if(a(),l)throw new Xe(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ni(t)}static emptyPath(){return new Ni([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.path=e}static fromPath(e){return new it(bn.fromString(e))}static fromName(e){return new it(bn.fromString(e).popFirst(5))}static empty(){return new it(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new bn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n,e,t){if(!t)throw new Xe(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function l2(n,e,t,i){if(e===!0&&i===!0)throw new Xe(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ww(n){if(!it.isDocumentKey(n))throw new Xe(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tw(n){if(it.isDocumentKey(n))throw new Xe(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function mv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ft(12329,{type:typeof n})}function Oc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Xe(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mv(n);throw new Xe(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Af(n,e){if(!vC(n))throw new Xe(Ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Xe(Ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=-62135596800,Aw=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Aw);return new vn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xe(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sw)throw new Xe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Aw}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Af(e,vn._jsonSchema))return new vn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vn._jsonSchemaVersion="firestore/timestamp/1.0",vn._jsonSchema={type:Zn("string",vn._jsonSchemaVersion),seconds:Zn("number"),nanoseconds:Zn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new vn(0,0))}static max(){return new yt(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=-1;function c2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=yt.fromTimestamp(i===1e9?new vn(t+1,0):new vn(t,i));return new Ll(s,it.empty(),e)}function u2(n){return new Ll(n.readTime,n.key,rf)}class Ll{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ll(yt.min(),it.empty(),rf)}static max(){return new Ll(yt.max(),it.empty(),rf)}}function h2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=it.comparator(n.documentKey,e.documentKey),t!==0?t:Mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(n){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==d2)throw n;We("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,i)=>{t(e)})}static reject(e){return new Te((t,i)=>{i(e)})}static waitFor(e){return new Te((t,i)=>{let s=0,a=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++a,l&&a===s&&t()},h=>i(h))}),l=!0,a===s&&t()})}static or(e){let t=Te.resolve(!1);for(const i of e)t=t.next(s=>s?Te.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,a)=>{i.push(t.call(this,s,a))}),this.waitFor(i)}static mapArray(e,t){return new Te((i,s)=>{const a=e.length,l=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;t(e[f]).next(y=>{l[f]=y,++u,u===a&&i(l)},y=>s(y))}})}static doWhile(e,t){return new Te((i,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):i()};a()})}}function m2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hh(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=-1;function Eg(n){return n==null}function Pp(n){return n===0&&1/n==-1/0}function p2(n){return typeof n=="number"&&Number.isInteger(n)&&!Pp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="";function g2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cw(e)),e=y2(n.get(t),e);return Cw(e)}function y2(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case xC:t+="";break;default:t+=a}}return t}function Cw(n){return n+xC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){this.comparator=e,this.root=t||ki.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gm(this.root,e,this.comparator,!0)}}class Gm{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??ki.RED,this.left=s??ki.EMPTY,this.right=a??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new ki(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ki.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ft(27949);return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1;ki.EMPTY=new class{constructor(){this.size=0}get key(){throw ft(57766)}get value(){throw ft(16141)}get color(){throw ft(16727)}get left(){throw ft(29726)}get right(){throw ft(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new ki(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ui(this.comparator);return t.data=e,t}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.fields=e,e.sort(Ni.comparator)}static empty(){return new Us([])}unionWith(e){let t=new ui(Ni.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qu(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new wC("Invalid base64 string: "+a):a}}(e);return new Di(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Di.EMPTY_BYTE_STRING=new Di("");const _2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(n){if(Zt(!!n,39018),typeof n=="string"){let e=0;const t=_2.exec(n);if(Zt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fl(n){return typeof n=="string"?Di.fromBase64String(n):Di.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="server_timestamp",SC="__type__",AC="__previous_value__",CC="__local_write_time__";function gv(n){return(n?.mapValue?.fields||{})[SC]?.stringValue===TC}function wg(n){const e=n.mapValue.fields[AC];return gv(e)?wg(e):e}function af(n){const e=Vl(n.mapValue.fields[CC].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t,i,s,a,l,u,h,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=y}}const jp="(default)";class of{constructor(e,t){this.projectId=e,this.database=t||jp}static empty(){return new of("","")}get isDefaultDatabase(){return this.database===jp}isEqual(e){return e instanceof of&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="__type__",v2="__max__",Km={mapValue:{}},IC="__vector__",Lp="value";function Ul(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gv(n)?4:E2(n)?9007199254740991:x2(n)?10:11:ft(28295,{value:n})}function Sa(n,e){if(n===e)return!0;const t=Ul(n);if(t!==Ul(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return af(n).isEqual(af(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Vl(s.timestampValue),u=Vl(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Fl(s.bytesValue).isEqual(Fl(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Un(s.geoPointValue.latitude)===Un(a.geoPointValue.latitude)&&Un(s.geoPointValue.longitude)===Un(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Un(s.integerValue)===Un(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Un(s.doubleValue),u=Un(a.doubleValue);return l===u?Pp(l)===Pp(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return Qu(n.arrayValue.values||[],e.arrayValue.values||[],Sa);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(Rw(l)!==Rw(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!Sa(l[h],u[h])))return!1;return!0}(n,e);default:return ft(52216,{left:n})}}function lf(n,e){return(n.values||[]).find(t=>Sa(t,e))!==void 0}function Zu(n,e){if(n===e)return 0;const t=Ul(n),i=Ul(e);if(t!==i)return Mt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const u=Un(a.integerValue||a.doubleValue),h=Un(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return kw(n.timestampValue,e.timestampValue);case 4:return kw(af(n),af(e));case 5:return vb(n.stringValue,e.stringValue);case 6:return function(a,l){const u=Fl(a),h=Fl(l);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const u=a.split("/"),h=l.split("/");for(let f=0;f<u.length&&f<h.length;f++){const y=Mt(u[f],h[f]);if(y!==0)return y}return Mt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const u=Mt(Un(a.latitude),Un(l.latitude));return u!==0?u:Mt(Un(a.longitude),Un(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Nw(n.arrayValue,e.arrayValue);case 10:return function(a,l){const u=a.fields||{},h=l.fields||{},f=u[Lp]?.arrayValue,y=h[Lp]?.arrayValue,v=Mt(f?.values?.length||0,y?.values?.length||0);return v!==0?v:Nw(f,y)}(n.mapValue,e.mapValue);case 11:return function(a,l){if(a===Km.mapValue&&l===Km.mapValue)return 0;if(a===Km.mapValue)return 1;if(l===Km.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=l.fields||{},y=Object.keys(f);h.sort(),y.sort();for(let v=0;v<h.length&&v<y.length;++v){const x=vb(h[v],y[v]);if(x!==0)return x;const T=Zu(u[h[v]],f[y[v]]);if(T!==0)return T}return Mt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ft(23264,{he:t})}}function kw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Mt(n,e);const t=Vl(n),i=Vl(e),s=Mt(t.seconds,i.seconds);return s!==0?s:Mt(t.nanos,i.nanos)}function Nw(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=Zu(t[s],i[s]);if(a)return a}return Mt(t.length,i.length)}function Ju(n){return xb(n)}function xb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Vl(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return it.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=xb(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${xb(t.fields[l])}`;return s+"}"}(n.mapValue):ft(61005,{value:n})}function vp(n){switch(Ul(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wg(n);return e?16+vp(e):16;case 5:return 2*n.stringValue.length;case 6:return Fl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+vp(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Wl(i.fields,(a,l)=>{s+=a.length+vp(l)}),s}(n.mapValue);default:throw ft(13486,{value:n})}}function Eb(n){return!!n&&"integerValue"in n}function yv(n){return!!n&&"arrayValue"in n}function Dw(n){return!!n&&"nullValue"in n}function Ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xp(n){return!!n&&"mapValue"in n}function x2(n){return(n?.mapValue?.fields||{})[RC]?.stringValue===IC}function Wd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Wl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Wd(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wd(n.arrayValue.values[t]);return e}return{...n}}function E2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===v2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.value=e}static empty(){return new ys({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wd(t)}setAll(e){let t=Ni.emptyPath(),i={},s=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,i,s),i={},s=[],t=u.popLast()}l?i[u.lastSegment()]=Wd(l):s.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());xp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];xp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Wl(t,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new ys(Wd(this.value))}}function kC(n){const e=[];return Wl(n.fields,(t,i)=>{const s=new Ni([t]);if(xp(i)){const a=kC(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new Us(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t,i,s,a,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Hi(e,0,yt.min(),yt.min(),yt.min(),ys.empty(),0)}static newFoundDocument(e,t,i,s){return new Hi(e,1,t,yt.min(),i,s,0)}static newNoDocument(e,t){return new Hi(e,2,t,yt.min(),yt.min(),ys.empty(),0)}static newUnknownDocument(e,t){return new Hi(e,3,t,yt.min(),yt.min(),ys.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ys.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.position=e,this.inclusive=t}}function Mw(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?i=it.comparator(it.fromName(l.referenceValue),t.key):i=Zu(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Pw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sa(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t="asc"){this.field=e,this.dir=t}}function w2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{}class li extends NC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new S2(e,t,i):t==="array-contains"?new R2(e,i):t==="in"?new I2(e,i):t==="not-in"?new k2(e,i):t==="array-contains-any"?new N2(e,i):new li(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new A2(e,i):new C2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zu(t,this.value)):t!==null&&Ul(this.value)===Ul(t)&&this.matchesComparison(Zu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Aa extends NC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Aa(e,t)}matches(e){return DC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DC(n){return n.op==="and"}function OC(n){return T2(n)&&DC(n)}function T2(n){for(const e of n.filters)if(e instanceof Aa)return!1;return!0}function wb(n){if(n instanceof li)return n.field.canonicalString()+n.op.toString()+Ju(n.value);if(OC(n))return n.filters.map(e=>wb(e)).join(",");{const e=n.filters.map(t=>wb(t)).join(",");return`${n.op}(${e})`}}function MC(n,e){return n instanceof li?function(i,s){return s instanceof li&&i.op===s.op&&i.field.isEqual(s.field)&&Sa(i.value,s.value)}(n,e):n instanceof Aa?function(i,s){return s instanceof Aa&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,l,u)=>a&&MC(l,s.filters[u]),!0):!1}(n,e):void ft(19439)}function PC(n){return n instanceof li?function(t){return`${t.field.canonicalString()} ${t.op} ${Ju(t.value)}`}(n):n instanceof Aa?function(t){return t.op.toString()+" {"+t.getFilters().map(PC).join(" ,")+"}"}(n):"Filter"}class S2 extends li{constructor(e,t,i){super(e,t,i),this.key=it.fromName(i.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class A2 extends li{constructor(e,t){super(e,"in",t),this.keys=jC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class C2 extends li{constructor(e,t){super(e,"not-in",t),this.keys=jC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jC(n,e){return(e.arrayValue?.values||[]).map(t=>it.fromName(t.referenceValue))}class R2 extends li{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yv(t)&&lf(t.arrayValue,this.value)}}class I2 extends li{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lf(this.value.arrayValue,t)}}class k2 extends li{constructor(e,t){super(e,"not-in",t)}matches(e){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lf(this.value.arrayValue,t)}}class N2 extends li{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>lf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,t=null,i=[],s=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function jw(n,e=null,t=[],i=[],s=null,a=null,l=null){return new D2(n,e,t,i,s,a,l)}function _v(n){const e=bt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>wb(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Eg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ju(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ju(i)).join(",")),e.Te=t}return e.Te}function bv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!w2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pw(n.startAt,e.startAt)&&Pw(n.endAt,e.endAt)}function Tb(n){return it.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t=null,i=[],s=[],a=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O2(n,e,t,i,s,a,l,u){return new Tg(n,e,t,i,s,a,l,u)}function LC(n){return new Tg(n)}function Lw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function M2(n){return n.collectionGroup!==null}function Gd(n){const e=bt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new ui(Ni.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Fp(a,i))}),t.has(Ni.keyField().canonicalString())||e.Ie.push(new Fp(Ni.keyField(),i))}return e.Ie}function _a(n){const e=bt(n);return e.Ee||(e.Ee=P2(e,Gd(n))),e.Ee}function P2(n,e){if(n.limitType==="F")return jw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Fp(s.field,a)});const t=n.endAt?new Vp(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Vp(n.startAt.position,n.startAt.inclusive):null;return jw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Sb(n,e,t){return new Tg(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sg(n,e){return bv(_a(n),_a(e))&&n.limitType===e.limitType}function VC(n){return`${_v(_a(n))}|lt:${n.limitType}`}function Lu(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>PC(s)).join(", ")}]`),Eg(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>Ju(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>Ju(s)).join(",")),`Target(${i})`}(_a(n))}; limitType=${n.limitType})`}function Ag(n,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):it.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,s){for(const a of Gd(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(l,u,h){const f=Mw(l,u,h);return l.inclusive?f<=0:f<0}(i.startAt,Gd(i),s)||i.endAt&&!function(l,u,h){const f=Mw(l,u,h);return l.inclusive?f>=0:f>0}(i.endAt,Gd(i),s))}(n,e)}function j2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FC(n){return(e,t)=>{let i=!1;for(const s of Gd(n)){const a=L2(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function L2(n,e,t){const i=n.field.isKeyField()?it.comparator(e.key,t.key):function(a,l,u){const h=l.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Zu(h,f):ft(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ft(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,(t,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return EC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new An(it.comparator);function No(){return V2}const UC=new An(it.comparator);function Fd(...n){let e=UC;for(const t of n)e=e.insert(t.key,t);return e}function zC(n){let e=UC;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Rc(){return Kd()}function BC(){return Kd()}function Kd(){return new $c(n=>n.toString(),(n,e)=>n.isEqual(e))}const F2=new An(it.comparator),U2=new ui(it.comparator);function Pt(...n){let e=U2;for(const t of n)e=e.add(t);return e}const z2=new ui(Mt);function B2(){return z2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pp(e)?"-0":e}}function HC(n){return{integerValue:""+n}}function H2(n,e){return p2(e)?HC(e):vv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this._=void 0}}function $2(n,e,t){return n instanceof Up?function(s,a){const l={fields:{[SC]:{stringValue:TC},[CC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&gv(a)&&(a=wg(a)),a&&(l.fields[AC]=a),{mapValue:l}}(t,e):n instanceof cf?qC(n,e):n instanceof uf?WC(n,e):function(s,a){const l=$C(s,a),u=Vw(l)+Vw(s.Ae);return Eb(l)&&Eb(s.Ae)?HC(u):vv(s.serializer,u)}(n,e)}function q2(n,e,t){return n instanceof cf?qC(n,e):n instanceof uf?WC(n,e):t}function $C(n,e){return n instanceof zp?function(i){return Eb(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Up extends Cg{}class cf extends Cg{constructor(e){super(),this.elements=e}}function qC(n,e){const t=GC(e);for(const i of n.elements)t.some(s=>Sa(s,i))||t.push(i);return{arrayValue:{values:t}}}class uf extends Cg{constructor(e){super(),this.elements=e}}function WC(n,e){let t=GC(e);for(const i of n.elements)t=t.filter(s=>!Sa(s,i));return{arrayValue:{values:t}}}class zp extends Cg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vw(n){return Un(n.integerValue||n.doubleValue)}function GC(n){return yv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function W2(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof cf&&s instanceof cf||i instanceof uf&&s instanceof uf?Qu(i.elements,s.elements,Sa):i instanceof zp&&s instanceof zp?Sa(i.Ae,s.Ae):i instanceof Up&&s instanceof Up}(n.transform,e.transform)}class G2{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ep(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rg{}function KC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xv(n.key,Fr.none()):new Cf(n.key,n.data,Fr.none());{const t=n.data,i=ys.empty();let s=new ui(Ni.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Gl(n.key,i,new Us(s.toArray()),Fr.none())}}function K2(n,e,t){n instanceof Cf?function(s,a,l){const u=s.value.clone(),h=Uw(s.fieldTransforms,a,l.transformResults);u.setAll(h),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Gl?function(s,a,l){if(!Ep(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=Uw(s.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(YC(s)),h.setAll(u),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Yd(n,e,t,i){return n instanceof Cf?function(a,l,u,h){if(!Ep(a.precondition,l))return u;const f=a.value.clone(),y=zw(a.fieldTransforms,h,l);return f.setAll(y),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof Gl?function(a,l,u,h){if(!Ep(a.precondition,l))return u;const f=zw(a.fieldTransforms,h,l),y=l.data;return y.setAll(YC(a)),y.setAll(f),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(a,l,u){return Ep(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function Y2(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=$C(i.transform,s||null);a!=null&&(t===null&&(t=ys.empty()),t.set(i.field,a))}return t||null}function Fw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Qu(i,s,(a,l)=>W2(a,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Cf extends Rg{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gl extends Rg{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function YC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Uw(n,e,t){const i=new Map;Zt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,u=e.data.field(a.field);i.set(a.field,q2(l,u,t[s]))}return i}function zw(n,e,t){const i=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);i.set(s.field,$2(a,l,e))}return i}class xv extends Rg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X2 extends Rg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&K2(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Yd(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Yd(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=BC();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=t.has(s.key)?null:u;const h=KC(l,u);h!==null&&i.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(yt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Qu(this.mutations,e.mutations,(t,i)=>Fw(t,i))&&Qu(this.baseMutations,e.baseMutations,(t,i)=>Fw(t,i))}}class Ev{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Zt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return F2}();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Ev(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn,Ht;function eP(n){switch(n){case Ie.OK:return ft(64938);case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return ft(15467,{code:n})}}function XC(n){if(n===void 0)return ko("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case Xn.OK:return Ie.OK;case Xn.CANCELLED:return Ie.CANCELLED;case Xn.UNKNOWN:return Ie.UNKNOWN;case Xn.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Xn.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Xn.INTERNAL:return Ie.INTERNAL;case Xn.UNAVAILABLE:return Ie.UNAVAILABLE;case Xn.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Xn.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Xn.NOT_FOUND:return Ie.NOT_FOUND;case Xn.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Xn.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Xn.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Xn.ABORTED:return Ie.ABORTED;case Xn.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Xn.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Xn.DATA_LOSS:return Ie.DATA_LOSS;default:return ft(39323,{code:n})}}(Ht=Xn||(Xn={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new Nl([4294967295,4294967295],0);function Bw(n){const e=tP().encode(n),t=new hC;return t.update(e),new Uint8Array(t.digest())}function Hw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Nl([t,i],0),new Nl([s,a],0)]}class wv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ud(`Invalid padding: ${t}`);if(i<0)throw new Ud(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ud(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ud(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Nl.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Nl.fromNumber(i)));return s.compare(nP)===1&&(s=new Nl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Bw(e),[i,s]=Hw(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new wv(a,s,t);return i.forEach(u=>l.insert(u)),l}insert(e){if(this.ge===0)return;const t=Bw(e),[i,s]=Hw(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Rf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ig(yt.min(),s,new An(Mt),No(),Pt())}}class Rf{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Rf(i,t,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class QC{constructor(e,t){this.targetId=e,this.Ce=t}}class ZC{constructor(e,t,i=Di.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class $w{constructor(){this.ve=0,this.Fe=qw(),this.Me=Di.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pt(),t=Pt(),i=Pt();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ft(38017,{changeType:a})}}),new Rf(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=qw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iP{constructor(e){this.Ge=e,this.ze=new Map,this.je=No(),this.Je=Ym(),this.He=Ym(),this.Ye=new An(Mt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ft(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((i,s)=>{this.rt(s)&&t(s)})}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Tb(a))if(i===0){const l=new it(a.path);this.et(t,l,Hi.newNoDocument(l,yt.min()))}else Zt(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let l,u;try{l=Fl(i).toUint8Array()}catch(h){if(h instanceof wC)return Xu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new wv(l,s,a)}catch(h){return Xu(h instanceof Ud?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach(a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(t,a,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((a,l)=>{const u=this.ot(l);if(u){if(a.current&&Tb(u.target)){const h=new it(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Hi.newNoDocument(h,e))}a.Be&&(t.set(l,a.ke()),a.qe())}});let i=Pt();this.He.forEach((a,l)=>{let u=!0;l.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(a))}),this.je.forEach((a,l)=>l.setReadTime(e));const s=new Ig(e,t,this.Ye,this.je,i);return this.je=No(),this.Je=Ym(),this.He=Ym(),this.Ye=new An(Mt),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $w,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ui(Mt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ui(Mt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||We("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $w),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ym(){return new An(it.comparator)}function qw(){return new An(it.comparator)}const sP={asc:"ASCENDING",desc:"DESCENDING"},rP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aP={and:"AND",or:"OR"};class oP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ab(n,e){return n.useProto3Json||Eg(e)?e:{value:e}}function Bp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lP(n,e){return Bp(n,e.toTimestamp())}function ba(n){return Zt(!!n,49232),yt.fromTimestamp(function(t){const i=Vl(t);return new vn(i.seconds,i.nanos)}(n))}function Tv(n,e){return Cb(n,e).canonicalString()}function Cb(n,e){const t=function(s){return new bn(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function e1(n){const e=bn.fromString(n);return Zt(r1(e),10190,{key:e.toString()}),e}function Rb(n,e){return Tv(n.databaseId,e.path)}function N_(n,e){const t=e1(e);if(t.get(1)!==n.databaseId.projectId)throw new Xe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Xe(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new it(n1(t))}function t1(n,e){return Tv(n.databaseId,e)}function cP(n){const e=e1(n);return e.length===4?bn.emptyPath():n1(e)}function Ib(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function n1(n){return Zt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ww(n,e,t){return{name:Rb(n,e),fields:t.value.mapValue.fields}}function uP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ft(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,y){return f.useProto3Json?(Zt(y===void 0||typeof y=="string",58123),Di.fromBase64String(y||"")):(Zt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Di.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(f){const y=f.code===void 0?Ie.UNKNOWN:XC(f.code);return new Xe(y,f.message||"")}(l);t=new ZC(i,s,a,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=N_(n,i.document.name),a=ba(i.document.updateTime),l=i.document.createTime?ba(i.document.createTime):yt.min(),u=new ys({mapValue:{fields:i.document.fields}}),h=Hi.newFoundDocument(s,a,l,u),f=i.targetIds||[],y=i.removedTargetIds||[];t=new wp(f,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=N_(n,i.document),a=i.readTime?ba(i.readTime):yt.min(),l=Hi.newNoDocument(s,a),u=i.removedTargetIds||[];t=new wp([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=N_(n,i.document),a=i.removedTargetIds||[];t=new wp([],a,s,null)}else{if(!("filter"in e))return ft(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new J2(s,a),u=i.targetId;t=new QC(u,l)}}return t}function hP(n,e){let t;if(e instanceof Cf)t={update:Ww(n,e.key,e.value)};else if(e instanceof xv)t={delete:Rb(n,e.key)};else if(e instanceof Gl)t={update:Ww(n,e.key,e.data),updateMask:vP(e.fieldMask)};else{if(!(e instanceof X2))return ft(16599,{Vt:e.type});t={verify:Rb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,l){const u=l.transform;if(u instanceof Up)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof cf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof uf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof zp)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw ft(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:lP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ft(27497)}(n,e.precondition)),t}function dP(n,e){return n&&n.length>0?(Zt(e!==void 0,14353),n.map(t=>function(s,a){let l=s.updateTime?ba(s.updateTime):ba(a);return l.isEqual(yt.min())&&(l=ba(a)),new G2(l,s.transformResults||[])}(t,e))):[]}function fP(n,e){return{documents:[t1(n,e.path)]}}function mP(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=t1(n,s);const a=function(f){if(f.length!==0)return s1(Aa.create(f,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(f){if(f.length!==0)return f.map(y=>function(x){return{field:Vu(x.field),direction:yP(x.dir)}}(y))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Ab(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:t,parent:s}}function pP(n){let e=cP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Zt(i===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=function(v){const x=i1(v);return x instanceof Aa&&OC(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(x=>function(C){return new Fp(Fu(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(x))}(t.orderBy));let u=null;t.limit&&(u=function(v){let x;return x=typeof v=="object"?v.value:v,Eg(x)?null:x}(t.limit));let h=null;t.startAt&&(h=function(v){const x=!!v.before,T=v.values||[];return new Vp(T,x)}(t.startAt));let f=null;return t.endAt&&(f=function(v){const x=!v.before,T=v.values||[];return new Vp(T,x)}(t.endAt)),O2(e,s,l,a,u,"F",h,f)}function gP(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function i1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Fu(t.unaryFilter.field);return li.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Fu(t.unaryFilter.field);return li.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fu(t.unaryFilter.field);return li.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Fu(t.unaryFilter.field);return li.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ft(61313);default:return ft(60726)}}(n):n.fieldFilter!==void 0?function(t){return li.create(Fu(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ft(58110);default:return ft(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Aa.create(t.compositeFilter.filters.map(i=>i1(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ft(1026)}}(t.compositeFilter.op))}(n):ft(30097,{filter:n})}function yP(n){return sP[n]}function _P(n){return rP[n]}function bP(n){return aP[n]}function Vu(n){return{fieldPath:n.canonicalString()}}function Fu(n){return Ni.fromServerFormat(n.fieldPath)}function s1(n){return n instanceof li?function(t){if(t.op==="=="){if(Ow(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NAN"}};if(Dw(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ow(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NOT_NAN"}};if(Dw(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(t.field),op:_P(t.op),value:t.value}}}(n):n instanceof Aa?function(t){const i=t.getFilters().map(s=>s1(s));return i.length===1?i[0]:{compositeFilter:{op:bP(t.op),filters:i}}}(n):ft(54877,{filter:n})}function vP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function r1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t,i,s,a=yt.min(),l=yt.min(),u=Di.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.yt=e}}function EP(n){const e=pP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.Cn=new TP}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Ll.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Ll.min())}updateCollectionGroup(e,t,i){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class TP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new ui(bn.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ui(bn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a1=41943040;class gs{static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(a1,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eh(0)}static cr(){return new eh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="LruGarbageCollector",SP=1048576;function Yw([n,e],[t,i]){const s=Mt(n,t);return s===0?Mt(e,i):s}class AP{constructor(e){this.Ir=e,this.buffer=new ui(Yw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Yw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){We(Kw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hh(t)?We(Kw,"Ignoring IndexedDB error during garbage collection: ",t):await uh(t)}await this.Vr(3e5)})}}class RP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(xg.ce);const i=new AP(t);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(We("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Gw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,a,l,u,h,f;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,u=Date.now(),this.removeTargets(e,i,t))).next(v=>(a=v,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),ju()<=Ot.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-y}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function IP(n,e){return new RP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.changes=new $c(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&Yd(i.mutation,s,Us.empty(),vn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Pt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Pt()){const s=Rc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(a=>{let l=Fd();return a.forEach((u,h)=>{l=l.insert(u,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=Rc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Pt()))}populateOverlays(e,t,i){const s=[];return i.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,i,s){let a=No();const l=Kd(),u=function(){return Kd()}();return t.forEach((h,f)=>{const y=i.get(f.key);s.has(f.key)&&(y===void 0||y.mutation instanceof Gl)?a=a.insert(f.key,f):y!==void 0?(l.set(f.key,y.mutation.getFieldMask()),Yd(y.mutation,f,y.mutation.getFieldMask(),vn.now())):l.set(f.key,Us.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,y)=>l.set(f,y)),t.forEach((f,y)=>u.set(f,new NP(y,l.get(f)??null))),u))}recalculateAndSaveOverlays(e,t){const i=Kd();let s=new An((l,u)=>l-u),a=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let y=i.get(h)||Us.empty();y=u.applyToLocalView(f,y),i.set(h,y);const v=(s.get(u.batchId)||Pt()).add(h);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,y=h.value,v=BC();y.forEach(x=>{if(!a.has(x)){const T=KC(t.get(x),i.get(x));T!==null&&v.set(x,T),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return Te.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(l){return it.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):M2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):Te.resolve(Rc());let u=rf,h=a;return l.next(f=>Te.forEach(f,(y,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(y)?Te.resolve():this.remoteDocumentCache.getEntry(e,y).next(x=>{h=h.insert(y,x)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,Pt())).next(y=>({batchId:u,changes:zC(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next(i=>{let s=Fd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let l=Fd();return this.indexManager.getCollectionParents(e,a).next(u=>Te.forEach(u,h=>{const f=function(v,x){return new Tg(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next(y=>{y.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s))).next(l=>{a.forEach((h,f)=>{const y=f.getKey();l.get(y)===null&&(l=l.insert(y,Hi.newInvalidDocument(y)))});let u=Fd();return l.forEach((h,f)=>{const y=a.get(h);y!==void 0&&Yd(y.mutation,f,Us.empty(),vn.now()),Ag(t,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ba(s.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(s){return{name:s.name,query:EP(s.bundledQuery),readTime:ba(s.readTime)}}(t)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.overlays=new An(it.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Rc();return Te.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,a)=>{this.St(e,t,a)}),Te.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(i)),Te.resolve()}getOverlaysForCollection(e,t,i){const s=Rc(),a=t.length+1,l=new it(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>i&&s.set(h.getKey(),h)}return Te.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new An((f,y)=>f-y);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let y=a.get(f.largestBatchId);y===null&&(y=Rc(),a=a.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const u=Rc(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,y)=>u.set(f,y)),!(u.size()>=s)););return Te.resolve(u)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Z2(t,i));let a=this.qr.get(t);a===void 0&&(a=Pt(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.sessionToken=Di.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.Qr=new ui(_i.$r),this.Ur=new ui(_i.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new _i(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Gr(new _i(e,t))}zr(e,t){e.forEach(i=>this.removeReference(i,t))}jr(e){const t=new it(new bn([])),i=new _i(t,e),s=new _i(t,e+1),a=[];return this.Ur.forEachInRange([i,s],l=>{this.Gr(l),a.push(l.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new it(new bn([])),i=new _i(t,e),s=new _i(t,e+1);let a=Pt();return this.Ur.forEachInRange([i,s],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new _i(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class _i{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return it.comparator(e.key,t.key)||Mt(e.Yr,t.Yr)}static Kr(e,t){return Mt(e.Yr,t.Yr)||it.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ui(_i.$r)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Q2(a,t,i,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new _i(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Te.resolve(l)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),a=s<0?0:s;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?pv:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new _i(t,0),s=new _i(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],l=>{const u=this.Xr(l.Yr);a.push(u)}),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ui(Mt);return t.forEach(s=>{const a=new _i(s,0),l=new _i(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],u=>{i=i.add(u.Yr)})}),Te.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;it.isDocumentKey(a)||(a=a.child(""));const l=new _i(new it(a),0);let u=new ui(Mt);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Yr)),!0)},l),Te.resolve(this.ti(u))}ti(e){const t=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Zt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Te.forEach(t.mutations,s=>{const a=new _i(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){const i=new _i(t,0),s=this.Zr.firstAfterOrEqual(i);return Te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.ri=e,this.docs=function(){return new An(it.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Te.resolve(i?i.document.mutableCopy():Hi.newInvalidDocument(t))}getEntries(e,t){let i=No();return t.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Hi.newInvalidDocument(s))}),Te.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=No();const l=t.path,u=new it(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:y}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||h2(u2(y),i)<=0||(s.has(y.key)||Ag(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,t,i,s){ft(9500)}ii(e,t){return Te.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new VP(this)}getSize(e){return Te.resolve(this.size)}}class VP extends kP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.persistence=e,this.si=new $c(t=>_v(t),bv),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Sv,this.targetCount=0,this.ai=eh.ur()}forEachTarget(e,t){return this.si.forEach((i,s)=>t(s)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new eh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.si.forEach((l,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),Te.waitFor(a).next(()=>s)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return Te.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Te.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),Te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return Te.resolve(i)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){this.ui={},this.overlays={},this.ci=new xg(0),this.li=!1,this.li=!0,this.hi=new PP,this.referenceDelegate=e(this),this.Pi=new FP(this),this.indexManager=new wP,this.remoteDocumentCache=function(s){return new LP(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new xP(t),this.Ii=new OP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new jP(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){We("MemoryPersistence","Starting transaction:",e);const s=new UP(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,t){return Te.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}}class UP extends f2{constructor(e){super(),this.currentSequenceNumber=e}}class Av{constructor(e){this.persistence=e,this.Ri=new Sv,this.Vi=null}static mi(e){return new Av(e)}get fi(){if(this.Vi)return this.Vi;throw ft(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,i=>{const s=it.fromPath(i);return this.gi(e,s).next(a=>{a||t.removeEntry(s,yt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Hp{constructor(e,t){this.persistence=e,this.pi=new $c(i=>g2(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=IP(this,t)}static mi(e,t){return new Hp(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}wr(e){let t=0;return this.pr(e,i=>{t++}).next(()=>t)}pr(e,t){return Te.forEach(this.pi,(i,s)=>this.br(e,i,s).next(a=>a?Te.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,l=>this.br(e,l,t).next(u=>{u||(i++,a.removeEntry(l,yt.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vp(e.data.value)),t}br(e,t,i){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return Te.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Pt(),s=Pt();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Cv(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DO()?8:m2(Wi())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.ys(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ws(e,t,s,i).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new zP;return this.Ss(e,t,l).next(u=>{if(a.result=u,this.Vs)return this.bs(e,t,l,u.size)})}).next(()=>a.result)}bs(e,t,i,s){return i.documentReadCount<this.fs?(ju()<=Ot.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",Lu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(ju()<=Ot.DEBUG&&We("QueryEngine","Query:",Lu(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(ju()<=Ot.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",Lu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_a(t))):Te.resolve())}ys(e,t){if(Lw(t))return Te.resolve(null);let i=_a(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Sb(t,null,"F"),i=_a(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const l=Pt(...a);return this.ps.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(t,u);return this.Cs(t,f,l,h.readTime)?this.ys(e,Sb(t,null,"F")):this.vs(e,f,t,h)}))})))}ws(e,t,i,s){return Lw(t)||s.isEqual(yt.min())?Te.resolve(null):this.ps.getDocuments(e,i).next(a=>{const l=this.Ds(t,a);return this.Cs(t,l,i,s)?Te.resolve(null):(ju()<=Ot.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Lu(t)),this.vs(e,l,t,c2(s,rf)).next(u=>u))})}Ds(e,t){let i=new ui(FC(e));return t.forEach((s,a)=>{Ag(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,t,i){return ju()<=Ot.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",Lu(t)),this.ps.getDocumentsMatchingQuery(e,t,Ll.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="LocalStore",HP=3e8;class $P{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new An(Mt),this.xs=new $c(a=>_v(a),bv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function qP(n,e,t,i){return new $P(n,e,t,i)}async function l1(n,e){const t=bt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const l=[],u=[];let h=Pt();for(const f of s){l.push(f.batchId);for(const y of f.mutations)h=h.add(y.key)}for(const f of a){u.push(f.batchId);for(const y of f.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:u}))})})}function WP(n,e){const t=bt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,y){const v=f.batch,x=v.keys();let T=Te.resolve();return x.forEach(C=>{T=T.next(()=>y.getEntry(h,C)).next(D=>{const R=f.docVersions.get(C);Zt(R!==null,48541),D.version.compareTo(R)<0&&(v.applyToRemoteDocument(D,f),D.isValidDocument()&&(D.setReadTime(f.commitVersion),y.addEntry(D)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(h,v))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Pt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function c1(n){const e=bt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function GP(n,e){const t=bt(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach((y,v)=>{const x=s.get(v);if(!x)return;u.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,v).next(()=>t.Pi.addMatchingKeys(a,y.addedDocuments,v)));let T=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Di.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,i)),s=s.insert(v,T),function(D,R,L){return D.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=HP?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(x,T,y)&&u.push(t.Pi.updateTargetData(a,T))});let h=No(),f=Pt();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),u.push(KP(a,l,e.documentUpdates).next(y=>{h=y.ks,f=y.qs})),!i.isEqual(yt.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next(v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i));u.push(y)}return Te.waitFor(u).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(t.Ms=s,a))}function KP(n,e,t){let i=Pt(),s=Pt();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let l=No();return t.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(yt.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):We(Rv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:l,qs:s}})}function YP(n,e){const t=bt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=pv),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function XP(n,e){const t=bt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Pi.getTargetData(i,e).next(a=>a?(s=a,Te.resolve(s)):t.Pi.allocateTargetId(i).next(l=>(s=new Al(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i})}async function kb(n,e,t){const i=bt(n),s=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!hh(l))throw l;We(Rv,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function Xw(n,e,t){const i=bt(n);let s=yt.min(),a=Pt();return i.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,y){const v=bt(h),x=v.xs.get(y);return x!==void 0?Te.resolve(v.Ms.get(x)):v.Pi.getTargetData(f,y)}(i,l,_a(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next(h=>{a=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:yt.min(),t?a:Pt())).next(u=>(QP(i,j2(e),u),{documents:u,Qs:a})))}function QP(n,e,t){let i=n.Os.get(e)||yt.min();t.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Os.set(e,i)}class Qw{constructor(){this.activeTargetIds=B2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZP{constructor(){this.Mo=new Qw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Qw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="ConnectivityMonitor";class Jw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){We(Zw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){We(Zw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xm=null;function Nb(){return Xm===null?Xm=function(){return 268435456+Math.round(2147483648*Math.random())}():Xm++,"0x"+Xm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="RestConnection",ej={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===jp?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,a){const l=Nb(),u=this.zo(e,t.toUriEncodedString());We(D_,`Sending RPC '${e}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,a);const{host:f}=new URL(u),y=zc(f);return this.Jo(e,u,h,i,y).then(v=>(We(D_,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Xu(D_,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v})}Ho(e,t,i,s,a,l){return this.Go(e,t,i,s,a)}jo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ch}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}zo(e,t){const i=ej[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="WebChannelConnection";class ij extends tj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,a){const l=Nb();return new Promise((u,h)=>{const f=new dC;f.setWithCredentials(!0),f.listenOnce(fC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case bp.NO_ERROR:const v=f.getResponseJson();We(Ui,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case bp.TIMEOUT:We(Ui,`RPC '${e}' ${l} timed out`),h(new Xe(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case bp.HTTP_ERROR:const x=f.getStatus();if(We(Ui,`RPC '${e}' ${l} failed with status:`,x,"response text:",f.getResponseText()),x>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T?.error;if(C&&C.status&&C.message){const D=function(L){const $=L.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf($)>=0?$:Ie.UNKNOWN}(C.status);h(new Xe(D,C.message))}else h(new Xe(Ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Xe(Ie.UNAVAILABLE,"Connection failed."));break;default:ft(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{We(Ui,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);We(Ui,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",y,i,15)})}T_(e,t,i){const s=Nb(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=gC(),u=pC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const y=a.join("");We(Ui,`Creating RPC '${e}' stream ${s}: ${y}`,h);const v=l.createWebChannel(y,h);this.I_(v);let x=!1,T=!1;const C=new nj({Yo:R=>{T?We(Ui,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(x||(We(Ui,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),We(Ui,`RPC '${e}' stream ${s} sending:`,R),v.send(R))},Zo:()=>v.close()}),D=(R,L,$)=>{R.listen(L,q=>{try{$(q)}catch(Z){setTimeout(()=>{throw Z},0)}})};return D(v,Vd.EventType.OPEN,()=>{T||(We(Ui,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),D(v,Vd.EventType.CLOSE,()=>{T||(T=!0,We(Ui,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(v))}),D(v,Vd.EventType.ERROR,R=>{T||(T=!0,Xu(Ui,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),C.a_(new Xe(Ie.UNAVAILABLE,"The operation could not be completed")))}),D(v,Vd.EventType.MESSAGE,R=>{if(!T){const L=R.data[0];Zt(!!L,16349);const $=L,q=$?.error||$[0]?.error;if(q){We(Ui,`RPC '${e}' stream ${s} received error:`,q);const Z=q.status;let Y=function(I){const O=Xn[I];if(O!==void 0)return XC(O)}(Z),J=q.message;Y===void 0&&(Y=Ie.INTERNAL,J="Unknown error status: "+Z+" with message "+q.message),T=!0,C.a_(new Xe(Y,J)),v.close()}else We(Ui,`RPC '${e}' stream ${s} received:`,L),C.u_(L)}}),D(u,mC.STAT_EVENT,R=>{R.stat===bb.PROXY?We(Ui,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===bb.NOPROXY&&We(Ui,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function O_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n){return new oP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t,i=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&We("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="PersistentStream";class h1{constructor(e,t,i,s,a,l,u,h){this.Mi=e,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new u1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(ko(t.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===t&&this.G_(i,s)},i=>{e(()=>{const s=new Xe(Ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return We(eT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(We(eT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sj extends h1{constructor(e,t,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=uP(this.serializer,e),i=function(a){if(!("targetChange"in a))return yt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?yt.min():l.readTime?ba(l.readTime):yt.min()}(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Ib(this.serializer),t.addTarget=function(a,l){let u;const h=l.target;if(u=Tb(h)?{documents:fP(a,h)}:{query:mP(a,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=JC(a,l.resumeToken);const f=Ab(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(yt.min())>0){u.readTime=Bp(a,l.snapshotVersion.toTimestamp());const f=Ab(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=gP(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Ib(this.serializer),t.removeTarget=e,this.q_(t)}}class rj extends h1{constructor(e,t,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dP(e.writeResults,e.commitTime),i=ba(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Ib(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>hP(this.serializer,i))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{}class oj extends aj{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Xe(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Go(e,Cb(t,i),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xe(Ie.UNKNOWN,a.toString())})}Ho(e,t,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Ho(e,Cb(t,i),s,l,u,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Xe(Ie.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ko(t),this.aa=!1):We("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="RemoteStore";class cj{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(l=>{i.enqueueAndForget(async()=>{qc(this)&&(We(Mc,"Restarting streams for network reachability change."),await async function(h){const f=bt(h);f.Ea.add(4),await If(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ng(f)}(this))})}),this.Ra=new lj(i,s)}}async function Ng(n){if(qc(n))for(const e of n.da)await e(!0)}async function If(n){for(const e of n.da)await e(!1)}function d1(n,e){const t=bt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dv(t)?Nv(t):dh(t).O_()&&kv(t,e))}function Iv(n,e){const t=bt(n),i=dh(t);t.Ia.delete(e),i.O_()&&f1(t,e),t.Ia.size===0&&(i.O_()?i.L_():qc(t)&&t.Ra.set("Unknown"))}function kv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dh(n).Y_(e)}function f1(n,e){n.Va.Ue(e),dh(n).Z_(e)}function Nv(n){n.Va=new iP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),dh(n).start(),n.Ra.ua()}function Dv(n){return qc(n)&&!dh(n).x_()&&n.Ia.size>0}function qc(n){return bt(n).Ea.size===0}function m1(n){n.Va=void 0}async function uj(n){n.Ra.set("Online")}async function hj(n){n.Ia.forEach((e,t)=>{kv(n,e)})}async function dj(n,e){m1(n),Dv(n)?(n.Ra.ha(e),Nv(n)):n.Ra.set("Unknown")}async function fj(n,e,t){if(n.Ra.set("Online"),e instanceof ZC&&e.state===2&&e.cause)try{await async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))}(n,e)}catch(i){We(Mc,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $p(n,i)}else if(e instanceof wp?n.Va.Ze(e):e instanceof QC?n.Va.st(e):n.Va.tt(e),!t.isEqual(yt.min()))try{const i=await c1(n.localStore);t.compareTo(i)>=0&&await function(a,l){const u=a.Va.Tt(l);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const y=a.Ia.get(f);y&&a.Ia.set(f,y.withResumeToken(h.resumeToken,l))}}),u.targetMismatches.forEach((h,f)=>{const y=a.Ia.get(h);if(!y)return;a.Ia.set(h,y.withResumeToken(Di.EMPTY_BYTE_STRING,y.snapshotVersion)),f1(a,h);const v=new Al(y.target,h,f,y.sequenceNumber);kv(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(i){We(Mc,"Failed to raise snapshot:",i),await $p(n,i)}}async function $p(n,e,t){if(!hh(e))throw e;n.Ea.add(1),await If(n),n.Ra.set("Offline"),t||(t=()=>c1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{We(Mc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ng(n)})}function p1(n,e){return e().catch(t=>$p(n,t,e))}async function Dg(n){const e=bt(n),t=zl(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pv;for(;mj(e);)try{const s=await YP(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,pj(e,s)}catch(s){await $p(e,s)}g1(e)&&y1(e)}function mj(n){return qc(n)&&n.Ta.length<10}function pj(n,e){n.Ta.push(e);const t=zl(n);t.O_()&&t.X_&&t.ea(e.mutations)}function g1(n){return qc(n)&&!zl(n).x_()&&n.Ta.length>0}function y1(n){zl(n).start()}async function gj(n){zl(n).ra()}async function yj(n){const e=zl(n);for(const t of n.Ta)e.ea(t.mutations)}async function _j(n,e,t){const i=n.Ta.shift(),s=Ev.from(i,e,t);await p1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Dg(n)}async function bj(n,e){e&&zl(n).X_&&await async function(i,s){if(function(l){return eP(l)&&l!==Ie.ABORTED}(s.code)){const a=i.Ta.shift();zl(i).B_(),await p1(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Dg(i)}}(n,e),g1(n)&&y1(n)}async function tT(n,e){const t=bt(n);t.asyncQueue.verifyOperationInProgress(),We(Mc,"RemoteStore received new credentials");const i=qc(t);t.Ea.add(3),await If(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ng(t)}async function vj(n,e){const t=bt(n);e?(t.Ea.delete(2),await Ng(t)):e||(t.Ea.add(2),await If(t),t.Ra.set("Unknown"))}function dh(n){return n.ma||(n.ma=function(t,i,s){const a=bt(t);return a.sa(),new sj(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:uj.bind(null,n),t_:hj.bind(null,n),r_:dj.bind(null,n),H_:fj.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Dv(n)?Nv(n):n.Ra.set("Unknown")):(await n.ma.stop(),m1(n))})),n.ma}function zl(n){return n.fa||(n.fa=function(t,i,s){const a=bt(t);return a.sa(),new rj(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:gj.bind(null,n),r_:bj.bind(null,n),ta:yj.bind(null,n),na:_j.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Dg(n)):(await n.fa.stop(),n.Ta.length>0&&(We(Mc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Dl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const l=Date.now()+i,u=new Ov(e,t,l,s,a);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mv(n,e){if(ko("AsyncQueue",`${e}: ${n}`),hh(n))return new Xe(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{static emptySet(e){return new Bu(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||it.comparator(t.key,i.key):(t,i)=>it.comparator(t.key,i.key),this.keyedMap=Fd(),this.sortedSet=new An(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.ga=new An(it.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ft(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}}class th{constructor(e,t,i,s,a,l,u,h,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,s,a){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new th(e,t,Bu.emptySet(t),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ej{constructor(){this.queries=iT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=bt(t),a=s.queries;s.queries=iT(),a.forEach((l,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new Xe(Ie.ABORTED,"Firestore shutting down"))}}function iT(){return new $c(n=>VC(n),Sg)}async function wj(n,e){const t=bt(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.ba()&&e.Da()&&(i=2):(a=new xj,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=Mv(l,`Initialization of query '${Lu(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Pv(t)}async function Tj(n,e){const t=bt(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Sj(n,e){const t=bt(n);let i=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const u of l.Sa)u.Fa(s)&&(i=!0);l.wa=s}}i&&Pv(t)}function Aj(n,e,t){const i=bt(n),s=i.queries.get(e);if(s)for(const a of s.Sa)a.onError(t);i.queries.delete(e)}function Pv(n){n.Ca.forEach(e=>{e.next()})}var Db,sT;(sT=Db||(Db={})).Ma="default",sT.Cache="cache";class Cj{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new th(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Db.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.key=e}}class b1{constructor(e){this.key=e}}class Rj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pt(),this.mutatedKeys=Pt(),this.eu=FC(e),this.tu=new Bu(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new nT,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const x=s.get(y),T=Ag(this.query,v)?v:null,C=!!x&&this.mutatedKeys.has(x.key),D=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let R=!1;x&&T?x.data.isEqual(T.data)?C!==D&&(i.track({type:3,doc:T}),R=!0):this.su(x,T)||(i.track({type:2,doc:T}),R=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(u=!0)):!x&&T?(i.track({type:0,doc:T}),R=!0):x&&!T&&(i.track({type:1,doc:x}),R=!0,(h||f)&&(u=!0)),R&&(T?(l=l.add(T),a=D?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Cs:u,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,v)=>function(T,C){const D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft(20277,{Rt:R})}};return D(T)-D(C)}(y.type,v.type)||this.eu(y.doc,v.doc)),this.ou(i),s=s??!1;const u=t&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,l.length!==0||f?{snapshot:new th(this.query,e.tu,a,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const t=[];return e.forEach(i=>{this.Xa.has(i)||t.push(new b1(i))}),this.Xa.forEach(i=>{e.has(i)||t.push(new _1(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=Pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return th.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jv="SyncEngine";class Ij{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class kj{constructor(e){this.key=e,this.hu=!1}}class Nj{constructor(e,t,i,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new $c(u=>VC(u),Sg),this.Iu=new Map,this.Eu=new Set,this.du=new An(it.comparator),this.Au=new Map,this.Ru=new Sv,this.Vu={},this.mu=new Map,this.fu=eh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Dj(n,e,t=!0){const i=S1(n);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await v1(i,e,t,!0),s}async function Oj(n,e){const t=S1(n);await v1(t,e,!0,!1)}async function v1(n,e,t,i){const s=await XP(n.localStore,_a(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let u;return i&&(u=await Mj(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&d1(n.remoteStore,s),u}async function Mj(n,e,t,i,s){n.pu=(v,x,T)=>async function(D,R,L,$){let q=R.view.ru(L);q.Cs&&(q=await Xw(D.localStore,R.query,!1).then(({documents:F})=>R.view.ru(F,q)));const Z=$&&$.targetChanges.get(R.targetId),Y=$&&$.targetMismatches.get(R.targetId)!=null,J=R.view.applyChanges(q,D.isPrimaryClient,Z,Y);return aT(D,R.targetId,J.au),J.snapshot}(n,v,x,T);const a=await Xw(n.localStore,e,!0),l=new Rj(e,a.Qs),u=l.ru(a.documents),h=Rf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,h);aT(n,t,f.au);const y=new Ij(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function Pj(n,e,t){const i=bt(n),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter(l=>!Sg(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await kb(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Iv(i.remoteStore,s.targetId),Ob(i,s.targetId)}).catch(uh)):(Ob(i,s.targetId),await kb(i.localStore,s.targetId,!0))}async function jj(n,e){const t=bt(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Iv(t.remoteStore,i.targetId))}async function Lj(n,e,t){const i=$j(n);try{const s=await function(l,u){const h=bt(l),f=vn.now(),y=u.reduce((T,C)=>T.add(C.key),Pt());let v,x;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=No(),D=Pt();return h.Ns.getEntries(T,y).next(R=>{C=R,C.forEach((L,$)=>{$.isValidDocument()||(D=D.add(L))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,C)).next(R=>{v=R;const L=[];for(const $ of u){const q=Y2($,v.get($.key).overlayedDocument);q!=null&&L.push(new Gl($.key,q,kC(q.value.mapValue),Fr.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,L,u)}).next(R=>{x=R;const L=R.applyToLocalDocumentSet(v,D);return h.documentOverlayCache.saveOverlays(T,R.batchId,L)})}).then(()=>({batchId:x.batchId,changes:zC(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,u,h){let f=l.Vu[l.currentUser.toKey()];f||(f=new An(Mt)),f=f.insert(u,h),l.Vu[l.currentUser.toKey()]=f}(i,s.batchId,t),await kf(i,s.changes),await Dg(i.remoteStore)}catch(s){const a=Mv(s,"Failed to persist write");t.reject(a)}}async function x1(n,e){const t=bt(n);try{const i=await GP(t.localStore,e);e.targetChanges.forEach((s,a)=>{const l=t.Au.get(a);l&&(Zt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Zt(l.hu,14607):s.removedDocuments.size>0&&(Zt(l.hu,42227),l.hu=!1))}),await kf(t,i,e)}catch(i){await uh(i)}}function rT(n,e,t){const i=bt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach((a,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const h=bt(l);h.onlineState=u;let f=!1;h.queries.forEach((y,v)=>{for(const x of v.Sa)x.va(u)&&(f=!0)}),f&&Pv(h)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Vj(n,e,t){const i=bt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),a=s&&s.key;if(a){let l=new An(it.comparator);l=l.insert(a,Hi.newNoDocument(a,yt.min()));const u=Pt().add(a),h=new Ig(yt.min(),new Map,new An(Mt),l,u);await x1(i,h),i.du=i.du.remove(a),i.Au.delete(e),Lv(i)}else await kb(i.localStore,e,!1).then(()=>Ob(i,e,t)).catch(uh)}async function Fj(n,e){const t=bt(n),i=e.batch.batchId;try{const s=await WP(t.localStore,e);w1(t,i,null),E1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await kf(t,s)}catch(s){await uh(s)}}async function Uj(n,e,t){const i=bt(n);try{const s=await function(l,u){const h=bt(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return h.mutationQueue.lookupMutationBatch(f,u).next(v=>(Zt(v!==null,37113),y=v.keys(),h.mutationQueue.removeMutationBatch(f,v))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>h.localDocuments.getDocuments(f,y))})}(i.localStore,e);w1(i,e,t),E1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await kf(i,s)}catch(s){await uh(s)}}function E1(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function w1(n,e,t){const i=bt(n);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Ob(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(i=>{n.Ru.containsKey(i)||T1(n,i)})}function T1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Iv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Lv(n))}function aT(n,e,t){for(const i of t)i instanceof _1?(n.Ru.addReference(i.key,e),zj(n,i)):i instanceof b1?(We(jv,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||T1(n,i.key)):ft(19791,{wu:i})}function zj(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(We(jv,"New document in limbo: "+t),n.Eu.add(i),Lv(n))}function Lv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new it(bn.fromString(e)),i=n.fu.next();n.Au.set(i,new kj(t)),n.du=n.du.insert(t,i),d1(n.remoteStore,new Al(_a(LC(t.path)),i,"TargetPurposeLimboResolution",xg.ce))}}async function kf(n,e,t){const i=bt(n),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{l.push(i.pu(h,e,t).then(f=>{if((f||t)&&i.isPrimaryClient){const y=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Cv.As(h.targetId,f);a.push(y)}}))}),await Promise.all(l),i.Pu.H_(s),await async function(h,f){const y=bt(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Te.forEach(f,x=>Te.forEach(x.Es,T=>y.persistence.referenceDelegate.addReference(v,x.targetId,T)).next(()=>Te.forEach(x.ds,T=>y.persistence.referenceDelegate.removeReference(v,x.targetId,T)))))}catch(v){if(!hh(v))throw v;We(Rv,"Failed to update sequence numbers: "+v)}for(const v of f){const x=v.targetId;if(!v.fromCache){const T=y.Ms.get(x),C=T.snapshotVersion,D=T.withLastLimboFreeSnapshotVersion(C);y.Ms=y.Ms.insert(x,D)}}}(i.localStore,a))}async function Bj(n,e){const t=bt(n);if(!t.currentUser.isEqual(e)){We(jv,"User change. New user:",e.toKey());const i=await l1(t.localStore,e);t.currentUser=e,function(a,l){a.mu.forEach(u=>{u.forEach(h=>{h.reject(new Xe(Ie.CANCELLED,l))})}),a.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await kf(t,i.Ls)}}function Hj(n,e){const t=bt(n),i=t.Au.get(e);if(i&&i.hu)return Pt().add(i.key);{let s=Pt();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function S1(n){const e=bt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=x1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vj.bind(null,e),e.Pu.H_=Sj.bind(null,e.eventManager),e.Pu.yu=Aj.bind(null,e.eventManager),e}function $j(n){const e=bt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uj.bind(null,e),e}class qp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qP(this.persistence,new BP,e.initialUser,this.serializer)}Cu(e){return new o1(Av.mi,this.serializer)}Du(e){return new ZP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qp.provider={build:()=>new qp};class qj extends qp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Zt(this.persistence.referenceDelegate instanceof Hp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new CP(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new o1(i=>Hp.mi(i,t),this.serializer)}}class Mb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bj.bind(null,this.syncEngine),await vj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ej}()}createDatastore(e){const t=kg(e.databaseInfo.databaseId),i=function(a){return new ij(a)}(e.databaseInfo);return function(a,l,u,h){return new oj(a,l,u,h)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,a,l,u){return new cj(i,s,a,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>rT(this.syncEngine,t,0),function(){return Jw.v()?new Jw:new JP}())}createSyncEngine(e,t){return function(s,a,l,u,h,f,y){const v=new Nj(s,a,l,u,h,f);return y&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const i=bt(t);We(Mc,"RemoteStore shutting down."),i.Ea.add(5),await If(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mb.provider={build:()=>new Mb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl="FirestoreClient";class Gj{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Bi.UNAUTHENTICATED,this.clientId=fv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async l=>{We(Bl,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(We(Bl,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Mv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function M_(n,e){n.asyncQueue.verifyOperationInProgress(),We(Bl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await l1(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function oT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Kj(n);We(Bl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>tT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>tT(e.remoteStore,s)),n._onlineComponents=e}async function Kj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){We(Bl,"Using user provided OfflineComponentProvider");try{await M_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ie.FAILED_PRECONDITION||s.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Xu("Error using user provided cache. Falling back to memory cache: "+t),await M_(n,new qp)}}else We(Bl,"Using default OfflineComponentProvider"),await M_(n,new qj(void 0));return n._offlineComponents}async function A1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(We(Bl,"Using user provided OnlineComponentProvider"),await oT(n,n._uninitializedComponentsProvider._online)):(We(Bl,"Using default OnlineComponentProvider"),await oT(n,new Mb))),n._onlineComponents}function Yj(n){return A1(n).then(e=>e.syncEngine)}async function Xj(n){const e=await A1(n),t=e.eventManager;return t.onListen=Dj.bind(null,e.syncEngine),t.onUnlisten=Pj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Oj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jj.bind(null,e.syncEngine),t}function Qj(n,e,t={}){const i=new Dl;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,u,h,f){const y=new Wj({next:x=>{y.Nu(),l.enqueueAndForget(()=>Tj(a,v)),x.fromCache&&h.source==="server"?f.reject(new Xe(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),v=new Cj(u,y,{includeMetadataChanges:!0,qa:!0});return wj(a,v)}(await Xj(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="firestore.googleapis.com",cT=!0;class uT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R1,this.ssl=cT}else this.host=e.host,this.ssl=e.ssl??cT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SP)throw new Xe(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C1(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Xe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Xe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Xe(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Og{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new ZM;switch(i.type){case"firstParty":return new n2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Xe(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=lT.get(t);i&&(We("ComponentProvider","Removing Datastore"),lT.delete(t),i.terminate())}(this),Promise.resolve()}}function Zj(n,e,t,i={}){n=Oc(n,Og);const s=zc(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(cv(`https://${u}`),uv("Firestore",!0)),a.host!==R1&&a.host!==u&&Xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:u,ssl:s,emulatorOptions:i};if(!jl(h,l)&&(n._setSettings(h),i.mockUserToken)){let f,y;if(typeof i.mockUserToken=="string")f=i.mockUserToken,y=Bi.MOCK_USER;else{f=tC(i.mockUserToken,n._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Xe(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Bi(v)}n._authCredentials=new JM(new _C(f,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mg(this.firestore,e,this._query)}}class bi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bi(this.firestore,e,this._key)}toJSON(){return{type:bi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Af(t,bi._jsonSchema))return new bi(e,i||null,new it(bn.fromString(t.referencePath)))}}bi._jsonSchemaVersion="firestore/documentReference/1.0",bi._jsonSchema={type:Zn("string",bi._jsonSchemaVersion),referencePath:Zn("string")};class Ol extends Mg{constructor(e,t,i){super(e,t,LC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bi(this.firestore,null,new it(e))}withConverter(e){return new Ol(this.firestore,e,this._path)}}function un(n,e,...t){if(n=Hn(n),bC("collection","path",e),n instanceof Og){const i=bn.fromString(e,...t);return Tw(i),new Ol(n,null,i)}{if(!(n instanceof bi||n instanceof Ol))throw new Xe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bn.fromString(e,...t));return Tw(i),new Ol(n.firestore,null,i)}}function Ca(n,e,...t){if(n=Hn(n),arguments.length===1&&(e=fv.newId()),bC("doc","path",e),n instanceof Og){const i=bn.fromString(e,...t);return ww(i),new bi(n,null,new it(i))}{if(!(n instanceof bi||n instanceof Ol))throw new Xe(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bn.fromString(e,...t));return ww(i),new bi(n.firestore,n instanceof Ol?n.converter:null,new it(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="AsyncQueue";class dT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new u1(this,"async_queue_retry"),this._c=()=>{const i=O_();i&&We(hT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=O_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=O_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Dl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hh(e))throw e;We(hT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ko("INTERNAL UNHANDLED ERROR: ",fT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Ov.createAndSchedule(this,e,t,i,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&ft(47125,{Pc:fT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Nf extends Og{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new dT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dT(e),this._firestoreClient=void 0,await e}}}function Jj(n,e){const t=typeof n=="object"?n:vg(),i=typeof n=="string"?n:jp,s=ql(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=ZA("firestore");a&&Zj(s,...a)}return s}function I1(n){if(n._terminated)throw new Xe(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eL(n),n._firestoreClient}function eL(n){const e=n._freezeSettings(),t=function(s,a,l,u){return new b2(s,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,C1(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Gj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dr(Di.fromBase64String(e))}catch(t){throw new Xe(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dr(Di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Af(e,dr._jsonSchema))return dr.fromBase64String(e.bytes)}}dr._jsonSchemaVersion="firestore/bytes/1.0",dr._jsonSchema={type:Zn("string",dr._jsonSchemaVersion),bytes:Zn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xe(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xe(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xe(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:va._jsonSchemaVersion}}static fromJSON(e){if(Af(e,va._jsonSchema))return new va(e.latitude,e.longitude)}}va._jsonSchemaVersion="firestore/geoPoint/1.0",va._jsonSchema={type:Zn("string",va._jsonSchemaVersion),latitude:Zn("number"),longitude:Zn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Af(e,xa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new xa(e.vectorValues);throw new Xe(Ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xa._jsonSchemaVersion="firestore/vectorValue/1.0",xa._jsonSchema={type:Zn("string",xa._jsonSchemaVersion),vectorValues:Zn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^__.*__$/;class nL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Gl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cf(e,this.data,t,this.fieldTransforms)}}class k1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Gl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function N1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft(40011,{Ac:n})}}class Fv{constructor(e,t,i,s,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(N1(this.Ac)&&tL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||kg(e)}Cc(e,t,i,s=!1){return new Fv({Ac:e,methodName:t,Dc:i,path:Ni.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D1(n){const e=n._freezeSettings(),t=kg(n._databaseId);return new iL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sL(n,e,t,i,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,s);Uv("Data must be an object, but it was:",l,i);const u=O1(i,l);let h,f;if(a.merge)h=new Us(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const v of a.mergeFields){const x=Pb(e,v,t);if(!l.contains(x))throw new Xe(Ie.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);P1(y,x)||y.push(x)}h=new Us(y),f=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,f=l.fieldTransforms;return new nL(new ys(u),h,f)}class jg extends Vv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jg}}function rL(n,e,t,i){const s=n.Cc(1,e,t);Uv("Data must be an object, but it was:",s,i);const a=[],l=ys.empty();Wl(i,(h,f)=>{const y=zv(e,h,t);f=Hn(f);const v=s.yc(y);if(f instanceof jg)a.push(y);else{const x=Lg(f,v);x!=null&&(a.push(y),l.set(y,x))}});const u=new Us(a);return new k1(l,u,s.fieldTransforms)}function aL(n,e,t,i,s,a){const l=n.Cc(1,e,t),u=[Pb(e,i,t)],h=[s];if(a.length%2!=0)throw new Xe(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)u.push(Pb(e,a[x])),h.push(a[x+1]);const f=[],y=ys.empty();for(let x=u.length-1;x>=0;--x)if(!P1(f,u[x])){const T=u[x];let C=h[x];C=Hn(C);const D=l.yc(T);if(C instanceof jg)f.push(T);else{const R=Lg(C,D);R!=null&&(f.push(T),y.set(T,R))}}const v=new Us(f);return new k1(y,v,l.fieldTransforms)}function Lg(n,e){if(M1(n=Hn(n)))return Uv("Unsupported field value:",e,n),O1(n,e);if(n instanceof Vv)return function(i,s){if(!N1(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const a=[];let l=0;for(const u of i){let h=Lg(u,s.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}}(n,e)}return function(i,s){if((i=Hn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return H2(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=vn.fromDate(i);return{timestampValue:Bp(s.serializer,a)}}if(i instanceof vn){const a=new vn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Bp(s.serializer,a)}}if(i instanceof va)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof dr)return{bytesValue:JC(s.serializer,i._byteString)};if(i instanceof bi){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Tv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof xa)return function(l,u){return{mapValue:{fields:{[RC]:{stringValue:IC},[Lp]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return vv(u.serializer,f)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${mv(i)}`)}(n,e)}function O1(n,e){const t={};return EC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(n,(i,s)=>{const a=Lg(s,e.mc(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function M1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof va||n instanceof dr||n instanceof bi||n instanceof Vv||n instanceof xa)}function Uv(n,e,t){if(!M1(t)||!vC(t)){const i=mv(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Pb(n,e,t){if((e=Hn(e))instanceof Pg)return e._internalPath;if(typeof e=="string")return zv(n,e);throw Wp("Field path arguments must be of type string or ",n,!1,void 0,t)}const oL=new RegExp("[~\\*/\\[\\]]");function zv(n,e,t){if(e.search(oL)>=0)throw Wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pg(...e.split("."))._internalPath}catch{throw Wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wp(n,e,t,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${i}`),l&&(h+=` in document ${s}`),h+=")"),new Xe(Ie.INVALID_ARGUMENT,u+n+h)}function P1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(L1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lL extends j1{data(){return super.data()}}function L1(n,e){return typeof e=="string"?zv(n,e):e instanceof Pg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Xe(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uL{convertValue(e,t="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ft(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Wl(e,(s,a)=>{i[s]=this.convertValue(a,t)}),i}convertVectorValue(e){const t=e.fields?.[Lp].arrayValue?.values?.map(i=>Un(i.doubleValue));return new xa(t)}convertGeoPoint(e){return new va(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(af(e));default:return null}}convertTimestamp(e){const t=Vl(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=bn.fromString(e);Zt(r1(i),9688,{name:e});const s=new of(i.get(1),i.get(3)),a=new it(i.popFirst(5));return s.isEqual(t)||ko(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Qm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hu extends j1{constructor(e,t,i,s,a,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(L1("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(Ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hu._jsonSchema={type:Zn("string",Hu._jsonSchemaVersion),bundleSource:Zn("string","DocumentSnapshot"),bundleName:Zn("string"),bundle:Zn("string")};class Tp extends Hu{data(e={}){return super.data(e)}}class $u{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Qm(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Tp(this._firestore,this._userDataWriter,i.key,i,new Qm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xe(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const h=new Tp(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Qm(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new Tp(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Qm(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,y=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:dL(u.type),doc:h,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(Ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$u._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft(61501,{type:n})}}$u._jsonSchemaVersion="firestore/querySnapshot/1.0",$u._jsonSchema={type:Zn("string",$u._jsonSchemaVersion),bundleSource:Zn("string","QuerySnapshot"),bundleName:Zn("string"),bundle:Zn("string")};class fL extends uL{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bi(this.firestore,null,t)}}function zn(n){n=Oc(n,Mg);const e=Oc(n.firestore,Nf),t=I1(e),i=new fL(e);return cL(n._query),Qj(t,n._query).then(s=>new $u(e,i,n,s))}function Df(n,e,t,...i){n=Oc(n,bi);const s=Oc(n.firestore,Nf),a=D1(s);let l;return l=typeof(e=Hn(e))=="string"||e instanceof Pg?aL(a,"updateDoc",n._key,e,t,i):rL(a,"updateDoc",n._key,e),Bv(s,[l.toMutation(n._key,Fr.exists(!0))])}function Vg(n){return Bv(Oc(n.firestore,Nf),[new xv(n._key,Fr.none())])}function Pc(n,e){const t=Oc(n.firestore,Nf),i=Ca(n),s=hL(n.converter,e);return Bv(t,[sL(D1(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Fr.exists(!1))]).then(()=>i)}function Bv(n,e){return function(i,s){const a=new Dl;return i.asyncQueue.enqueueAndForget(async()=>Lj(await Yj(i),s,a)),a.promise}(I1(n),e)}(function(e,t=!0){(function(s){ch=s})(Hc),zr(new pr("firestore",(i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),u=new Nf(new e2(i.getProvider("auth-internal")),new i2(l,i.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Xe(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new of(f.options.projectId,y)}(l,s),l);return a={useFetchStreams:t,...a},u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),bs(bw,vw,e),bs(bw,vw,"esm2020")})();var mL="firebase",pL="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bs(mL,pL,"app");const V1="@firebase/installations",Hv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=1e4,U1=`w:${Hv}`,z1="FIS_v2",gL="https://firebaseinstallations.googleapis.com/v1",yL=3600*1e3,_L="installations",bL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},jc=new Bc(_L,bL,vL);function B1(n){return n instanceof yr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1({projectId:n}){return`${gL}/projects/${n}/installations`}function $1(n){return{token:n.token,requestStatus:2,expiresIn:EL(n.expiresIn),creationTime:Date.now()}}async function q1(n,e){const i=(await e.json()).error;return jc.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function W1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function xL(n,{refreshToken:e}){const t=W1(n);return t.append("Authorization",wL(e)),t}async function G1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function EL(n){return Number(n.replace("s","000"))}function wL(n){return`${z1} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=H1(n),s=W1(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={fid:t,authVersion:z1,appId:n.appId,sdkVersion:U1},u={method:"POST",headers:s,body:JSON.stringify(l)},h=await G1(()=>fetch(i,u));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:$1(f.authToken)}}else throw await q1("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=/^[cdef][\w-]{21}$/,jb="";function CL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=RL(n);return AL.test(t)?t:jb}catch{return jb}}function RL(n){return SL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Map;function X1(n,e){const t=Fg(n);Q1(t,e),IL(t,e)}function Q1(n,e){const t=Y1.get(n);if(t)for(const i of t)i(e)}function IL(n,e){const t=kL();t&&t.postMessage({key:n,fid:e}),NL()}let Ic=null;function kL(){return!Ic&&"BroadcastChannel"in self&&(Ic=new BroadcastChannel("[Firebase] FID Change"),Ic.onmessage=n=>{Q1(n.data.key,n.data.fid)}),Ic}function NL(){Y1.size===0&&Ic&&(Ic.close(),Ic=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL="firebase-installations-database",OL=1,Lc="firebase-installations-store";let P_=null;function $v(){return P_||(P_=oC(DL,OL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Lc)}}})),P_}async function Gp(n,e){const t=Fg(n),s=(await $v()).transaction(Lc,"readwrite"),a=s.objectStore(Lc),l=await a.get(t);return await a.put(e,t),await s.done,(!l||l.fid!==e.fid)&&X1(n,e.fid),e}async function Z1(n){const e=Fg(n),i=(await $v()).transaction(Lc,"readwrite");await i.objectStore(Lc).delete(e),await i.done}async function Ug(n,e){const t=Fg(n),s=(await $v()).transaction(Lc,"readwrite"),a=s.objectStore(Lc),l=await a.get(t),u=e(l);return u===void 0?await a.delete(t):await a.put(u,t),await s.done,u&&(!l||l.fid!==u.fid)&&X1(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(n){let e;const t=await Ug(n.appConfig,i=>{const s=ML(i),a=PL(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===jb?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function ML(n){const e=n||{fid:CL(),registrationStatus:0};return J1(e)}function PL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(jc.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=jL(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:LL(n)}:{installationEntry:e}}async function jL(n,e){try{const t=await TL(n,e);return Gp(n.appConfig,t)}catch(t){throw B1(t)&&t.customData.serverCode===409?await Z1(n.appConfig):await Gp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function LL(n){let e=await mT(n.appConfig);for(;e.registrationStatus===1;)await K1(100),e=await mT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await qv(n);return i||t}return e}function mT(n){return Ug(n,e=>{if(!e)throw jc.create("installation-not-found");return J1(e)})}function J1(n){return VL(n)?{fid:n.fid,registrationStatus:0}:n}function VL(n){return n.registrationStatus===1&&n.registrationTime+F1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL({appConfig:n,heartbeatServiceProvider:e},t){const i=UL(n,t),s=xL(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={installation:{sdkVersion:U1,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},h=await G1(()=>fetch(i,u));if(h.ok){const f=await h.json();return $1(f)}else throw await q1("Generate Auth Token",h)}function UL(n,{fid:e}){return`${H1(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(n,e=!1){let t;const i=await Ug(n.appConfig,a=>{if(!eR(a))throw jc.create("not-registered");const l=a.authToken;if(!e&&HL(l))return a;if(l.requestStatus===1)return t=zL(n,e),a;{if(!navigator.onLine)throw jc.create("app-offline");const u=qL(a);return t=BL(n,u),u}});return t?await t:i.authToken}async function zL(n,e){let t=await pT(n.appConfig);for(;t.authToken.requestStatus===1;)await K1(100),t=await pT(n.appConfig);const i=t.authToken;return i.requestStatus===0?Wv(n,e):i}function pT(n){return Ug(n,e=>{if(!eR(e))throw jc.create("not-registered");const t=e.authToken;return WL(t)?{...e,authToken:{requestStatus:0}}:e})}async function BL(n,e){try{const t=await FL(n,e),i={...e,authToken:t};return await Gp(n.appConfig,i),t}catch(t){if(B1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Z1(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Gp(n.appConfig,i)}throw t}}function eR(n){return n!==void 0&&n.registrationStatus===2}function HL(n){return n.requestStatus===2&&!$L(n)}function $L(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+yL}function qL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function WL(n){return n.requestStatus===1&&n.requestTime+F1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(n){const e=n,{installationEntry:t,registrationPromise:i}=await qv(e);return i?i.catch(console.error):Wv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(n,e=!1){const t=n;return await YL(t),(await Wv(t,e)).token}async function YL(n){const{registrationPromise:e}=await qv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(n){if(!n||!n.options)throw j_("App Configuration");if(!n.name)throw j_("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw j_(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function j_(n){return jc.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="installations",QL="installations-internal",ZL=n=>{const e=n.getProvider("app").getImmediate(),t=XL(e),i=ql(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},JL=n=>{const e=n.getProvider("app").getImmediate(),t=ql(e,tR).getImmediate();return{getId:()=>GL(t),getToken:s=>KL(t,s)}};function eV(){zr(new pr(tR,ZL,"PUBLIC")),zr(new pr(QL,JL,"PRIVATE"))}eV();bs(V1,Hv);bs(V1,Hv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="analytics",tV="firebase_id",nV="origin",iV=60*1e3,sV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new bg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zs=new Bc("analytics","Analytics",rV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){if(!n.startsWith(Gv)){const e=zs.create("invalid-gtag-resource",{gtagURL:n});return vs.warn(e.message),""}return n}function nR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function oV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function lV(n,e){const t=oV("firebase-js-sdk-policy",{createScriptURL:aV}),i=document.createElement("script"),s=`${Gv}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function cV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function uV(n,e,t,i,s,a){const l=i[s];try{if(l)await e[l];else{const h=(await nR(t)).find(f=>f.measurementId===s);h&&await e[h.appId]}}catch(u){vs.error(u)}n("config",s,a)}async function hV(n,e,t,i,s){try{let a=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await nR(t);for(const h of l){const f=u.find(v=>v.measurementId===h),y=f&&e[f.appId];if(y)a.push(y);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,s||{})}catch(a){vs.error(a)}}function dV(n,e,t,i){async function s(a,...l){try{if(a==="event"){const[u,h]=l;await hV(n,e,t,u,h)}else if(a==="config"){const[u,h]=l;await uV(n,e,t,i,u,h)}else if(a==="consent"){const[u,h]=l;n("consent",u,h)}else if(a==="get"){const[u,h,f]=l;n("get",u,h,f)}else if(a==="set"){const[u]=l;n("set",u)}else n(a,...l)}catch(u){vs.error(u)}}return s}function fV(n,e,t,i,s){let a=function(...l){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=dV(a,n,e,t),{gtagCore:a,wrappedGtag:window[s]}}function mV(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Gv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=30,gV=1e3;class yV{constructor(e={},t=gV){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const iR=new yV;function _V(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function bV(n){const{appId:e,apiKey:t}=n,i={method:"GET",headers:_V(t)},s=sV.replace("{app-id}",e),a=await fetch(s,i);if(a.status!==200&&a.status!==304){let l="";try{const u=await a.json();u.error?.message&&(l=u.error.message)}catch{}throw zs.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function vV(n,e=iR,t){const{appId:i,apiKey:s,measurementId:a}=n.options;if(!i)throw zs.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:i};throw zs.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new wV;return setTimeout(async()=>{u.abort()},iV),sR({appId:i,apiKey:s,measurementId:a},l,u,e)}async function sR(n,{throttleEndTimeMillis:e,backoffCount:t},i,s=iR){const{appId:a,measurementId:l}=n;try{await xV(i,e)}catch(u){if(l)return vs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:l};throw u}try{const u=await bV(n);return s.deleteThrottleMetadata(a),u}catch(u){const h=u;if(!EV(h)){if(s.deleteThrottleMetadata(a),l)return vs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:l};throw u}const f=Number(h?.customData?.httpStatus)===503?cw(t,s.intervalMillis,pV):cw(t,s.intervalMillis),y={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return s.setThrottleMetadata(a,y),vs.debug(`Calling attemptFetch again in ${f} millis`),sR(n,y,i,s)}}function xV(n,e){return new Promise((t,i)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(a),i(zs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function EV(n){if(!(n instanceof yr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class wV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function TV(n,e,t,i,s){if(s&&s.global){n("event",t,i);return}else{const a=await e,l={...i,send_to:a};n("event",t,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SV(){if(iC())try{await sC()}catch(n){return vs.warn(zs.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return vs.warn(zs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function AV(n,e,t,i,s,a,l){const u=vV(n);u.then(x=>{t[x.measurementId]=x.appId,n.options.measurementId&&x.measurementId!==n.options.measurementId&&vs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>vs.error(x)),e.push(u);const h=SV().then(x=>{if(x)return i.getId()}),[f,y]=await Promise.all([u,h]);mV(a)||lV(a,f.measurementId),s("js",new Date);const v=l?.config??{};return v[nV]="firebase",v.update=!0,y!=null&&(v[tV]=y),s("config",f.measurementId,v),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.app=e}_delete(){return delete Xd[this.app.options.appId],Promise.resolve()}}let Xd={},gT=[];const yT={};let L_="dataLayer",RV="gtag",_T,rR,bT=!1;function IV(){const n=[];if(nC()&&n.push("This is a browser extension environment."),OO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),t=zs.create("invalid-analytics-context",{errorInfo:e});vs.warn(t.message)}}function kV(n,e,t){IV();const i=n.options.appId;if(!i)throw zs.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)vs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zs.create("no-api-key");if(Xd[i]!=null)throw zs.create("already-exists",{id:i});if(!bT){cV(L_);const{wrappedGtag:a,gtagCore:l}=fV(Xd,gT,yT,L_,RV);rR=a,_T=l,bT=!0}return Xd[i]=AV(n,gT,yT,e,_T,L_,t),new CV(n)}function NV(n=vg()){n=Hn(n);const e=ql(n,Kp);return e.isInitialized()?e.getImmediate():DV(n)}function DV(n,e={}){const t=ql(n,Kp);if(t.isInitialized()){const s=t.getImmediate();if(jl(e,t.getOptions()))return s;throw zs.create("already-initialized")}return t.initialize({options:e})}function OV(n,e,t,i){n=Hn(n),TV(rR,Xd[n.app.options.appId],e,t,i).catch(s=>vs.error(s))}const vT="@firebase/analytics",xT="0.10.18";function MV(){zr(new pr(Kp,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return kV(i,s,t)},"PUBLIC")),zr(new pr("analytics-internal",n,"PRIVATE")),bs(vT,xT),bs(vT,xT,"esm2020");function n(e){try{const t=e.getProvider(Kp).getImmediate();return{logEvent:(i,s,a)=>OV(t,i,s,a)}}catch(t){throw zs.create("interop-component-reg-failed",{reason:t})}}}MV();function aR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PV=aR,oR=new Bc("auth","Firebase",aR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp=new bg("@firebase/auth");function jV(n,...e){Yp.logLevel<=Ot.WARN&&Yp.warn(`Auth (${Hc}): ${n}`,...e)}function Sp(n,...e){Yp.logLevel<=Ot.ERROR&&Yp.error(`Auth (${Hc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(n,...e){throw Kv(n,...e)}function Ea(n,...e){return Kv(n,...e)}function lR(n,e,t){const i={...PV(),[e]:t};return new Bc("auth","Firebase",i).create(e,{appName:n.name})}function Ml(n){return lR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return oR.create(n,...e)}function dt(n,e,...t){if(!n)throw Kv(e,...t)}function Eo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sp(e),new Error(e)}function Do(n,e){n||Eo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){return typeof self<"u"&&self.location?.href||""}function LV(){return ET()==="http:"||ET()==="https:"}function ET(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LV()||nC()||"connection"in navigator)?navigator.onLine:!0}function FV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.shortDelay=e,this.longDelay=t,Do(t>e,"Short delay should be less than long delay!"),this.isMobile=CO()||kO()}get(){return VV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(n,e){Do(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BV=new Of(3e4,6e4);function Wc(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Kl(n,e,t,i,s={}){return uR(n,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const u=Sf({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...a};return IO()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&zc(n.emulatorConfig.host)&&(f.credentials="include"),cR.fetch()(await hR(n,n.config.apiHost,t,u),f)})}async function uR(n,e,t){n._canInitEmulator=!1;const i={...UV,...e};try{const s=new $V(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Zm(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zm(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Zm(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Zm(n,"user-disabled",l);const y=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw lR(n,y,f);Br(n,y)}}catch(s){if(s instanceof yr)throw s;Br(n,"network-request-failed",{message:String(s)})}}async function zg(n,e,t,i,s={}){const a=await Kl(n,e,t,i,s);return"mfaPendingCredential"in a&&Br(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function hR(n,e,t,i){const s=`${e}${t}?${i}`,a=n,l=a.config.emulator?Yv(n.config,s):`${n.config.apiScheme}://${s}`;return zV.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function HV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $V{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ea(this.auth,"network-request-failed")),BV.get())})}}function Zm(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Ea(n,e,i);return s.customData._tokenResponse=t,s}function wT(n){return n!==void 0&&n.enterprise!==void 0}class qV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WV(n,e){return Kl(n,"GET","/v2/recaptchaConfig",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(n,e){return Kl(n,"POST","/v1/accounts:delete",e)}async function Xp(n,e){return Kl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KV(n,e=!1){const t=Hn(n),i=await t.getIdToken(e),s=Xv(i);dt(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:i,authTime:Qd(V_(s.auth_time)),issuedAtTime:Qd(V_(s.iat)),expirationTime:Qd(V_(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function V_(n){return Number(n)*1e3}function Xv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Sp("JWT malformed, contained fewer than 3 sections"),null;try{const s=XA(t);return s?JSON.parse(s):(Sp("Failed to decode base64 JWT payload"),null)}catch(s){return Sp("Caught error parsing JWT payload as JSON",s?.toString()),null}}function TT(n){const e=Xv(n);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hf(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof yr&&YV(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function YV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qd(this.lastLoginAt),this.creationTime=Qd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qp(n){const e=n.auth,t=await n.getIdToken(),i=await hf(n,Xp(e,{idToken:t}));dt(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=s.providerUserInfo?.length?dR(s.providerUserInfo):[],l=ZV(n.providerData,a),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!l?.length,f=u?h:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Vb(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,y)}async function QV(n){const e=Hn(n);await Qp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZV(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function dR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(n,e){const t=await uR(n,{},async()=>{const i=Sf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await hR(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return n.emulatorConfig&&zc(n.emulatorConfig.host)&&(h.credentials="include"),cR.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function e5(n,e){return Kl(n,"POST","/v2/accounts:revokeToken",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const t=TT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await JV(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,l=new qu;return i&&(dt(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(dt(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(dt(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qu,this.toJSON())}_performRefresh(){return Eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(n,e){dt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Lr{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new XV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await hf(this,this.stsTokenManager.getToken(this.auth,e));return dt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KV(this,e)}reload(){return QV(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Qp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(Ml(this.auth));const e=await this.getIdToken();return await hf(this,GV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:x,isAnonymous:T,providerData:C,stsTokenManager:D}=t;dt(v&&D,e,"internal-error");const R=qu.fromJSON(this.name,D);dt(typeof v=="string",e,"internal-error"),_l(i,e.name),_l(s,e.name),dt(typeof x=="boolean",e,"internal-error"),dt(typeof T=="boolean",e,"internal-error"),_l(a,e.name),_l(l,e.name),_l(u,e.name),_l(h,e.name),_l(f,e.name),_l(y,e.name);const L=new Lr({uid:v,auth:e,email:s,emailVerified:x,displayName:i,isAnonymous:T,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:R,createdAt:f,lastLoginAt:y});return C&&Array.isArray(C)&&(L.providerData=C.map($=>({...$}))),h&&(L._redirectEventId=h),L}static async _fromIdTokenResponse(e,t,i=!1){const s=new qu;s.updateFromServerResponse(t);const a=new Lr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Qp(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];dt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?dR(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new qu;u.updateFromIdToken(i);const h=new Lr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new Map;function wo(n){Do(n instanceof Function,"Expected a class definition");let e=ST.get(n);return e?(Do(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ST.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fR.type="NONE";const AT=fR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n,e,t){return`firebase:${n}:${e}:${t}`}class Wu{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Ap(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ap("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xp(this.auth,{idToken:e}).catch(()=>{});return t?Lr._fromGetAccountInfoResponse(this.auth,t,e):null}return Lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wu(wo(AT),e,i);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||wo(AT);const l=Ap(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const y=await f._get(l);if(y){let v;if(typeof y=="string"){const x=await Xp(e,{idToken:y}).catch(()=>{});if(!x)break;v=await Lr._fromGetAccountInfoResponse(e,x,y)}else v=Lr._fromJSON(e,y);f!==a&&(u=v),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Wu(a,e,i):(a=h[0],u&&await a._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new Wu(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bR(e))return"Blackberry";if(vR(e))return"Webos";if(pR(e))return"Safari";if((e.includes("chrome/")||gR(e))&&!e.includes("edge/"))return"Chrome";if(_R(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function mR(n=Wi()){return/firefox\//i.test(n)}function pR(n=Wi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gR(n=Wi()){return/crios\//i.test(n)}function yR(n=Wi()){return/iemobile/i.test(n)}function _R(n=Wi()){return/android/i.test(n)}function bR(n=Wi()){return/blackberry/i.test(n)}function vR(n=Wi()){return/webos/i.test(n)}function Qv(n=Wi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function t5(n=Wi()){return Qv(n)&&!!window.navigator?.standalone}function n5(){return NO()&&document.documentMode===10}function xR(n=Wi()){return Qv(n)||_R(n)||vR(n)||bR(n)||/windows phone/i.test(n)||yR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(n,e=[]){let t;switch(n){case"Browser":t=CT(Wi());break;case"Worker":t=`${CT(Wi())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,u)=>{try{const h=e(a);l(h)}catch(h){u(h)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(n,e={}){return Kl(n,"GET","/v2/passwordPolicy",Wc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=6;class a5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??r5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RT(this),this.idTokenSubscription=new RT(this),this.beforeStateQueue=new i5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xp(this,{idToken:e}),i=await Lr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(Ml(this));const t=e?Hn(e):null;return t&&dt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(Ml(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(Ml(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await s5(this),t=new a5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await e5(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wo(e)||this._popupRedirectResolver;dt(t,this,"argument-error"),this.redirectPersistenceManager=await Wu.create(this,[wo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ER(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&jV(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fh(n){return Hn(n)}class RT{constructor(e){this.auth=e,this.observer=null,this.addObserver=VO(t=>this.observer=t)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l5(n){Bg=n}function wR(n){return Bg.loadJS(n)}function c5(){return Bg.recaptchaEnterpriseScript}function u5(){return Bg.gapiScript}function h5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class d5{constructor(){this.enterprise=new f5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class f5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const m5="recaptcha-enterprise",TR="NO_RECAPTCHA";class p5{constructor(e){this.type=m5,this.auth=fh(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{WV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new qV(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,l,u){const h=window.grecaptcha;wT(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(TR)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new d5().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(u=>{if(!t&&wT(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=c5();h.length!==0&&(h+=u),wR(h).then(()=>{s(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function IT(n,e,t,i=!1,s=!1){const a=new p5(n);let l;if(s)l=TR;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function kT(n,e,t,i,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await IT(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await IT(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(n,e){const t=ql(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(jl(a,e??{}))return s;Br(s,"already-initialized")}return t.initialize({options:e})}function y5(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(wo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function _5(n,e,t){const i=fh(n);dt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=SR(e),{host:l,port:u}=b5(e),h=u===null?"":`:${u}`,f={url:`${a}//${l}${h}/`},y=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){dt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),dt(jl(f,i.config.emulator)&&jl(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,zc(l)?(cv(`${a}//${l}${h}`),uv("Auth",!0)):v5()}function SR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b5(n){const e=SR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:NT(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:NT(l)}}}function NT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function v5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Eo("not implemented")}_getIdTokenResponse(e){return Eo("not implemented")}_linkToIdToken(e,t){return Eo("not implemented")}_getReauthenticationResolver(e){return Eo("not implemented")}}async function x5(n,e){return Kl(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E5(n,e){return zg(n,"POST","/v1/accounts:signInWithPassword",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(n,e){return zg(n,"POST","/v1/accounts:signInWithEmailLink",Wc(n,e))}async function T5(n,e){return zg(n,"POST","/v1/accounts:signInWithEmailLink",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends Zv{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new df(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new df(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kT(e,t,"signInWithPassword",E5);case"emailLink":return w5(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kT(e,i,"signUpPassword",x5);case"emailLink":return T5(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(n,e){return zg(n,"POST","/v1/accounts:signInWithIdp",Wc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="http://localhost";class Vc extends Zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=t;if(!i||!s)return null;const l=new Vc(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Gu(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Gu(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gu(e,t)}buildRequest(){const e={requestUri:S5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function C5(n){const e=jd(Ld(n)).link,t=e?jd(Ld(e)).deep_link_id:null,i=jd(Ld(n)).deep_link_id;return(i?jd(Ld(i)).link:null)||i||t||e||n}class Jv{constructor(e){const t=jd(Ld(e)),i=t.apiKey??null,s=t.oobCode??null,a=A5(t.mode??null);dt(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=C5(e);try{return new Jv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this.providerId=mh.PROVIDER_ID}static credential(e,t){return df._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Jv.parseLink(t);return dt(i,"argument-error"),df._fromEmailAndCode(e,i.code,i.tenantId)}}mh.PROVIDER_ID="password";mh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends AR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Mf{constructor(){super("facebook.com")}static credential(e){return Vc._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return El.credential(e.oauthAccessToken)}catch{return null}}}El.FACEBOOK_SIGN_IN_METHOD="facebook.com";El.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Mf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vc._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return wl.credential(t,i)}catch{return null}}}wl.GOOGLE_SIGN_IN_METHOD="google.com";wl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Mf{constructor(){super("github.com")}static credential(e){return Vc._fromParams({providerId:Tl.PROVIDER_ID,signInMethod:Tl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tl.credentialFromTaggedObject(e)}static credentialFromError(e){return Tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tl.credential(e.oauthAccessToken)}catch{return null}}}Tl.GITHUB_SIGN_IN_METHOD="github.com";Tl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Mf{constructor(){super("twitter.com")}static credential(e,t){return Vc._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Sl.credential(t,i)}catch{return null}}}Sl.TWITTER_SIGN_IN_METHOD="twitter.com";Sl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await Lr._fromIdTokenResponse(e,i,s),l=DT(i);return new nh({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=DT(i);return new nh({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function DT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends yr{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Zp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Zp(e,t,i,s)}}function CR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Zp._fromErrorAndOperation(n,a,e,i):a})}async function R5(n,e,t=!1){const i=await hf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nh._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(n,e,t=!1){const{auth:i}=n;if(hr(i.app))return Promise.reject(Ml(i));const s="reauthenticate";try{const a=await hf(n,CR(i,s,e,n),t);dt(a.idToken,i,"internal-error");const l=Xv(a.idToken);dt(l,i,"internal-error");const{sub:u}=l;return dt(n.uid===u,i,"user-mismatch"),nh._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Br(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(n,e,t=!1){if(hr(n.app))return Promise.reject(Ml(n));const i="signIn",s=await CR(n,i,e),a=await nh._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}async function k5(n,e){return RR(fh(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(n){const e=fh(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function D5(n,e,t){return hr(n.app)?Promise.reject(Ml(n)):k5(Hn(n),mh.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&N5(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(n,e){return Hn(n).setPersistence(e)}function M5(n,e,t,i){return Hn(n).onIdTokenChanged(e,t,i)}function P5(n,e,t){return Hn(n).beforeAuthStateChanged(e,t)}function j5(n,e,t,i){return Hn(n).onAuthStateChanged(e,t,i)}function L5(n){return Hn(n).signOut()}const Jp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jp,"1"),this.storage.removeItem(Jp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=1e3,F5=10;class kR extends IR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);n5()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,F5):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},V5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kR.type="LOCAL";const NR=kR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR extends IR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DR.type="SESSION";const OR=DR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Hg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(l).map(async f=>f(t.origin,a)),h=await U5(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,h)=>{const f=e0("",20);s.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(y),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(){return window}function B5(n){wa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){return typeof wa().WorkerGlobalScope<"u"&&typeof wa().importScripts=="function"}async function H5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $5(){return navigator?.serviceWorker?.controller||null}function q5(){return MR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="firebaseLocalStorageDb",W5=1,eg="firebaseLocalStorage",jR="fbase_key";class Pf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $g(n,e){return n.transaction([eg],e?"readwrite":"readonly").objectStore(eg)}function G5(){const n=indexedDB.deleteDatabase(PR);return new Pf(n).toPromise()}function Fb(){const n=indexedDB.open(PR,W5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(eg,{keyPath:jR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(eg)?e(i):(i.close(),await G5(),e(await Fb()))})})}async function OT(n,e,t){const i=$g(n,!0).put({[jR]:e,value:t});return new Pf(i).toPromise()}async function K5(n,e){const t=$g(n,!1).get(e),i=await new Pf(t).toPromise();return i===void 0?null:i.value}function MT(n,e){const t=$g(n,!0).delete(e);return new Pf(t).toPromise()}const Y5=800,X5=3;class LR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>X5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hg._getInstance(q5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await H5(),!this.activeServiceWorker)return;this.sender=new z5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fb();return await OT(e,Jp,"1"),await MT(e,Jp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>OT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>K5(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>MT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=$g(s,!1).getAll();return new Pf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LR.type="LOCAL";const Q5=LR;new Of(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(n,e){return e?wo(e):(dt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function J5(n){return RR(n.auth,new t0(n),n.bypassAuthState)}function e6(n){const{auth:e,user:t}=n;return dt(t,e,"internal-error"),I5(t,new t0(n),n.bypassAuthState)}async function t6(n){const{auth:e,user:t}=n;return dt(t,e,"internal-error"),R5(t,new t0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J5;case"linkViaPopup":case"linkViaRedirect":return t6;case"reauthViaPopup":case"reauthViaRedirect":return e6;default:Br(this.auth,"internal-error")}}resolve(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=new Of(2e3,1e4);class zu extends VR{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,zu.currentPopupAction&&zu.currentPopupAction.cancel(),zu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dt(e,this.auth,"internal-error"),e}async onExecution(){Do(this.filter.length===1,"Popup operations only handle one event");const e=e0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ea(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ea(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n6.get())};e()}}zu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6="pendingRedirect",Cp=new Map;class s6 extends VR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Cp.get(this.auth._key());if(!e){try{const i=await r6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Cp.set(this.auth._key(),e)}return this.bypassAuthState||Cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r6(n,e){const t=l6(e),i=o6(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function a6(n,e){Cp.set(n._key(),e)}function o6(n){return wo(n._redirectPersistence)}function l6(n){return Ap(i6,n.config.apiKey,n.name)}async function c6(n,e,t=!1){if(hr(n.app))return Promise.reject(Ml(n));const i=fh(n),s=Z5(i,e),l=await new s6(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=600*1e3;class h6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!FR(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ea(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u6&&this.cachedEventUids.clear(),this.cachedEventUids.has(PT(e))}saveEventToCache(e){this.cachedEventUids.add(PT(e)),this.lastProcessedEventTime=Date.now()}}function PT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function FR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function d6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(n,e={}){return Kl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p6=/^https?/;async function g6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await f6(n);for(const t of e)try{if(y6(t))return}catch{}Br(n,"unauthorized-domain")}function y6(n){const e=Lb(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!p6.test(t))return!1;if(m6.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new Of(3e4,6e4);function jT(){const n=wa().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function b6(n){return new Promise((e,t)=>{function i(){jT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jT(),t(Ea(n,"network-request-failed"))},timeout:_6.get()})}if(wa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wa().gapi?.load)i();else{const s=h5("iframefcb");return wa()[s]=()=>{gapi.load?i():t(Ea(n,"network-request-failed"))},wR(`${u5()}?onload=${s}`).catch(a=>t(a))}}).catch(e=>{throw Rp=null,e})}let Rp=null;function v6(n){return Rp=Rp||b6(n),Rp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=new Of(5e3,15e3),E6="__/auth/iframe",w6="emulator/auth/iframe",T6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A6(n){const e=n.config;dt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Yv(e,w6):`https://${n.config.authDomain}/${E6}`,i={apiKey:e.apiKey,appName:n.name,v:Hc},s=S6.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Sf(i).slice(1)}`}async function C6(n){const e=await v6(n),t=wa().gapi;return dt(t,n,"internal-error"),e.open({where:document.body,url:A6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T6,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=Ea(n,"network-request-failed"),u=wa().setTimeout(()=>{a(l)},x6.get());function h(){wa().clearTimeout(u),s(i)}i.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I6=500,k6=600,N6="_blank",D6="http://localhost";class LT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O6(n,e,t,i=I6,s=k6){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...R6,width:i.toString(),height:s.toString(),top:a,left:l},f=Wi().toLowerCase();t&&(u=gR(f)?N6:t),mR(f)&&(e=e||D6,h.scrollbars="yes");const y=Object.entries(h).reduce((x,[T,C])=>`${x}${T}=${C},`,"");if(t5(f)&&u!=="_self")return M6(e||"",u),new LT(null);const v=window.open(e||"",u,y);dt(v,n,"popup-blocked");try{v.focus()}catch{}return new LT(v)}function M6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="__/auth/handler",j6="emulator/auth/handler",L6=encodeURIComponent("fac");async function VT(n,e,t,i,s,a){dt(n.config.authDomain,n,"auth-domain-config-required"),dt(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Hc,eventId:s};if(e instanceof AR){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",LO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))l[y]=v}if(e instanceof Mf){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const h=await n._getAppCheckToken(),f=h?`#${L6}=${encodeURIComponent(h)}`:"";return`${V6(n)}?${Sf(u).slice(1)}${f}`}function V6({config:n}){return n.emulator?Yv(n,j6):`https://${n.authDomain}/${P6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="webStorageSupport";class F6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OR,this._completeRedirectFn=c6,this._overrideRedirectResult=a6}async _openPopup(e,t,i,s){Do(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await VT(e,t,i,Lb(),s);return O6(e,a,e0())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await VT(e,t,i,Lb(),s);return B5(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Do(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await C6(e),i=new h6(e);return t.register("authEvent",s=>(dt(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(F_,{type:F_},s=>{const a=s?.[0]?.[F_];a!==void 0&&t(!!a),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=g6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xR()||pR()||Qv()}}const U6=F6;var FT="@firebase/auth",UT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H6(n){zr(new pr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;dt(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ER(n)},f=new o5(i,s,a,h);return y5(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),zr(new pr("auth-internal",e=>{const t=fh(e.getProvider("auth").getImmediate());return(i=>new z6(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(FT,UT,B6(n)),bs(FT,UT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=300,q6=eC("authIdTokenMaxAge")||$6;let zT=null;const W6=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>q6)return;const s=t?.token;zT!==s&&(zT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function G6(n=vg()){const e=ql(n,"auth");if(e.isInitialized())return e.getImmediate();const t=g5(n,{popupRedirectResolver:U6,persistence:[Q5,NR,OR]}),i=eC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=W6(a.toString());P5(t,l,()=>l(t.currentUser)),M5(t,u=>l(u))}}const s=QA("auth");return s&&_5(t,`http://${s}`),t}function K6(){return document.getElementsByTagName("head")?.[0]??document}l5({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=Ea("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",K6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H6("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="firebasestorage.googleapis.com",Y6="storageBucket",X6=120*1e3,Q6=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends yr{constructor(e,t,i=0){super(U_(e),`Firebase Storage: ${t} (${U_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Na.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return U_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ra;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ra||(Ra={}));function U_(n){return"storage/"+n}function Z6(){const n="An unknown error occurred, please check the error payload for server response.";return new Na(Ra.UNKNOWN,n)}function J6(){return new Na(Ra.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e4(){return new Na(Ra.CANCELED,"User canceled the upload/download.")}function t4(n){return new Na(Ra.INVALID_URL,"Invalid URL '"+n+"'.")}function n4(n){return new Na(Ra.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function BT(n){return new Na(Ra.INVALID_ARGUMENT,n)}function zR(){return new Na(Ra.APP_DELETED,"The Firebase app was deleted.")}function i4(n){return new Na(Ra.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Vr.makeFromUrl(e,t)}catch{return new Vr(e,"")}if(i.path==="")return i;throw n4(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function f(Z){Z.path_=decodeURIComponent(Z.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${y}/b/${s}/o${x}`,"i"),C={bucket:1,path:3},D=t===UR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",L=new RegExp(`^https?://${D}/${s}/${R}`,"i"),q=[{regex:u,indices:h,postModify:a},{regex:T,indices:C,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let Z=0;Z<q.length;Z++){const Y=q[Z],J=Y.regex.exec(e);if(J){const F=J[Y.indices.bucket];let I=J[Y.indices.path];I||(I=""),i=new Vr(F,I),Y.postModify(i);break}}if(i==null)throw t4(e);return i}}class s4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n,e,t){let i=1,s=null,a=null,l=!1,u=0;function h(){return u===2}let f=!1;function y(...R){f||(f=!0,e.apply(null,R))}function v(R){s=setTimeout(()=>{s=null,n(T,h())},R)}function x(){a&&clearTimeout(a)}function T(R,...L){if(f){x();return}if(R){x(),y.call(null,R,...L);return}if(h()||l){x(),y.call(null,R,...L);return}i<64&&(i*=2);let q;u===1?(u=2,q=0):q=(i+Math.random())*1e3,v(q)}let C=!1;function D(R){C||(C=!0,x(),!f&&(s!==null?(R||(u=2),clearTimeout(s),v(0)):R||(u=1)))}return v(0),a=setTimeout(()=>{l=!0,D(!0)},t),D}function a4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(n){return n!==void 0}function HT(n,e,t,i){if(i<e)throw BT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw BT(`Invalid value for '${n}'. Expected ${t} or less.`)}function l4(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var tg;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(tg||(tg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,t,i,s,a,l,u,h,f,y,v,x=!0,T=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=y,this.connectionFactory_=v,this.retry=x,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,D)=>{this.resolve_=C,this.reject_=D,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Jm(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const u=a.getErrorCode()===tg.NO_ERROR,h=a.getStatus();if(!u||c4(h,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===tg.ABORT;i(!1,new Jm(!1,null,y));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new Jm(f,a))})},t=(i,s)=>{const a=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());o4(h)?a(h):a()}catch(h){l(h)}else if(u!==null){const h=Z6();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(s.canceled){const h=this.appDelete_?zR():e4();l(h)}else{const h=J6();l(h)}};this.canceled_?t(!1,new Jm(!1,null,!0)):this.backoffId_=r4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jm{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function h4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function d4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function f4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function m4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function p4(n,e,t,i,s,a,l=!0,u=!1){const h=l4(n.urlParams),f=n.url+h,y=Object.assign({},n.headers);return f4(y,e),h4(y,t),d4(y,a),m4(y,i),new u4(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function y4(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t){this._service=e,t instanceof Vr?this._location=t:this._location=Vr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ng(e,t)}get root(){const e=new Vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y4(this._location.path)}get storage(){return this._service}get parent(){const e=g4(this._location.path);if(e===null)return null;const t=new Vr(this._location.bucket,e);return new ng(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw i4(e)}}function $T(n,e){const t=e?.[Y6];return t==null?null:Vr.makeFromBucketSpec(t,n)}function _4(n,e,t,i={}){n.host=`${e}:${t}`;const s=zc(e);s&&(cv(`https://${n.host}/b`),uv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:tC(a,n.app.options.projectId))}class b4{constructor(e,t,i,s,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=UR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X6,this._maxUploadRetryTime=Q6,this._requests=new Set,s!=null?this._bucket=Vr.makeFromBucketSpec(s,this._host):this._bucket=$T(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vr.makeFromBucketSpec(this._url,e):this._bucket=$T(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ng(this,e)}_makeRequest(e,t,i,s,a=!0){if(this._deleted)return new s4(zR());{const l=p4(e,this._appId,i,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const qT="@firebase/storage",WT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="storage";function v4(n=vg(),e){n=Hn(n);const i=ql(n,BR).getImmediate({identifier:e}),s=ZA("storage");return s&&x4(i,...s),i}function x4(n,e,t,i={}){_4(n,e,t,i)}function E4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new b4(t,i,s,e,Hc)}function w4(){zr(new pr(BR,E4,"PUBLIC").setMultipleInstances(!0)),bs(qT,WT,""),bs(qT,WT,"esm2020")}w4();const T4={apiKey:"AIzaSyBANwmEJ1kcCHD7-G2Zh-SGwkFf4b814Ag",authDomain:"kombuchaprod.firebaseapp.com",projectId:"kombuchaprod",storageBucket:"kombuchaprod.firebasestorage.app",messagingSenderId:"530701989412",appId:"1:530701989412:web:42f34bba68a8d78c970ab1",measurementId:"G-FW5SZV6G31"},qg=lC(T4);NV(qg);const ig=G6(qg),It=Jj(qg);v4(qg);O5(ig,NR).then(()=>{console.log("Firebase Auth persistence set to local storage (prod)")}).catch(n=>{console.error("Error setting Firebase Auth persistence (prod):",n)});const Hl="America/Mexico_City",Fs=()=>new Date().toLocaleDateString("en-CA",{timeZone:Hl}),sg=()=>{const n=new Date;return new Date(n.toLocaleString("en-US",{timeZone:Hl})).toISOString()},HR=()=>new Date().toLocaleDateString("en-CA",{timeZone:Hl,year:"numeric",month:"2-digit"}).replace("/","-"),ga=n=>new Date(n).toLocaleDateString("es-ES",{timeZone:Hl}),S4=(n=0)=>{const e=new Date;return e.setDate(e.getDate()+n),e.toLocaleDateString("en-CA",{timeZone:Hl})},z_=n=>n?new Date(n+"-01").toLocaleDateString("es-ES",{month:"long",year:"numeric",timeZone:Hl}):"este mes",A4=n=>{const e=new Date(n+"T00:00:00"),t=new Date,i=new Date(e.toLocaleString("en-US",{timeZone:Hl})),s=new Date(t.toLocaleString("en-US",{timeZone:Hl}));i.setHours(0,0,0,0),s.setHours(0,0,0,0);const a=Math.abs(s-i),l=Math.ceil(a/(1e3*60*60*24));return l===0?"Hoy":l===1?"Ayer":l<=7?`Hace ${l} das`:ga(n)},C4=n=>{if(!n||!n.fecha||!n.items)return null;const e=n.items.reduce((v,x)=>v+(parseInt(x.cantidad)||0),0);if(e===0)return null;const t=e,i=new Date(n.fecha+"T00:00:00"),s=new Date(i);s.setDate(i.getDate()+t);const a=s.toISOString().split("T")[0],l=Fs(),u=a<=l,h=new Date(l+"T00:00:00"),f=new Date(a+"T00:00:00"),y=Math.floor((h-f)/(1e3*60*60*24));return{customerId:n.cliente,lastSaleId:n.id,lastSaleDate:n.fecha,totalKombuchas:e,daysToWait:t,reminderDate:a,isDue:u,daysOverdue:u?Math.abs(y):0,daysUntilDue:u?0:Math.abs(y),status:"pending"}},n0=(n,e)=>{const t=[],i={};return n.forEach(s=>{i[s.cliente]||(i[s.cliente]=[]),i[s.cliente].push(s)}),Object.keys(i).forEach(s=>{const l=i[s].sort((h,f)=>new Date(f.fecha)-new Date(h.fecha))[0],u=C4(l);if(u){const h=e.find(f=>f.id===s);h&&t.push({...u,customerName:h.nombre,customerPhone:h.telefono,customerAddress:h.direccion,notificationId:`${s}_${l.id}_${u.reminderDate}`})}}),t.sort((s,a)=>s.isDue&&!a.isDue?-1:!s.isDue&&a.isDue?1:s.isDue&&a.isDue?a.daysOverdue-s.daysOverdue:s.daysUntilDue-a.daysUntilDue)},rg=n=>{const e=n.filter(s=>s.status==="pending"),t=e.filter(s=>s.isDue),i=e.filter(s=>!s.isDue);return{total:n.length,pending:e.length,overdue:t.length,upcoming:i.length,contacted:n.filter(s=>s.status==="contacted").length,dismissed:n.filter(s=>s.status==="dismissed").length}},$R=n=>{const{customerName:e,totalKombuchas:t,isDue:i,daysOverdue:s,daysUntilDue:a}=n;return i?s===0?`Hoy es el da! Contacta a ${e} - compr ${t} kombuchas`:s===1?`Ayer era el da! Contacta a ${e} - compr ${t} kombuchas`:`${s} das de retraso! Contacta a ${e} - compr ${t} kombuchas`:a===1?`Maana contacta a ${e} - compr ${t} kombuchas`:`En ${a} das contacta a ${e} - compr ${t} kombuchas`},Ip=n=>n.isDue?n.daysOverdue>=7?"high":n.daysOverdue>=3?"medium":"low":"low";/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jf(n){return n+.5|0}const Cl=(n,e,t)=>Math.max(Math.min(n,t),e);function zd(n){return Cl(jf(n*2.55),0,255)}function Pl(n){return Cl(jf(n*255),0,255)}function bo(n){return Cl(jf(n/2.55)/100,0,1)}function GT(n){return Cl(jf(n*100),0,100)}const ur={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ub=[..."0123456789ABCDEF"],R4=n=>Ub[n&15],I4=n=>Ub[(n&240)>>4]+Ub[n&15],ep=n=>(n&240)>>4===(n&15),k4=n=>ep(n.r)&&ep(n.g)&&ep(n.b)&&ep(n.a);function N4(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&ur[n[1]]*17,g:255&ur[n[2]]*17,b:255&ur[n[3]]*17,a:e===5?ur[n[4]]*17:255}:(e===7||e===9)&&(t={r:ur[n[1]]<<4|ur[n[2]],g:ur[n[3]]<<4|ur[n[4]],b:ur[n[5]]<<4|ur[n[6]],a:e===9?ur[n[7]]<<4|ur[n[8]]:255})),t}const D4=(n,e)=>n<255?e(n):"";function O4(n){var e=k4(n)?R4:I4;return n?"#"+e(n.r)+e(n.g)+e(n.b)+D4(n.a,e):void 0}const M4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qR(n,e,t){const i=e*Math.min(t,1-t),s=(a,l=(a+n/30)%12)=>t-i*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function P4(n,e,t){const i=(s,a=(s+n/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function j4(n,e,t){const i=qR(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function L4(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function i0(n){const t=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(t,i,s),l=Math.min(t,i,s),u=(a+l)/2;let h,f,y;return a!==l&&(y=a-l,f=u>.5?y/(2-a-l):y/(a+l),h=L4(t,i,s,y,a),h=h*60+.5),[h|0,f||0,u]}function s0(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Pl)}function r0(n,e,t){return s0(qR,n,e,t)}function V4(n,e,t){return s0(j4,n,e,t)}function F4(n,e,t){return s0(P4,n,e,t)}function WR(n){return(n%360+360)%360}function U4(n){const e=M4.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?zd(+e[5]):Pl(+e[5]));const s=WR(+e[2]),a=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=V4(s,a,l):e[1]==="hsv"?i=F4(s,a,l):i=r0(s,a,l),{r:i[0],g:i[1],b:i[2],a:t}}function z4(n,e){var t=i0(n);t[0]=WR(t[0]+e),t=r0(t),n.r=t[0],n.g=t[1],n.b=t[2]}function B4(n){if(!n)return;const e=i0(n),t=e[0],i=GT(e[1]),s=GT(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${bo(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const KT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},YT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function H4(){const n={},e=Object.keys(YT),t=Object.keys(KT);let i,s,a,l,u;for(i=0;i<e.length;i++){for(l=u=e[i],s=0;s<t.length;s++)a=t[s],u=u.replace(a,KT[a]);a=parseInt(YT[l],16),n[u]=[a>>16&255,a>>8&255,a&255]}return n}let tp;function $4(n){tp||(tp=H4(),tp.transparent=[0,0,0,0]);const e=tp[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const q4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function W4(n){const e=q4.exec(n);let t=255,i,s,a;if(e){if(e[7]!==i){const l=+e[7];t=e[8]?zd(l):Cl(l*255,0,255)}return i=+e[1],s=+e[3],a=+e[5],i=255&(e[2]?zd(i):Cl(i,0,255)),s=255&(e[4]?zd(s):Cl(s,0,255)),a=255&(e[6]?zd(a):Cl(a,0,255)),{r:i,g:s,b:a,a:t}}}function G4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${bo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const B_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Du=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function K4(n,e,t){const i=Du(bo(n.r)),s=Du(bo(n.g)),a=Du(bo(n.b));return{r:Pl(B_(i+t*(Du(bo(e.r))-i))),g:Pl(B_(s+t*(Du(bo(e.g))-s))),b:Pl(B_(a+t*(Du(bo(e.b))-a))),a:n.a+t*(e.a-n.a)}}function np(n,e,t){if(n){let i=i0(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=r0(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function GR(n,e){return n&&Object.assign(e||{},n)}function XT(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Pl(n[3]))):(e=GR(n,{r:0,g:0,b:0,a:1}),e.a=Pl(e.a)),e}function Y4(n){return n.charAt(0)==="r"?W4(n):U4(n)}class ff{constructor(e){if(e instanceof ff)return e;const t=typeof e;let i;t==="object"?i=XT(e):t==="string"&&(i=N4(e)||$4(e)||Y4(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=GR(this._rgb);return e&&(e.a=bo(e.a)),e}set rgb(e){this._rgb=XT(e)}rgbString(){return this._valid?G4(this._rgb):void 0}hexString(){return this._valid?O4(this._rgb):void 0}hslString(){return this._valid?B4(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let a;const l=t===a?.5:t,u=2*l-1,h=i.a-s.a,f=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;a=1-f,i.r=255&f*i.r+a*s.r+.5,i.g=255&f*i.g+a*s.g+.5,i.b=255&f*i.b+a*s.b+.5,i.a=l*i.a+(1-l)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=K4(this._rgb,e._rgb,t)),this}clone(){return new ff(this.rgb)}alpha(e){return this._rgb.a=Pl(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=jf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return np(this._rgb,2,e),this}darken(e){return np(this._rgb,2,-e),this}saturate(e){return np(this._rgb,1,e),this}desaturate(e){return np(this._rgb,1,-e),this}rotate(e){return z4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function po(){}const X4=(()=>{let n=0;return()=>n++})();function Qt(n){return n==null}function Qn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function jt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function da(n,e){return Gi(n)?n:e}function Et(n,e){return typeof n>"u"?e:n}const Q4=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,KR=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function _n(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function sn(n,e,t,i){let s,a,l;if(Qn(n))for(a=n.length,s=0;s<a;s++)e.call(t,n[s],s);else if(jt(n))for(l=Object.keys(n),a=l.length,s=0;s<a;s++)e.call(t,n[l[s]],l[s])}function ag(n,e){let t,i,s,a;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],a=e[t],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function og(n){if(Qn(n))return n.map(og);if(jt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=og(n[t[s]]);return e}return n}function YR(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Z4(n,e,t,i){if(!YR(n))return;const s=e[n],a=t[n];jt(s)&&jt(a)?mf(s,a,i):e[n]=og(a)}function mf(n,e,t){const i=Qn(e)?e:[e],s=i.length;if(!jt(n))return n;t=t||{};const a=t.merger||Z4;let l;for(let u=0;u<s;++u){if(l=i[u],!jt(l))continue;const h=Object.keys(l);for(let f=0,y=h.length;f<y;++f)a(h[f],n,l,t)}return n}function Zd(n,e){return mf(n,e,{merger:J4})}function J4(n,e,t){if(!YR(n))return;const i=e[n],s=t[n];jt(i)&&jt(s)?Zd(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=og(s))}const QT={"":n=>n,x:n=>n.x,y:n=>n.y};function eF(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function tF(n){const e=eF(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Fc(n,e){return(QT[e]||(QT[e]=tF(e)))(n)}function a0(n){return n.charAt(0).toUpperCase()+n.slice(1)}const pf=n=>typeof n<"u",$l=n=>typeof n=="function",ZT=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function nF(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const rn=Math.PI,Sn=2*rn,iF=Sn+rn,lg=Number.POSITIVE_INFINITY,sF=rn/180,ci=rn/2,xc=rn/4,JT=rn*2/3,XR=Math.log10,Ta=Math.sign;function Jd(n,e,t){return Math.abs(n-e)<t}function eS(n){const e=Math.round(n);n=Jd(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(XR(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function rF(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,a)=>s-a).pop(),e}function aF(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function gf(n){return!aF(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function oF(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function lF(n,e,t){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function To(n){return n*(rn/180)}function cF(n){return n*(180/rn)}function tS(n){if(!Gi(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function QR(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let a=Math.atan2(i,t);return a<-.5*rn&&(a+=Sn),{angle:a,distance:s}}function zb(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function uF(n,e){return(n-e+iF)%Sn-rn}function Vs(n){return(n%Sn+Sn)%Sn}function yf(n,e,t,i){const s=Vs(n),a=Vs(e),l=Vs(t),u=Vs(a-s),h=Vs(l-s),f=Vs(s-a),y=Vs(s-l);return s===a||s===l||i&&a===l||u>h&&f<y}function $i(n,e,t){return Math.max(e,Math.min(t,n))}function hF(n){return $i(n,-32768,32767)}function So(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function o0(n,e,t){t=t||(l=>n[l]<e);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,t(a)?s=a:i=a;return{lo:s,hi:i}}const kc=(n,e,t,i)=>o0(n,t,i?s=>{const a=n[s][e];return a<t||a===t&&n[s+1][e]===t}:s=>n[s][e]<t),dF=(n,e,t)=>o0(n,t,i=>n[i][e]>=t);function fF(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const ZR=["push","pop","shift","splice","unshift"];function mF(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ZR.forEach(t=>{const i="_onData"+a0(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...a){const l=s.apply(this,a);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...a)}),l}})})}function nS(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(ZR.forEach(a=>{delete n[a]}),delete n._chartjs)}function JR(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const eI=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function tI(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,eI.call(window,()=>{i=!1,n.apply(e,t)}))}}function pF(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const l0=n=>n==="start"?"left":n==="end"?"right":"center",zi=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,gF=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function yF(n,e,t){const i=e.length;let s=0,a=i;if(n._sorted){const{iScale:l,vScale:u,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,y=l.axis,{min:v,max:x,minDefined:T,maxDefined:C}=l.getUserBounds();if(T){if(s=Math.min(kc(h,y,v).lo,t?i:kc(e,y,l.getPixelForValue(v)).lo),f){const D=h.slice(0,s+1).reverse().findIndex(R=>!Qt(R[u.axis]));s-=Math.max(0,D)}s=$i(s,0,i-1)}if(C){let D=Math.max(kc(h,l.axis,x,!0).hi+1,t?0:kc(e,y,l.getPixelForValue(x),!0).hi+1);if(f){const R=h.slice(D-1).findIndex(L=>!Qt(L[u.axis]));D+=Math.max(0,R)}a=$i(D,s,i)-s}else a=i-s}return{start:s,count:a}}function _F(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const a=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),a}const ip=n=>n===0||n===1,iS=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Sn/t)),sS=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Sn/t)+1,ef={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ci)+1,easeOutSine:n=>Math.sin(n*ci),easeInOutSine:n=>-.5*(Math.cos(rn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ip(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ip(n)?n:iS(n,.075,.3),easeOutElastic:n=>ip(n)?n:sS(n,.075,.3),easeInOutElastic(n){return ip(n)?n:n<.5?.5*iS(n*2,.1125,.45):.5+.5*sS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-ef.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ef.easeInBounce(n*2)*.5:ef.easeOutBounce(n*2-1)*.5+.5};function c0(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rS(n){return c0(n)?n:new ff(n)}function H_(n){return c0(n)?n:new ff(n).saturate(.5).darken(.1).hexString()}const bF=["x","y","borderWidth","radius","tension"],vF=["color","borderColor","backgroundColor"];function xF(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:vF},numbers:{type:"number",properties:bF}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function EF(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const aS=new Map;function wF(n,e){e=e||{};const t=n+JSON.stringify(e);let i=aS.get(t);return i||(i=new Intl.NumberFormat(n,e),aS.set(t,i)),i}function u0(n,e,t){return wF(e,t).format(n)}const TF={values(n){return Qn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),a=SF(n,t)}const l=XR(Math.abs(a)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),u0(n,i,h)}};function SF(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var nI={formatters:TF};function AF(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Uc=Object.create(null),Bb=Object.create(null);function tf(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const a=t[i];n=n[a]||(n[a]=Object.create(null))}return n}function $_(n,e,t){return typeof e=="string"?mf(tf(n,e),t):mf(tf(n,""),e)}class CF{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>H_(s.backgroundColor),this.hoverBorderColor=(i,s)=>H_(s.borderColor),this.hoverColor=(i,s)=>H_(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return $_(this,e,t)}get(e){return tf(this,e)}describe(e,t){return $_(Bb,e,t)}override(e,t){return $_(Uc,e,t)}route(e,t,i,s){const a=tf(this,e),l=tf(this,i),u="_"+t;Object.defineProperties(a,{[u]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[u],f=l[s];return jt(h)?Object.assign({},f,h):Et(h,f)},set(h){this[u]=h}}})}apply(e){e.forEach(t=>t(this))}}var Bn=new CF({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xF,EF,AF]);function RF(n){return!n||Qt(n.size)||Qt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function oS(n,e,t,i,s){let a=e[s];return a||(a=e[s]=n.measureText(s).width,t.push(s)),a>i&&(i=a),i}function Ec(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function lS(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Hb(n,e,t,i){iI(n,e,t,i,null)}function iI(n,e,t,i,s){let a,l,u,h,f,y,v,x;const T=e.pointStyle,C=e.rotation,D=e.radius;let R=(C||0)*sF;if(T&&typeof T=="object"&&(a=T.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(R),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(D)||D<=0)){switch(n.beginPath(),T){default:s?n.ellipse(t,i,s/2,D,0,0,Sn):n.arc(t,i,D,0,Sn),n.closePath();break;case"triangle":y=s?s/2:D,n.moveTo(t+Math.sin(R)*y,i-Math.cos(R)*D),R+=JT,n.lineTo(t+Math.sin(R)*y,i-Math.cos(R)*D),R+=JT,n.lineTo(t+Math.sin(R)*y,i-Math.cos(R)*D),n.closePath();break;case"rectRounded":f=D*.516,h=D-f,l=Math.cos(R+xc)*h,v=Math.cos(R+xc)*(s?s/2-f:h),u=Math.sin(R+xc)*h,x=Math.sin(R+xc)*(s?s/2-f:h),n.arc(t-v,i-u,f,R-rn,R-ci),n.arc(t+x,i-l,f,R-ci,R),n.arc(t+v,i+u,f,R,R+ci),n.arc(t-x,i+l,f,R+ci,R+rn),n.closePath();break;case"rect":if(!C){h=Math.SQRT1_2*D,y=s?s/2:h,n.rect(t-y,i-h,2*y,2*h);break}R+=xc;case"rectRot":v=Math.cos(R)*(s?s/2:D),l=Math.cos(R)*D,u=Math.sin(R)*D,x=Math.sin(R)*(s?s/2:D),n.moveTo(t-v,i-u),n.lineTo(t+x,i-l),n.lineTo(t+v,i+u),n.lineTo(t-x,i+l),n.closePath();break;case"crossRot":R+=xc;case"cross":v=Math.cos(R)*(s?s/2:D),l=Math.cos(R)*D,u=Math.sin(R)*D,x=Math.sin(R)*(s?s/2:D),n.moveTo(t-v,i-u),n.lineTo(t+v,i+u),n.moveTo(t+x,i-l),n.lineTo(t-x,i+l);break;case"star":v=Math.cos(R)*(s?s/2:D),l=Math.cos(R)*D,u=Math.sin(R)*D,x=Math.sin(R)*(s?s/2:D),n.moveTo(t-v,i-u),n.lineTo(t+v,i+u),n.moveTo(t+x,i-l),n.lineTo(t-x,i+l),R+=xc,v=Math.cos(R)*(s?s/2:D),l=Math.cos(R)*D,u=Math.sin(R)*D,x=Math.sin(R)*(s?s/2:D),n.moveTo(t-v,i-u),n.lineTo(t+v,i+u),n.moveTo(t+x,i-l),n.lineTo(t-x,i+l);break;case"line":l=s?s/2:Math.cos(R)*D,u=Math.sin(R)*D,n.moveTo(t-l,i-u),n.lineTo(t+l,i+u);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(R)*(s?s/2:D),i+Math.sin(R)*D);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function _f(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Wg(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Gg(n){n.restore()}function IF(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const a=(e.x+t.x)/2;n.lineTo(a,e.y),n.lineTo(a,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function kF(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function NF(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Qt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function DF(n,e,t,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),l=e-a.actualBoundingBoxLeft,u=e+a.actualBoundingBoxRight,h=t-a.actualBoundingBoxAscent,f=t+a.actualBoundingBoxDescent,y=s.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,y),n.lineTo(u,y),n.stroke()}}function OF(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function bf(n,e,t,i,s,a={}){const l=Qn(e)?e:[e],u=a.strokeWidth>0&&a.strokeColor!=="";let h,f;for(n.save(),n.font=s.string,NF(n,a),h=0;h<l.length;++h)f=l[h],a.backdrop&&OF(n,a.backdrop),u&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),Qt(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(f,t,i,a.maxWidth)),n.fillText(f,t,i,a.maxWidth),DF(n,t,i,f,a),i+=Number(s.lineHeight);n.restore()}function cg(n,e){const{x:t,y:i,w:s,h:a,radius:l}=e;n.arc(t+l.topLeft,i+l.topLeft,l.topLeft,1.5*rn,rn,!0),n.lineTo(t,i+a-l.bottomLeft),n.arc(t+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,rn,ci,!0),n.lineTo(t+s-l.bottomRight,i+a),n.arc(t+s-l.bottomRight,i+a-l.bottomRight,l.bottomRight,ci,0,!0),n.lineTo(t+s,i+l.topRight),n.arc(t+s-l.topRight,i+l.topRight,l.topRight,0,-ci,!0),n.lineTo(t+l.topLeft,i)}const MF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,PF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jF(n,e){const t=(""+n).match(MF);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const LF=n=>+n||0;function h0(n,e){const t={},i=jt(e),s=i?Object.keys(e):e,a=jt(n)?i?l=>Et(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of s)t[l]=LF(a(l));return t}function sI(n){return h0(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ku(n){return h0(n,["topLeft","topRight","bottomLeft","bottomRight"])}function gr(n){const e=sI(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qi(n,e){n=n||{},e=e||Bn.font;let t=Et(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Et(n.style,e.style);i&&!(""+i).match(PF)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Et(n.family,e.family),lineHeight:jF(Et(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Et(n.weight,e.weight),string:""};return s.string=RF(s),s}function sp(n,e,t,i){let s,a,l;for(s=0,a=n.length;s<a;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function VF(n,e,t){const{min:i,max:s}=n,a=KR(e,(s-i)/2),l=(u,h)=>t&&u===0?0:u+h;return{min:l(i,-Math.abs(a)),max:l(s,a)}}function Gc(n,e){return Object.assign(Object.create(n),e)}function d0(n,e=[""],t,i,s=()=>n[0]){const a=t||n;typeof i>"u"&&(i=lI("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:u=>d0([u,...n],e,a,i)};return new Proxy(l,{deleteProperty(u,h){return delete u[h],delete u._keys,delete n[0][h],!0},get(u,h){return aI(u,h,()=>WF(h,e,n,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,h){return uS(u).includes(h)},ownKeys(u){return uS(u)},set(u,h,f){const y=u._storage||(u._storage=s());return u[h]=y[h]=f,delete u._keys,!0}})}function ih(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:rI(n,i),setContext:a=>ih(n,a,t,i),override:a=>ih(n.override(a),e,t,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,u){return aI(a,l,()=>UF(a,l,u))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,u){return n[l]=u,delete a[l],!0}})}function rI(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:$l(t)?t:()=>t,isIndexable:$l(i)?i:()=>i}}const FF=(n,e)=>n?n+a0(e):e,f0=(n,e)=>jt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function aI(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function UF(n,e,t){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;let u=i[e];return $l(u)&&l.isScriptable(e)&&(u=zF(e,u,n,t)),Qn(u)&&u.length&&(u=BF(e,u,n,l.isIndexable)),f0(e,u)&&(u=ih(u,s,a&&a[e],l)),u}function zF(n,e,t,i){const{_proxy:s,_context:a,_subProxy:l,_stack:u}=t;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let h=e(a,l||i);return u.delete(n),f0(n,h)&&(h=m0(s._scopes,s,n,h)),h}function BF(n,e,t,i){const{_proxy:s,_context:a,_subProxy:l,_descriptors:u}=t;if(typeof a.index<"u"&&i(n))return e[a.index%e.length];if(jt(e[0])){const h=e,f=s._scopes.filter(y=>y!==h);e=[];for(const y of h){const v=m0(f,s,n,y);e.push(ih(v,a,l&&l[n],u))}}return e}function oI(n,e,t){return $l(n)?n(e,t):n}const HF=(n,e)=>n===!0?e:typeof n=="string"?Fc(e,n):void 0;function $F(n,e,t,i,s){for(const a of e){const l=HF(t,a);if(l){n.add(l);const u=oI(l._fallback,t,s);if(typeof u<"u"&&u!==t&&u!==i)return u}else if(l===!1&&typeof i<"u"&&t!==i)return null}return!1}function m0(n,e,t,i){const s=e._rootScopes,a=oI(e._fallback,t,i),l=[...n,...s],u=new Set;u.add(i);let h=cS(u,l,t,a||t,i);return h===null||typeof a<"u"&&a!==t&&(h=cS(u,l,a,h,i),h===null)?!1:d0(Array.from(u),[""],s,a,()=>qF(e,t,i))}function cS(n,e,t,i,s){for(;t;)t=$F(n,e,t,i,s);return t}function qF(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return Qn(s)&&jt(t)?t:s||{}}function WF(n,e,t,i){let s;for(const a of e)if(s=lI(FF(a,n),t),typeof s<"u")return f0(n,s)?m0(t,i,n,s):s}function lI(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function uS(n){let e=n._keys;return e||(e=n._keys=GF(n._scopes)),e}function GF(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const KF=Number.EPSILON||1e-14,sh=(n,e)=>e<n.length&&!n[e].skip&&n[e],cI=n=>n==="x"?"y":"x";function YF(n,e,t,i){const s=n.skip?e:n,a=e,l=t.skip?e:t,u=zb(a,s),h=zb(l,a);let f=u/(u+h),y=h/(u+h);f=isNaN(f)?0:f,y=isNaN(y)?0:y;const v=i*f,x=i*y;return{previous:{x:a.x-v*(l.x-s.x),y:a.y-v*(l.y-s.y)},next:{x:a.x+x*(l.x-s.x),y:a.y+x*(l.y-s.y)}}}function XF(n,e,t){const i=n.length;let s,a,l,u,h,f=sh(n,0);for(let y=0;y<i-1;++y)if(h=f,f=sh(n,y+1),!(!h||!f)){if(Jd(e[y],0,KF)){t[y]=t[y+1]=0;continue}s=t[y]/e[y],a=t[y+1]/e[y],u=Math.pow(s,2)+Math.pow(a,2),!(u<=9)&&(l=3/Math.sqrt(u),t[y]=s*l*e[y],t[y+1]=a*l*e[y])}}function QF(n,e,t="x"){const i=cI(t),s=n.length;let a,l,u,h=sh(n,0);for(let f=0;f<s;++f){if(l=u,u=h,h=sh(n,f+1),!u)continue;const y=u[t],v=u[i];l&&(a=(y-l[t])/3,u[`cp1${t}`]=y-a,u[`cp1${i}`]=v-a*e[f]),h&&(a=(h[t]-y)/3,u[`cp2${t}`]=y+a,u[`cp2${i}`]=v+a*e[f])}}function ZF(n,e="x"){const t=cI(e),i=n.length,s=Array(i).fill(0),a=Array(i);let l,u,h,f=sh(n,0);for(l=0;l<i;++l)if(u=h,h=f,f=sh(n,l+1),!!h){if(f){const y=f[e]-h[e];s[l]=y!==0?(f[t]-h[t])/y:0}a[l]=u?f?Ta(s[l-1])!==Ta(s[l])?0:(s[l-1]+s[l])/2:s[l-1]:s[l]}XF(n,s,a),QF(n,a,e)}function rp(n,e,t){return Math.max(Math.min(n,t),e)}function JF(n,e){let t,i,s,a,l,u=_f(n[0],e);for(t=0,i=n.length;t<i;++t)l=a,a=u,u=t<i-1&&_f(n[t+1],e),a&&(s=n[t],l&&(s.cp1x=rp(s.cp1x,e.left,e.right),s.cp1y=rp(s.cp1y,e.top,e.bottom)),u&&(s.cp2x=rp(s.cp2x,e.left,e.right),s.cp2y=rp(s.cp2y,e.top,e.bottom)))}function e3(n,e,t,i,s){let a,l,u,h;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")ZF(n,s);else{let f=i?n[n.length-1]:n[0];for(a=0,l=n.length;a<l;++a)u=n[a],h=YF(f,u,n[Math.min(a+1,l-(i?0:1))%l],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,f=u}e.capBezierPoints&&JF(n,t)}function p0(){return typeof window<"u"&&typeof document<"u"}function g0(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ug(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Kg=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function t3(n,e){return Kg(n).getPropertyValue(e)}const n3=["top","right","bottom","left"];function Nc(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const a=n3[s];i[a]=parseFloat(n[e+"-"+a+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const i3=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function s3(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:a}=i;let l=!1,u,h;if(i3(s,a,n.target))u=s,h=a;else{const f=e.getBoundingClientRect();u=i.clientX-f.left,h=i.clientY-f.top,l=!0}return{x:u,y:h,box:l}}function Sc(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=Kg(t),a=s.boxSizing==="border-box",l=Nc(s,"padding"),u=Nc(s,"border","width"),{x:h,y:f,box:y}=s3(n,t),v=l.left+(y&&u.left),x=l.top+(y&&u.top);let{width:T,height:C}=e;return a&&(T-=l.width+u.width,C-=l.height+u.height),{x:Math.round((h-v)/T*t.width/i),y:Math.round((f-x)/C*t.height/i)}}function r3(n,e,t){let i,s;if(e===void 0||t===void 0){const a=n&&g0(n);if(!a)e=n.clientWidth,t=n.clientHeight;else{const l=a.getBoundingClientRect(),u=Kg(a),h=Nc(u,"border","width"),f=Nc(u,"padding");e=l.width-f.width-h.width,t=l.height-f.height-h.height,i=ug(u.maxWidth,a,"clientWidth"),s=ug(u.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:i||lg,maxHeight:s||lg}}const ap=n=>Math.round(n*10)/10;function a3(n,e,t,i){const s=Kg(n),a=Nc(s,"margin"),l=ug(s.maxWidth,n,"clientWidth")||lg,u=ug(s.maxHeight,n,"clientHeight")||lg,h=r3(n,e,t);let{width:f,height:y}=h;if(s.boxSizing==="content-box"){const x=Nc(s,"border","width"),T=Nc(s,"padding");f-=T.width+x.width,y-=T.height+x.height}return f=Math.max(0,f-a.width),y=Math.max(0,i?f/i:y-a.height),f=ap(Math.min(f,l,h.maxWidth)),y=ap(Math.min(y,u,h.maxHeight)),f&&!y&&(y=ap(f/2)),(e!==void 0||t!==void 0)&&i&&h.height&&y>h.height&&(y=h.height,f=ap(Math.floor(y*i))),{width:f,height:y}}function hS(n,e,t){const i=e||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==s||l.width!==a?(n.currentDevicePixelRatio=i,l.height=s,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const o3=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};p0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function dS(n,e){const t=t3(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ac(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function l3(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function c3(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},a={x:e.cp1x,y:e.cp1y},l=Ac(n,s,t),u=Ac(s,a,t),h=Ac(a,e,t),f=Ac(l,u,t),y=Ac(u,h,t);return Ac(f,y,t)}const u3=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},h3=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Yu(n,e,t){return n?u3(e,t):h3()}function uI(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function hI(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function dI(n){return n==="angle"?{between:yf,compare:uF,normalize:Vs}:{between:So,compare:(e,t)=>e-t,normalize:e=>e}}function fS({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function d3(n,e,t){const{property:i,start:s,end:a}=t,{between:l,normalize:u}=dI(i),h=e.length;let{start:f,end:y,loop:v}=n,x,T;if(v){for(f+=h,y+=h,x=0,T=h;x<T&&l(u(e[f%h][i]),s,a);++x)f--,y--;f%=h,y%=h}return y<f&&(y+=h),{start:f,end:y,loop:v,style:n.style}}function fI(n,e,t){if(!t)return[n];const{property:i,start:s,end:a}=t,l=e.length,{compare:u,between:h,normalize:f}=dI(i),{start:y,end:v,loop:x,style:T}=d3(n,e,t),C=[];let D=!1,R=null,L,$,q;const Z=()=>h(s,q,L)&&u(s,q)!==0,Y=()=>u(a,L)===0||h(a,q,L),J=()=>D||Z(),F=()=>!D||Y();for(let I=y,O=y;I<=v;++I)$=e[I%l],!$.skip&&(L=f($[i]),L!==q&&(D=h(L,s,a),R===null&&J()&&(R=u(L,s)===0?I:O),R!==null&&F()&&(C.push(fS({start:R,end:I,loop:x,count:l,style:T})),R=null),O=I,q=L));return R!==null&&C.push(fS({start:R,end:v,loop:x,count:l,style:T})),C}function mI(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const a=fI(i[s],n.points,e);a.length&&t.push(...a)}return t}function f3(n,e,t,i){let s=0,a=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(a+=s);a>s&&n[a%e].skip;)a--;return a%=e,{start:s,end:a}}function m3(n,e,t,i){const s=n.length,a=[];let l=e,u=n[e],h;for(h=e+1;h<=t;++h){const f=n[h%s];f.skip||f.stop?u.skip||(i=!1,a.push({start:e%s,end:(h-1)%s,loop:i}),e=l=f.stop?h:null):(l=h,u.skip&&(e=h)),u=f}return l!==null&&a.push({start:e%s,end:l%s,loop:i}),a}function p3(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const a=!!n._loop,{start:l,end:u}=f3(t,s,a,i);if(i===!0)return mS(n,[{start:l,end:u,loop:a}],t,e);const h=u<l?u+s:u,f=!!n._fullLoop&&l===0&&u===s-1;return mS(n,m3(t,l,h,f),t,e)}function mS(n,e,t,i){return!i||!i.setContext||!t?e:g3(n,e,t,i)}function g3(n,e,t,i){const s=n._chart.getContext(),a=pS(n.options),{_datasetIndex:l,options:{spanGaps:u}}=n,h=t.length,f=[];let y=a,v=e[0].start,x=v;function T(C,D,R,L){const $=u?-1:1;if(C!==D){for(C+=h;t[C%h].skip;)C-=$;for(;t[D%h].skip;)D+=$;C%h!==D%h&&(f.push({start:C%h,end:D%h,loop:R,style:L}),y=L,v=D%h)}}for(const C of e){v=u?v:C.start;let D=t[v%h],R;for(x=v+1;x<=C.end;x++){const L=t[x%h];R=pS(i.setContext(Gc(s,{type:"segment",p0:D,p1:L,p0DataIndex:(x-1)%h,p1DataIndex:x%h,datasetIndex:l}))),y3(R,y)&&T(v,x-1,C.loop,y),D=L,y=R}v<x-1&&T(v,x-1,C.loop,y)}return f}function pS(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function y3(n,e){if(!e)return!1;const t=[],i=function(s,a){return c0(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function op(n,e,t){return n.options.clip?n[t]:e[t]}function _3(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:op(t,e,"left"),right:op(t,e,"right"),top:op(i,e,"top"),bottom:op(i,e,"bottom")}:e}function pI(n,e){const t=e._clip;if(t.disabled)return!1;const i=_3(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class b3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const a=t.listeners[s],l=t.duration;a.forEach(u=>u({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(i-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=eI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,u=!1,h;for(;l>=0;--l)h=a[l],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(e),u=!0):(a[l]=a[a.length-1],a.pop());u&&(s.draw(),this._notify(s,i,e,"progress")),a.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var yo=new b3;const gS="transparent",v3={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=rS(n||gS),s=i.valid&&rS(e||gS);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class x3{constructor(e,t,i,s){const a=t[i];s=sp([e.to,s,a,e.from]);const l=sp([e.from,a,s]);this._active=!0,this._fn=e.fn||v3[e.type||typeof l],this._easing=ef[e.easing]||ef.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=sp([e.to,t,s,e.from]),this._from=sp([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,a=this._from,l=this._loop,u=this._to;let h;if(this._active=a!==u&&(l||t<i),!this._active){this._target[s]=u,this._notify(!0);return}if(t<0){this._target[s]=a;return}h=t/i%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[s]=this._fn(a,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class gI{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!jt(e))return;const t=Object.keys(Bn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const a=e[s];if(!jt(a))return;const l={};for(const u of t)l[u]=a[u];(Qn(a.properties)&&a.properties||[s]).forEach(u=>{(u===s||!i.has(u))&&i.set(u,l)})})}_animateOptions(e,t){const i=t.options,s=w3(e,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&E3(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){const i=this._properties,s=[],a=e.$animations||(e.$animations={}),l=Object.keys(t),u=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(e,t));continue}const y=t[f];let v=a[f];const x=i.get(f);if(v)if(x&&v.active()){v.update(x,y,u);continue}else v.cancel();if(!x||!x.duration){e[f]=y;continue}a[f]=v=new x3(x,e,f,y),s.push(v)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return yo.add(this._chart,i),!0}}function E3(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function w3(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function yS(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:i?a:s,end:i?s:a}}function T3(n,e,t){if(t===!1)return!1;const i=yS(n,t),s=yS(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function S3(n){let e,t,i,s;return jt(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function yI(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,a;for(s=0,a=i.length;s<a;++s)t.push(i[s].index);return t}function _S(n,e,t,i={}){const s=n.keys,a=i.mode==="single";let l,u,h,f;if(e===null)return;let y=!1;for(l=0,u=s.length;l<u;++l){if(h=+s[l],h===t){if(y=!0,i.all)continue;break}f=n.values[h],Gi(f)&&(a||e===0||Ta(e)===Ta(f))&&(e+=f)}return!y&&!i.all?0:e}function A3(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let h,f,y;for(h=0,f=l.length;h<f;++h)y=l[h],u[h]={[s]:y,[a]:n[y]};return u}function q_(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function C3(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function R3(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function I3(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function bS(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(t&&a>0||!t&&a<0)return s.index}return null}function vS(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:a,vScale:l,index:u}=i,h=a.axis,f=l.axis,y=C3(a,l,i),v=e.length;let x;for(let T=0;T<v;++T){const C=e[T],{[h]:D,[f]:R}=C,L=C._stacks||(C._stacks={});x=L[f]=I3(s,y,D),x[u]=R,x._top=bS(x,l,!0,i.type),x._bottom=bS(x,l,!1,i.type);const $=x._visualValues||(x._visualValues={});$[u]=R}}function W_(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function k3(n,e){return Gc(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function N3(n,e,t){return Gc(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Id(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const a=s._stacks;if(!a||a[i]===void 0||a[i][t]===void 0)return;delete a[i][t],a[i]._visualValues!==void 0&&a[i]._visualValues[t]!==void 0&&delete a[i]._visualValues[t]}}}const G_=n=>n==="reset"||n==="none",xS=(n,e)=>e?n:Object.assign({},n),D3=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:yI(t,!0),values:null};class Yg{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=q_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Id(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(v,x,T,C)=>v==="x"?x:v==="r"?C:T,a=t.xAxisID=Et(i.xAxisID,W_(e,"x")),l=t.yAxisID=Et(i.yAxisID,W_(e,"y")),u=t.rAxisID=Et(i.rAxisID,W_(e,"r")),h=t.indexAxis,f=t.iAxisID=s(h,a,l,u),y=t.vAxisID=s(h,l,a,u);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(u),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&nS(this._data,this),e._stacked&&Id(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(jt(t)){const s=this._cachedMeta;this._data=A3(t,s)}else if(i!==t){if(i){nS(i,this);const s=this._cachedMeta;Id(s),s._parsed=[]}t&&Object.isExtensible(t)&&mF(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=t._stacked;t._stacked=q_(t.vScale,t),t.stack!==i.stack&&(s=!0,Id(t),t.stack=i.stack),this._resyncElements(e),(s||a!==t._stacked)&&(vS(this,t._parsed),t._stacked=q_(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,u=a.axis;let h=e===0&&t===s.length?!0:i._sorted,f=e>0&&i._parsed[e-1],y,v,x;if(this._parsing===!1)i._parsed=s,i._sorted=!0,x=s;else{Qn(s[e])?x=this.parseArrayData(i,s,e,t):jt(s[e])?x=this.parseObjectData(i,s,e,t):x=this.parsePrimitiveData(i,s,e,t);const T=()=>v[u]===null||f&&v[u]<f[u];for(y=0;y<t;++y)i._parsed[y+e]=v=x[y],h&&(T()&&(h=!1),f=v);i._sorted=h}l&&vS(this,x)}parsePrimitiveData(e,t,i,s){const{iScale:a,vScale:l}=e,u=a.axis,h=l.axis,f=a.getLabels(),y=a===l,v=new Array(s);let x,T,C;for(x=0,T=s;x<T;++x)C=x+i,v[x]={[u]:y||a.parse(f[C],C),[h]:l.parse(t[C],C)};return v}parseArrayData(e,t,i,s){const{xScale:a,yScale:l}=e,u=new Array(s);let h,f,y,v;for(h=0,f=s;h<f;++h)y=h+i,v=t[y],u[h]={x:a.parse(v[0],y),y:l.parse(v[1],y)};return u}parseObjectData(e,t,i,s){const{xScale:a,yScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,f=new Array(s);let y,v,x,T;for(y=0,v=s;y<v;++y)x=y+i,T=t[x],f[y]={x:a.parse(Fc(T,u),x),y:l.parse(Fc(T,h),x)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,a=this._cachedMeta,l=t[e.axis],u={keys:yI(s,!0),values:t._stacks[e.axis]._visualValues};return _S(u,l,a.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const a=i[t.axis];let l=a===null?NaN:a;const u=s&&i._stacks[t.axis];s&&u&&(s.values=u,l=_S(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&e===i.iScale,l=s.length,u=this._getOtherScale(e),h=D3(t,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:v}=R3(u);let x,T;function C(){T=s[x];const D=T[u.axis];return!Gi(T[e.axis])||y>D||v<D}for(x=0;x<l&&!(!C()&&(this.updateRangeFromParsed(f,e,T,h),a));++x);if(a){for(x=l-1;x>=0;--x)if(!C()){this.updateRangeFromParsed(f,e,T,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=t.length;s<a;++s)l=t[s][e.axis],Gi(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=S3(Et(this.options.clip,T3(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],a=t.chartArea,l=[],u=this._drawStart||0,h=this._drawCount||s.length-u,f=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(e,a,u,h),y=u;y<u+h;++y){const v=s[y];v.hidden||(v.active&&f?l.push(v):v.draw(e,a))}for(y=0;y<l.length;++y)l[y].draw(e,a)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];a=l.$context||(l.$context=N3(this.getContext(),e,l)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=k3(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=i,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",a=this._cachedDataOpts,l=e+"-"+t,u=a[l],h=this.enableOptionSharing&&pf(i);if(u)return xS(u,h);const f=this.chart.config,y=f.datasetElementScopeKeys(this._type,e),v=s?[`${e}Hover`,"hover",e,""]:[e,""],x=f.getOptionScopes(this.getDataset(),y),T=Object.keys(Bn.elements[e]),C=()=>this.getContext(i,s,t),D=f.resolveNamedOptions(x,T,C,v);return D.$shared&&(D.$shared=h,a[l]=Object.freeze(xS(D,h))),D}_resolveAnimations(e,t,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${t}`,u=a[l];if(u)return u;let h;if(s.options.animation!==!1){const y=this.chart.config,v=y.datasetAnimationScopeKeys(this._type,t),x=y.getOptionScopes(this.getDataset(),v);h=y.createResolver(x,this.getContext(e,i,t))}const f=new gI(s,h&&h.animations);return h&&h._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||G_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(t,a)||a!==s;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:l}}updateElement(e,t,i,s){G_(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!G_(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const a=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[u,h,f]of this._syncList)this[u](h,f);this._syncList=[];const s=i.length,a=t.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,t,i=!0){const s=this._cachedMeta,a=s.data,l=e+t;let u;const h=f=>{for(f.length+=t,u=f.length-1;u>=l;u--)f[u]=f[u-t]};for(h(a),u=e;u<l;++u)a[u]=new this.dataElementType;this._parsing&&h(s._parsed),this.parse(e,t),i&&this.updateElements(a,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&Id(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function O3(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,a=t.length;s<a;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=JR(i.sort((s,a)=>s-a))}return n._cache.$bar}function M3(n){const e=n.iScale,t=O3(e,n.type);let i=e._length,s,a,l,u;const h=()=>{l===32767||l===-32768||(pf(u)&&(i=Math.min(i,Math.abs(l-u)||i)),u=l)};for(s=0,a=t.length;s<a;++s)l=e.getPixelForValue(t[s]),h();for(u=void 0,s=0,a=e.ticks.length;s<a;++s)l=e.getPixelForTick(s),h();return i}function P3(n,e,t,i){const s=t.barThickness;let a,l;return Qt(s)?(a=e.min*t.categoryPercentage,l=t.barPercentage):(a=s*i,l=1),{chunk:a/i,ratio:l,start:e.pixels[n]-a/2}}function j3(n,e,t,i){const s=e.pixels,a=s[n];let l=n>0?s[n-1]:null,u=n<s.length-1?s[n+1]:null;const h=t.categoryPercentage;l===null&&(l=a-(u===null?e.end-e.start:u-a)),u===null&&(u=a+a-l);const f=a-(a-Math.min(l,u))/2*h;return{chunk:Math.abs(u-l)/2*h/i,ratio:t.barPercentage,start:f}}function L3(n,e,t,i){const s=t.parse(n[0],i),a=t.parse(n[1],i),l=Math.min(s,a),u=Math.max(s,a);let h=l,f=u;Math.abs(l)>Math.abs(u)&&(h=u,f=l),e[t.axis]=f,e._custom={barStart:h,barEnd:f,start:s,end:a,min:l,max:u}}function _I(n,e,t,i){return Qn(n)?L3(n,e,t,i):e[t.axis]=t.parse(n,i),e}function ES(n,e,t,i){const s=n.iScale,a=n.vScale,l=s.getLabels(),u=s===a,h=[];let f,y,v,x;for(f=t,y=t+i;f<y;++f)x=e[f],v={},v[s.axis]=u||s.parse(l[f],f),h.push(_I(x,v,a,f));return h}function K_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function V3(n,e,t){return n!==0?Ta(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function F3(n){let e,t,i,s,a;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",a="start"):(s="start",a="end"),{start:t,end:i,reverse:e,top:s,bottom:a}}function U3(n,e,t,i){let s=e.borderSkipped;const a={};if(!s){n.borderSkipped=a;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:h,top:f,bottom:y}=F3(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=f:(t._bottom||0)===i?s=y:(a[wS(y,l,u,h)]=!0,s=f)),a[wS(s,l,u,h)]=!0,n.borderSkipped=a}function wS(n,e,t,i){return i?(n=z3(n,e,t),n=TS(n,t,e)):n=TS(n,e,t),n}function z3(n,e,t){return n===e?t:n===t?e:n}function TS(n,e,t){return n==="start"?e:n==="end"?t:n}function B3(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class H3 extends Yg{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,s){return ES(e,t,i,s)}parseArrayData(e,t,i,s){return ES(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:a,vScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,f=a.axis==="x"?u:h,y=l.axis==="x"?u:h,v=[];let x,T,C,D;for(x=i,T=i+s;x<T;++x)D=t[x],C={},C[a.axis]=a.parse(Fc(D,f),x),v.push(_I(Fc(D,y),C,l,x));return v}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,a=this.getParsed(e),l=a._custom,u=K_(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const a=s==="reset",{index:l,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),f=u.isHorizontal(),y=this._getRuler(),{sharedOptions:v,includeOptions:x}=this._getSharedOptions(t,s);for(let T=t;T<t+i;T++){const C=this.getParsed(T),D=a||Qt(C[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(T),R=this._calculateBarIndexPixels(T,y),L=(C._stacks||{})[u.axis],$={horizontal:f,base:D.base,enableBorderRadius:!L||K_(C._custom)||l===L._top||l===L._bottom,x:f?D.head:R.center,y:f?R.center:D.head,height:f?R.size:Math.abs(D.size),width:f?Math.abs(D.size):R.size};x&&($.options=v||this.resolveDataElementOptions(T,e[T].active?"active":s));const q=$.options||e[T].options;U3($,q,L,l),B3($,q,y.ratio),this.updateElement(e[T],T,$,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),a=i.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(t),h=u&&u[i.axis],f=y=>{const v=y._parsed.find(T=>T[i.axis]===h),x=v&&v[y.vScale.axis];if(Qt(x)||isNaN(x))return!0};for(const y of s)if(!(t!==void 0&&f(y))&&((a===!1||l.indexOf(y.stack)===-1||a===void 0&&y.stack===void 0)&&l.push(y.stack),y.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[Et(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const s=this._getStacks(e,i),a=t!==void 0?s.indexOf(t):-1;return a===-1?s.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let a,l;for(a=0,l=t.data.length;a<l;++a)s.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const u=e.barThickness;return{min:u||M3(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:a,minBarLength:l}}=this,u=a||0,h=this.getParsed(e),f=h._custom,y=K_(f);let v=h[t.axis],x=0,T=i?this.applyStack(t,h,i):v,C,D;T!==v&&(x=T-v,T=v),y&&(v=f.barStart,T=f.barEnd-f.barStart,v!==0&&Ta(v)!==Ta(f.barEnd)&&(x=0),x+=v);const R=!Qt(a)&&!y?a:x;let L=t.getPixelForValue(R);if(this.chart.getDataVisibility(e)?C=t.getPixelForValue(x+T):C=L,D=C-L,Math.abs(D)<l){D=V3(D,t,u)*l,v===u&&(L-=D/2);const $=t.getPixelForDecimal(0),q=t.getPixelForDecimal(1),Z=Math.min($,q),Y=Math.max($,q);L=Math.max(Math.min(L,Y),Z),C=L+D,i&&!y&&(h._stacks[t.axis]._visualValues[s]=t.getValueForPixel(C)-t.getValueForPixel(L))}if(L===t.getPixelForValue(u)){const $=Ta(D)*t.getLineWidthForValue(u)/2;L+=$,D-=$}return{size:D,base:L,head:C,center:C+D/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,a=s.skipNull,l=Et(s.maxBarThickness,1/0);let u,h;const f=this._getAxisCount();if(t.grouped){const y=a?this._getStackCount(e):t.stackCount,v=s.barThickness==="flex"?j3(e,t,s,y*f):P3(e,t,s,y*f),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,T=this._getAxis().indexOf(Et(x,this.getFirstScaleIdForIndexAxis())),C=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+T;u=v.start+v.chunk*C+v.chunk/2,h=Math.min(l,v.chunk*v.ratio)}else u=i.getPixelForValue(this.getParsed(e)[i.axis],e),h=Math.min(l,t.min*t.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let a=0;for(;a<s;++a)this.getParsed(a)[t.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}function $3(n,e,t){let i=1,s=1,a=0,l=0;if(e<Sn){const u=n,h=u+e,f=Math.cos(u),y=Math.sin(u),v=Math.cos(h),x=Math.sin(h),T=(q,Z,Y)=>yf(q,u,h,!0)?1:Math.max(Z,Z*t,Y,Y*t),C=(q,Z,Y)=>yf(q,u,h,!0)?-1:Math.min(Z,Z*t,Y,Y*t),D=T(0,f,v),R=T(ci,y,x),L=C(rn,f,v),$=C(rn+ci,y,x);i=(D-L)/2,s=(R-$)/2,a=-(D+L)/2,l=-(R+$)/2}return{ratioX:i,ratioY:s,offsetX:a,offsetY:l}}class q3 extends Yg{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((a,l)=>{const h=e.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:s,lineWidth:h.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let a=h=>+i[h];if(jt(i[e])){const{key:h="value"}=this._parsing;a=f=>+Fc(i[f],h)}let l,u;for(l=e,u=e+t;l<u;++l)s._parsed[l]=a(l)}}_getRotation(){return To(this.options.rotation-90)}_getCircumference(){return To(this.options.circumference)}_getRotationExtents(){let e=Sn,t=-Sn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),l=s._getCircumference();e=Math.min(e,a),t=Math.max(t,a+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,a=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(Q4(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:y,rotation:v}=this._getRotationExtents(),{ratioX:x,ratioY:T,offsetX:C,offsetY:D}=$3(v,y,h),R=(i.width-l)/x,L=(i.height-l)/T,$=Math.max(Math.min(R,L)/2,0),q=KR(this.options.radius,$),Z=Math.max(q*h,0),Y=(q-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=C*q,this.offsetY=D*q,s.total=this.calculateTotal(),this.outerRadius=q-Y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Y*f,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/Sn)}updateElements(e,t,i,s){const a=s==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,y=(u.left+u.right)/2,v=(u.top+u.bottom)/2,x=a&&f.animateScale,T=x?0:this.innerRadius,C=x?0:this.outerRadius,{sharedOptions:D,includeOptions:R}=this._getSharedOptions(t,s);let L=this._getRotation(),$;for($=0;$<t;++$)L+=this._circumference($,a);for($=t;$<t+i;++$){const q=this._circumference($,a),Z=e[$],Y={x:y+this.offsetX,y:v+this.offsetY,startAngle:L,endAngle:L+q,circumference:q,outerRadius:C,innerRadius:T};R&&(Y.options=D||this.resolveDataElementOptions($,Z.active?"active":s)),L+=q,this.updateElement(Z,$,Y,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const a=e._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Sn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=u0(t._parsed[e],i.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,a,l,u,h;if(!e){for(s=0,a=i.data.datasets.length;s<a;++s)if(i.isDatasetVisible(s)){l=i.getDatasetMeta(s),e=l.data,u=l.controller;break}}if(!e)return 0;for(s=0,a=e.length;s<a;++s)h=u.resolveDataElementOptions(s),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const a=this.resolveDataElementOptions(i);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Et(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class W3 extends Yg{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=t,l=this.chart._animationsDisabled;let{start:u,count:h}=yF(t,s,l);this._drawStart=u,this._drawCount=h,_F(t)&&(u=0,h=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},e),this.updateElements(s,u,h,e)}updateElements(e,t,i,s){const a=s==="reset",{iScale:l,vScale:u,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:y,includeOptions:v}=this._getSharedOptions(t,s),x=l.axis,T=u.axis,{spanGaps:C,segment:D}=this.options,R=gf(C)?C:Number.POSITIVE_INFINITY,L=this.chart._animationsDisabled||a||s==="none",$=t+i,q=e.length;let Z=t>0&&this.getParsed(t-1);for(let Y=0;Y<q;++Y){const J=e[Y],F=L?J:{};if(Y<t||Y>=$){F.skip=!0;continue}const I=this.getParsed(Y),O=Qt(I[T]),U=F[x]=l.getPixelForValue(I[x],Y),H=F[T]=a||O?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,I,h):I[T],Y);F.skip=isNaN(U)||isNaN(H)||O,F.stop=Y>0&&Math.abs(I[x]-Z[x])>R,D&&(F.parsed=I,F.raw=f.data[Y]),v&&(F.options=y||this.resolveDataElementOptions(Y,J.active?"active":s)),L||this.updateElement(J,Y,F,s),Z=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const a=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,a,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function wc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class y0{static override(e){Object.assign(y0.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return wc()}parse(){return wc()}format(){return wc()}add(){return wc()}diff(){return wc()}startOf(){return wc()}endOf(){return wc()}}var G3={_date:y0};function K3(n,e,t,i){const{controller:s,data:a,_sorted:l}=n,u=s._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&a.length){const f=u._reversePixels?dF:kc;if(i){if(s._sharedOptions){const y=a[0],v=typeof y.getRange=="function"&&y.getRange(e);if(v){const x=f(a,e,t-v),T=f(a,e,t+v);return{lo:x.lo,hi:T.hi}}}}else{const y=f(a,e,t);if(h){const{vScale:v}=s._cachedMeta,{_parsed:x}=n,T=x.slice(0,y.lo+1).reverse().findIndex(D=>!Qt(D[v.axis]));y.lo-=Math.max(0,T);const C=x.slice(y.hi).findIndex(D=>!Qt(D[v.axis]));y.hi+=Math.max(0,C)}return y}}return{lo:0,hi:a.length-1}}function Xg(n,e,t,i,s){const a=n.getSortedVisibleDatasetMetas(),l=t[e];for(let u=0,h=a.length;u<h;++u){const{index:f,data:y}=a[u],{lo:v,hi:x}=K3(a[u],e,l,s);for(let T=v;T<=x;++T){const C=y[T];C.skip||i(C,f,T)}}}function Y3(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const a=e?Math.abs(i.x-s.x):0,l=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function Y_(n,e,t,i,s){const a=[];return!s&&!n.isPointInArea(e)||Xg(n,t,e,function(u,h,f){!s&&!_f(u,n.chartArea,0)||u.inRange(e.x,e.y,i)&&a.push({element:u,datasetIndex:h,index:f})},!0),a}function X3(n,e,t,i){let s=[];function a(l,u,h){const{startAngle:f,endAngle:y}=l.getProps(["startAngle","endAngle"],i),{angle:v}=QR(l,{x:e.x,y:e.y});yf(v,f,y)&&s.push({element:l,datasetIndex:u,index:h})}return Xg(n,t,e,a),s}function Q3(n,e,t,i,s,a){let l=[];const u=Y3(t);let h=Number.POSITIVE_INFINITY;function f(y,v,x){const T=y.inRange(e.x,e.y,s);if(i&&!T)return;const C=y.getCenterPoint(s);if(!(!!a||n.isPointInArea(C))&&!T)return;const R=u(e,C);R<h?(l=[{element:y,datasetIndex:v,index:x}],h=R):R===h&&l.push({element:y,datasetIndex:v,index:x})}return Xg(n,t,e,f),l}function X_(n,e,t,i,s,a){return!a&&!n.isPointInArea(e)?[]:t==="r"&&!i?X3(n,e,t,s):Q3(n,e,t,i,s,a)}function SS(n,e,t,i,s){const a=[],l=t==="x"?"inXRange":"inYRange";let u=!1;return Xg(n,t,e,(h,f,y)=>{h[l]&&h[l](e[t],s)&&(a.push({element:h,datasetIndex:f,index:y}),u=u||h.inRange(e.x,e.y,s))}),i&&!u?[]:a}var Z3={modes:{index(n,e,t,i){const s=Sc(e,n),a=t.axis||"x",l=t.includeInvisible||!1,u=t.intersect?Y_(n,s,a,i,l):X_(n,s,a,!1,i,l),h=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const y=u[0].index,v=f.data[y];v&&!v.skip&&h.push({element:v,datasetIndex:f.index,index:y})}),h):[]},dataset(n,e,t,i){const s=Sc(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;let u=t.intersect?Y_(n,s,a,i,l):X_(n,s,a,!1,i,l);if(u.length>0){const h=u[0].datasetIndex,f=n.getDatasetMeta(h).data;u=[];for(let y=0;y<f.length;++y)u.push({element:f[y],datasetIndex:h,index:y})}return u},point(n,e,t,i){const s=Sc(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;return Y_(n,s,a,i,l)},nearest(n,e,t,i){const s=Sc(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;return X_(n,s,a,t.intersect,i,l)},x(n,e,t,i){const s=Sc(e,n);return SS(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=Sc(e,n);return SS(n,s,"y",t.intersect,i)}}};const bI=["left","top","right","bottom"];function kd(n,e){return n.filter(t=>t.pos===e)}function AS(n,e){return n.filter(t=>bI.indexOf(t.pos)===-1&&t.box.axis===e)}function Nd(n,e){return n.sort((t,i)=>{const s=e?i:t,a=e?t:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function J3(n){const e=[];let t,i,s,a,l,u;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:a,options:{stack:l,stackWeight:u=1}}=s,e.push({index:t,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&a+l,stackWeight:u});return e}function eU(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:a}=t;if(!i||!bI.includes(s))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return e}function tU(n,e){const t=eU(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let a,l,u;for(a=0,l=n.length;a<l;++a){u=n[a];const{fullSize:h}=u.box,f=t[u.stack],y=f&&u.stackWeight/f.weight;u.horizontal?(u.width=y?y*i:h&&e.availableWidth,u.height=s):(u.width=i,u.height=y?y*s:h&&e.availableHeight)}return t}function nU(n){const e=J3(n),t=Nd(e.filter(f=>f.box.fullSize),!0),i=Nd(kd(e,"left"),!0),s=Nd(kd(e,"right")),a=Nd(kd(e,"top"),!0),l=Nd(kd(e,"bottom")),u=AS(e,"x"),h=AS(e,"y");return{fullSize:t,leftAndTop:i.concat(a),rightAndBottom:s.concat(h).concat(l).concat(u),chartArea:kd(e,"chartArea"),vertical:i.concat(s).concat(h),horizontal:a.concat(l).concat(u)}}function CS(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function vI(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function iU(n,e,t,i){const{pos:s,box:a}=t,l=n.maxPadding;if(!jt(s)){t.size&&(n[s]-=t.size);const v=i[t.stack]||{size:0,count:1};v.size=Math.max(v.size,t.horizontal?a.height:a.width),t.size=v.size/v.count,n[s]+=t.size}a.getPadding&&vI(l,a.getPadding());const u=Math.max(0,e.outerWidth-CS(l,n,"left","right")),h=Math.max(0,e.outerHeight-CS(l,n,"top","bottom")),f=u!==n.w,y=h!==n.h;return n.w=u,n.h=h,t.horizontal?{same:f,other:y}:{same:y,other:f}}function sU(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function rU(n,e){const t=e.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{a[l]=Math.max(e[l],t[l])}),a}return i(n?["left","right"]:["top","bottom"])}function Bd(n,e,t,i){const s=[];let a,l,u,h,f,y;for(a=0,l=n.length,f=0;a<l;++a){u=n[a],h=u.box,h.update(u.width||e.w,u.height||e.h,rU(u.horizontal,e));const{same:v,other:x}=iU(e,t,u,i);f|=v&&s.length,y=y||x,h.fullSize||s.push(u)}return f&&Bd(s,e,t,i)||y}function lp(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function RS(n,e,t,i){const s=t.padding;let{x:a,y:l}=e;for(const u of n){const h=u.box,f=i[u.stack]||{placed:0,weight:1},y=u.stackWeight/f.weight||1;if(u.horizontal){const v=e.w*y,x=f.size||h.height;pf(f.start)&&(l=f.start),h.fullSize?lp(h,s.left,l,t.outerWidth-s.right-s.left,x):lp(h,e.left+f.placed,l,v,x),f.start=l,f.placed+=v,l=h.bottom}else{const v=e.h*y,x=f.size||h.width;pf(f.start)&&(a=f.start),h.fullSize?lp(h,a,s.top,x,t.outerHeight-s.bottom-s.top):lp(h,a,e.top+f.placed,x,v),f.start=a,f.placed+=v,a=h.right}}e.x=a,e.y=l}var mr={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=gr(n.options.layout.padding),a=Math.max(e-s.width,0),l=Math.max(t-s.height,0),u=nU(n.boxes),h=u.vertical,f=u.horizontal;sn(n.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const y=h.reduce((D,R)=>R.box.options&&R.box.options.display===!1?D:D+1,0)||1,v=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/y,hBoxMaxHeight:l/2}),x=Object.assign({},s);vI(x,gr(i));const T=Object.assign({maxPadding:x,w:a,h:l,x:s.left,y:s.top},s),C=tU(h.concat(f),v);Bd(u.fullSize,T,v,C),Bd(h,T,v,C),Bd(f,T,v,C)&&Bd(h,T,v,C),sU(T),RS(u.leftAndTop,T,v,C),T.x+=T.w,T.y+=T.h,RS(u.rightAndBottom,T,v,C),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},sn(u.chartArea,D=>{const R=D.box;Object.assign(R,n.chartArea),R.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class xI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class aU extends xI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const kp="$chartjs",oU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IS=n=>n===null||n==="";function lU(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[kp]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",IS(s)){const a=dS(n,"width");a!==void 0&&(n.width=a)}if(IS(i))if(n.style.height==="")n.height=n.width/(e||2);else{const a=dS(n,"height");a!==void 0&&(n.height=a)}return n}const EI=o3?{passive:!0}:!1;function cU(n,e,t){n&&n.addEventListener(e,t,EI)}function uU(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,EI)}function hU(n,e){const t=oU[n.type]||n.type,{x:i,y:s}=Sc(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function hg(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function dU(n,e,t){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||hg(u.addedNodes,i),l=l&&!hg(u.removedNodes,i);l&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function fU(n,e,t){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||hg(u.removedNodes,i),l=l&&!hg(u.addedNodes,i);l&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const vf=new Map;let kS=0;function wI(){const n=window.devicePixelRatio;n!==kS&&(kS=n,vf.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function mU(n,e){vf.size||window.addEventListener("resize",wI),vf.set(n,e)}function pU(n){vf.delete(n),vf.size||window.removeEventListener("resize",wI)}function gU(n,e,t){const i=n.canvas,s=i&&g0(i);if(!s)return;const a=tI((u,h)=>{const f=s.clientWidth;t(u,h),f<s.clientWidth&&t()},window),l=new ResizeObserver(u=>{const h=u[0],f=h.contentRect.width,y=h.contentRect.height;f===0&&y===0||a(f,y)});return l.observe(s),mU(n,a),l}function Q_(n,e,t){t&&t.disconnect(),e==="resize"&&pU(n)}function yU(n,e,t){const i=n.canvas,s=tI(a=>{n.ctx!==null&&t(hU(a,n))},n);return cU(i,e,s),s}class _U extends xI{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(lU(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[kp])return!1;const i=t[kp].initial;["height","width"].forEach(a=>{const l=i[a];Qt(l)?t.removeAttribute(a):t.setAttribute(a,l)});const s=i.style||{};return Object.keys(s).forEach(a=>{t.style[a]=s[a]}),t.width=t.width,delete t[kp],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),l={attach:dU,detach:fU,resize:gU}[t]||yU;s[t]=l(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:Q_,detach:Q_,resize:Q_}[t]||uU)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return a3(e,t,i,s)}isAttached(e){const t=e&&g0(e);return!!(t&&t.isConnected)}}function bU(n){return!p0()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?aU:_U}let Oo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return gf(this.x)&&gf(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}};function vU(n,e){const t=n.options.ticks,i=xU(n),s=Math.min(t.maxTicksLimit||i,i),a=t.major.enabled?wU(e):[],l=a.length,u=a[0],h=a[l-1],f=[];if(l>s)return TU(e,f,a,l/s),f;const y=EU(a,e,s);if(l>0){let v,x;const T=l>1?Math.round((h-u)/(l-1)):null;for(cp(e,f,y,Qt(T)?0:u-T,u),v=0,x=l-1;v<x;v++)cp(e,f,y,a[v],a[v+1]);return cp(e,f,y,h,Qt(T)?e.length:h+T),f}return cp(e,f,y),f}function xU(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function EU(n,e,t){const i=SU(n),s=e.length/t;if(!i)return Math.max(s,1);const a=rF(i);for(let l=0,u=a.length-1;l<u;l++){const h=a[l];if(h>s)return h}return Math.max(s,1)}function wU(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function TU(n,e,t,i){let s=0,a=t[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(e.push(n[l]),s++,a=t[s*i])}function cp(n,e,t,i,s){const a=Et(i,0),l=Math.min(Et(s,n.length),n.length);let u=0,h,f,y;for(t=Math.ceil(t),s&&(h=s-i,t=h/Math.floor(h/t)),y=a;y<0;)u++,y=Math.round(a+u*t);for(f=Math.max(a,0);f<l;f++)f===y&&(e.push(n[f]),u++,y=Math.round(a+u*t))}function SU(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const AU=n=>n==="left"?"right":n==="right"?"left":n,NS=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,DS=(n,e)=>Math.min(e||n,n);function OS(n,e){const t=[],i=n.length/e,s=n.length;let a=0;for(;a<s;a+=i)t.push(n[Math.floor(a)]);return t}function CU(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),a=n._startPixel,l=n._endPixel,u=1e-6;let h=n.getPixelForTick(s),f;if(!(t&&(i===1?f=Math.max(h-a,l-h):e===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(s-1))/2,h+=s<e?f:-f,h<a-u||h>l+u)))return h}function RU(n,e){sn(n,t=>{const i=t.gc,s=i.length/2;let a;if(s>e){for(a=0;a<s;++a)delete t.data[i[a]];i.splice(0,s)}})}function Dd(n){return n.drawTicks?n.tickLength:0}function MS(n,e){if(!n.display)return 0;const t=qi(n.font,e),i=gr(n.padding);return(Qn(n.text)?n.text.length:1)*t.lineHeight+i.height}function IU(n,e){return Gc(n,{scale:e,type:"scale"})}function kU(n,e,t){return Gc(n,{tick:t,index:e,type:"tick"})}function NU(n,e,t){let i=l0(n);return(t&&e!=="right"||!t&&e==="right")&&(i=AU(i)),i}function DU(n,e,t,i){const{top:s,left:a,bottom:l,right:u,chart:h}=n,{chartArea:f,scales:y}=h;let v=0,x,T,C;const D=l-s,R=u-a;if(n.isHorizontal()){if(T=zi(i,a,u),jt(t)){const L=Object.keys(t)[0],$=t[L];C=y[L].getPixelForValue($)+D-e}else t==="center"?C=(f.bottom+f.top)/2+D-e:C=NS(n,t,e);x=u-a}else{if(jt(t)){const L=Object.keys(t)[0],$=t[L];T=y[L].getPixelForValue($)-R+e}else t==="center"?T=(f.left+f.right)/2-R+e:T=NS(n,t,e);C=zi(i,l,s),v=t==="left"?-ci:ci}return{titleX:T,titleY:C,maxWidth:x,rotation:v}}class ph extends Oo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=da(e,Number.POSITIVE_INFINITY),t=da(t,Number.NEGATIVE_INFINITY),i=da(i,Number.POSITIVE_INFINITY),s=da(s,Number.NEGATIVE_INFINITY),{min:da(e,i),max:da(t,s),minDefined:Gi(e),maxDefined:Gi(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),l;if(s&&a)return{min:t,max:i};const u=this.getMatchingVisibleMetas();for(let h=0,f=u.length;h<f;++h)l=u[h].controller.getMinMax(this,e),s||(t=Math.min(t,l.min)),a||(i=Math.max(i,l.max));return t=a&&t>i?i:t,i=s&&t>i?t:i,{min:da(t,da(i,t)),max:da(i,da(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_n(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:a,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=VF(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?OS(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=vU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_n(this.options.afterUpdate,[this])}beforeSetDimensions(){_n(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_n(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),_n(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_n(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,a;for(i=0,s=e.length;i<s;i++)a=e[i],a.label=_n(t.callback,[a.value,i,e],this)}afterTickToLabelConversion(){_n(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_n(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=DS(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,a=t.maxRotation;let l=s,u,h,f;if(!this._isVisible()||!t.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const y=this._getLabelSizes(),v=y.widest.width,x=y.highest.height,T=$i(this.chart.width-v,0,this.maxWidth);u=e.offset?this.maxWidth/i:T/(i-1),v+6>u&&(u=T/(i-(e.offset?.5:1)),h=this.maxHeight-Dd(e.grid)-t.padding-MS(e.title,this.chart.options.font),f=Math.sqrt(v*v+x*x),l=cF(Math.min(Math.asin($i((y.highest.height+6)/u,-1,1)),Math.asin($i(h/f,-1,1))-Math.asin($i(x/f,-1,1)))),l=Math.max(s,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){_n(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_n(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:a}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const h=MS(s,t.options.font);if(u?(e.width=this.maxWidth,e.height=Dd(a)+h):(e.height=this.maxHeight,e.width=Dd(a)+h),i.display&&this.ticks.length){const{first:f,last:y,widest:v,highest:x}=this._getLabelSizes(),T=i.padding*2,C=To(this.labelRotation),D=Math.cos(C),R=Math.sin(C);if(u){const L=i.mirror?0:R*v.width+D*x.height;e.height=Math.min(this.maxHeight,e.height+L+T)}else{const L=i.mirror?0:D*v.width+R*x.height;e.width=Math.min(this.maxWidth,e.width+L+T)}this._calculatePadding(f,y,R,D)}}this._handleMargins(),u?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:a,padding:l},position:u}=this.options,h=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,T=0;h?f?(x=s*e.width,T=i*t.height):(x=i*e.height,T=s*t.width):a==="start"?T=t.width:a==="end"?x=e.width:a!=="inner"&&(x=e.width/2,T=t.width/2),this.paddingLeft=Math.max((x-y+l)*this.width/(this.width-y),0),this.paddingRight=Math.max((T-v+l)*this.width/(this.width-v),0)}else{let y=t.height/2,v=e.height/2;a==="start"?(y=0,v=e.height):a==="end"&&(y=t.height,v=0),this.paddingTop=y+l,this.paddingBottom=v+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_n(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Qt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=OS(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:a}=this,l=[],u=[],h=Math.floor(t/DS(t,i));let f=0,y=0,v,x,T,C,D,R,L,$,q,Z,Y;for(v=0;v<t;v+=h){if(C=e[v].label,D=this._resolveTickFontOptions(v),s.font=R=D.string,L=a[R]=a[R]||{data:{},gc:[]},$=D.lineHeight,q=Z=0,!Qt(C)&&!Qn(C))q=oS(s,L.data,L.gc,q,C),Z=$;else if(Qn(C))for(x=0,T=C.length;x<T;++x)Y=C[x],!Qt(Y)&&!Qn(Y)&&(q=oS(s,L.data,L.gc,q,Y),Z+=$);l.push(q),u.push(Z),f=Math.max(q,f),y=Math.max(Z,y)}RU(a,t);const J=l.indexOf(f),F=u.indexOf(y),I=O=>({width:l[O]||0,height:u[O]||0});return{first:I(0),last:I(t-1),widest:I(J),highest:I(F),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return hF(this._alignToPixels?Ec(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=kU(this.getContext(),e,i))}return this.$context||(this.$context=IU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=To(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),a=this._getLabelSizes(),l=e.autoSkipPadding||0,u=a?a.widest.width+l:0,h=a?a.highest.height+l:0;return this.isHorizontal()?h*i>u*s?u/i:h/s:h*s<u*i?h/i:u/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:a,position:l,border:u}=s,h=a.offset,f=this.isHorizontal(),v=this.ticks.length+(h?1:0),x=Dd(a),T=[],C=u.setContext(this.getContext()),D=C.display?C.width:0,R=D/2,L=function(G){return Ec(i,G,D)};let $,q,Z,Y,J,F,I,O,U,H,B,z;if(l==="top")$=L(this.bottom),F=this.bottom-x,O=$-R,H=L(e.top)+R,z=e.bottom;else if(l==="bottom")$=L(this.top),H=e.top,z=L(e.bottom)-R,F=$+R,O=this.top+x;else if(l==="left")$=L(this.right),J=this.right-x,I=$-R,U=L(e.left)+R,B=e.right;else if(l==="right")$=L(this.left),U=e.left,B=L(e.right)-R,J=$+R,I=this.left+x;else if(t==="x"){if(l==="center")$=L((e.top+e.bottom)/2+.5);else if(jt(l)){const G=Object.keys(l)[0],ie=l[G];$=L(this.chart.scales[G].getPixelForValue(ie))}H=e.top,z=e.bottom,F=$+R,O=F+x}else if(t==="y"){if(l==="center")$=L((e.left+e.right)/2);else if(jt(l)){const G=Object.keys(l)[0],ie=l[G];$=L(this.chart.scales[G].getPixelForValue(ie))}J=$-R,I=J-x,U=e.left,B=e.right}const Le=Et(s.ticks.maxTicksLimit,v),_e=Math.max(1,Math.ceil(v/Le));for(q=0;q<v;q+=_e){const G=this.getContext(q),ie=a.setContext(G),Ee=u.setContext(G),Ve=ie.lineWidth,P=ie.color,fe=Ee.dash||[],Re=Ee.dashOffset,pe=ie.tickWidth,Ne=ie.tickColor,qe=ie.tickBorderDash||[],je=ie.tickBorderDashOffset;Z=CU(this,q,h),Z!==void 0&&(Y=Ec(i,Z,Ve),f?J=I=U=B=Y:F=O=H=z=Y,T.push({tx1:J,ty1:F,tx2:I,ty2:O,x1:U,y1:H,x2:B,y2:z,width:Ve,color:P,borderDash:fe,borderDashOffset:Re,tickWidth:pe,tickColor:Ne,tickBorderDash:qe,tickBorderDashOffset:je}))}return this._ticksLength=v,this._borderValue=$,T}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:a}=i,l=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:f,padding:y,mirror:v}=a,x=Dd(i.grid),T=x+y,C=v?-y:T,D=-To(this.labelRotation),R=[];let L,$,q,Z,Y,J,F,I,O,U,H,B,z="middle";if(s==="top")J=this.bottom-C,F=this._getXAxisLabelAlignment();else if(s==="bottom")J=this.top+C,F=this._getXAxisLabelAlignment();else if(s==="left"){const _e=this._getYAxisLabelAlignment(x);F=_e.textAlign,Y=_e.x}else if(s==="right"){const _e=this._getYAxisLabelAlignment(x);F=_e.textAlign,Y=_e.x}else if(t==="x"){if(s==="center")J=(e.top+e.bottom)/2+T;else if(jt(s)){const _e=Object.keys(s)[0],G=s[_e];J=this.chart.scales[_e].getPixelForValue(G)+T}F=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")Y=(e.left+e.right)/2-T;else if(jt(s)){const _e=Object.keys(s)[0],G=s[_e];Y=this.chart.scales[_e].getPixelForValue(G)}F=this._getYAxisLabelAlignment(x).textAlign}t==="y"&&(h==="start"?z="top":h==="end"&&(z="bottom"));const Le=this._getLabelSizes();for(L=0,$=u.length;L<$;++L){q=u[L],Z=q.label;const _e=a.setContext(this.getContext(L));I=this.getPixelForTick(L)+a.labelOffset,O=this._resolveTickFontOptions(L),U=O.lineHeight,H=Qn(Z)?Z.length:1;const G=H/2,ie=_e.color,Ee=_e.textStrokeColor,Ve=_e.textStrokeWidth;let P=F;l?(Y=I,F==="inner"&&(L===$-1?P=this.options.reverse?"left":"right":L===0?P=this.options.reverse?"right":"left":P="center"),s==="top"?f==="near"||D!==0?B=-H*U+U/2:f==="center"?B=-Le.highest.height/2-G*U+U:B=-Le.highest.height+U/2:f==="near"||D!==0?B=U/2:f==="center"?B=Le.highest.height/2-G*U:B=Le.highest.height-H*U,v&&(B*=-1),D!==0&&!_e.showLabelBackdrop&&(Y+=U/2*Math.sin(D))):(J=I,B=(1-H)*U/2);let fe;if(_e.showLabelBackdrop){const Re=gr(_e.backdropPadding),pe=Le.heights[L],Ne=Le.widths[L];let qe=B-Re.top,je=0-Re.left;switch(z){case"middle":qe-=pe/2;break;case"bottom":qe-=pe;break}switch(F){case"center":je-=Ne/2;break;case"right":je-=Ne;break;case"inner":L===$-1?je-=Ne:L>0&&(je-=Ne/2);break}fe={left:je,top:qe,width:Ne+Re.width,height:pe+Re.height,color:_e.backdropColor}}R.push({label:Z,font:O,textOffset:B,options:{rotation:D,color:ie,strokeColor:Ee,strokeWidth:Ve,textAlign:P,textBaseline:z,translation:[Y,J],backdrop:fe}})}return R}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-To(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,l=this._getLabelSizes(),u=e+a,h=l.widest.width;let f,y;return t==="left"?s?(y=this.right+a,i==="near"?f="left":i==="center"?(f="center",y+=h/2):(f="right",y+=h)):(y=this.right-u,i==="near"?f="right":i==="center"?(f="center",y-=h/2):(f="left",y=this.left)):t==="right"?s?(y=this.left+a,i==="near"?f="right":i==="center"?(f="center",y-=h/2):(f="left",y-=h)):(y=this.left+u,i==="near"?f="left":i==="center"?(f="center",y+=h/2):(f="right",y=this.right)):f="right",{textAlign:f,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:a,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,a,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(a=>a.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,l;const u=(h,f,y)=>{!y.width||!y.color||(i.save(),i.lineWidth=y.width,i.strokeStyle=y.color,i.setLineDash(y.borderDash||[]),i.lineDashOffset=y.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(t.display)for(a=0,l=s.length;a<l;++a){const h=s[a];t.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const u=s.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,y,v,x;this.isHorizontal()?(f=Ec(e,this.left,l)-l/2,y=Ec(e,this.right,u)+u/2,v=x=h):(v=Ec(e,this.top,l)-l/2,x=Ec(e,this.bottom,u)+u/2,f=y=h),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(f,v),t.lineTo(y,x),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Wg(i,s);const a=this.getLabelItems(e);for(const l of a){const u=l.options,h=l.font,f=l.label,y=l.textOffset;bf(i,f,0,y,h,u)}s&&Gg(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const a=qi(i.font),l=gr(i.padding),u=i.align;let h=a.lineHeight/2;t==="bottom"||t==="center"||jt(t)?(h+=l.bottom,Qn(i.text)&&(h+=a.lineHeight*(i.text.length-1))):h+=l.top;const{titleX:f,titleY:y,maxWidth:v,rotation:x}=DU(this,h,t,u);bf(e,i.text,0,0,a,{color:i.color,maxWidth:v,rotation:x,textAlign:NU(u,t,s),textBaseline:"middle",translation:[f,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Et(e.grid&&e.grid.z,-1),s=Et(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ph.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,l;for(a=0,l=t.length;a<l;++a){const u=t[a];u[i]===this.id&&(!e||u.type===e)&&s.push(u)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return qi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class up{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;PU(t)&&(i=this.register(t));const s=this.items,a=e.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in s||(s[a]=e,OU(e,l,i),this.override&&Bn.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in Bn[s]&&(delete Bn[s][i],this.override&&delete Uc[i])}}function OU(n,e,t){const i=mf(Object.create(null),[t?Bn.get(t):{},Bn.get(e),n.defaults]);Bn.set(e,i),n.defaultRoutes&&MU(e,n.defaultRoutes),n.descriptors&&Bn.describe(e,n.descriptors)}function MU(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),a=[n].concat(i).join("."),l=e[t].split("."),u=l.pop(),h=l.join(".");Bn.route(a,s,h,u)})}function PU(n){return"id"in n&&"defaults"in n}class jU{constructor(){this.controllers=new up(Yg,"datasets",!0),this.elements=new up(Oo,"elements"),this.plugins=new up(Object,"plugins"),this.scales=new up(ph,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(e,a,s):sn(s,l=>{const u=i||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,t,i){const s=a0(e);_n(i["before"+s],[],i),t[e](i),_n(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var ma=new jU;class LU{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=s?this._descriptors(e).filter(s):this._descriptors(e),l=this._notify(a,e,t,i);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,i,s){s=s||{};for(const a of e){const l=a.plugin,u=l[i],h=[t,s,a.options];if(_n(u,h,l)===!1&&s.cancelable)return!1}return!0}invalidate(){Qt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Et(i.options&&i.options.plugins,{}),a=VU(i);return s===!1&&!t?[]:UU(e,a,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(a,l)=>a.filter(u=>!l.some(h=>u.plugin.id===h.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function VU(n){const e={},t=[],i=Object.keys(ma.plugins.items);for(let a=0;a<i.length;a++)t.push(ma.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const l=s[a];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function FU(n,e){return!e&&n===!1?null:n===!0?{}:n}function UU(n,{plugins:e,localIds:t},i,s){const a=[],l=n.getContext();for(const u of e){const h=u.id,f=FU(i[h],s);f!==null&&a.push({plugin:u,options:zU(n.config,{plugin:u,local:t[h]},f,l)})}return a}function zU(n,{plugin:e,local:t},i,s){const a=n.pluginScopeKeys(e),l=n.getOptionScopes(i,a);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $b(n,e){const t=Bn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function BU(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function HU(n,e){return n===e?"_index_":"_value_"}function PS(n){if(n==="x"||n==="y"||n==="r")return n}function $U(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function qb(n,...e){if(PS(n))return n;for(const t of e){const i=t.axis||$U(t.position)||n.length>1&&PS(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function jS(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function qU(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return jS(n,"x",t[0])||jS(n,"y",t[0])}return{}}function WU(n,e){const t=Uc[n.type]||{scales:{}},i=e.scales||{},s=$b(n.type,e),a=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!jt(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=qb(l,u,qU(l,n),Bn.scales[u.type]),f=HU(h,s),y=t.scales||{};a[l]=Zd(Object.create(null),[{axis:h},u,y[h],y[f]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,h=l.indexAxis||$b(u,e),y=(Uc[u]||{}).scales||{};Object.keys(y).forEach(v=>{const x=BU(v,h),T=l[x+"AxisID"]||x;a[T]=a[T]||Object.create(null),Zd(a[T],[{axis:x},i[T],y[v]])})}),Object.keys(a).forEach(l=>{const u=a[l];Zd(u,[Bn.scales[u.type],Bn.scale])}),a}function TI(n){const e=n.options||(n.options={});e.plugins=Et(e.plugins,{}),e.scales=WU(n,e)}function SI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function GU(n){return n=n||{},n.data=SI(n.data),TI(n),n}const LS=new Map,AI=new Set;function hp(n,e){let t=LS.get(n);return t||(t=e(),LS.set(n,t),AI.add(t)),t}const Od=(n,e,t)=>{const i=Fc(e,t);i!==void 0&&n.add(i)};class KU{constructor(e){this._config=GU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=SI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),TI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return hp(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return hp(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return hp(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return hp(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:a}=this,l=this._cachedScopes(e,i),u=l.get(t);if(u)return u;const h=new Set;t.forEach(y=>{e&&(h.add(e),y.forEach(v=>Od(h,e,v))),y.forEach(v=>Od(h,s,v)),y.forEach(v=>Od(h,Uc[a]||{},v)),y.forEach(v=>Od(h,Bn,v)),y.forEach(v=>Od(h,Bb,v))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),AI.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,Uc[t]||{},Bn.datasets[t]||{},{type:t},Bn,Bb]}resolveNamedOptions(e,t,i,s=[""]){const a={$shared:!0},{resolver:l,subPrefixes:u}=VS(this._resolverCache,e,s);let h=l;if(XU(l,t)){a.$shared=!1,i=$l(i)?i():i;const f=this.createResolver(e,i,u);h=ih(l,i,f)}for(const f of t)a[f]=h[f];return a}createResolver(e,t,i=[""],s){const{resolver:a}=VS(this._resolverCache,e,i);return jt(t)?ih(a,t,void 0,s):a}}function VS(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let a=i.get(s);return a||(a={resolver:d0(e,t),subPrefixes:t.filter(u=>!u.toLowerCase().includes("hover"))},i.set(s,a)),a}const YU=n=>jt(n)&&Object.getOwnPropertyNames(n).some(e=>$l(n[e]));function XU(n,e){const{isScriptable:t,isIndexable:i}=rI(n);for(const s of e){const a=t(s),l=i(s),u=(l||a)&&n[s];if(a&&($l(u)||YU(u))||l&&Qn(u))return!0}return!1}var QU="4.5.0";const ZU=["top","bottom","left","right","chartArea"];function FS(n,e){return n==="top"||n==="bottom"||ZU.indexOf(n)===-1&&e==="x"}function US(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function zS(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),_n(t&&t.onComplete,[n],e)}function JU(n){const e=n.chart,t=e.options.animation;_n(t&&t.onProgress,[n],e)}function CI(n){return p0()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Np={},BS=n=>{const e=CI(n);return Object.values(Np).filter(t=>t.canvas===e).pop()};function ez(n,e,t){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=e){const l=n[s];delete n[s],(t>0||a>e)&&(n[a+t]=l)}}}function tz(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}let Qg=class{static defaults=Bn;static instances=Np;static overrides=Uc;static registry=ma;static version=QU;static getChart=BS;static register(...e){ma.add(...e),HS()}static unregister(...e){ma.remove(...e),HS()}constructor(e,t){const i=this.config=new KU(t),s=CI(e),a=BS(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||bU(s)),this.platform.updateConfig(i);const u=this.platform.acquireContext(s,l.aspectRatio),h=u&&u.canvas,f=h&&h.height,y=h&&h.width;if(this.id=X4(),this.ctx=u,this.canvas=h,this.width=y,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pF(v=>this.update(v),l.resizeDelay||0),this._dataChanges=[],Np[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}yo.listen(this,"complete",zS),yo.listen(this,"progress",JU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:a}=this;return Qt(e)?t&&a?a:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ma}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lS(this.canvas,this.ctx),this}stop(){return yo.stop(this),this}resize(e,t){yo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,e,t,a),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,hS(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),_n(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};sn(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let a=[];t&&(a=a.concat(Object.keys(t).map(l=>{const u=t[l],h=qb(l,u),f=h==="r",y=h==="x";return{options:u,dposition:f?"chartArea":y?"bottom":"left",dtype:f?"radialLinear":y?"category":"linear"}}))),sn(a,l=>{const u=l.options,h=u.id,f=qb(h,u),y=Et(u.type,l.dtype);(u.position===void 0||FS(u.position,f)!==FS(l.dposition))&&(u.position=l.dposition),s[h]=!0;let v=null;if(h in i&&i[h].type===y)v=i[h];else{const x=ma.getScale(y);v=new x({id:h,type:y,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(u,e)}),sn(s,(l,u)=>{l||delete i[u]}),sn(i,l=>{mr.configure(this,l,l.options),mr.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,a)=>s.index-a.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(US("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const a=t[i];let l=this.getDatasetMeta(i);const u=a.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=a.indexAxis||$b(u,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=ma.getController(u),{datasetElementType:f,dataElementType:y}=Bn.datasets[u];Object.assign(h,{dataElementType:ma.getElement(y),datasetElementType:f&&ma.getElement(f)}),l.controller=new h(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){sn(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,y=this.data.datasets.length;f<y;f++){const{controller:v}=this.getDatasetMeta(f),x=!s&&a.indexOf(v)===-1;v.buildOrUpdateElements(x),l=Math.max(+v.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||sn(a,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(US("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){sn(this.scales,e=>{mr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!ZT(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of t){const l=i==="_removeElements"?-a:a;ez(e,s,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=a=>new Set(e.filter(l=>l[0]===a).map((l,u)=>u+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<t;a++)if(!ZT(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mr.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],sn(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,$l(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yo.has(this)?this.attached&&!yo.running(this)&&yo.start(this):(this.draw(),zS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,a;for(s=0,a=t.length;s<a;++s){const l=t[s];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=pI(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Wg(t,s),e.controller.draw(),s&&Gg(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return _f(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const a=Z3.modes[t];return typeof a=="function"?a(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(a=>a&&a._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Gc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",a=this.getDatasetMeta(e),l=a.controller._resolveAnimations(void 0,s);pf(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(a,{visible:i}),this.update(u=>u.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),yo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lS(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Np[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(a,l)=>{t.addEventListener(this,a,l),e[a]=l},s=(a,l,u)=>{a.offsetX=l,a.offsetY=u,this._eventHandler(a)};sn(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},s=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},a=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const u=()=>{s("attach",u),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",u)},t.isAttached(this.canvas)?u():l()}unbindEvents(){sn(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},sn(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let a,l,u,h;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){l=e[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:a,index:l})=>{const u=this.getDatasetMeta(a);if(!u)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:u.data[l],index:l}});!ag(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,a=(h,f)=>h.filter(y=>!f.some(v=>y.datasetIndex===v.datasetIndex&&y.index===v.index)),l=a(t,e),u=i?e:a(e,t);l.length&&this.updateHoverStyle(l,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:a}=this,l=t,u=this._getActiveElements(e,s,i,l),h=nF(e),f=tz(e,this._lastEvent,i,h);i&&(this._lastEvent=null,_n(a.onHover,[e,u,this],this),h&&_n(a.onClick,[e,u,this],this));const y=!ag(u,s);return(y||t)&&(this._active=u,this._updateHoverStyles(u,s,t)),this._lastEvent=f,y}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}};function HS(){return sn(Qg.instances,n=>n._plugins.invalidate())}function nz(n,e,t){const{startAngle:i,x:s,y:a,outerRadius:l,innerRadius:u,options:h}=e,{borderWidth:f,borderJoinStyle:y}=h,v=Math.min(f/l,Vs(i-t));if(n.beginPath(),n.arc(s,a,l-f/2,i+v/2,t-v/2),u>0){const x=Math.min(f/u,Vs(i-t));n.arc(s,a,u+f/2,t-x/2,i+x/2,!0)}else{const x=Math.min(f/2,l*Vs(i-t));if(y==="round")n.arc(s,a,x,t-rn/2,i+rn/2,!0);else if(y==="bevel"){const T=2*x*x,C=-T*Math.cos(t+rn/2)+s,D=-T*Math.sin(t+rn/2)+a,R=T*Math.cos(i+rn/2)+s,L=T*Math.sin(i+rn/2)+a;n.lineTo(C,D),n.lineTo(R,L)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function iz(n,e,t){const{startAngle:i,pixelMargin:s,x:a,y:l,outerRadius:u,innerRadius:h}=e;let f=s/u;n.beginPath(),n.arc(a,l,u,i-f,t+f),h>s?(f=s/h,n.arc(a,l,h,t+f,i-f,!0)):n.arc(a,l,s,t+ci,i-ci),n.closePath(),n.clip()}function sz(n){return h0(n,["outerStart","outerEnd","innerStart","innerEnd"])}function rz(n,e,t,i){const s=sz(n.options.borderRadius),a=(t-e)/2,l=Math.min(a,i*e/2),u=h=>{const f=(t-Math.min(a,h))*i/2;return $i(h,0,Math.min(a,f))};return{outerStart:u(s.outerStart),outerEnd:u(s.outerEnd),innerStart:$i(s.innerStart,0,l),innerEnd:$i(s.innerEnd,0,l)}}function Ou(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function dg(n,e,t,i,s,a){const{x:l,y:u,startAngle:h,pixelMargin:f,innerRadius:y}=e,v=Math.max(e.outerRadius+i+t-f,0),x=y>0?y+i+t+f:0;let T=0;const C=s-h;if(i){const _e=y>0?y-i:0,G=v>0?v-i:0,ie=(_e+G)/2,Ee=ie!==0?C*ie/(ie+i):C;T=(C-Ee)/2}const D=Math.max(.001,C*v-t/rn)/v,R=(C-D)/2,L=h+R+T,$=s-R-T,{outerStart:q,outerEnd:Z,innerStart:Y,innerEnd:J}=rz(e,x,v,$-L),F=v-q,I=v-Z,O=L+q/F,U=$-Z/I,H=x+Y,B=x+J,z=L+Y/H,Le=$-J/B;if(n.beginPath(),a){const _e=(O+U)/2;if(n.arc(l,u,v,O,_e),n.arc(l,u,v,_e,U),Z>0){const Ve=Ou(I,U,l,u);n.arc(Ve.x,Ve.y,Z,U,$+ci)}const G=Ou(B,$,l,u);if(n.lineTo(G.x,G.y),J>0){const Ve=Ou(B,Le,l,u);n.arc(Ve.x,Ve.y,J,$+ci,Le+Math.PI)}const ie=($-J/x+(L+Y/x))/2;if(n.arc(l,u,x,$-J/x,ie,!0),n.arc(l,u,x,ie,L+Y/x,!0),Y>0){const Ve=Ou(H,z,l,u);n.arc(Ve.x,Ve.y,Y,z+Math.PI,L-ci)}const Ee=Ou(F,L,l,u);if(n.lineTo(Ee.x,Ee.y),q>0){const Ve=Ou(F,O,l,u);n.arc(Ve.x,Ve.y,q,L-ci,O)}}else{n.moveTo(l,u);const _e=Math.cos(O)*v+l,G=Math.sin(O)*v+u;n.lineTo(_e,G);const ie=Math.cos(U)*v+l,Ee=Math.sin(U)*v+u;n.lineTo(ie,Ee)}n.closePath()}function az(n,e,t,i,s){const{fullCircles:a,startAngle:l,circumference:u}=e;let h=e.endAngle;if(a){dg(n,e,t,i,h,s);for(let f=0;f<a;++f)n.fill();isNaN(u)||(h=l+(u%Sn||Sn))}return dg(n,e,t,i,h,s),n.fill(),h}function oz(n,e,t,i,s){const{fullCircles:a,startAngle:l,circumference:u,options:h}=e,{borderWidth:f,borderJoinStyle:y,borderDash:v,borderDashOffset:x,borderRadius:T}=h,C=h.borderAlign==="inner";if(!f)return;n.setLineDash(v||[]),n.lineDashOffset=x,C?(n.lineWidth=f*2,n.lineJoin=y||"round"):(n.lineWidth=f,n.lineJoin=y||"bevel");let D=e.endAngle;if(a){dg(n,e,t,i,D,s);for(let R=0;R<a;++R)n.stroke();isNaN(u)||(D=l+(u%Sn||Sn))}C&&iz(n,e,D),h.selfJoin&&D-l>=rn&&T===0&&y!=="miter"&&nz(n,e,D),a||(dg(n,e,t,i,D,s),n.stroke())}class lz extends Oo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:a,distance:l}=QR(s,{x:e,y:t}),{startAngle:u,endAngle:h,innerRadius:f,outerRadius:y,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),x=(this.options.spacing+this.options.borderWidth)/2,T=Et(v,h-u),C=yf(a,u,h)&&u!==h,D=T>=Sn||C,R=So(l,f+x,y+x);return D&&R}getCenterPoint(e){const{x:t,y:i,startAngle:s,endAngle:a,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,y=(s+a)/2,v=(l+u+f+h)/2;return{x:t+Math.cos(y)*v,y:i+Math.sin(y)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/4,a=(t.spacing||0)/2,l=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Sn?Math.floor(i/Sn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*s,Math.sin(u)*s);const h=1-Math.sin(Math.min(rn,i||0)),f=s*h;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,az(e,this,f,a,l),oz(e,this,f,a,l),e.restore()}}function RI(n,e,t=e){n.lineCap=Et(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Et(t.borderDash,e.borderDash)),n.lineDashOffset=Et(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Et(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Et(t.borderWidth,e.borderWidth),n.strokeStyle=Et(t.borderColor,e.borderColor)}function cz(n,e,t){n.lineTo(t.x,t.y)}function uz(n){return n.stepped?IF:n.tension||n.cubicInterpolationMode==="monotone"?kF:cz}function II(n,e,t={}){const i=n.length,{start:s=0,end:a=i-1}=t,{start:l,end:u}=e,h=Math.max(s,l),f=Math.min(a,u),y=s<l&&a<l||s>u&&a>u;return{count:i,start:h,loop:e.loop,ilen:f<h&&!y?i+f-h:f-h}}function hz(n,e,t,i){const{points:s,options:a}=e,{count:l,start:u,loop:h,ilen:f}=II(s,t,i),y=uz(a);let{move:v=!0,reverse:x}=i||{},T,C,D;for(T=0;T<=f;++T)C=s[(u+(x?f-T:T))%l],!C.skip&&(v?(n.moveTo(C.x,C.y),v=!1):y(n,D,C,x,a.stepped),D=C);return h&&(C=s[(u+(x?f:0))%l],y(n,D,C,x,a.stepped)),!!h}function dz(n,e,t,i){const s=e.points,{count:a,start:l,ilen:u}=II(s,t,i),{move:h=!0,reverse:f}=i||{};let y=0,v=0,x,T,C,D,R,L;const $=Z=>(l+(f?u-Z:Z))%a,q=()=>{D!==R&&(n.lineTo(y,R),n.lineTo(y,D),n.lineTo(y,L))};for(h&&(T=s[$(0)],n.moveTo(T.x,T.y)),x=0;x<=u;++x){if(T=s[$(x)],T.skip)continue;const Z=T.x,Y=T.y,J=Z|0;J===C?(Y<D?D=Y:Y>R&&(R=Y),y=(v*y+Z)/++v):(q(),n.lineTo(Z,Y),C=J,v=0,D=R=Y),L=Y}q()}function Wb(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?dz:hz}function fz(n){return n.stepped?l3:n.tension||n.cubicInterpolationMode==="monotone"?c3:Ac}function mz(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),RI(n,e.options),n.stroke(s)}function pz(n,e,t,i){const{segments:s,options:a}=e,l=Wb(e);for(const u of s)RI(n,a,u.style),n.beginPath(),l(n,e,u,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const gz=typeof Path2D=="function";function yz(n,e,t,i){gz&&!e.options.segment?mz(n,e,t,i):pz(n,e,t,i)}class Zg extends Oo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;e3(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=p3(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],a=this.points,l=mI(this,{property:t,start:s,end:s});if(!l.length)return;const u=[],h=fz(i);let f,y;for(f=0,y=l.length;f<y;++f){const{start:v,end:x}=l[f],T=a[v],C=a[x];if(T===C){u.push(T);continue}const D=Math.abs((s-T[t])/(C[t]-T[t])),R=h(T,C,D,i.stepped);R[t]=e[t],u.push(R)}return u.length===1?u[0]:u}pathSegment(e,t,i){return Wb(this)(e,this,t,i)}path(e,t,i){const s=this.segments,a=Wb(this);let l=this._loop;t=t||0,i=i||this.points.length-t;for(const u of s)l&=a(e,this,u,{start:t,end:t+i-1});return!!l}draw(e,t,i,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),yz(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function $S(n,e,t,i){const s=n.options,{[t]:a}=n.getProps([t],i);return Math.abs(e-a)<s.radius+s.hitRadius}class _z extends Oo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(t-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return $S(this,e,"x",t)}inYRange(e,t){return $S(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!_f(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Hb(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function kI(n,e){const{x:t,y:i,base:s,width:a,height:l}=n.getProps(["x","y","base","width","height"],e);let u,h,f,y,v;return n.horizontal?(v=l/2,u=Math.min(t,s),h=Math.max(t,s),f=i-v,y=i+v):(v=a/2,u=t-v,h=t+v,f=Math.min(i,s),y=Math.max(i,s)),{left:u,top:f,right:h,bottom:y}}function Rl(n,e,t,i){return n?0:$i(e,t,i)}function bz(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,a=sI(i);return{t:Rl(s.top,a.top,0,t),r:Rl(s.right,a.right,0,e),b:Rl(s.bottom,a.bottom,0,t),l:Rl(s.left,a.left,0,e)}}function vz(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,a=Ku(s),l=Math.min(e,t),u=n.borderSkipped,h=i||jt(s);return{topLeft:Rl(!h||u.top||u.left,a.topLeft,0,l),topRight:Rl(!h||u.top||u.right,a.topRight,0,l),bottomLeft:Rl(!h||u.bottom||u.left,a.bottomLeft,0,l),bottomRight:Rl(!h||u.bottom||u.right,a.bottomRight,0,l)}}function xz(n){const e=kI(n),t=e.right-e.left,i=e.bottom-e.top,s=bz(n,t/2,i/2),a=vz(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:a},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function Z_(n,e,t,i){const s=e===null,a=t===null,u=n&&!(s&&a)&&kI(n,i);return u&&(s||So(e,u.left,u.right))&&(a||So(t,u.top,u.bottom))}function Ez(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function wz(n,e){n.rect(e.x,e.y,e.w,e.h)}function J_(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,a=(n.x+n.w!==t.x+t.w?e:0)-i,l=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+a,h:n.h+l,radius:n.radius}}class Tz extends Oo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:a,outer:l}=xz(this),u=Ez(l.radius)?cg:wz;e.save(),(l.w!==a.w||l.h!==a.h)&&(e.beginPath(),u(e,J_(l,t,a)),e.clip(),u(e,J_(a,-t,l)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),u(e,J_(a,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return Z_(this,e,t,i)}inXRange(e,t){return Z_(this,e,null,t)}inYRange(e,t){return Z_(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+s)/2:t,y:a?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function Sz(n,e,t){const i=n.segments,s=n.points,a=e.points,l=[];for(const u of i){let{start:h,end:f}=u;f=Jg(h,f,s);const y=Gb(t,s[h],s[f],u.loop);if(!e.segments){l.push({source:u,target:y,start:s[h],end:s[f]});continue}const v=mI(e,y);for(const x of v){const T=Gb(t,a[x.start],a[x.end],x.loop),C=fI(u,s,T);for(const D of C)l.push({source:D,target:x,start:{[t]:qS(y,T,"start",Math.max)},end:{[t]:qS(y,T,"end",Math.min)}})}}return l}function Gb(n,e,t,i){if(i)return;let s=e[n],a=t[n];return n==="angle"&&(s=Vs(s),a=Vs(a)),{property:n,start:s,end:a}}function Az(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,a=[];return e.segments.forEach(({start:l,end:u})=>{u=Jg(l,u,s);const h=s[l],f=s[u];i!==null?(a.push({x:h.x,y:i}),a.push({x:f.x,y:i})):t!==null&&(a.push({x:t,y:h.y}),a.push({x:t,y:f.y}))}),a}function Jg(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function qS(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function NI(n,e){let t=[],i=!1;return Qn(n)?(i=!0,t=n):t=Az(n,e),t.length?new Zg({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function WS(n){return n&&n.fill!==!1}function Cz(n,e,t){let s=n[e].fill;const a=[e];let l;if(!t)return s;for(;s!==!1&&a.indexOf(s)===-1;){if(!Gi(s))return s;if(l=n[s],!l)return!1;if(l.visible)return s;a.push(s),s=l.fill}return!1}function Rz(n,e,t){const i=Dz(n);if(jt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Gi(s)&&Math.floor(s)===s?Iz(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Iz(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function kz(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:jt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Nz(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:jt(n)?i=n.value:i=e.getBaseValue(),i}function Dz(n){const e=n.options,t=e.fill;let i=Et(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Oz(n){const{scale:e,index:t,line:i}=n,s=[],a=i.segments,l=i.points,u=Mz(e,t);u.push(NI({x:null,y:e.bottom},i));for(let h=0;h<a.length;h++){const f=a[h];for(let y=f.start;y<=f.end;y++)Pz(s,l[y],u)}return new Zg({points:s,options:{}})}function Mz(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const a=i[s];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function Pz(n,e,t){const i=[];for(let s=0;s<t.length;s++){const a=t[s],{first:l,last:u,point:h}=jz(a,e,"x");if(!(!h||l&&u)){if(l)i.unshift(h);else if(n.push(h),!u)break}}n.push(...i)}function jz(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],a=n.segments,l=n.points;let u=!1,h=!1;for(let f=0;f<a.length;f++){const y=a[f],v=l[y.start][t],x=l[y.end][t];if(So(s,v,x)){u=s===v,h=s===x;break}}return{first:u,last:h,point:i}}class DI{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:a,radius:l}=this;return t=t||{start:0,end:Sn},e.arc(s,a,l,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,a=e.angle;return{x:t+Math.cos(a)*s,y:i+Math.sin(a)*s,angle:a}}}function Lz(n){const{chart:e,fill:t,line:i}=n;if(Gi(t))return Vz(e,t);if(t==="stack")return Oz(n);if(t==="shape")return!0;const s=Fz(n);return s instanceof DI?s:NI(s,i)}function Vz(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Fz(n){return(n.scale||{}).getPointPositionForValue?zz(n):Uz(n)}function Uz(n){const{scale:e={},fill:t}=n,i=kz(t,e);if(Gi(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function zz(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,a=i.reverse?e.max:e.min,l=Nz(t,e,a),u=[];if(i.grid.circular){const h=e.getPointPositionForValue(0,a);return new DI({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(l)})}for(let h=0;h<s;++h)u.push(e.getPointPositionForValue(h,l));return u}function eb(n,e,t){const i=Lz(e),{chart:s,index:a,line:l,scale:u,axis:h}=e,f=l.options,y=f.fill,v=f.backgroundColor,{above:x=v,below:T=v}=y||{},C=s.getDatasetMeta(a),D=pI(s,C);i&&l.points.length&&(Wg(n,t),Bz(n,{line:l,target:i,above:x,below:T,area:t,scale:u,axis:h,clip:D}),Gg(n))}function Bz(n,e){const{line:t,target:i,above:s,below:a,area:l,scale:u,clip:h}=e,f=t._loop?"angle":e.axis;n.save();let y=a;a!==s&&(f==="x"?(GS(n,i,l.top),tb(n,{line:t,target:i,color:s,scale:u,property:f,clip:h}),n.restore(),n.save(),GS(n,i,l.bottom)):f==="y"&&(KS(n,i,l.left),tb(n,{line:t,target:i,color:a,scale:u,property:f,clip:h}),n.restore(),n.save(),KS(n,i,l.right),y=s)),tb(n,{line:t,target:i,color:y,scale:u,property:f,clip:h}),n.restore()}function GS(n,e,t){const{segments:i,points:s}=e;let a=!0,l=!1;n.beginPath();for(const u of i){const{start:h,end:f}=u,y=s[h],v=s[Jg(h,f,s)];a?(n.moveTo(y.x,y.y),a=!1):(n.lineTo(y.x,t),n.lineTo(y.x,y.y)),l=!!e.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(v.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function KS(n,e,t){const{segments:i,points:s}=e;let a=!0,l=!1;n.beginPath();for(const u of i){const{start:h,end:f}=u,y=s[h],v=s[Jg(h,f,s)];a?(n.moveTo(y.x,y.y),a=!1):(n.lineTo(t,y.y),n.lineTo(y.x,y.y)),l=!!e.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(t,v.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function tb(n,e){const{line:t,target:i,property:s,color:a,scale:l,clip:u}=e,h=Sz(t,i,s);for(const{source:f,target:y,start:v,end:x}of h){const{style:{backgroundColor:T=a}={}}=f,C=i!==!0;n.save(),n.fillStyle=T,Hz(n,l,u,C&&Gb(s,v,x)),n.beginPath();const D=!!t.pathSegment(n,f);let R;if(C){D?n.closePath():YS(n,i,x,s);const L=!!i.pathSegment(n,y,{move:D,reverse:!0});R=D&&L,R||YS(n,i,v,s)}n.closePath(),n.fill(R?"evenodd":"nonzero"),n.restore()}}function Hz(n,e,t,i){const s=e.chart.chartArea,{property:a,start:l,end:u}=i||{};if(a==="x"||a==="y"){let h,f,y,v;a==="x"?(h=l,f=s.top,y=u,v=s.bottom):(h=s.left,f=l,y=s.right,v=u),n.beginPath(),t&&(h=Math.max(h,t.left),y=Math.min(y,t.right),f=Math.max(f,t.top),v=Math.min(v,t.bottom)),n.rect(h,f,y-h,v-f),n.clip()}}function YS(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var $z={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let a,l,u,h;for(l=0;l<i;++l)a=n.getDatasetMeta(l),u=a.dataset,h=null,u&&u.options&&u instanceof Zg&&(h={visible:n.isDatasetVisible(l),index:l,fill:Rz(u,l,i),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:u}),a.$filler=h,s.push(h);for(l=0;l<i;++l)h=s[l],!(!h||h.fill===!1)&&(h.fill=Cz(s,l,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let l=s.length-1;l>=0;--l){const u=s[l].$filler;u&&(u.line.updateControlPoints(a,u.axis),i&&u.fill&&eb(n.ctx,u,a))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const a=i[s].$filler;WS(a)&&eb(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!WS(i)||t.drawTime!=="beforeDatasetDraw"||eb(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const XS=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},qz=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class QS extends Oo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=_n(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=qi(i.font),a=s.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=XS(i,a);let f,y;t.font=s.string,this.isHorizontal()?(f=this.maxWidth,y=this._fitRows(l,a,u,h)+10):(y=this.maxHeight,f=this._fitCols(l,s,u,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:a,maxWidth:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],y=s+u;let v=e;a.textAlign="left",a.textBaseline="middle";let x=-1,T=-y;return this.legendItems.forEach((C,D)=>{const R=i+t/2+a.measureText(C.text).width;(D===0||f[f.length-1]+R+2*u>l)&&(v+=y,f[f.length-(D>0?0:1)]=0,T+=y,x++),h[D]={left:0,top:T,row:x,width:R,height:s},f[f.length-1]+=R+u}),v}_fitCols(e,t,i,s){const{ctx:a,maxHeight:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],y=l-e;let v=u,x=0,T=0,C=0,D=0;return this.legendItems.forEach((R,L)=>{const{itemWidth:$,itemHeight:q}=Wz(i,t,a,R,s);L>0&&T+q+2*u>y&&(v+=x+u,f.push({width:x,height:T}),C+=x+u,D++,x=T=0),h[L]={left:C,top:T,col:D,width:$,height:q},x=Math.max(x,$),T+=q+u}),v+=x,f.push({width:x,height:T}),v}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:a}}=this,l=Yu(a,this.left,this.width);if(this.isHorizontal()){let u=0,h=zi(i,this.left+s,this.right-this.lineWidths[u]);for(const f of t)u!==f.row&&(u=f.row,h=zi(i,this.left+s,this.right-this.lineWidths[u])),f.top+=this.top+e+s,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+s}else{let u=0,h=zi(i,this.top+e+s,this.bottom-this.columnSizes[u].height);for(const f of t)f.col!==u&&(u=f.col,h=zi(i,this.top+e+s,this.bottom-this.columnSizes[u].height)),f.top=h,f.left+=this.left+s,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Wg(e,this),this._draw(),Gg(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:a,labels:l}=e,u=Bn.color,h=Yu(e.rtl,this.left,this.width),f=qi(l.font),{padding:y}=l,v=f.size,x=v/2;let T;this.drawTitle(),s.textAlign=h.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:C,boxHeight:D,itemHeight:R}=XS(l,v),L=function(J,F,I){if(isNaN(C)||C<=0||isNaN(D)||D<0)return;s.save();const O=Et(I.lineWidth,1);if(s.fillStyle=Et(I.fillStyle,u),s.lineCap=Et(I.lineCap,"butt"),s.lineDashOffset=Et(I.lineDashOffset,0),s.lineJoin=Et(I.lineJoin,"miter"),s.lineWidth=O,s.strokeStyle=Et(I.strokeStyle,u),s.setLineDash(Et(I.lineDash,[])),l.usePointStyle){const U={radius:D*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:O},H=h.xPlus(J,C/2),B=F+x;iI(s,U,H,B,l.pointStyleWidth&&C)}else{const U=F+Math.max((v-D)/2,0),H=h.leftForLtr(J,C),B=Ku(I.borderRadius);s.beginPath(),Object.values(B).some(z=>z!==0)?cg(s,{x:H,y:U,w:C,h:D,radius:B}):s.rect(H,U,C,D),s.fill(),O!==0&&s.stroke()}s.restore()},$=function(J,F,I){bf(s,I.text,J,F+R/2,f,{strikethrough:I.hidden,textAlign:h.textAlign(I.textAlign)})},q=this.isHorizontal(),Z=this._computeTitleHeight();q?T={x:zi(a,this.left+y,this.right-i[0]),y:this.top+y+Z,line:0}:T={x:this.left+y,y:zi(a,this.top+Z+y,this.bottom-t[0].height),line:0},uI(this.ctx,e.textDirection);const Y=R+y;this.legendItems.forEach((J,F)=>{s.strokeStyle=J.fontColor,s.fillStyle=J.fontColor;const I=s.measureText(J.text).width,O=h.textAlign(J.textAlign||(J.textAlign=l.textAlign)),U=C+x+I;let H=T.x,B=T.y;h.setWidth(this.width),q?F>0&&H+U+y>this.right&&(B=T.y+=Y,T.line++,H=T.x=zi(a,this.left+y,this.right-i[T.line])):F>0&&B+Y>this.bottom&&(H=T.x=H+t[T.line].width+y,T.line++,B=T.y=zi(a,this.top+Z+y,this.bottom-t[T.line].height));const z=h.x(H);if(L(z,B,J),H=gF(O,H+C+x,q?H+U:this.right,e.rtl),$(h.x(H),B,J),q)T.x+=U+y;else if(typeof J.text!="string"){const Le=f.lineHeight;T.y+=OI(J,Le)+y}else T.y+=Y}),hI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=qi(t.font),s=gr(t.padding);if(!t.display)return;const a=Yu(e.rtl,this.left,this.width),l=this.ctx,u=t.position,h=i.size/2,f=s.top+h;let y,v=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),y=this.top+f,v=zi(e.align,v,this.right-x);else{const C=this.columnSizes.reduce((D,R)=>Math.max(D,R.height),0);y=f+zi(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const T=zi(u,v,v+x);l.textAlign=a.textAlign(l0(u)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=i.string,bf(l,t.text,T,y,i)}_computeTitleHeight(){const e=this.options.title,t=qi(e.font),i=gr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,a;if(So(e,this.left,this.right)&&So(t,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],So(e,s.left,s.left+s.width)&&So(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!Yz(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,a=qz(s,i);s&&!a&&_n(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!a&&_n(t.onHover,[e,i,this],this)}else i&&_n(t.onClick,[e,i,this],this)}}function Wz(n,e,t,i,s){const a=Gz(i,n,e,t),l=Kz(s,i,e.lineHeight);return{itemWidth:a,itemHeight:l}}function Gz(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,l)=>a.length>l.length?a:l)),e+t.size/2+i.measureText(s).width}function Kz(n,e,t){let i=n;return typeof e.text!="string"&&(i=OI(e,t)),i}function OI(n,e){const t=n.text?n.text.length:0;return e*t}function Yz(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Xz={id:"legend",_element:QS,start(n,e,t){const i=n.legend=new QS({ctx:n.ctx,options:t,chart:n});mr.configure(n,i,t),mr.addBox(n,i)},stop(n){mr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;mr.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:a,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),y=gr(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class MI extends Oo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=Qn(i.text)?i.text.length:1;this._padding=gr(i.padding);const a=s*qi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:a,options:l}=this,u=l.align;let h=0,f,y,v;return this.isHorizontal()?(y=zi(u,i,a),v=t+e,f=a-i):(l.position==="left"?(y=i+e,v=zi(u,s,t),h=rn*-.5):(y=a-e,v=zi(u,t,s),h=rn*.5),f=s-t),{titleX:y,titleY:v,maxWidth:f,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=qi(t.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:h,rotation:f}=this._drawArgs(a);bf(e,t.text,0,0,i,{color:t.color,maxWidth:h,rotation:f,textAlign:l0(t.align),textBaseline:"middle",translation:[l,u]})}}function Qz(n,e){const t=new MI({ctx:n.ctx,options:e,chart:n});mr.configure(n,t,e),mr.addBox(n,t),n.titleBlock=t}var Zz={id:"title",_element:MI,start(n,e,t){Qz(n,t)},stop(n){const e=n.titleBlock;mr.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;mr.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hd={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,a=0;for(e=0,t=n.length;e<t;++e){const u=n[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();i.add(h.x),s+=h.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((u,h)=>u+h)/i.size,y:s/a}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,a,l,u;for(a=0,l=n.length;a<l;++a){const h=n[a].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),y=zb(e,f);y<s&&(s=y,u=h)}}if(u){const h=u.tooltipPosition();t=h.x,i=h.y}return{x:t,y:i}}};function fa(n,e){return e&&(Qn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function _o(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Jz(n,e){const{element:t,datasetIndex:i,index:s}=e,a=n.getDatasetMeta(i).controller,{label:l,value:u}=a.getLabelAndValue(s);return{chart:n,label:l,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:u,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function ZS(n,e){const t=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:l,boxHeight:u}=e,h=qi(e.bodyFont),f=qi(e.titleFont),y=qi(e.footerFont),v=a.length,x=s.length,T=i.length,C=gr(e.padding);let D=C.height,R=0,L=i.reduce((Z,Y)=>Z+Y.before.length+Y.lines.length+Y.after.length,0);if(L+=n.beforeBody.length+n.afterBody.length,v&&(D+=v*f.lineHeight+(v-1)*e.titleSpacing+e.titleMarginBottom),L){const Z=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;D+=T*Z+(L-T)*h.lineHeight+(L-1)*e.bodySpacing}x&&(D+=e.footerMarginTop+x*y.lineHeight+(x-1)*e.footerSpacing);let $=0;const q=function(Z){R=Math.max(R,t.measureText(Z).width+$)};return t.save(),t.font=f.string,sn(n.title,q),t.font=h.string,sn(n.beforeBody.concat(n.afterBody),q),$=e.displayColors?l+2+e.boxPadding:0,sn(i,Z=>{sn(Z.before,q),sn(Z.lines,q),sn(Z.after,q)}),$=0,t.font=y.string,sn(n.footer,q),t.restore(),R+=C.width,{width:R,height:D}}function e9(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function t9(n,e,t,i){const{x:s,width:a}=i,l=t.caretSize+t.caretPadding;if(n==="left"&&s+a+l>e.width||n==="right"&&s-a-l<0)return!0}function n9(n,e,t,i){const{x:s,width:a}=t,{width:l,chartArea:{left:u,right:h}}=n;let f="center";return i==="center"?f=s<=(u+h)/2?"left":"right":s<=a/2?f="left":s>=l-a/2&&(f="right"),t9(f,n,e,t)&&(f="center"),f}function JS(n,e,t){const i=t.yAlign||e.yAlign||e9(n,t);return{xAlign:t.xAlign||e.xAlign||n9(n,e,t,i),yAlign:i}}function i9(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function s9(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function eA(n,e,t,i){const{caretSize:s,caretPadding:a,cornerRadius:l}=n,{xAlign:u,yAlign:h}=t,f=s+a,{topLeft:y,topRight:v,bottomLeft:x,bottomRight:T}=Ku(l);let C=i9(e,u);const D=s9(e,h,f);return h==="center"?u==="left"?C+=f:u==="right"&&(C-=f):u==="left"?C-=Math.max(y,x)+s:u==="right"&&(C+=Math.max(v,T)+s),{x:$i(C,0,i.width-e.width),y:$i(D,0,i.height-e.height)}}function dp(n,e,t){const i=gr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function tA(n){return fa([],_o(n))}function r9(n,e,t){return Gc(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function nA(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const PI={beforeTitle:po,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:po,beforeBody:po,beforeLabel:po,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Qt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:po,afterBody:po,beforeFooter:po,footer:po,afterFooter:po};function ps(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?PI[e].call(t,i):s}class iA extends Oo{static positioners=Hd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,a=new gI(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=r9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=ps(i,"beforeTitle",this,e),a=ps(i,"title",this,e),l=ps(i,"afterTitle",this,e);let u=[];return u=fa(u,_o(s)),u=fa(u,_o(a)),u=fa(u,_o(l)),u}getBeforeBody(e,t){return tA(ps(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return sn(e,a=>{const l={before:[],lines:[],after:[]},u=nA(i,a);fa(l.before,_o(ps(u,"beforeLabel",this,a))),fa(l.lines,ps(u,"label",this,a)),fa(l.after,_o(ps(u,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(e,t){return tA(ps(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=ps(i,"beforeFooter",this,e),a=ps(i,"footer",this,e),l=ps(i,"afterFooter",this,e);let u=[];return u=fa(u,_o(s)),u=fa(u,_o(a)),u=fa(u,_o(l)),u}_createItems(e){const t=this._active,i=this.chart.data,s=[],a=[],l=[];let u=[],h,f;for(h=0,f=t.length;h<f;++h)u.push(Jz(this.chart,t[h]));return e.filter&&(u=u.filter((y,v,x)=>e.filter(y,v,x,i))),e.itemSort&&(u=u.sort((y,v)=>e.itemSort(y,v,i))),sn(u,y=>{const v=nA(e.callbacks,y);s.push(ps(v,"labelColor",this,y)),a.push(ps(v,"labelPointStyle",this,y)),l.push(ps(v,"labelTextColor",this,y))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=u,u}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const u=Hd[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=ZS(this,i),f=Object.assign({},u,h),y=JS(this.chart,i,f),v=eA(i,f,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,a={opacity:1,x:v.x,y:v.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const a=this.getCaretPosition(e,i,s);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:h,topRight:f,bottomLeft:y,bottomRight:v}=Ku(u),{x,y:T}=e,{width:C,height:D}=t;let R,L,$,q,Z,Y;return a==="center"?(Z=T+D/2,s==="left"?(R=x,L=R-l,q=Z+l,Y=Z-l):(R=x+C,L=R+l,q=Z-l,Y=Z+l),$=R):(s==="left"?L=x+Math.max(h,y)+l:s==="right"?L=x+C-Math.max(f,v)-l:L=this.caretX,a==="top"?(q=T,Z=q-l,R=L-l,$=L+l):(q=T+D,Z=q+l,R=L+l,$=L-l),Y=q),{x1:R,x2:L,x3:$,y1:q,y2:Z,y3:Y}}drawTitle(e,t,i){const s=this.title,a=s.length;let l,u,h;if(a){const f=Yu(i.rtl,this.x,this.width);for(e.x=dp(this,i.titleAlign,i),t.textAlign=f.textAlign(i.titleAlign),t.textBaseline="middle",l=qi(i.titleFont),u=i.titleSpacing,t.fillStyle=i.titleColor,t.font=l.string,h=0;h<a;++h)t.fillText(s[h],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,h+1===a&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,t,i,s,a){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:h,boxWidth:f}=a,y=qi(a.bodyFont),v=dp(this,"left",a),x=s.x(v),T=h<y.lineHeight?(y.lineHeight-h)/2:0,C=t.y+T;if(a.usePointStyle){const D={radius:Math.min(f,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},R=s.leftForLtr(x,f)+f/2,L=C+h/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Hb(e,D,R,L),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Hb(e,D,R,L)}else{e.lineWidth=jt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const D=s.leftForLtr(x,f),R=s.leftForLtr(s.xPlus(x,1),f-2),L=Ku(l.borderRadius);Object.values(L).some($=>$!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,cg(e,{x:D,y:C,w:f,h,radius:L}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),cg(e,{x:R,y:C+1,w:f-2,h:h-2,radius:L}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(D,C,f,h),e.strokeRect(D,C,f,h),e.fillStyle=l.backgroundColor,e.fillRect(R,C+1,f-2,h-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:u,boxHeight:h,boxWidth:f,boxPadding:y}=i,v=qi(i.bodyFont);let x=v.lineHeight,T=0;const C=Yu(i.rtl,this.x,this.width),D=function(I){t.fillText(I,C.x(e.x+T),e.y+x/2),e.y+=x+a},R=C.textAlign(l);let L,$,q,Z,Y,J,F;for(t.textAlign=l,t.textBaseline="middle",t.font=v.string,e.x=dp(this,R,i),t.fillStyle=i.bodyColor,sn(this.beforeBody,D),T=u&&R!=="right"?l==="center"?f/2+y:f+2+y:0,Z=0,J=s.length;Z<J;++Z){for(L=s[Z],$=this.labelTextColors[Z],t.fillStyle=$,sn(L.before,D),q=L.lines,u&&q.length&&(this._drawColorBox(t,e,Z,C,i),x=Math.max(v.lineHeight,h)),Y=0,F=q.length;Y<F;++Y)D(q[Y]),x=v.lineHeight;sn(L.after,D)}T=0,x=v.lineHeight,sn(this.afterBody,D),e.y-=a}drawFooter(e,t,i){const s=this.footer,a=s.length;let l,u;if(a){const h=Yu(i.rtl,this.x,this.width);for(e.x=dp(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=h.textAlign(i.footerAlign),t.textBaseline="middle",l=qi(i.footerFont),t.fillStyle=i.footerColor,t.font=l.string,u=0;u<a;++u)t.fillText(s[u],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:a,yAlign:l}=this,{x:u,y:h}=e,{width:f,height:y}=i,{topLeft:v,topRight:x,bottomLeft:T,bottomRight:C}=Ku(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(u+v,h),l==="top"&&this.drawCaret(e,t,i,s),t.lineTo(u+f-x,h),t.quadraticCurveTo(u+f,h,u+f,h+x),l==="center"&&a==="right"&&this.drawCaret(e,t,i,s),t.lineTo(u+f,h+y-C),t.quadraticCurveTo(u+f,h+y,u+f-C,h+y),l==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(u+T,h+y),t.quadraticCurveTo(u,h+y,u,h+y-T),l==="center"&&a==="left"&&this.drawCaret(e,t,i,s),t.lineTo(u,h+v),t.quadraticCurveTo(u,h,u+v,h),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=Hd[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=ZS(this,e),h=Object.assign({},l,this._size),f=JS(t,e,h),y=eA(e,h,f,t);(s._to!==y.x||a._to!==y.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=gr(t.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,s,t),uI(e,t.textDirection),a.y+=l.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),hI(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:u,index:h})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[h],index:h}}),a=!ag(i,s),l=this._positionChanged(s,t);(a||l)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(e,a,t,i),u=this._positionChanged(l,e),h=t||!ag(l,a)||u;return h&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,i,s){const a=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:i,caretY:s,options:a}=this,l=Hd[a.position].call(this,e,t);return l!==!1&&(i!==l.x||s!==l.y)}}var a9={id:"tooltip",_element:iA,positioners:Hd,afterInit(n,e,t){t&&(n.tooltip=new iA({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:PI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const o9=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function l9(n,e,t,i){const s=n.indexOf(e);if(s===-1)return o9(n,e,t,i);const a=n.lastIndexOf(e);return s!==a?t:s}const c9=(n,e)=>n===null?null:$i(Math.round(n),0,e);function sA(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class u9 extends ph{static id="category";static defaults={ticks:{callback:sA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:a}of t)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Qt(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:l9(i,e,Et(t,e),this._addedLabels),c9(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=t;l++)s.push({value:l});return s}getLabelForValue(e){return sA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function h9(n,e){const t=[],{bounds:s,step:a,min:l,max:u,precision:h,count:f,maxTicks:y,maxDigits:v,includeBounds:x}=n,T=a||1,C=y-1,{min:D,max:R}=e,L=!Qt(l),$=!Qt(u),q=!Qt(f),Z=(R-D)/(v+1);let Y=eS((R-D)/C/T)*T,J,F,I,O;if(Y<1e-14&&!L&&!$)return[{value:D},{value:R}];O=Math.ceil(R/Y)-Math.floor(D/Y),O>C&&(Y=eS(O*Y/C/T)*T),Qt(h)||(J=Math.pow(10,h),Y=Math.ceil(Y*J)/J),s==="ticks"?(F=Math.floor(D/Y)*Y,I=Math.ceil(R/Y)*Y):(F=D,I=R),L&&$&&a&&oF((u-l)/a,Y/1e3)?(O=Math.round(Math.min((u-l)/Y,y)),Y=(u-l)/O,F=l,I=u):q?(F=L?l:F,I=$?u:I,O=f-1,Y=(I-F)/O):(O=(I-F)/Y,Jd(O,Math.round(O),Y/1e3)?O=Math.round(O):O=Math.ceil(O));const U=Math.max(tS(Y),tS(F));J=Math.pow(10,Qt(h)?U:h),F=Math.round(F*J)/J,I=Math.round(I*J)/J;let H=0;for(L&&(x&&F!==l?(t.push({value:l}),F<l&&H++,Jd(Math.round((F+H*Y)*J)/J,l,rA(l,Z,n))&&H++):F<l&&H++);H<O;++H){const B=Math.round((F+H*Y)*J)/J;if($&&B>u)break;t.push({value:B})}return $&&x&&I!==u?t.length&&Jd(t[t.length-1].value,u,rA(u,Z,n))?t[t.length-1].value=u:t.push({value:u}):(!$||I===u)&&t.push({value:I}),t}function rA(n,e,{horizontal:t,minRotation:i}){const s=To(i),a=(t?Math.sin(s):Math.cos(s))||.001,l=.75*e*(""+n).length;return Math.min(e/a,l)}class d9 extends ph{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Qt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const l=h=>s=t?s:h,u=h=>a=i?a:h;if(e){const h=Ta(s),f=Ta(a);h<0&&f<0?u(0):h>0&&f>0&&l(0)}if(s===a){let h=a===0?1:Math.abs(a*.05);u(a+h),e||l(s-h)}this.min=s,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,l=h9(s,a);return e.bounds==="ticks"&&lF(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return u0(e,this.chart.options.locale,this.options.ticks.format)}}class f9 extends d9{static id="linear";static defaults={ticks:{callback:nI.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gi(e)?e:0,this.max=Gi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=To(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const ey={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_s=Object.keys(ey);function aA(n,e){return n-e}function oA(n,e){if(Qt(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),Gi(l)||(l=typeof i=="string"?t.parse(l,i):t.parse(l)),l===null?null:(s&&(l=s==="week"&&(gf(a)||a===!0)?t.startOf(l,"isoWeek",a):t.startOf(l,s)),+l)}function lA(n,e,t,i){const s=_s.length;for(let a=_s.indexOf(n);a<s-1;++a){const l=ey[_s[a]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(u*l.size))<=i)return _s[a]}return _s[s-1]}function m9(n,e,t,i,s){for(let a=_s.length-1;a>=_s.indexOf(t);a--){const l=_s[a];if(ey[l].common&&n._adapter.diff(s,i,l)>=e-1)return l}return _s[t?_s.indexOf(t):0]}function p9(n){for(let e=_s.indexOf(n)+1,t=_s.length;e<t;++e)if(ey[_s[e]].common)return _s[e]}function cA(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=o0(t,e),a=t[i]>=e?t[i]:t[s];n[a]=!0}}function g9(n,e,t,i){const s=n._adapter,a=+s.startOf(e[0].value,i),l=e[e.length-1].value;let u,h;for(u=a;u<=l;u=+s.add(u,1,i))h=t[u],h>=0&&(e[h].major=!0);return e}function uA(n,e,t){const i=[],s={},a=e.length;let l,u;for(l=0;l<a;++l)u=e[l],s[u]=l,i.push({value:u,major:!1});return a===0||!t?i:g9(n,i,s,t)}class hA extends ph{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new G3._date(e.adapters.date);s.init(t),Zd(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:oA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:u}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!u&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),s=Gi(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),a=Gi(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,l=this.max,u=fF(s,a,l);return this._unit=t.unit||(i.autoSkip?lA(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):m9(this,u.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:p9(this._unit),this.initOffsets(s),e.reverse&&u.reverse(),uA(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,a;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?i=a:i=(a-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=$i(t,0,l),i=$i(i,0,l),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||lA(a.minUnit,t,i,this._getLabelCapacity(t)),u=Et(s.ticks.stepSize,1),h=l==="week"?a.isoWeekday:!1,f=gf(h)||h===!0,y={};let v=t,x,T;if(f&&(v=+e.startOf(v,"isoWeek",h)),v=+e.startOf(v,f?"day":l),e.diff(i,t,l)>1e5*u)throw new Error(t+" and "+i+" are too far apart with stepSize of "+u+" "+l);const C=s.ticks.source==="data"&&this.getDataTimestamps();for(x=v,T=0;x<i;x=+e.add(x,u,l),T++)cA(y,x,C);return(x===i||s.bounds==="ticks"||T===1)&&cA(y,x,C),Object.keys(y).sort(aA).map(D=>+D)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,a=this._unit,l=t||s[a];return this._adapter.format(e,l)}_tickFormatFunction(e,t,i,s){const a=this.options,l=a.ticks.callback;if(l)return _n(l,[e,t,i],this);const u=a.time.displayFormats,h=this._unit,f=this._majorUnit,y=h&&u[h],v=f&&u[f],x=i[t],T=f&&v&&x&&x.major;return this._adapter.format(e,s||(T?v:y))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=To(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:i*a+u*l,h:i*l+u*a}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,uA(this,[e],this._majorUnit),s),l=this._getLabelSize(a),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(oA(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return JR(e.sort(aA))}}function fp(n,e,t){let i=0,s=n.length-1,a,l,u,h;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=kc(n,"pos",e)),{pos:a,time:u}=n[i],{pos:l,time:h}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=kc(n,"time",e)),{time:a,pos:u}=n[i],{time:l,pos:h}=n[s]);const f=l-a;return f?u+(h-u)*(e-a)/f:u}class D8 extends hA{static id="timeseries";static defaults=hA.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=fp(t,this.min),this._tableRange=fp(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],a=[];let l,u,h,f,y;for(l=0,u=e.length;l<u;++l)f=e[l],f>=t&&f<=i&&s.push(f);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(l=0,u=s.length;l<u;++l)y=s[l+1],h=s[l-1],f=s[l],Math.round((y+h)/2)!==f&&a.push({time:f,pos:l/(u-1)});return a}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(fp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return fp(this._table,i*this._tableRange+this._minPos,!0)}}const jI="label";function dA(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function y9(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function LI(n,e){n.labels=e}function VI(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jI;const i=[];n.datasets=e.map(s=>{const a=n.datasets.find(l=>l[t]===s[t]);return!a||!s.data||i.includes(a)?{...s}:(i.push(a),Object.assign(a,s),a)})}function _9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jI;const t={labels:[],datasets:[]};return LI(t,n.labels),VI(t,n.datasets,e),t}function b9(n,e){const{height:t=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:l,data:u,options:h,plugins:f=[],fallbackContent:y,updateMode:v,...x}=n,T=N.useRef(null),C=N.useRef(null),D=()=>{T.current&&(C.current=new Qg(T.current,{type:l,data:_9(u,a),options:h&&{...h},plugins:f}),dA(e,C.current))},R=()=>{dA(e,null),C.current&&(C.current.destroy(),C.current=null)};return N.useEffect(()=>{!s&&C.current&&h&&y9(C.current,h)},[s,h]),N.useEffect(()=>{!s&&C.current&&LI(C.current.config.data,u.labels)},[s,u.labels]),N.useEffect(()=>{!s&&C.current&&u.datasets&&VI(C.current.config.data,u.datasets,a)},[s,u.datasets]),N.useEffect(()=>{C.current&&(s?(R(),setTimeout(D)):C.current.update(v))},[s,h,u.labels,u.datasets,v]),N.useEffect(()=>{C.current&&(R(),setTimeout(D))},[l]),N.useEffect(()=>(D(),()=>R()),[]),fr.createElement("canvas",{ref:T,role:"img",height:t,width:i,...x},y)}const v9=N.forwardRef(b9);function _0(n,e){return Qg.register(e),N.forwardRef((t,i)=>fr.createElement(v9,{...t,ref:i,type:n}))}const fA=_0("line",W3),x9=_0("bar",H3),E9=_0("doughnut",q3),w9=({onNotificationClick:n})=>{const[e,t]=N.useState(0),[i,s]=N.useState(!0),[a,l]=N.useState(!1),[u,h]=N.useState([]),f=async()=>{try{s(!0);const[T,C]=await Promise.all([zn(un(It,"ventas")),zn(un(It,"clientes"))]),D=T.docs.map(Z=>({id:Z.id,...Z.data()})),R=C.docs.map(Z=>({id:Z.id,...Z.data()})),L=n0(D,R),$=rg(L),q=L.filter(Z=>Z.status==="pending").slice(0,5);t($.pending),h(q)}catch(T){console.error("Error fetching notifications:",T)}finally{s(!1)}};N.useEffect(()=>{f();const T=setInterval(f,300*1e3);return()=>clearInterval(T)},[]);const y=()=>{l(!a)},v=T=>{l(!1),n&&n(T)},x=T=>T.isDue&&T.daysOverdue>=7?"":T.isDue?"":"";return i?p.jsx("div",{className:"notification-bell",children:p.jsx("div",{className:"bell-icon",children:""})}):p.jsxs("div",{className:"notification-bell-container",children:[p.jsxs("div",{className:`notification-bell ${e>0?"has-notifications":""}`,onClick:y,children:[p.jsx("div",{className:"bell-icon",children:""}),e>0&&p.jsx("div",{className:"notification-badge",children:e>99?"99+":e})]}),a&&p.jsxs("div",{className:"notification-dropdown",children:[p.jsxs("div",{className:"dropdown-header",children:[p.jsx("h3",{children:"Recordatorios de Clientes"}),p.jsxs("span",{className:"notification-count",children:[e," pendientes"]})]}),u.length===0?p.jsx("div",{className:"no-notifications",children:p.jsx("p",{children:"No hay recordatorios pendientes"})}):p.jsx("div",{className:"notification-list",children:u.map(T=>p.jsxs("div",{className:`notification-item ${T.isDue?"overdue":"upcoming"}`,onClick:()=>v(T),children:[p.jsx("div",{className:"notification-priority",children:x(T)}),p.jsxs("div",{className:"notification-content",children:[p.jsx("div",{className:"customer-name",children:T.customerName}),p.jsx("div",{className:"notification-message",children:T.isDue?`${T.daysOverdue} das de retraso!`:`En ${T.daysUntilDue} das`}),p.jsxs("div",{className:"kombucha-info",children:["Compr ",T.totalKombuchas," kombuchas"]})]})]},T.notificationId))}),p.jsx("div",{className:"dropdown-footer",children:p.jsx("button",{className:"view-all-btn",onClick:()=>{l(!1),n&&n({type:"view-all"})},children:"Ver todos los recordatorios"})})]})]})};Qg.register(u9,f9,_z,Zg,Tz,lz,Zz,a9,Xz,$z);function T9(){const n=lh(),[e,t]=N.useState({dailySales:0,monthlySales:0,monthlyKombuchasSold:0,dailyRevenue:0,monthlyRevenue:0,monthlyCost:0}),[i,s]=N.useState(!0),[a,l]=N.useState([]),[u,h]=N.useState([]),[f,y]=N.useState([]),[v,x]=N.useState({salesTrend:{},topProducts:{},revenueGrowth:{},salesStatus:{}}),[T,C]=N.useState([]),[D,R]=N.useState({}),L=async()=>{try{s(!0);const F=(await zn(un(It,"ventas"))).docs.map(Ge=>({id:Ge.id,...Ge.data()})),O=(await zn(un(It,"clientes"))).docs.map(Ge=>({id:Ge.id,...Ge.data()}));h(O);const H=(await zn(un(It,"kombuchas"))).docs.map(Ge=>({id:Ge.id,...Ge.data()}));y(H);const B=Fs(),z=HR(),Le=F.filter(Ge=>Ge.fecha===B&&Ge.estado!=="cancelada"),_e=Le.reduce((Ge,Se)=>Ge+(parseFloat(Se.total)||0),0),G=F.filter(Ge=>(Ge.fecha?Ge.fecha.slice(0,7):"")===z&&Ge.estado!=="cancelada"),ie=G.reduce((Ge,Se)=>Ge+(parseFloat(Se.total)||0),0);let Ee=0,Ve=0;G.forEach(Ge=>{if(Ge.items&&Array.isArray(Ge.items))Ge.items.forEach(Se=>{const Tt=parseInt(Se.cantidad)||0;Ee+=Tt;const xe=H.find(ce=>ce.id===Se.kombuchaId);xe&&xe.costoUnitario&&(Ve+=Tt*parseFloat(xe.costoUnitario))});else if(Ge.cantidad){const Se=parseInt(Ge.cantidad)||0;Ee+=Se;const Tt=H.find(xe=>xe.id===Ge.kombucha);Tt&&Tt.costoUnitario&&(Ve+=Se*parseFloat(Tt.costoUnitario))}});const P=ie-Ve,Re=F.sort((Ge,Se)=>new Date(Se.fecha)-new Date(Ge.fecha)).slice(0,5),pe=$(F,H),Ne=n0(F,O),qe=rg(Ne),je=Ne.filter(Ge=>Ge.status==="pending").slice(0,3);t({dailySales:Le.length,monthlySales:G.length,monthlyKombuchasSold:Ee,dailyRevenue:_e,monthlyRevenue:ie,monthlyCost:Ve,monthlyEarnings:P}),l(Re),x(pe),C(je),R(qe)}catch(J){console.error("Error fetching sales data:",J)}finally{s(!1)}},$=(J,F)=>{const I=[],O={};for(let G=29;G>=0;G--){const ie=S4(-G);I.push(ie),O[ie]=0}J.forEach(G=>{O.hasOwnProperty(G.fecha)&&G.estado!=="cancelada"&&O[G.fecha]++});const U={};J.forEach(G=>{if(G.estado!=="cancelada"){if(G.items&&Array.isArray(G.items))G.items.forEach(ie=>{const Ee=F.find(P=>P.id===ie.kombuchaId),Ve=Ee?Ee.nombre:"Producto desconocido";U[Ve]=(U[Ve]||0)+parseInt(ie.cantidad||0)});else if(G.kombucha){const ie=F.find(Ve=>Ve.id===G.kombucha),Ee=ie?ie.nombre:"Producto desconocido";U[Ee]=(U[Ee]||0)+parseInt(G.cantidad||0)}}});const H=Object.entries(U).sort(([,G],[,ie])=>ie-G).slice(0,5),B=J.filter(G=>G.estado!=="cancelada").sort((G,ie)=>new Date(G.fecha)-new Date(ie.fecha)),z=[];let Le=0;B.forEach(G=>{Le+=parseFloat(G.total||0),z.push(Le)});const _e={};return J.forEach(G=>{const ie=G.estado||"pendiente";_e[ie]=(_e[ie]||0)+1}),{salesTrend:{labels:I.map(G=>ga(G)),datasets:[{label:"Ventas",data:I.map(G=>O[G]),borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",tension:.4,fill:!0}]},topProducts:{labels:H.map(([G])=>G),datasets:[{label:"Cantidad Vendida",data:H.map(([,G])=>G),backgroundColor:["#667eea","#764ba2","#f093fb","#f5576c","#4facfe"],borderRadius:8}]},revenueGrowth:{labels:B.map((G,ie)=>`Venta ${ie+1}`),datasets:[{label:"Ingresos Acumulados",data:z,borderColor:"#38a169",backgroundColor:"rgba(56, 161, 105, 0.1)",fill:!0,tension:.4}]},salesStatus:{labels:Object.keys(_e).map(G=>{switch(G){case"completada":return"Completadas";case"pendiente":return"Pendientes";case"cancelada":return"Canceladas";case"pagoPendiente":return"Pago Pendiente";default:return G}}),datasets:[{data:Object.values(_e),backgroundColor:Object.keys(_e).map(G=>{switch(G){case"completada":return"#38a169";case"pendiente":return"#d69e2e";case"cancelada":return"#c53030";case"pagoPendiente":return"#f093fb";default:return"#667eea"}}),borderWidth:0}]}}};N.useEffect(()=>{L()},[]);const q=J=>{const F=u.find(I=>I.id===J);return F?F.nombre:"Cliente no encontrado"},Z=J=>A4(J),Y=J=>{J.type,n("/recordatorios")};return i?p.jsx("div",{className:"dashboard",children:p.jsx("div",{className:"loading",children:"Cargando dashboard..."})}):p.jsxs("div",{className:"dashboard",children:[p.jsxs("div",{className:"dashboard-header",children:[p.jsx("h1",{children:"Dashboard"}),p.jsx(w9,{onNotificationClick:Y})]}),p.jsxs("div",{className:"stats",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Ventas del da"}),p.jsx("p",{className:"stat-number",children:e.dailySales}),p.jsxs("p",{className:"stat-subtitle",children:["$",e.dailyRevenue.toFixed(2)]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Ventas del mes"}),p.jsx("p",{className:"stat-number",children:e.monthlySales}),p.jsxs("p",{className:"stat-subtitle",children:["$",e.monthlyRevenue.toFixed(2)]}),p.jsxs("p",{className:"stat-subtitle",children:["Ganancia: $",e.monthlyEarnings.toFixed(2)]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("h3",{children:"Kombuchas vendidas"}),p.jsx("p",{className:"stat-number",children:e.monthlyKombuchasSold}),p.jsx("p",{className:"stat-subtitle",children:"Este mes"})]}),p.jsxs("div",{className:"stat-card notification-stat",children:[p.jsx("h3",{children:"Recordatorios"}),p.jsx("p",{className:"stat-number",children:D.pending}),p.jsx("p",{className:"stat-subtitle",children:D.overdue>0?`${D.overdue} vencidos`:"Al da"})]})]}),p.jsxs("div",{className:"charts-section",children:[p.jsxs("div",{className:"chart-row",children:[p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Tendencia de Ventas (ltimos 30 das)"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(fA,{data:v.salesTrend,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}},x:{ticks:{maxTicksLimit:10}}},elements:{point:{radius:2}}}})})]}),p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Productos Ms Vendidos"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(x9,{data:v.topProducts,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0}}}})})]})]}),p.jsxs("div",{className:"chart-row",children:[p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Crecimiento de Ingresos"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(fA,{data:v.revenueGrowth,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0},x:{ticks:{maxTicksLimit:8}}},elements:{point:{radius:2}}}})})]}),p.jsxs("div",{className:"chart-card",children:[p.jsx("h3",{children:"Estado de Ventas"}),p.jsx("div",{style:{height:"200px",width:"100%"},children:p.jsx(E9,{data:v.salesStatus,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750},plugins:{legend:{position:"bottom",labels:{padding:10,usePointStyle:!0}},tooltip:{enabled:!0}}}})})]})]})]}),T.length>0&&p.jsxs("div",{className:"notifications-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{children:"Recordatorios Urgentes"}),p.jsx("button",{onClick:()=>n("/recordatorios"),className:"view-all-link",children:"Ver todos"})]}),p.jsx("div",{className:"notifications-list",children:T.map(J=>p.jsxs("div",{className:`notification-item ${J.isDue?"overdue":"upcoming"}`,children:[p.jsxs("div",{className:"notification-content",children:[p.jsx("div",{className:"customer-name",children:J.customerName}),p.jsx("div",{className:"notification-message",children:$R(J)}),p.jsxs("div",{className:"notification-details",children:[p.jsxs("span",{children:["Compr ",J.totalKombuchas," kombuchas"]}),p.jsx("span",{children:""}),p.jsx("span",{children:ga(J.lastSaleDate)})]})]}),p.jsx("div",{className:"notification-actions",children:p.jsx("button",{onClick:()=>n("/recordatorios"),className:"action-link",children:"Ver detalles"})})]},J.notificationId))})]}),p.jsxs("div",{className:"recent-batches",children:[p.jsx("h2",{children:"Ventas recientes"}),p.jsx("div",{className:"batch-list",children:a.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No hay ventas recientes"})}):a.map(J=>p.jsxs("div",{className:"batch-item",children:[p.jsxs("div",{className:"batch-info",children:[p.jsxs("h4",{children:["Venta #",J.id.slice(-6)]}),p.jsxs("p",{children:["Fecha: ",Z(J.fecha)]}),p.jsxs("p",{children:["Cliente: ",q(J.cliente)]}),p.jsxs("p",{children:["Total: $",parseFloat(J.total||0).toFixed(2)]})]}),p.jsx("div",{className:`batch-status ${J.estado==="completada"?"completed":J.estado==="cancelada"?"canceled":J.estado==="pagoPendiente"?"payment-pending":"active"}`,children:J.estado==="completada"?"Completada":J.estado==="cancelada"?"Cancelada":J.estado==="pagoPendiente"?"Pago Pendiente":"Pendiente"})]},J.id))})]})]})}var nb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var mA;function S9(){return mA||(mA=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(a=s(a,i(u)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var u in a)e.call(a,u)&&a[u]&&(l=s(l,u));return l}function s(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(nb)),nb.exports}var A9=S9();const Kt=Ef(A9),C9=["xxl","xl","lg","md","sm","xs"],R9="xs",FI=N.createContext({prefixes:{},breakpoints:C9,minBreakpoint:R9}),{Consumer:O8,Provider:M8}=FI;function fn(n,e){const{prefixes:t}=N.useContext(FI);return n||t[e]||e}const UI=N.forwardRef(({bsPrefix:n,fluid:e=!1,as:t="div",className:i,...s},a)=>{const l=fn(n,"container"),u=typeof e=="string"?`-${e}`:"-fluid";return p.jsx(t,{ref:a,...s,className:Kt(i,e?`${l}${u}`:l)})});UI.displayName="Container";function Kb(){return Kb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Kb.apply(null,arguments)}function zI(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function pA(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function I9(n){var e=k9(n,"string");return typeof e=="symbol"?e:String(e)}function k9(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function N9(n,e,t){var i=N.useRef(n!==void 0),s=N.useState(e),a=s[0],l=s[1],u=n!==void 0,h=i.current;return i.current=u,!u&&h&&a!==e&&l(e),[u?n:a,N.useCallback(function(f){for(var y=arguments.length,v=new Array(y>1?y-1:0),x=1;x<y;x++)v[x-1]=arguments[x];t&&t.apply(void 0,[f].concat(v)),l(f)},[t])]}function BI(n,e){return Object.keys(e).reduce(function(t,i){var s,a=t,l=a[pA(i)],u=a[i],h=zI(a,[pA(i),i].map(I9)),f=e[i],y=N9(u,l,n[f]),v=y[0],x=y[1];return Kb({},h,(s={},s[i]=v,s[f]=x,s))},n)}function Yb(n,e){return Yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},Yb(n,e)}function D9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Yb(n,e)}var O9=Function.prototype.bind.call(Function.prototype.call,[].slice);function Cc(n,e){return O9(n.querySelectorAll(e))}function M9(){const[,n]=N.useReducer(e=>e+1,0);return n}const gA=n=>!n||typeof n=="function"?n:e=>{n.current=e};function P9(n,e){const t=gA(n),i=gA(e);return s=>{t&&t(s),i&&i(s)}}function ty(n,e){return N.useMemo(()=>P9(n,e),[n,e])}const b0=N.createContext(null);b0.displayName="NavContext";const fg=N.createContext(null),v0=(n,e=null)=>n!=null?String(n):e||null,HI=N.createContext(null),j9="data-rr-ui-",L9="rrUi";function ny(n){return`${j9}${n}`}function V9(n){return`${L9}${n}`}function F9(n){const e=N.useRef(n);return N.useEffect(()=>{e.current=n},[n]),e}function vo(n){const e=F9(n);return N.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const U9=["as","disabled"];function z9(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function B9(n){return!n||n.trim()==="#"}function x0({tagName:n,disabled:e,href:t,target:i,rel:s,role:a,onClick:l,tabIndex:u=0,type:h}){n||(t!=null||i!=null||s!=null?n="a":n="button");const f={tagName:n};if(n==="button")return[{type:h||"button",disabled:e},f];const y=x=>{if((e||n==="a"&&B9(t))&&x.preventDefault(),e){x.stopPropagation();return}l?.(x)},v=x=>{x.key===" "&&(x.preventDefault(),y(x))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:a??"button",disabled:void 0,tabIndex:e?void 0:u,href:t,target:n==="a"?i:void 0,"aria-disabled":e||void 0,rel:n==="a"?s:void 0,onClick:y,onKeyDown:v},f]}const $I=N.forwardRef((n,e)=>{let{as:t,disabled:i}=n,s=z9(n,U9);const[a,{tagName:l}]=x0(Object.assign({tagName:t,disabled:i},s));return p.jsx(l,Object.assign({},s,a,{ref:e}))});$I.displayName="Button";const H9=["as","active","eventKey"];function $9(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function qI({key:n,onClick:e,active:t,id:i,role:s,disabled:a}){const l=N.useContext(fg),u=N.useContext(b0),h=N.useContext(HI);let f=t;const y={role:s};if(u){!s&&u.role==="tablist"&&(y.role="tab");const v=u.getControllerId(n??null),x=u.getControlledId(n??null);y[ny("event-key")]=n,y.id=v||i,f=t==null&&n!=null?u.activeKey===n:t,(f||!(h!=null&&h.unmountOnExit)&&!(h!=null&&h.mountOnEnter))&&(y["aria-controls"]=x)}return y.role==="tab"&&(y["aria-selected"]=f,f||(y.tabIndex=-1),a&&(y.tabIndex=-1,y["aria-disabled"]=!0)),y.onClick=vo(v=>{a||(e?.(v),n!=null&&l&&!v.isPropagationStopped()&&l(n,v))}),[y,{isActive:f}]}const WI=N.forwardRef((n,e)=>{let{as:t=$I,active:i,eventKey:s}=n,a=$9(n,H9);const[l,u]=qI(Object.assign({key:v0(s,a.href),active:i},a));return l[ny("active")]=u.isActive,p.jsx(t,Object.assign({},a,l,{ref:e}))});WI.displayName="NavItem";const q9=["as","onSelect","activeKey","role","onKeyDown"];function W9(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const yA=()=>{},_A=ny("event-key"),GI=N.forwardRef((n,e)=>{let{as:t="div",onSelect:i,activeKey:s,role:a,onKeyDown:l}=n,u=W9(n,q9);const h=M9(),f=N.useRef(!1),y=N.useContext(fg),v=N.useContext(HI);let x,T;v&&(a=a||"tablist",s=v.activeKey,x=v.getControlledId,T=v.getControllerId);const C=N.useRef(null),D=q=>{const Z=C.current;if(!Z)return null;const Y=Cc(Z,`[${_A}]:not([aria-disabled=true])`),J=Z.querySelector("[aria-selected=true]");if(!J||J!==document.activeElement)return null;const F=Y.indexOf(J);if(F===-1)return null;let I=F+q;return I>=Y.length&&(I=0),I<0&&(I=Y.length-1),Y[I]},R=(q,Z)=>{q!=null&&(i?.(q,Z),y?.(q,Z))},L=q=>{if(l?.(q),!v)return;let Z;switch(q.key){case"ArrowLeft":case"ArrowUp":Z=D(-1);break;case"ArrowRight":case"ArrowDown":Z=D(1);break;default:return}Z&&(q.preventDefault(),R(Z.dataset[V9("EventKey")]||null,q),f.current=!0,h())};N.useEffect(()=>{if(C.current&&f.current){const q=C.current.querySelector(`[${_A}][aria-selected=true]`);q?.focus()}f.current=!1});const $=ty(e,C);return p.jsx(fg.Provider,{value:R,children:p.jsx(b0.Provider,{value:{role:a,activeKey:v0(s),getControlledId:x||yA,getControllerId:T||yA},children:p.jsx(t,Object.assign({},u,{onKeyDown:L,ref:$,role:a}))})})});GI.displayName="Nav";const G9=Object.assign(GI,{Item:WI}),gh=N.createContext(null);gh.displayName="NavbarContext";const E0=N.createContext(null);E0.displayName="CardHeaderContext";const KI=N.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=fn(e,"nav-item"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));KI.displayName="NavItem";function K9(){const n=N.useRef(!0),e=N.useRef(()=>n.current);return N.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function Y9(n){const e=N.useRef(null);return N.useEffect(()=>{e.current=n}),e.current}const X9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Q9=typeof document<"u",bA=Q9||X9?N.useLayoutEffect:N.useEffect,Z9=["onKeyDown"];function J9(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function eB(n){return!n||n.trim()==="#"}const YI=N.forwardRef((n,e)=>{let{onKeyDown:t}=n,i=J9(n,Z9);const[s]=x0(Object.assign({tagName:"a"},i)),a=vo(l=>{s.onKeyDown(l),t?.(l)});return eB(i.href)||i.role==="button"?p.jsx("a",Object.assign({ref:e},i,s,{onKeyDown:a})):p.jsx("a",Object.assign({ref:e},i,{onKeyDown:t}))});YI.displayName="Anchor";const XI=N.forwardRef(({bsPrefix:n,className:e,as:t=YI,active:i,eventKey:s,disabled:a=!1,...l},u)=>{n=fn(n,"nav-link");const[h,f]=qI({key:v0(s,l.href),active:i,disabled:a,...l});return p.jsx(t,{...l,...h,ref:u,disabled:a,className:Kt(e,n,a&&"disabled",f.isActive&&"active")})});XI.displayName="NavLink";const QI=N.forwardRef((n,e)=>{const{as:t="div",bsPrefix:i,variant:s,fill:a=!1,justify:l=!1,navbar:u,navbarScroll:h,className:f,activeKey:y,...v}=BI(n,{activeKey:"onSelect"}),x=fn(i,"nav");let T,C,D=!1;const R=N.useContext(gh),L=N.useContext(E0);return R?(T=R.bsPrefix,D=u??!0):L&&({cardHeaderBsPrefix:C}=L),p.jsx(G9,{as:t,ref:e,activeKey:y,className:Kt(f,{[x]:!D,[`${T}-nav`]:D,[`${T}-nav-scroll`]:D&&h,[`${C}-${s}`]:!!C,[`${x}-${s}`]:!!s,[`${x}-fill`]:a,[`${x}-justified`]:l}),...v})});QI.displayName="Nav";const Mr=Object.assign(QI,{Item:KI,Link:XI}),ZI=N.forwardRef(({bsPrefix:n,className:e,as:t,...i},s)=>{n=fn(n,"navbar-brand");const a=t||(i.href?"a":"span");return p.jsx(a,{...i,ref:s,className:Kt(e,n)})});ZI.displayName="NavbarBrand";function w0(n){return n&&n.ownerDocument||document}function tB(n){var e=w0(n);return e&&e.defaultView||window}function nB(n,e){return tB(n).getComputedStyle(n,e)}var iB=/([A-Z])/g;function sB(n){return n.replace(iB,"-$1").toLowerCase()}var rB=/^ms-/;function mp(n){return sB(n).replace(rB,"-ms-")}var aB=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function oB(n){return!!(n&&aB.test(n))}function Co(n,e){var t="",i="";if(typeof e=="string")return n.style.getPropertyValue(mp(e))||nB(n).getPropertyValue(mp(e));Object.keys(e).forEach(function(s){var a=e[s];!a&&a!==0?n.style.removeProperty(mp(s)):oB(s)?i+=s+"("+a+") ":t+=mp(s)+": "+a+";"}),i&&(t+="transform: "+i+";"),n.style.cssText+=";"+t}var ib={exports:{}},sb,vA;function lB(){if(vA)return sb;vA=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sb=n,sb}var rb,xA;function cB(){if(xA)return rb;xA=1;var n=lB();function e(){}function t(){}return t.resetWarningCache=e,rb=function(){function i(l,u,h,f,y,v){if(v!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function s(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},rb}var EA;function uB(){return EA||(EA=1,ib.exports=cB()()),ib.exports}var hB=uB();const ab=Ef(hB),wA={disabled:!1},JI=fr.createContext(null);var dB=function(e){return e.scrollTop},$d="unmounted",xl="exited",jr="entering",xo="entered",xf="exiting",Mo=function(n){D9(e,n);function e(i,s){var a;a=n.call(this,i,s)||this;var l=s,u=l&&!l.isMounting?i.enter:i.appear,h;return a.appearStatus=null,i.in?u?(h=xl,a.appearStatus=jr):h=xo:i.unmountOnExit||i.mountOnEnter?h=$d:h=xl,a.state={status:h},a.nextCallback=null,a}e.getDerivedStateFromProps=function(s,a){var l=s.in;return l&&a.status===$d?{status:xl}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var a=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==jr&&l!==xo&&(a=jr):(l===jr||l===xo)&&(a=xf)}this.updateStatus(!1,a)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,a,l,u;return a=l=u=s,s!=null&&typeof s!="number"&&(a=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:a,enter:l,appear:u}},t.updateStatus=function(s,a){if(s===void 0&&(s=!1),a!==null)if(this.cancelNextCallback(),a===jr){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Uu.findDOMNode(this);l&&dB(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xl&&this.setState({status:$d})},t.performEnter=function(s){var a=this,l=this.props.enter,u=this.context?this.context.isMounting:s,h=this.props.nodeRef?[u]:[Uu.findDOMNode(this),u],f=h[0],y=h[1],v=this.getTimeouts(),x=u?v.appear:v.enter;if(!s&&!l||wA.disabled){this.safeSetState({status:xo},function(){a.props.onEntered(f)});return}this.props.onEnter(f,y),this.safeSetState({status:jr},function(){a.props.onEntering(f,y),a.onTransitionEnd(x,function(){a.safeSetState({status:xo},function(){a.props.onEntered(f,y)})})})},t.performExit=function(){var s=this,a=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Uu.findDOMNode(this);if(!a||wA.disabled){this.safeSetState({status:xl},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:xf},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:xl},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,a){a=this.setNextCallback(a),this.setState(s,a)},t.setNextCallback=function(s){var a=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,a.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:Uu.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=h[0],y=h[1];this.props.addEndListener(f,y)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===$d)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=zI(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return fr.createElement(JI.Provider,{value:null},typeof l=="function"?l(s,u):fr.cloneElement(fr.Children.only(l),u))},e}(fr.Component);Mo.contextType=JI;Mo.propTypes={};function Mu(){}Mo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Mu,onEntering:Mu,onEntered:Mu,onExit:Mu,onExiting:Mu,onExited:Mu};Mo.UNMOUNTED=$d;Mo.EXITED=xl;Mo.ENTERING=jr;Mo.ENTERED=xo;Mo.EXITING=xf;function fB(n){return n.code==="Escape"||n.keyCode===27}function mB(){const n=N.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function yh(n){if(!n||typeof n=="function")return null;const{major:e}=mB();return e>=19?n.props.ref:n.ref}const iy=!!(typeof window<"u"&&window.document&&window.document.createElement);var Xb=!1,Qb=!1;try{var ob={get passive(){return Xb=!0},get once(){return Qb=Xb=!0}};iy&&(window.addEventListener("test",ob,ob),window.removeEventListener("test",ob,!0))}catch{}function pB(n,e,t,i){if(i&&typeof i!="boolean"&&!Qb){var s=i.once,a=i.capture,l=t;!Qb&&s&&(l=t.__once||function u(h){this.removeEventListener(e,u,a),t.call(this,h)},t.__once=l),n.addEventListener(e,l,Xb?i:a)}n.addEventListener(e,t,i)}function gB(n,e,t,i){var s=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(e,t,s),t.__once&&n.removeEventListener(e,t.__once,s)}function mg(n,e,t,i){return pB(n,e,t,i),function(){gB(n,e,t,i)}}function yB(n,e,t,i){if(i===void 0&&(i=!0),n){var s=document.createEvent("HTMLEvents");s.initEvent(e,t,i),n.dispatchEvent(s)}}function _B(n){var e=Co(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function bB(n,e,t){t===void 0&&(t=5);var i=!1,s=setTimeout(function(){i||yB(n,"transitionend",!0)},e+t),a=mg(n,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(s),a()}}function vB(n,e,t,i){t==null&&(t=_B(n)||0);var s=bB(n,t,i),a=mg(n,"transitionend",e);return function(){s(),a()}}function TA(n,e){const t=Co(n,e)||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function T0(n,e){const t=TA(n,"transitionDuration"),i=TA(n,"transitionDelay"),s=vB(n,a=>{a.target===n&&(s(),e(a))},t+i)}function Md(...n){return n.filter(e=>e!=null).reduce((e,t)=>{if(typeof t!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?t:function(...s){e.apply(this,s),t.apply(this,s)}},null)}function ek(n){n.offsetHeight}const SA=n=>!n||typeof n=="function"?n:e=>{n.current=e};function xB(n,e){const t=SA(n),i=SA(e);return s=>{t&&t(s),i&&i(s)}}function EB(n,e){return N.useMemo(()=>xB(n,e),[n,e])}function wB(n){return n&&"setState"in n?Uu.findDOMNode(n):n??null}const sy=fr.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:i,onExiting:s,onExited:a,addEndListener:l,children:u,childRef:h,...f},y)=>{const v=N.useRef(null),x=EB(v,h),T=J=>{x(wB(J))},C=J=>F=>{J&&v.current&&J(v.current,F)},D=N.useCallback(C(n),[n]),R=N.useCallback(C(e),[e]),L=N.useCallback(C(t),[t]),$=N.useCallback(C(i),[i]),q=N.useCallback(C(s),[s]),Z=N.useCallback(C(a),[a]),Y=N.useCallback(C(l),[l]);return p.jsx(Mo,{ref:y,...f,onEnter:D,onEntered:L,onEntering:R,onExit:$,onExited:Z,onExiting:q,addEndListener:Y,nodeRef:v,children:typeof u=="function"?(J,F)=>u(J,{...F,ref:T}):fr.cloneElement(u,{ref:T})})});sy.displayName="TransitionWrapper";const TB={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function SB(n,e){const t=`offset${n[0].toUpperCase()}${n.slice(1)}`,i=e[t],s=TB[n];return i+parseInt(Co(e,s[0]),10)+parseInt(Co(e,s[1]),10)}const AB={[xl]:"collapse",[xf]:"collapsing",[jr]:"collapsing",[xo]:"collapse show"},tk=fr.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:i,onExiting:s,className:a,children:l,dimension:u="height",in:h=!1,timeout:f=300,mountOnEnter:y=!1,unmountOnExit:v=!1,appear:x=!1,getDimensionValue:T=SB,...C},D)=>{const R=typeof u=="function"?u():u,L=N.useMemo(()=>Md(J=>{J.style[R]="0"},n),[R,n]),$=N.useMemo(()=>Md(J=>{const F=`scroll${R[0].toUpperCase()}${R.slice(1)}`;J.style[R]=`${J[F]}px`},e),[R,e]),q=N.useMemo(()=>Md(J=>{J.style[R]=null},t),[R,t]),Z=N.useMemo(()=>Md(J=>{J.style[R]=`${T(R,J)}px`,ek(J)},i),[i,T,R]),Y=N.useMemo(()=>Md(J=>{J.style[R]=null},s),[R,s]);return p.jsx(sy,{ref:D,addEndListener:T0,...C,"aria-expanded":C.role?h:null,onEnter:L,onEntering:$,onEntered:q,onExit:Z,onExiting:Y,childRef:yh(l),in:h,timeout:f,mountOnEnter:y,unmountOnExit:v,appear:x,children:(J,F)=>fr.cloneElement(l,{...F,className:Kt(a,l.props.className,AB[J],R==="width"&&"collapse-horizontal")})})});tk.displayName="Collapse";const nk=N.forwardRef(({children:n,bsPrefix:e,...t},i)=>{e=fn(e,"navbar-collapse");const s=N.useContext(gh);return p.jsx(tk,{in:!!(s&&s.expanded),...t,children:p.jsx("div",{ref:i,className:e,children:n})})});nk.displayName="NavbarCollapse";function CB(n){const e=N.useRef(n);return N.useEffect(()=>{e.current=n},[n]),e}function ry(n){const e=CB(n);return N.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const ik=N.forwardRef(({bsPrefix:n,className:e,children:t,label:i="Toggle navigation",as:s="button",onClick:a,...l},u)=>{n=fn(n,"navbar-toggler");const{onToggle:h,expanded:f}=N.useContext(gh)||{},y=ry(v=>{a&&a(v),h&&h()});return s==="button"&&(l.type="button"),p.jsx(s,{...l,ref:u,onClick:y,"aria-label":i,className:Kt(e,n,!f&&"collapsed"),children:t||p.jsx("span",{className:`${n}-icon`})})});ik.displayName="NavbarToggle";const RB=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",IB=typeof document<"u",kB=IB||RB?N.useLayoutEffect:N.useEffect,Zb=new WeakMap,AA=(n,e)=>{if(!n||!e)return;const t=Zb.get(e)||new Map;Zb.set(e,t);let i=t.get(n);return i||(i=e.matchMedia(n),i.refCount=0,t.set(i.media,i)),i};function NB(n,e=typeof window>"u"?void 0:window){const t=AA(n,e),[i,s]=N.useState(()=>t?t.matches:!1);return kB(()=>{let a=AA(n,e);if(!a)return s(!1);let l=Zb.get(e);const u=()=>{s(a.matches)};return a.refCount++,a.addListener(u),u(),()=>{a.removeListener(u),a.refCount--,a.refCount<=0&&l?.delete(a.media),a=void 0}},[n]),i}function DB(n){const e=Object.keys(n);function t(u,h){return u===h?h:u?`${u} and ${h}`:h}function i(u){return e[Math.min(e.indexOf(u)+1,e.length-1)]}function s(u){const h=i(u);let f=n[h];return typeof f=="number"?f=`${f-.2}px`:f=`calc(${f} - 0.2px)`,`(max-width: ${f})`}function a(u){let h=n[u];return typeof h=="number"&&(h=`${h}px`),`(min-width: ${h})`}function l(u,h,f){let y;typeof u=="object"?(y=u,f=h,h=!0):(h=h||!0,y={[u]:h});let v=N.useMemo(()=>Object.entries(y).reduce((x,[T,C])=>((C==="up"||C===!0)&&(x=t(x,a(T))),(C==="down"||C===!0)&&(x=t(x,s(T))),x),""),[JSON.stringify(y)]);return NB(v,f)}return l}const OB=DB({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function lb(n){n===void 0&&(n=w0());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function CA(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function MB(n){const e=N.useRef(n);return e.current=n,e}function PB(n){const e=MB(n);N.useEffect(()=>()=>e.current(),[])}function jB(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const RA=ny("modal-open");class S0{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:i=!1}={}){this.handleContainerOverflow=t,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return jB(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[i]:s.style[i]},e.scrollBarWidth&&(t[i]=`${parseInt(Co(s,i)||"0",10)+e.scrollBarWidth}px`),s.setAttribute(RA,""),Co(s,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(RA),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const sk=N.createContext(iy?window:void 0);sk.Provider;function A0(){return N.useContext(sk)}const cb=(n,e)=>iy?n==null?(e||w0()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function LB(n,e){const t=A0(),[i,s]=N.useState(()=>cb(n,t?.document));if(!i){const a=cb(n);a&&s(a)}return N.useEffect(()=>{},[e,i]),N.useEffect(()=>{const a=cb(n);a!==i&&s(a)},[n,i]),i}function VB({children:n,in:e,onExited:t,mountOnEnter:i,unmountOnExit:s}){const a=N.useRef(null),l=N.useRef(e),u=vo(t);N.useEffect(()=>{e?l.current=!0:u(a.current)},[e,u]);const h=ty(a,yh(n)),f=N.cloneElement(n,{ref:h});return e?f:s||!l.current&&i?null:f}const FB=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function UB(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function zB(n){let{onEnter:e,onEntering:t,onEntered:i,onExit:s,onExiting:a,onExited:l,addEndListener:u,children:h}=n,f=UB(n,FB);const y=N.useRef(null),v=ty(y,yh(h)),x=Z=>Y=>{Z&&y.current&&Z(y.current,Y)},T=N.useCallback(x(e),[e]),C=N.useCallback(x(t),[t]),D=N.useCallback(x(i),[i]),R=N.useCallback(x(s),[s]),L=N.useCallback(x(a),[a]),$=N.useCallback(x(l),[l]),q=N.useCallback(x(u),[u]);return Object.assign({},f,{nodeRef:y},e&&{onEnter:T},t&&{onEntering:C},i&&{onEntered:D},s&&{onExit:R},a&&{onExiting:L},l&&{onExited:$},u&&{addEndListener:q},{children:typeof h=="function"?(Z,Y)=>h(Z,Object.assign({},Y,{ref:v})):N.cloneElement(h,{ref:v})})}const BB=["component"];function HB(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const $B=N.forwardRef((n,e)=>{let{component:t}=n,i=HB(n,BB);const s=zB(i);return p.jsx(t,Object.assign({ref:e},s))});function qB({in:n,onTransition:e}){const t=N.useRef(null),i=N.useRef(!0),s=vo(e);return bA(()=>{if(!t.current)return;let a=!1;return s({in:n,element:t.current,initial:i.current,isStale:()=>a}),()=>{a=!0}},[n,s]),bA(()=>(i.current=!1,()=>{i.current=!0}),[]),t}function WB({children:n,in:e,onExited:t,onEntered:i,transition:s}){const[a,l]=N.useState(!e);e&&a&&l(!1);const u=qB({in:!!e,onTransition:f=>{const y=()=>{f.isStale()||(f.in?i?.(f.element,f.initial):(l(!0),t?.(f.element)))};Promise.resolve(s(f)).then(y,v=>{throw f.in||l(!0),v})}}),h=ty(u,yh(n));return a&&!e?null:N.cloneElement(n,{ref:h})}function IA(n,e,t){return n?p.jsx($B,Object.assign({},t,{component:n})):e?p.jsx(WB,Object.assign({},t,{transition:e})):p.jsx(VB,Object.assign({},t))}const GB=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function KB(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}let ub;function YB(n){return ub||(ub=new S0({ownerDocument:n?.document})),ub}function XB(n){const e=A0(),t=n||YB(e),i=N.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>t.add(i.current),remove:()=>t.remove(i.current),isTopModal:()=>t.isTopModal(i.current),setDialogRef:N.useCallback(s=>{i.current.dialog=s},[]),setBackdropRef:N.useCallback(s=>{i.current.backdrop=s},[])})}const rk=N.forwardRef((n,e)=>{let{show:t=!1,role:i="dialog",className:s,style:a,children:l,backdrop:u=!0,keyboard:h=!0,onBackdropClick:f,onEscapeKeyDown:y,transition:v,runTransition:x,backdropTransition:T,runBackdropTransition:C,autoFocus:D=!0,enforceFocus:R=!0,restoreFocus:L=!0,restoreFocusOptions:$,renderDialog:q,renderBackdrop:Z=st=>p.jsx("div",Object.assign({},st)),manager:Y,container:J,onShow:F,onHide:I=()=>{},onExit:O,onExited:U,onExiting:H,onEnter:B,onEntering:z,onEntered:Le}=n,_e=KB(n,GB);const G=A0(),ie=LB(J),Ee=XB(Y),Ve=K9(),P=Y9(t),[fe,Re]=N.useState(!t),pe=N.useRef(null);N.useImperativeHandle(e,()=>Ee,[Ee]),iy&&!P&&t&&(pe.current=lb(G?.document)),t&&fe&&Re(!1);const Ne=vo(()=>{if(Ee.add(),xe.current=mg(document,"keydown",Se),Tt.current=mg(document,"focus",()=>setTimeout(je),!0),F&&F(),D){var st,yn;const Gt=lb((st=(yn=Ee.dialog)==null?void 0:yn.ownerDocument)!=null?st:G?.document);Ee.dialog&&Gt&&!CA(Ee.dialog,Gt)&&(pe.current=Gt,Ee.dialog.focus())}}),qe=vo(()=>{if(Ee.remove(),xe.current==null||xe.current(),Tt.current==null||Tt.current(),L){var st;(st=pe.current)==null||st.focus==null||st.focus($),pe.current=null}});N.useEffect(()=>{!t||!ie||Ne()},[t,ie,Ne]),N.useEffect(()=>{fe&&qe()},[fe,qe]),PB(()=>{qe()});const je=vo(()=>{if(!R||!Ve()||!Ee.isTopModal())return;const st=lb(G?.document);Ee.dialog&&st&&!CA(Ee.dialog,st)&&Ee.dialog.focus()}),Ge=vo(st=>{st.target===st.currentTarget&&(f?.(st),u===!0&&I())}),Se=vo(st=>{h&&fB(st)&&Ee.isTopModal()&&(y?.(st),st.defaultPrevented||I())}),Tt=N.useRef(),xe=N.useRef(),ce=(...st)=>{Re(!0),U?.(...st)};if(!ie)return null;const Ae=Object.assign({role:i,ref:Ee.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},_e,{style:a,className:s,tabIndex:-1});let He=q?q(Ae):p.jsx("div",Object.assign({},Ae,{children:N.cloneElement(l,{role:"document"})}));He=IA(v,x,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:O,onExiting:H,onExited:ce,onEnter:B,onEntering:z,onEntered:Le,children:He});let Je=null;return u&&(Je=Z({ref:Ee.setBackdropRef,onClick:Ge}),Je=IA(T,C,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Je})),p.jsx(p.Fragment,{children:Uu.createPortal(p.jsxs(p.Fragment,{children:[Je,He]}),ie)})});rk.displayName="Modal";const QB=Object.assign(rk,{Manager:S0}),ZB={[jr]:"show",[xo]:"show"},ak=N.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:i,...s},a)=>{const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},u=N.useCallback((h,f)=>{ek(h),i?.(h,f)},[i]);return p.jsx(sy,{ref:a,addEndListener:T0,...l,onEnter:u,childRef:yh(e),children:(h,f)=>N.cloneElement(e,{...f,className:Kt("fade",n,e.props.className,ZB[h],t[h])})})});ak.displayName="Fade";const ok=N.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=fn(e,"offcanvas-body"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));ok.displayName="OffcanvasBody";const JB={[jr]:"show",[xo]:"show"},lk=N.forwardRef(({bsPrefix:n,className:e,children:t,in:i=!1,mountOnEnter:s=!1,unmountOnExit:a=!1,appear:l=!1,...u},h)=>(n=fn(n,"offcanvas"),p.jsx(sy,{ref:h,addEndListener:T0,in:i,mountOnEnter:s,unmountOnExit:a,appear:l,...u,childRef:yh(t),children:(f,y)=>N.cloneElement(t,{...y,className:Kt(e,t.props.className,(f===jr||f===xf)&&`${n}-toggling`,JB[f])})})));lk.displayName="OffcanvasToggling";const ck=N.createContext({onHide(){}}),e8={"aria-label":ab.string,onClick:ab.func,variant:ab.oneOf(["white"])},C0=N.forwardRef(({className:n,variant:e,"aria-label":t="Close",...i},s)=>p.jsx("button",{ref:s,type:"button",className:Kt("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...i}));C0.displayName="CloseButton";C0.propTypes=e8;const uk=N.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:i,children:s,...a},l)=>{const u=N.useContext(ck),h=ry(()=>{u?.onHide(),i?.()});return p.jsxs("div",{ref:l,...a,children:[s,t&&p.jsx(C0,{"aria-label":n,variant:e,onClick:h})]})});uk.displayName="AbstractModalHeader";const hk=N.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:i=!1,...s},a)=>(n=fn(n,"offcanvas-header"),p.jsx(uk,{ref:a,...s,className:Kt(e,n),closeLabel:t,closeButton:i})));hk.displayName="OffcanvasHeader";const R0=n=>N.forwardRef((e,t)=>p.jsx("div",{...e,ref:t,className:Kt(e.className,n)})),t8=R0("h5"),dk=N.forwardRef(({className:n,bsPrefix:e,as:t=t8,...i},s)=>(e=fn(e,"offcanvas-title"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));dk.displayName="OffcanvasTitle";function n8(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function i8(n,e){n.classList?n.classList.add(e):n8(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function kA(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function s8(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=kA(n.className,e):n.setAttribute("class",kA(n.className&&n.className.baseVal||"",e))}const Pu={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class fk extends S0{adjustAndStore(e,t,i){const s=t.style[e];t.dataset[e]=s,Co(t,{[e]:`${parseFloat(Co(t,e))+i}px`})}restore(e,t){const i=t.dataset[e];i!==void 0&&(delete t.dataset[e],Co(t,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(i8(t,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Cc(t,Pu.FIXED_CONTENT).forEach(a=>this.adjustAndStore(i,a,e.scrollBarWidth)),Cc(t,Pu.STICKY_CONTENT).forEach(a=>this.adjustAndStore(s,a,-e.scrollBarWidth)),Cc(t,Pu.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(s,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();s8(t,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Cc(t,Pu.FIXED_CONTENT).forEach(a=>this.restore(i,a)),Cc(t,Pu.STICKY_CONTENT).forEach(a=>this.restore(s,a)),Cc(t,Pu.NAVBAR_TOGGLER).forEach(a=>this.restore(s,a))}}let hb;function r8(n){return hb||(hb=new fk(n)),hb}function a8(n){return p.jsx(lk,{...n})}function o8(n){return p.jsx(ak,{...n})}const mk=N.forwardRef(({bsPrefix:n,className:e,children:t,"aria-labelledby":i,placement:s="start",responsive:a,show:l=!1,backdrop:u=!0,keyboard:h=!0,scroll:f=!1,onEscapeKeyDown:y,onShow:v,onHide:x,container:T,autoFocus:C=!0,enforceFocus:D=!0,restoreFocus:R=!0,restoreFocusOptions:L,onEntered:$,onExit:q,onExiting:Z,onEnter:Y,onEntering:J,onExited:F,backdropClassName:I,manager:O,renderStaticNode:U=!1,...H},B)=>{const z=N.useRef();n=fn(n,"offcanvas");const[Le,_e]=N.useState(!1),G=ry(x),ie=OB(a||"xs","up");N.useEffect(()=>{_e(a?l&&!ie:l)},[l,a,ie]);const Ee=N.useMemo(()=>({onHide:G}),[G]);function Ve(){return O||(f?(z.current||(z.current=new fk({handleContainerOverflow:!1})),z.current):r8())}const P=(Ne,...qe)=>{Ne&&(Ne.style.visibility="visible"),Y?.(Ne,...qe)},fe=(Ne,...qe)=>{Ne&&(Ne.style.visibility=""),F?.(...qe)},Re=N.useCallback(Ne=>p.jsx("div",{...Ne,className:Kt(`${n}-backdrop`,I)}),[I,n]),pe=Ne=>p.jsx("div",{...Ne,...H,className:Kt(e,a?`${n}-${a}`:n,`${n}-${s}`),"aria-labelledby":i,children:t});return p.jsxs(p.Fragment,{children:[!Le&&(a||U)&&pe({}),p.jsx(ck.Provider,{value:Ee,children:p.jsx(QB,{show:Le,ref:B,backdrop:u,container:T,keyboard:h,autoFocus:C,enforceFocus:D&&!f,restoreFocus:R,restoreFocusOptions:L,onEscapeKeyDown:y,onShow:v,onHide:G,onEnter:P,onEntering:J,onEntered:$,onExit:q,onExiting:Z,onExited:fe,manager:Ve(),transition:a8,backdropTransition:o8,renderBackdrop:Re,renderDialog:pe})})]})});mk.displayName="Offcanvas";const l8=Object.assign(mk,{Body:ok,Header:hk,Title:dk}),pk=N.forwardRef(({onHide:n,...e},t)=>{const i=N.useContext(gh),s=ry(()=>{i==null||i.onToggle==null||i.onToggle(),n?.()});return p.jsx(l8,{ref:t,show:!!(i!=null&&i.expanded),...e,renderStaticNode:!0,onHide:s})});pk.displayName="NavbarOffcanvas";const gk=N.forwardRef(({className:n,bsPrefix:e,as:t="span",...i},s)=>(e=fn(e,"navbar-text"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));gk.displayName="NavbarText";const yk=N.forwardRef((n,e)=>{const{bsPrefix:t,expand:i=!0,variant:s="light",bg:a,fixed:l,sticky:u,className:h,as:f="nav",expanded:y,onToggle:v,onSelect:x,collapseOnSelect:T=!1,...C}=BI(n,{expanded:"onToggle"}),D=fn(t,"navbar"),R=N.useCallback((...q)=>{x?.(...q),T&&y&&v?.(!1)},[x,T,y,v]);C.role===void 0&&f!=="nav"&&(C.role="navigation");let L=`${D}-expand`;typeof i=="string"&&(L=`${L}-${i}`);const $=N.useMemo(()=>({onToggle:()=>v?.(!y),bsPrefix:D,expanded:!!y,expand:i}),[D,y,i,v]);return p.jsx(gh.Provider,{value:$,children:p.jsx(fg.Provider,{value:R,children:p.jsx(f,{ref:e,...C,className:Kt(h,D,i&&L,s&&`${D}-${s}`,a&&`bg-${a}`,u&&`sticky-${u}`,l&&`fixed-${l}`)})})})});yk.displayName="Navbar";const pp=Object.assign(yk,{Brand:ZI,Collapse:nk,Offcanvas:pk,Text:gk,Toggle:ik}),_k=N.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:i,active:s=!1,disabled:a=!1,className:l,...u},h)=>{const f=fn(e,"btn"),[y,{tagName:v}]=x0({tagName:n,disabled:a,...u}),x=v;return p.jsx(x,{...y,...u,ref:h,disabled:a,className:Kt(l,f,s&&"active",t&&`${f}-${t}`,i&&`${f}-${i}`,u.href&&a&&"disabled")})});_k.displayName="Button";const bk=N.createContext(),I0=()=>{const n=N.useContext(bk);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},c8=({children:n})=>{const[e,t]=N.useState(null),[i,s]=N.useState(!0);N.useEffect(()=>j5(ig,h=>{t(h),s(!1)}),[]);const l={user:e,loading:i,logout:async()=>{try{await L5(ig)}catch(u){console.error("Error logging out:",u)}},isAuthenticated:!!e};return p.jsx(bk.Provider,{value:l,children:n})};function bl(){const{logout:n,user:e}=I0(),t=lh(),[i,s]=N.useState(!1),a=async()=>{try{s(!1),await n(),t("/login")}catch(u){console.error("Error logging out:",u)}},l=()=>{s(!1)};return p.jsx(pp,{expand:"lg",className:"bg-body-tertiary",expanded:i,onToggle:u=>s(u),children:p.jsxs(UI,{fluid:!0,children:[p.jsx(pp.Brand,{as:go,to:"/",onClick:l,children:"Kombucha App"}),p.jsx(pp.Toggle,{"aria-controls":"basic-navbar-nav"}),p.jsxs(pp.Collapse,{id:"basic-navbar-nav",children:[p.jsxs(Mr,{className:"me-auto",children:[p.jsx(Mr.Link,{as:go,to:"/",onClick:l,children:"Dashboard"}),p.jsx(Mr.Link,{as:go,to:"/clientes",onClick:l,children:"Clientes"}),p.jsx(Mr.Link,{as:go,to:"/kombuchas",onClick:l,children:"Kombuchas"}),p.jsx(Mr.Link,{as:go,to:"/ventas",onClick:l,children:"Ventas"}),p.jsx(Mr.Link,{as:go,to:"/rutas",onClick:l,children:"Rutas"}),p.jsx(Mr.Link,{as:go,to:"/mapa",onClick:l,children:"Mapa"}),p.jsx(Mr.Link,{as:go,to:"/recordatorios",onClick:l,children:"Recordatorios"})]}),p.jsxs(Mr,{className:"ms-auto",children:[p.jsx(Mr.Item,{className:"d-flex align-items-center me-3",children:p.jsx("small",{className:"text-white",children:e?.email?e.email.split("@")[0]:""})}),p.jsx(Mr.Item,{children:p.jsx(_k,{variant:"danger",size:"sm",onClick:a,children:"Cerrar Sesin"})})]})]})]})})}const pg=()=>new Promise((n,e)=>{if(window.google&&window.google.maps){console.log("Google Maps already loaded"),n(window.google.maps);return}const t="AIzaSyC2hTUdZnWCx7qSKtw0nrPzX75Us4OMX80";console.log("Loading Google Maps API with key:",t.substring(0,10)+"...");const i=document.createElement("script");i.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places&callback=initGoogleMaps`,i.async=!0,i.defer=!0,window.initGoogleMaps=()=>{console.log("Google Maps API loaded successfully"),window.google&&window.google.maps?n(window.google.maps):e(new Error("Google Maps failed to initialize properly")),delete window.initGoogleMaps},i.onload=()=>{console.log("Google Maps script loaded")},i.onerror=()=>{const s="Failed to load Google Maps API script";console.error(s),e(new Error(s))},document.head.appendChild(i),setTimeout(()=>{if(!window.google||!window.google.maps){const s="Google Maps API loading timed out";console.error(s),e(new Error(s))}},1e4)}),u8=({value:n,onChange:e,placeholder:t="Ingresa una direccin...",className:i="",restrictedCities:s=[],restrictedStates:a=[]})=>{const[l,u]=N.useState([]),[h,f]=N.useState(!1),[y,v]=N.useState(n||""),x=N.useRef(null),T=N.useRef(null);N.useEffect(()=>{(async()=>{try{await pg(),x.current=new window.google.maps.places.AutocompleteService,T.current=new window.google.maps.places.PlacesService(document.createElement("div"))}catch(q){console.error("Failed to load Google Maps:",q)}})()},[]),N.useEffect(()=>{v(n||"")},[n]);const C=$=>{const q=$.target.value;v(q),e({address:q,coordinates:null}),q.length>2&&x.current?x.current.getPlacePredictions({input:q,componentRestrictions:{country:"mx"},types:["address"]},(Z,Y)=>{if(Y===window.google.maps.places.PlacesServiceStatus.OK){let J=Z;(s.length>0||a.length>0)&&(J=Z.filter(F=>{const I=F.structured_formatting.secondary_text||"",O=F.description||"",U=s.length===0||s.some(B=>I.toLowerCase().includes(B.toLowerCase())||O.toLowerCase().includes(B.toLowerCase())),H=a.length===0||a.some(B=>I.toLowerCase().includes(B.toLowerCase())||O.toLowerCase().includes(B.toLowerCase()));return U&&H})),u(J),f(J.length>0)}else u([]),f(!1)}):(u([]),f(!1))},D=$=>{v($.description),f(!1),u([]),T.current&&T.current.getDetails({placeId:$.place_id,fields:["geometry","formatted_address"]},(q,Z)=>{if(Z===window.google.maps.places.PlacesServiceStatus.OK){const Y={lat:q.geometry.location.lat(),lng:q.geometry.location.lng()};e({address:$.description,coordinates:Y})}})},R=()=>{setTimeout(()=>{f(!1)},200)},L=()=>{l.length>0&&f(!0)};return p.jsxs("div",{className:`address-autocomplete ${i}`,children:[p.jsx("input",{type:"text",value:y,onChange:C,onBlur:R,onFocus:L,placeholder:t,className:"address-input",autoComplete:"off"}),h&&l.length>0&&p.jsx("div",{className:"suggestions-container",children:l.map(($,q)=>p.jsxs("div",{className:"suggestion-item",onClick:()=>D($),onMouseDown:Z=>Z.preventDefault(),children:[p.jsx("div",{className:"suggestion-main-text",children:$.structured_formatting.main_text}),p.jsx("div",{className:"suggestion-secondary-text",children:$.structured_formatting.secondary_text})]},$.place_id))})]})},ya={restrictedCities:[],restrictedStates:["Puebla"],defaultMapCenter:{lat:19.4326,lng:-99.1332},defaultZoom:12,country:"mx"},h8=()=>ya.restrictedCities,d8=()=>ya.restrictedStates,f8=({showDetails:n=!1})=>ya.restrictedCities.length>0||ya.restrictedStates.length>0?p.jsxs("div",{className:"location-restrictions",children:[p.jsxs("div",{className:"restrictions-header",children:[p.jsx("span",{className:"restrictions-icon",children:""}),p.jsx("span",{className:"restrictions-text",children:"Bsqueda limitada a ubicaciones especficas"})]}),n&&p.jsxs("div",{className:"restrictions-details",children:[ya.restrictedCities.length>0&&p.jsxs("div",{className:"restriction-group",children:[p.jsx("strong",{children:"Ciudades permitidas:"}),p.jsx("div",{className:"restriction-tags",children:ya.restrictedCities.map((t,i)=>p.jsx("span",{className:"restriction-tag city-tag",children:t},i))})]}),ya.restrictedStates.length>0&&p.jsxs("div",{className:"restriction-group",children:[p.jsx("strong",{children:"Estados permitidos:"}),p.jsx("div",{className:"restriction-tags",children:ya.restrictedStates.map((t,i)=>p.jsx("span",{className:"restriction-tag state-tag",children:t},i))})]})]})]}):null,m8=({address:n,coordinates:e,onClose:t})=>{const i=N.useRef(null),s=N.useRef(null),a=N.useRef(null);return N.useEffect(()=>{(async()=>{try{if(await pg(),i.current&&e){const u={lat:parseFloat(e.lat),lng:parseFloat(e.lng)};s.current=new window.google.maps.Map(i.current,{center:u,zoom:16,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),a.current=new window.google.maps.Marker({position:u,map:s.current,title:n,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#F54927",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:3}});const h=new window.google.maps.InfoWindow({content:`
          <div style="padding: 12px; min-width: 250px;">
            <h3 style="margin: 0 0 8px 0; color: #333; font-size: 16px;"> Direccin Seleccionada</h3>
            <p style="margin: 8px 0; color: #666; line-height: 1.4;">
              <strong>Direccin:</strong><br>
              ${n}
            </p>
            <p style="margin: 8px 0; color: #666; font-size: 12px;">
              <strong>Coordenadas:</strong><br>
              ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}
            </p>
          </div>
        `});h.open(s.current,a.current),a.current.addListener("click",()=>{h.open(s.current,a.current)})}}catch(u){console.error("Failed to load Google Maps:",u)}})()},[n,e]),e?p.jsx("div",{className:"address-preview-overlay",children:p.jsxs("div",{className:"address-preview-container",children:[p.jsxs("div",{className:"address-preview-header",children:[p.jsx("h3",{children:"Vista Previa de la Direccin"}),p.jsx("button",{className:"close-btn",onClick:t,children:""})]}),p.jsxs("div",{className:"address-preview-content",children:[p.jsxs("div",{className:"address-info",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Direccin:"})," ",n]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Coordenadas:"})," ",e.lat.toFixed(6),", ",e.lng.toFixed(6)]})]}),p.jsx("div",{className:"map-preview-container",children:p.jsx("div",{ref:i,className:"map-preview"})})]}),p.jsx("div",{className:"address-preview-actions",children:p.jsx("button",{className:"confirm-btn",onClick:t,children:"Confirmar Direccin"})})]})}):null};function p8(){lh();const[n,e]=N.useState([]),[t,i]=N.useState(!0),[s,a]=N.useState(!1),[l,u]=N.useState(null),[h,f]=N.useState("nombre"),[y,v]=N.useState("asc"),[x,T]=N.useState({nombre:"",telefono:"",direccion:"",direccionCoords:null,fechaRegistro:""}),[C,D]=N.useState(!1),[R,L]=N.useState(!1),[$,q]=N.useState([]),[Z,Y]=N.useState(!1),[J,F]=N.useState(null),[I,O]=N.useState({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),U=async()=>{try{console.log("Fetching clients from Firebase...");const[ce,Ae]=await Promise.all([zn(un(It,"clientes")),zn(un(It,"kombuchas"))]),He=ce.docs.map(st=>({id:st.id,...st.data()})),Je=Ae.docs.map(st=>({id:st.id,...st.data()}));console.log("Processed clients data:",He),console.log("Processed kombuchas data:",Je),e(He),q(Je)}catch(ce){console.error("Error fetching clients:",ce)}finally{i(!1)}};N.useEffect(()=>{U()},[]),N.useEffect(()=>{const ce=Ae=>{Ae.key==="Escape"&&(s&&fe(),R&&Tt())};return(s||R)&&document.addEventListener("keydown",ce),()=>{document.removeEventListener("keydown",ce)}},[s,R]);const H=ce=>{h===ce?v(y==="asc"?"desc":"asc"):(f(ce),v("asc"))},B=[...n].sort((ce,Ae)=>{let He=ce[h]||"",Je=Ae[h]||"";return h==="fechaRegistro"&&(He=He||"1900-01-01",Je=Je||"1900-01-01"),typeof He=="string"&&(He=He.toLowerCase(),Je=Je.toLowerCase()),y==="asc"?He>Je?1:-1:He<Je?1:-1}),z=ce=>h!==ce?"":y==="asc"?"":"",Le=ce=>{const{name:Ae,value:He}=ce.target;T(Je=>({...Je,[Ae]:He}))},_e=ce=>{T(Ae=>({...Ae,direccion:ce.address,direccionCoords:ce.coordinates?{lat:parseFloat(ce.coordinates.lat),lng:parseFloat(ce.coordinates.lng)}:null}))},G=()=>{x.direccionCoords&&x.direccion&&D(!0)},ie=()=>{D(!1)},Ee=async ce=>{ce.preventDefault();try{const Ae={...x,fechaRegistro:x.fechaRegistro||Fs()};Ae.direccionCoords||delete Ae.direccionCoords,l?(await Df(Ca(It,"clientes",l.id),Ae),u(null)):await Pc(un(It,"clientes"),Ae),T({nombre:"",telefono:"",direccion:"",direccionCoords:null}),a(!1),U()}catch(Ae){console.error("Error saving client:",Ae)}},Ve=ce=>{u(ce),T({nombre:ce.nombre||"",telefono:ce.telefono||"",direccion:ce.direccion||"",direccionCoords:ce.direccionCoords?{lat:parseFloat(ce.direccionCoords.lat),lng:parseFloat(ce.direccionCoords.lng)}:null}),a(!0)},P=async ce=>{if(window.confirm("Ests seguro de que quieres eliminar este cliente?"))try{await Vg(Ca(It,"clientes",ce)),U()}catch(Ae){console.error("Error deleting client:",Ae)}},fe=()=>{a(!1),u(null),T({nombre:"",telefono:"",direccion:"",direccionCoords:null})},Re=ce=>{const{name:Ae,value:He}=ce.target;O(Je=>({...Je,[Ae]:He}))},pe=(ce,Ae,He)=>{O(Je=>{const st=[...Je.items];if(st[ce]={...st[ce],[Ae]:He},Ae==="kombuchaId"&&He){const Gt=$.find(Ki=>Ki.id===He);Gt&&Gt.precio&&(st[ce].precio=Gt.precio.toString())}const yn=st.reduce((Gt,Ki)=>{const Yi=(parseFloat(Ki.cantidad)||0)*(parseFloat(Ki.precio)||0);return Gt+Yi},0);return{...Je,items:st,total:yn.toFixed(2)}})},Ne=()=>{O(ce=>({...ce,items:[...ce.items,{kombuchaId:"",cantidad:1,precio:""}]}))},qe=ce=>{O(Ae=>({...Ae,items:Ae.items.filter((He,Je)=>Je!==ce)}))},je=ce=>{const Ae=$.find(He=>He.id===ce);return Ae?Ae.precio:null},Ge=ce=>{if(!ce.kombuchaId)return!1;const Ae=je(ce.kombuchaId);return Ae&&parseFloat(ce.precio)!==parseFloat(Ae)},Se=async ce=>{ce.preventDefault(),Y(!0);try{const Ae={...I,fecha:I.fecha,total:parseFloat(I.total),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Pc(un(It,"ventas"),Ae),O({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),L(!1),F(null),alert("Venta registrada exitosamente")}catch(Ae){console.error("Error creating sale:",Ae),alert("Error al registrar la venta")}finally{Y(!1)}},Tt=()=>{O({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),L(!1),F(null)},xe=ce=>{F(ce),O(Ae=>({...Ae,cliente:ce.id,fecha:Fs()})),L(!0)};return t?p.jsx("div",{className:"clientes-page",children:p.jsx("div",{className:"loading",children:"Cargando clientes..."})}):p.jsxs("div",{className:"clientes-page",children:[p.jsxs("div",{className:"clientes-header",children:[p.jsx("h1",{children:"Gestin de Clientes"}),p.jsx("button",{className:"add-cliente-btn",onClick:()=>a(!0),children:"+ Nuevo Cliente"})]}),s&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:l?"Editar Cliente":"Nuevo Cliente"}),p.jsxs("form",{onSubmit:Ee,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nombre",children:"Nombre *"}),p.jsx("input",{type:"text",id:"nombre",name:"nombre",value:x.nombre,onChange:Le,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"telefono",children:"Telfono"}),p.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:x.telefono,onChange:Le})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"direccion",children:"Direccin"}),p.jsx(f8,{showDetails:!1}),p.jsx(u8,{value:x.direccion,onChange:_e,placeholder:"Ingresa la direccin del cliente...",restrictedCities:h8(),restrictedStates:d8()}),x.direccionCoords&&p.jsxs("div",{className:"coordinates-info",children:[p.jsxs("small",{children:[" Coordenadas guardadas: ",x.direccionCoords.lat.toFixed(6),", ",x.direccionCoords.lng.toFixed(6)]}),p.jsx("button",{type:"button",className:"preview-map-btn",onClick:G,children:" Ver en Mapa"})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",onClick:fe,className:"cancel-btn",children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",children:l?"Actualizar":"Guardar"})]})]})]})}),p.jsx("div",{className:"clientes-content",children:n.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:"No hay clientes registrados"}),p.jsx("button",{className:"add-first-cliente-btn",onClick:()=>a(!0),children:"Agregar primer cliente"})]}):p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"clientes-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{className:"sortable",onClick:()=>H("nombre"),children:["Nombre ",z("nombre")]}),p.jsxs("th",{className:"sortable",onClick:()=>H("telefono"),children:["Telfono ",z("telefono")]}),p.jsxs("th",{className:"sortable",onClick:()=>H("direccion"),children:["Direccin ",z("direccion")]}),p.jsxs("th",{className:"sortable",onClick:()=>H("fechaRegistro"),children:["Fecha de Registro ",z("fechaRegistro")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:B.map(ce=>p.jsxs("tr",{children:[p.jsx("td",{children:ce.nombre}),p.jsx("td",{children:ce.telefono||"-"}),p.jsx("td",{children:ce.direccion||"-"}),p.jsx("td",{children:ce.fechaRegistro||"-"}),p.jsxs("td",{className:"actions",children:[p.jsx("button",{className:"edit-btn",onClick:()=>Ve(ce),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>P(ce.id),children:"Eliminar"}),p.jsx("button",{className:"add-sale-btn",onClick:()=>xe(ce),children:"+ Venta"})]})]},ce.id))})]})})}),C&&p.jsx(m8,{address:x.direccion,coordinates:x.direccionCoords,onClose:ie}),R&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container sale-form-modal",children:[p.jsxs("h2",{children:["Nueva Venta - ",J?.nombre," - ",ga(I.fecha)]}),p.jsxs("form",{onSubmit:Se,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"fecha",children:"Fecha *"}),p.jsx("input",{type:"date",id:"fecha",name:"fecha",value:I.fecha,onChange:Re,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"cliente",children:"Cliente *"}),p.jsxs("select",{id:"cliente",name:"cliente",value:I.cliente,onChange:Re,required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(ce=>p.jsx("option",{value:ce.id,children:ce.nombre},ce.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Productos de la Venta *"}),p.jsx("div",{style:{marginBottom:"1rem"},children:p.jsx("button",{type:"button",onClick:Ne,style:{background:"#4299e1",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Agregar Producto"})}),I.items.map((ce,Ae)=>p.jsxs("div",{style:{border:"1px solid #667eea",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"rgb(102, 126, 234)",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Producto ",Ae+1]}),I.items.length>1&&p.jsx("button",{type:"button",onClick:()=>qe(Ae),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Kombucha *"}),p.jsxs("select",{value:ce.kombuchaId,onChange:He=>pe(Ae,"kombuchaId",He.target.value),style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0,children:[p.jsx("option",{value:"",children:"Selecciona una kombucha"}),$.map(He=>p.jsxs("option",{value:He.id,children:[He.nombre," - $",He.precio?.toFixed(2)||"0.00"]},He.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Cantidad *"}),p.jsx("input",{type:"number",value:ce.cantidad,onChange:He=>pe(Ae,"cantidad",He.target.value),min:"1",style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Precio *"}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:ce.precio,onChange:He=>pe(Ae,"precio",He.target.value),style:{width:"100%",padding:"0.5rem",border:Ge(ce)?"2px solid #f56565":"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#4a5568"},placeholder:"0.00"}),p.jsx("small",{style:{color:"white",fontSize:"0.7rem"},children:ce.kombuchaId&&je(ce.kombuchaId)?p.jsxs(p.Fragment,{children:["Precio original: $",je(ce.kombuchaId).toFixed(2),Ge(ce)&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#f56565",fontWeight:"bold"},children:[" "," Modificado"]}),p.jsx("button",{type:"button",onClick:()=>pe(Ae,"precio",je(ce.kombuchaId)),style:{background:"none",border:"none",color:"#4299e1",textDecoration:"underline",cursor:"pointer",fontSize:"0.7rem",marginLeft:"0.5rem"},children:"Restaurar"})]})]}):"Precio sugerido del producto (puede ser modificado)"})]})]}),p.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:p.jsxs("strong",{style:{color:"white"},children:["Subtotal: $",((parseFloat(ce.cantidad)||0)*(parseFloat(ce.precio)||0)).toFixed(2)]})})]},Ae))]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"total",children:"Total *"}),p.jsx("input",{type:"number",id:"total",name:"total",value:I.total,readOnly:!0,style:{backgroundColor:"#f7fafc",color:"#4a5568",cursor:"not-allowed",fontSize:"1.2rem",fontWeight:"bold"}}),p.jsx("small",{style:{color:"#666",fontSize:"0.8rem"},children:"Calculado automticamente (suma de todos los productos)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"estado",children:"Estado *"}),p.jsxs("select",{id:"estado",name:"estado",value:I.estado,onChange:Re,required:!0,children:[p.jsx("option",{value:"pendiente",children:"Pendiente"}),p.jsx("option",{value:"completada",children:"Completada"})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:Tt,disabled:Z,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:Z,children:Z?"Guardando...":"Guardar Venta"})]})]})]})})]})}const Jb=({clientes:n=[],center:e=null,zoom:t=12})=>{const i=N.useRef(null),s=N.useRef(null),a=N.useRef([]);return N.useEffect(()=>{(async()=>{try{if(await pg(),i.current){const u=e||ya.defaultMapCenter;s.current=new window.google.maps.Map(i.current,{center:u,zoom:t||ya.defaultZoom,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]})}}catch(u){console.error("Failed to load Google Maps:",u)}})()},[e,t]),N.useEffect(()=>{a.current.forEach(u=>{u.setMap(null)}),a.current=[],(async()=>{try{if(await pg(),s.current&&n.length>0){const u=new window.google.maps.LatLngBounds;let h=!1;if(n.forEach((f,y)=>{const v=parseFloat(f.direccionCoords?.lat),x=parseFloat(f.direccionCoords?.lng);if(f.direccionCoords&&!isNaN(v)&&!isNaN(x)){const T=new window.google.maps.Marker({position:{lat:v,lng:x},map:s.current,title:f.nombre,label:{text:(y+1).toString(),color:"white",fontWeight:"bold"},icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#F54927",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2}}),C=new window.google.maps.InfoWindow({content:`
              <div style="padding: 10px; min-width: 200px;">
                <h3 style="margin: 0 0 8px 0; color: #333;">${f.nombre}</h3>
                <p style="margin: 5px 0; color: #666;">
                  <strong>Telfono:</strong> ${f.telefono||"No disponible"}
                </p>
                <p style="margin: 5px 0; color: #666;">
                  <strong>Direccin:</strong> ${f.direccion||"No disponible"}
                </p>
                <p style="margin: 5px 0; color: #666;">
                  <strong>Registro:</strong> ${f.fechaRegistro||"No disponible"}
                </p>
              </div>
            `});T.addListener("click",()=>{C.open(s.current,T)}),a.current.push(T),u.extend(T.getPosition()),h=!0}}),h){s.current.fitBounds(u);const f=window.google.maps.event.addListenerOnce(s.current,"bounds_changed",()=>{s.current.setZoom(Math.min(s.current.getZoom(),15))})}}}catch(u){console.error("Failed to load Google Maps for markers:",u)}})()},[n]),p.jsxs("div",{className:"map-view",children:[p.jsx("div",{ref:i,className:"map-container"}),p.jsxs("div",{className:"map-legend",children:[p.jsx("h3",{children:"Clientes en el mapa"}),p.jsx("div",{className:"legend-items",children:n.map((l,u)=>{const h=parseFloat(l.direccionCoords?.lat),f=parseFloat(l.direccionCoords?.lng);return l.direccionCoords&&!isNaN(h)&&!isNaN(f)?p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-marker",style:{backgroundColor:"#F54927"},children:u+1}),p.jsx("span",{className:"legend-text",children:l.nombre})]},l.id):null})}),n.filter(l=>{const u=parseFloat(l.direccionCoords?.lat),h=parseFloat(l.direccionCoords?.lng);return l.direccionCoords&&!isNaN(u)&&!isNaN(h)}).length===0&&p.jsx("p",{className:"no-coordinates",children:"No hay clientes con coordenadas para mostrar en el mapa"})]})]})};function g8(){const[n,e]=N.useState([]),[t,i]=N.useState(!0),s=async()=>{try{console.log("Fetching clients for map...");const u=(await zn(un(It,"clientes"))).docs.map(h=>({id:h.id,...h.data()}));console.log("Clients with coordinates:",u.filter(h=>{const f=parseFloat(h.direccionCoords?.lat),y=parseFloat(h.direccionCoords?.lng);return h.direccionCoords&&!isNaN(f)&&!isNaN(y)})),e(u)}catch(l){console.error("Error fetching clients for map:",l)}finally{i(!1)}};if(N.useEffect(()=>{s()},[]),t)return p.jsx("div",{className:"map-page",children:p.jsx("div",{className:"loading",children:"Cargando mapa de clientes..."})});const a=n.filter(l=>{const u=parseFloat(l.direccionCoords?.lat),h=parseFloat(l.direccionCoords?.lng);return l.direccionCoords&&!isNaN(u)&&!isNaN(h)});return p.jsxs("div",{className:"map-page",children:[p.jsxs("div",{className:"map-header",children:[p.jsx("h1",{children:"Mapa de Clientes"}),p.jsxs("div",{className:"map-stats",children:[p.jsxs("span",{className:"stat-item",children:[p.jsx("strong",{children:"Total de clientes:"})," ",n.length]}),p.jsxs("span",{className:"stat-item",children:[p.jsx("strong",{children:"Con coordenadas:"})," ",a.length]})]})]}),a.length===0?p.jsx("div",{className:"no-coordinates-message",children:p.jsxs("div",{className:"message-content",children:[p.jsx("h2",{children:"No hay clientes con coordenadas"}),p.jsx("p",{children:"Para ver clientes en el mapa, necesitas agregar direcciones usando las sugerencias de Google Maps en la pgina de gestin de clientes."}),p.jsx("button",{className:"go-to-clients-btn",onClick:()=>window.location.href="/clientes",children:"Ir a Gestin de Clientes"})]})}):p.jsx("div",{className:"map-content",children:p.jsx(Jb,{clientes:n})})]})}const y8=()=>{const[n,e]=N.useState([]),[t,i]=N.useState(!0),[s,a]=N.useState(!1),[l,u]=N.useState(null),[h,f]=N.useState("nombre"),[y,v]=N.useState("asc"),[x,T]=N.useState(!1),[C,D]=N.useState(""),[R,L]=N.useState({nombre:"",precio:"",costoUnitario:""}),$=async()=>{try{i(!0);const z=(await zn(un(It,"kombuchas"))).docs.map(ie=>({id:ie.id,...ie.data()})),_e=(await zn(un(It,"ventas"))).docs.map(ie=>({id:ie.id,...ie.data()})),G=z.map(ie=>{let Ee=0;return _e.forEach(Ve=>{Ve.items&&Array.isArray(Ve.items)?Ve.items.forEach(P=>{P.kombuchaId===ie.id&&(Ee+=parseInt(P.cantidad)||0)}):Ve.kombucha===ie.id&&(Ee+=parseInt(Ve.cantidad)||0)}),{...ie,ventas:Ee}});e(G)}catch(B){console.error("Error fetching kombuchas:",B),D("Error al cargar las kombuchas")}finally{i(!1)}};N.useEffect(()=>{$()},[]);const q=B=>{f(B),v(y==="asc"?"desc":"asc")},Z=B=>h===B?y==="asc"?"":"":"",Y=B=>{const{name:z,value:Le}=B.target;L(_e=>({..._e,[z]:Le}))},J=async B=>{B.preventDefault(),T(!0),D("");try{if(!R.nombre.trim()||!R.precio.trim()||!R.costoUnitario.trim()){D("Sabor, precio y costo unitario son campos obligatorios");return}const z={nombre:R.nombre.trim(),precio:parseFloat(R.precio)||0,costoUnitario:parseFloat(R.costoUnitario)||0,fechaRegistro:l?l.fechaRegistro:sg(),fechaActualizacion:sg()};if(l)await Df(Ca(It,"kombuchas",l.id),z),e(Le=>Le.map(_e=>_e.id===l.id?{..._e,...z}:_e)),u(null);else{const Le=await Pc(un(It,"kombuchas"),z);e(_e=>[..._e,{id:Le.id,...z,ventas:0}])}a(!1),U()}catch(z){console.error("Error saving kombucha:",z),D("Error al guardar la kombucha")}finally{T(!1)}},F=B=>{u(B),L({nombre:B.nombre||"",precio:B.precio?.toString()||"",costoUnitario:B.costoUnitario?.toString()||""}),a(!0)},I=async B=>{if(window.confirm("Ests seguro de que quieres eliminar esta kombucha?"))try{await Vg(Ca(It,"kombuchas",B)),e(z=>z.filter(Le=>Le.id!==B))}catch(z){console.error("Error deleting kombucha:",z),D("Error al eliminar la kombucha")}},O=()=>{a(!1),u(null),U()},U=()=>{L({nombre:"",precio:"",costoUnitario:""}),D("")},H=[...n].sort((B,z)=>{const Le=B[h],_e=z[h];if(h==="precio"||h==="ventas"||h==="costoUnitario"){const G=parseFloat(Le)||0,ie=parseFloat(_e)||0;return y==="asc"?G-ie:ie-G}return Le&&_e?y==="asc"?Le.toString().localeCompare(_e.toString()):_e.toString().localeCompare(Le.toString()):0});return t?p.jsx("div",{className:"kombuchas-page",children:p.jsx("div",{className:"loading",children:"Cargando kombuchas..."})}):p.jsxs("div",{className:"kombuchas-page",children:[p.jsxs("div",{className:"kombuchas-header",children:[p.jsx("h1",{children:"Kombuchas"}),p.jsx("button",{className:"add-kombucha-btn",onClick:()=>a(!0),children:"+ Nueva Kombucha"})]}),C&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:C}),p.jsx("div",{className:"kombuchas-content",children:n.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:"No hay kombuchas registradas"}),p.jsx("button",{className:"add-first-kombucha-btn",onClick:()=>a(!0),children:"Agregar primera kombucha"})]}):p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"kombuchas-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{className:"sortable",onClick:()=>q("nombre"),children:["Sabor Kombucha ",Z("nombre")]}),p.jsxs("th",{className:"sortable",onClick:()=>q("precio"),children:["Precio ",Z("precio")]}),p.jsxs("th",{className:"sortable",onClick:()=>q("costoUnitario"),children:["Costo Unitario ",Z("costoUnitario")]}),p.jsxs("th",{className:"sortable",onClick:()=>q("ventas"),children:["Ventas ",Z("ventas")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:H.map(B=>p.jsxs("tr",{children:[p.jsx("td",{children:B.nombre}),p.jsxs("td",{className:"price-cell",children:["$",B.precio?.toFixed(2)||"0.00"]}),p.jsxs("td",{className:"price-cell",children:["$",B.costoUnitario?.toFixed(2)||"0.00"]}),p.jsx("td",{children:B.ventas||0}),p.jsx("td",{children:p.jsxs("div",{className:"actions",children:[p.jsx("button",{className:"edit-btn",onClick:()=>F(B),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>I(B.id),children:"Eliminar"})]})})]},B.id))})]})})}),s&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:l?"Editar Kombucha":"Nueva Kombucha"}),C&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem"},children:C}),p.jsxs("form",{onSubmit:J,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nombre",children:"Sabor *"}),p.jsx("input",{type:"text",id:"nombre",name:"nombre",value:R.nombre,onChange:Y,required:!0,placeholder:"Sabor de la kombucha"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"precio",children:"Precio *"}),p.jsx("input",{type:"number",id:"precio",name:"precio",value:R.precio,onChange:Y,required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"costoUnitario",children:"Costo Unitario *"}),p.jsx("input",{type:"number",id:"costoUnitario",name:"costoUnitario",value:R.costoUnitario,onChange:Y,required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:O,disabled:x,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:x,children:x?"Guardando...":l?"Actualizar":"Guardar"})]})]})]})})]})},_8=()=>{const n=ka(),[e,t]=N.useState([]),[i,s]=N.useState(!0),[a,l]=N.useState(!1),[u,h]=N.useState(null),[f,y]=N.useState("fecha"),[v,x]=N.useState("asc"),[T,C]=N.useState(!1),[D,R]=N.useState(""),[L,$]=N.useState([]),[q,Z]=N.useState([]),[Y,J]=N.useState(HR()),[F,I]=N.useState("sales"),[O,U]=N.useState({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],packs:[],total:"0.00",estado:"pendiente",isWholesale:!1}),H=async()=>{try{s(!0);const re=(await zn(un(It,"ventas"))).docs.map(ae=>({id:ae.id,...ae.data()}));t(re)}catch(K){console.error("Error fetching sales:",K),R("Error al cargar las ventas")}finally{s(!1)}},B=async()=>{try{const re=(await zn(un(It,"kombuchas"))).docs.map(ae=>({id:ae.id,...ae.data()}));$(re)}catch(K){console.error("Error fetching kombuchas:",K)}},z=async()=>{try{const re=(await zn(un(It,"clientes"))).docs.map(ae=>({id:ae.id,...ae.data()}));Z(re)}catch(K){console.error("Error fetching clientes:",K)}};N.useEffect(()=>{H(),B(),z()},[]),N.useEffect(()=>{(O.items.length>0||O.packs.length>0)&&(Bs(),xs())},[O.items,O.packs]),N.useEffect(()=>{n.state?.selectedCliente&&n.state?.showForm&&(U(K=>({...K,cliente:n.state.selectedCliente.id})),l(!0))},[n.state]);const Le=K=>{y(K),x(v==="asc"?"desc":"asc")},_e=K=>f===K?v==="asc"?"":"":"",G=K=>{const{name:re,value:ae,type:ye,checked:ke}=K.target;U(Ce=>({...Ce,[re]:ye==="checkbox"?ke:ae})),re==="isWholesale"&&setTimeout(ke?()=>{Gt()}:()=>{Ki(),Da()},0)},ie=(K,re,ae)=>{U(ye=>{const ke=[...ye.items];if(ke[K]={...ke[K],[re]:ae},re==="kombuchaId"&&ae){const tt=L.find(lt=>lt.id===ae);tt&&tt.precio&&!ke[K].precio&&(ke[K].precio=st(ae))}const Ce=ke.reduce((tt,lt)=>{const Yt=parseFloat(lt.cantidad)||0,Ft=parseFloat(lt.precio)||0;return tt+Yt*Ft},0),De=ye.packs.reduce((tt,lt)=>{const Yt=parseFloat(lt.precio)||0;return tt+Yt},0),Pe=Ce+De;if(ke.reduce((tt,lt)=>tt+(parseFloat(lt.cantidad)||0),0)+ye.packs.reduce((tt,lt)=>tt+(lt.kombuchas?.length||0),0)>=18&&!ye.isWholesale){const tt=ke.map(Ft=>Ft.kombuchaId?{...Ft,precio:Je()}:Ft),Yt=tt.reduce((Ft,hi)=>{const xi=parseFloat(hi.cantidad)||0,_r=parseFloat(hi.precio)||0;return Ft+xi*_r},0)+De;return{...ye,items:tt,total:Yt.toFixed(2)}}return{...ye,items:ke,total:Pe.toFixed(2)}})},Ee=()=>{U(K=>({...K,items:[...K.items,{kombuchaId:"",cantidad:1,precio:""}]}))},Ve=()=>{U(K=>{const re={kombuchas:[],precio:0},ae=K.items.reduce((Ce,De)=>{const Pe=parseFloat(De.cantidad)||0,et=parseFloat(De.precio)||0;return Ce+Pe*et},0),ye=[...K.packs,re].reduce((Ce,De)=>Ce+De.precio,0),ke=ae+ye;return{...K,packs:[...K.packs,re],total:ke.toFixed(2)}})},P=K=>{U(re=>{const ae=re.packs.filter((Pe,et)=>et!==K),ye=re.items.reduce((Pe,et)=>{const tt=parseFloat(et.cantidad)||0,lt=parseFloat(et.precio)||0;return Pe+tt*lt},0),ke=ae.reduce((Pe,et)=>Pe+et.precio,0),Ce=ye+ke;if(re.items.reduce((Pe,et)=>Pe+(parseFloat(et.cantidad)||0),0)+ae.reduce((Pe,et)=>Pe+(et.kombuchas?.length||0),0)<18&&!re.isWholesale){const Pe=re.items.map(lt=>lt.kombuchaId?{...lt,precio:xe(lt.kombuchaId)}:lt),tt=Pe.reduce((lt,Yt)=>{const Ft=parseFloat(Yt.cantidad)||0,hi=parseFloat(Yt.precio)||0;return lt+Ft*hi},0)+ke;return{...re,items:Pe,packs:ae,total:tt.toFixed(2)}}return{...re,packs:ae,total:Ce.toFixed(2)}})},fe=(K,re,ae)=>{U(ye=>{const ke=[...ye.packs];ke[K]={...ke[K],[re]:ae},ae.length>6&&(ae=ae.slice(0,6)),ke[K].precio=yn(ae);const Ce=ye.items.reduce((tt,lt)=>{const Yt=parseFloat(lt.cantidad)||0,Ft=parseFloat(lt.precio)||0;return tt+Yt*Ft},0),De=ke.reduce((tt,lt)=>tt+lt.precio,0),Pe=Ce+De;if(ye.items.reduce((tt,lt)=>tt+(parseFloat(lt.cantidad)||0),0)+ke.reduce((tt,lt)=>tt+(lt.kombuchas?.length||0),0)>=18&&!ye.isWholesale){const tt=ye.items.map(Ft=>Ft.kombuchaId?{...Ft,precio:Je()}:Ft),Yt=tt.reduce((Ft,hi)=>{const xi=parseFloat(hi.cantidad)||0,_r=parseFloat(hi.precio)||0;return Ft+xi*_r},0)+De;return{...ye,items:tt,packs:ke,total:Yt.toFixed(2)}}return{...ye,packs:ke,total:Pe.toFixed(2)}})},Re=K=>{U(re=>{const ae=re.items.filter((Pe,et)=>et!==K);ae.length===0&&ae.push({kombuchaId:"",cantidad:1,precio:""});const ye=ae.reduce((Pe,et)=>{const tt=parseFloat(et.cantidad)||0,lt=parseFloat(et.precio)||0;return Pe+tt*lt},0),ke=re.packs.reduce((Pe,et)=>{const tt=parseFloat(et.precio)||0;return Pe+tt},0),Ce=ye+ke;if(ae.reduce((Pe,et)=>Pe+(parseFloat(et.cantidad)||0),0)+re.packs.reduce((Pe,et)=>Pe+(et.kombuchas?.length||0),0)<18&&!re.isWholesale){const Pe=ae.map(lt=>lt.kombuchaId?{...lt,precio:xe(lt.kombuchaId)}:lt),tt=Pe.reduce((lt,Yt)=>{const Ft=parseFloat(Yt.cantidad)||0,hi=parseFloat(Yt.precio)||0;return lt+Ft*hi},0)+ke;return{...re,items:Pe,total:tt.toFixed(2)}}return{...re,items:ae,total:Ce.toFixed(2)}})},pe=async K=>{K.preventDefault(),C(!0),R("");try{if(!O.fecha.trim()||!O.cliente.trim()){R("Fecha y cliente son campos obligatorios");return}const re=O.items.filter(ke=>ke.kombuchaId&&ke.cantidad>0);if(re.length===0){R("Debe agregar al menos un item con kombucha y cantidad");return}const ae=O.packs.filter(ke=>ke.kombuchas&&ke.kombuchas.length>0),ye={fecha:O.fecha.trim(),cliente:O.cliente.trim(),items:re,packs:ae,total:parseFloat(O.total),estado:O.estado,isWholesale:O.isWholesale,fechaRegistro:u&&u.fechaRegistro?u.fechaRegistro:sg(),fechaActualizacion:sg()};if(u)await Df(Ca(It,"ventas",u.id),ye),t(ke=>ke.map(Ce=>Ce.id===u.id?{...Ce,...ye}:Ce)),h(null);else{const ke=await Pc(un(It,"ventas"),ye);t(Ce=>[...Ce,{id:ke.id,...ye}])}l(!1),Ge()}catch(re){console.error("Error saving sale:",re),R("Error al guardar la venta")}finally{C(!1)}},Ne=K=>{h(K);let re=[];K.items&&Array.isArray(K.items)?re=K.items:K.kombucha&&(re=[{kombuchaId:K.kombucha,cantidad:parseFloat(K.cantidad)||1,precio:parseFloat(K.precio)||0}]),re.length===0&&(re=[{kombuchaId:"",cantidad:1,precio:0}]);const ae=re.reduce((De,Pe)=>{const et=parseFloat(Pe.cantidad)||0,tt=parseFloat(Pe.precio)||0;return De+et*tt},0);let ye=[],ke=0;K.packs&&Array.isArray(K.packs)&&(ye=K.packs,ke=ye.reduce((De,Pe)=>De+(Pe.precio||0),0));const Ce=ae+ke;U({fecha:K.fecha||"",cliente:K.cliente||"",items:re,packs:ye,total:Ce.toFixed(2),estado:K.estado||"pendiente",isWholesale:K.isWholesale||!1}),l(!0)},qe=async K=>{if(window.confirm("Ests seguro de que quieres eliminar esta venta?"))try{await Vg(Ca(It,"ventas",K)),t(re=>re.filter(ae=>ae.id!==K))}catch(re){console.error("Error deleting sale:",re),R("Error al eliminar la venta")}},je=()=>{l(!1),h(null),Ge()},Ge=()=>{U({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],packs:[],total:"0.00",estado:"pendiente",isWholesale:!1})},Se=K=>{const re=L.find(ae=>ae.id===K);return re?re.nombre:"Kombucha no encontrada"},Tt=K=>{const re=q.find(ae=>ae.id===K);return re?re.nombre:"Cliente no encontrado"},xe=K=>{const re=L.find(ae=>ae.id===K);return re?re.precio:null},ce=()=>{const K=O.items.reduce((ae,ye)=>ae+(parseFloat(ye.cantidad)||0),0),re=O.packs.reduce((ae,ye)=>ae+(ye.kombuchas?.length||0),0);return K+re},Ae=()=>O.isWholesale||ce()>=18,He=()=>!O.isWholesale&&ce()>=18,Je=()=>36,st=K=>K?Ae()?Je():xe(K)||0:0,yn=K=>!K||K.length===0?0:K.length===6?Ae()?Je()*6:250:K.length>0?K.reduce((ae,ye)=>ae+st(ye),0):0,Gt=()=>{U(K=>{const re=K.items.map(De=>De.kombuchaId?{...De,precio:Je()}:De),ae=K.packs.map(De=>De.kombuchas&&De.kombuchas.length>0?{...De,precio:yn(De.kombuchas)}:De),ye=re.reduce((De,Pe)=>{const et=parseFloat(Pe.cantidad)||0,tt=parseFloat(Pe.precio)||0;return De+et*tt},0),ke=ae.reduce((De,Pe)=>De+Pe.precio,0),Ce=ye+ke;return{...K,items:re,packs:ae,total:Ce.toFixed(2)}})},Ki=()=>{U(K=>{const re=K.items.map(De=>De.kombuchaId?{...De,precio:xe(De.kombuchaId)||0}:De),ae=K.packs.map(De=>{if(De.kombuchas&&De.kombuchas.length>0){let Pe=0;return De.kombuchas.length===6?Pe=250:De.kombuchas.length>0&&(Pe=De.kombuchas.reduce((et,tt)=>et+(xe(tt)||0),0)),{...De,precio:Pe}}return De}),ye=re.reduce((De,Pe)=>{const et=parseFloat(Pe.cantidad)||0,tt=parseFloat(Pe.precio)||0;return De+et*tt},0),ke=ae.reduce((De,Pe)=>De+Pe.precio,0),Ce=ye+ke;return{...K,items:re,packs:ae,total:Ce.toFixed(2)}})},Yi=()=>{if(!Ae())return 0;let K=0;return O.items.forEach(re=>{if(re.kombuchaId&&re.cantidad){const ae=xe(re.kombuchaId)||0,ye=Je(),ke=(ae-ye)*parseFloat(re.cantidad);K+=ke}}),O.packs.forEach(re=>{if(re.kombuchas&&re.kombuchas.length>0)if(re.kombuchas.length===6){const ke=250-Je()*6;K+=ke}else{const ae=re.kombuchas.reduce((Ce,De)=>Ce+(xe(De)||0),0),ye=re.kombuchas.reduce((Ce,De)=>Ce+Je(),0),ke=ae-ye;K+=ke}}),K},Bs=()=>{ce()>=18&&!O.isWholesale&&Gt()},xs=()=>{U(K=>{const re=K.packs.map(Ce=>Ce.kombuchas&&Ce.kombuchas.length>0?{...Ce,precio:yn(Ce.kombuchas)}:Ce),ae=K.items.reduce((Ce,De)=>{const Pe=parseFloat(De.cantidad)||0,et=parseFloat(De.precio)||0;return Ce+Pe*et},0),ye=re.reduce((Ce,De)=>Ce+De.precio,0),ke=ae+ye;return{...K,packs:re,total:ke.toFixed(2)}})},Da=()=>{U(K=>{const re=K.packs.map(Ce=>{if(Ce.kombuchas&&Ce.kombuchas.length>0){let De=0;return Ce.kombuchas.length===6?De=250:Ce.kombuchas.length>0&&(De=Ce.kombuchas.reduce((Pe,et)=>Pe+(xe(et)||0),0)),{...Ce,precio:De}}return Ce}),ae=K.items.reduce((Ce,De)=>{const Pe=parseFloat(De.cantidad)||0,et=parseFloat(De.precio)||0;return Ce+Pe*et},0),ye=re.reduce((Ce,De)=>Ce+De.precio,0),ke=ae+ye;return{...K,packs:re,total:ke.toFixed(2)}})},Es=K=>{if(!K.kombuchaId||!K.precio)return!1;const re=xe(K.kombuchaId);return re&&parseFloat(K.precio)!==parseFloat(re)},vi=e.filter(K=>Y?(K.fecha?K.fecha.slice(0,7):"")===Y:!0),me=()=>{const K=vi,re=K.length,ae=K.filter(Pe=>Pe.estado!=="cancelada").reduce((Pe,et)=>Pe+(parseFloat(et.total)||0),0),ye=K.filter(Pe=>Pe.estado==="completada").length,ke=K.filter(Pe=>Pe.estado==="pendiente").length,Ce=K.filter(Pe=>Pe.estado==="cancelada").length,De=K.filter(Pe=>Pe.estado==="pagoPendiente").length;return{totalSales:re,totalRevenue:ae,completedSales:ye,pendingSales:ke,canceledSales:Ce,paymentPendingSales:De}},ze=()=>{const K=vi,re={};return K.forEach(ae=>{const ye=ae.cliente,ke=Tt(ye);if(re[ye]||(re[ye]={clienteId:ye,clienteName:ke,totalPurchases:0,totalAmount:0,kombuchaCounts:{},lastPurchase:null}),ae.estado!=="cancelada"){if(ae.items&&Array.isArray(ae.items)&&ae.items.forEach(Ce=>{const De=Se(Ce.kombuchaId),Pe=parseFloat(Ce.cantidad)||0;re[ye].kombuchaCounts[De]||(re[ye].kombuchaCounts[De]=0),re[ye].kombuchaCounts[De]+=Pe,re[ye].totalPurchases+=Pe}),ae.packs&&Array.isArray(ae.packs))ae.packs.forEach(Ce=>{Ce.kombuchas&&Array.isArray(Ce.kombuchas)&&Ce.kombuchas.forEach(De=>{const Pe=Se(De);re[ye].kombuchaCounts[Pe]||(re[ye].kombuchaCounts[Pe]=0),re[ye].kombuchaCounts[Pe]+=1,re[ye].totalPurchases+=1})});else if(ae.kombucha){const Ce=Se(ae.kombucha),De=parseFloat(ae.cantidad)||0;re[ye].kombuchaCounts[Ce]||(re[ye].kombuchaCounts[Ce]=0),re[ye].kombuchaCounts[Ce]+=De,re[ye].totalPurchases+=De}re[ye].totalAmount+=parseFloat(ae.total)||0}(!re[ye].lastPurchase||ae.fecha>re[ye].lastPurchase)&&(re[ye].lastPurchase=ae.fecha)}),Object.values(re).sort((ae,ye)=>ye.totalPurchases-ae.totalPurchases)},Ke=me(),St=ze(),Lt=[...vi].sort((K,re)=>{const ae=K[f],ye=re[f];if(f==="precio"||f==="total"){const ke=parseFloat(ae)||0,Ce=parseFloat(ye)||0;return v==="asc"?ke-Ce:Ce-ke}return ae&&ye?v==="asc"?ae.toString().localeCompare(ye.toString()):ye.toString().localeCompare(ae.toString()):0});return i?p.jsx("div",{className:"ventas-page",children:p.jsx("div",{className:"loading",children:"Cargando ventas..."})}):p.jsxs("div",{className:"ventas-page",children:[p.jsxs("div",{className:"ventas-header",children:[p.jsx("h1",{children:"Ventas"}),p.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[p.jsx("label",{style:{color:"#2d3748",fontWeight:"600",fontSize:"0.9rem"},children:"Filtrar por mes:"}),p.jsx("input",{type:"month",value:Y,onChange:K=>J(K.target.value),style:{padding:"0.5rem",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"0.9rem",backgroundColor:"white"}})]}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[p.jsx("button",{className:`view-toggle-btn ${F==="sales"?"active":""}`,onClick:()=>I("sales"),children:"Ventas"}),p.jsx("button",{className:`view-toggle-btn ${F==="clientSummary"?"active":""}`,onClick:()=>I("clientSummary"),children:"Resumen Clientes"})]}),p.jsx("button",{className:"add-venta-btn",onClick:()=>l(!0),children:"+ Nueva Venta"})]})]}),D&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:D}),p.jsxs("div",{className:"ventas-content",children:[p.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#f7fafc",borderBottom:"1px solid #e2e8f0",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Total Ventas"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#2d3748"},children:Ke.totalSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Ingresos Totales"}),p.jsxs("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#38a169"},children:["$",Ke.totalRevenue.toFixed(2)]})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Completadas"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#38a169"},children:Ke.completedSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Pendientes"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#d69e2e"},children:Ke.pendingSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Canceladas"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#c53030"},children:Ke.canceledSales})]}),p.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#4a5568",fontSize:"0.9rem"},children:"Pago Pendiente"}),p.jsx("p",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#d69e2e"},children:Ke.paymentPendingSales})]})]}),F==="clientSummary"&&p.jsxs("div",{style:{padding:"1.5rem"},children:[p.jsxs("h2",{style:{margin:"0 0 1.5rem 0",color:"#2d3748",fontSize:"1.5rem",fontWeight:"600",textAlign:"center"},children:["Resumen de Compras por Cliente - ",z_(Y)]}),St.length===0?p.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#718096",fontSize:"1.1rem"},children:["No hay compras registradas para ",z_(Y)]}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:St.map((K,re)=>p.jsxs("div",{className:"client-summary-card",style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"1px solid #e2e8f0",transition:"transform 0.2s ease, box-shadow 0.2s ease"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"2px solid #f7fafc"},children:[p.jsxs("div",{children:[p.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#2d3748",fontSize:"1.2rem",fontWeight:"700"},children:K.clienteName}),p.jsxs("p",{style:{margin:0,color:"#718096",fontSize:"0.9rem"},children:["ltima compra: ",K.lastPurchase||"N/A"]})]}),p.jsxs("div",{style:{textAlign:"right"},children:[p.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#38a169",marginBottom:"0.25rem"},children:K.totalPurchases}),p.jsx("div",{style:{fontSize:"0.8rem",color:"#718096",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Kombuchas"})]})]}),p.jsx("div",{style:{marginBottom:"1rem"},children:p.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#2d3748",marginBottom:"0.75rem"},children:["Total Gastado: $",K.totalAmount.toFixed(2)]})}),p.jsxs("div",{children:[p.jsx("h4",{style:{margin:"0 0 0.75rem 0",color:"#4a5568",fontSize:"0.95rem",fontWeight:"600"},children:"Detalle por Tipo:"}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Object.entries(K.kombuchaCounts).map(([ae,ye])=>p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:"#f7fafc",borderRadius:"6px",fontSize:"0.9rem"},children:[p.jsx("span",{style:{color:"#2d3748",fontWeight:"500"},children:ae}),p.jsx("span",{style:{color:"#38a169",fontWeight:"600",fontSize:"1rem"},children:ye})]},ae))})]})]},K.clienteId))})]}),F==="sales"&&p.jsx(p.Fragment,{children:Lt.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsxs("p",{children:["No hay ventas registradas para ",z_(Y)]}),p.jsx("button",{className:"add-venta-btn",onClick:()=>l(!0),children:"+ Nueva Venta"})]}):p.jsx("div",{className:"ventas-table-container",children:p.jsxs("table",{className:"ventas-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{className:"sortable",onClick:()=>Le("fecha"),children:["Fecha ",_e("fecha")]}),p.jsxs("th",{className:"sortable",onClick:()=>Le("cliente"),children:["Cliente ",_e("cliente")]}),p.jsx("th",{children:"Items"}),p.jsxs("th",{className:"sortable",onClick:()=>Le("total"),children:["Total ",_e("total")]}),p.jsx("th",{children:"Precio"}),p.jsxs("th",{className:"sortable",onClick:()=>Le("estado"),children:["Estado ",_e("estado")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:Lt.map(K=>p.jsxs("tr",{children:[p.jsx("td",{children:K.fecha}),p.jsx("td",{children:Tt(K.cliente)}),p.jsx("td",{children:p.jsxs("div",{style:{maxWidth:"300px"},children:[K.items&&Array.isArray(K.items)&&K.items.map((re,ae)=>p.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",backgroundColor:"#f7fafc",borderRadius:"4px",fontSize:"0.85rem"},children:[p.jsx("strong",{children:Se(re.kombuchaId)}),p.jsx("br",{}),"Cantidad: ",re.cantidad,"  $",(parseFloat(re.precio)||0).toFixed(2)]},ae)),K.packs&&Array.isArray(K.packs)&&K.packs.map((re,ae)=>p.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",backgroundColor:"#e6fffa",borderRadius:"4px",fontSize:"0.85rem",border:"1px solid #38a169"},children:[p.jsx("strong",{style:{color:"#38a169"},children:"Pack de 6 Variedades"}),p.jsx("br",{}),p.jsxs("span",{style:{color:"#38a169",fontWeight:"600"},children:["$",(parseFloat(re.precio)||0).toFixed(2)]}),re.kombuchas&&Array.isArray(re.kombuchas)&&p.jsx("div",{style:{marginTop:"0.25rem",fontSize:"0.75rem"},children:(()=>{const ye={};return re.kombuchas.forEach(ke=>{ye[ke]=(ye[ke]||0)+1}),Object.entries(ye).map(([ke,Ce])=>p.jsxs("span",{style:{display:"inline-block",margin:"0.1rem",padding:"0.1rem 0.3rem",backgroundColor:"rgba(56, 161, 105, 0.2)",borderRadius:"3px",fontSize:"0.7rem"},children:[Se(ke)," ",Ce>1?`${Ce}`:""]},ke))})()})]},`pack-${ae}`)),(!K.items||!Array.isArray(K.items))&&K.kombucha&&p.jsxs("div",{style:{padding:"0.5rem",backgroundColor:"#f7fafc",borderRadius:"4px",fontSize:"0.85rem"},children:[p.jsx("strong",{children:Se(K.kombucha)}),p.jsx("br",{}),"Cantidad: ",K.cantidad,"  $",(parseFloat(K.precio)||0).toFixed(2)]})]})}),p.jsxs("td",{className:"total-cell",children:["$",(parseFloat(K.total)||0).toFixed(2)]}),p.jsx("td",{children:K.isWholesale?p.jsxs("div",{style:{padding:"0.5rem",backgroundColor:"rgba(56, 161, 105, 0.2)",borderRadius:"4px",fontSize:"0.85rem",textAlign:"center",border:"1px solid rgba(56, 161, 105, 0.4)"},children:[p.jsx("span",{style:{color:"#38a169",fontWeight:"600"},children:"Mayorista"}),p.jsx("br",{}),p.jsx("small",{style:{color:"#38a169",fontSize:"0.75rem"},children:"$36 c/u"})]}):p.jsx("div",{style:{padding:"0.5rem",backgroundColor:"rgba(102, 126, 234, 0.1)",borderRadius:"4px",fontSize:"0.85rem",textAlign:"center",border:"1px solid rgba(102, 126, 234, 0.3)"},children:p.jsx("span",{style:{color:"#667eea",fontWeight:"600"},children:"Regular"})})}),p.jsx("td",{children:p.jsx("span",{className:`status-badge status-${K.estado}`,children:K.estado})}),p.jsx("td",{children:p.jsxs("div",{className:"actions",children:[p.jsx("button",{className:"edit-btn",onClick:()=>Ne(K),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>qe(K.id),children:"Eliminar"})]})})]},K.id))})]})})})]}),a&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:u?"Editar Venta":"Nueva Venta"}),D&&p.jsx("div",{className:"error-message",style:{background:"#fed7d7",color:"#c53030",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem"},children:D}),p.jsxs("form",{onSubmit:pe,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"fecha",children:"Fecha *"}),p.jsx("input",{type:"date",id:"fecha",name:"fecha",value:O.fecha,onChange:G,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"cliente",children:"Cliente *"}),p.jsxs("select",{id:"cliente",name:"cliente",value:O.cliente,onChange:G,required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un cliente"}),q.map(K=>p.jsx("option",{value:K.id,children:K.nombre},K.id))]})]}),p.jsxs("div",{className:"form-group",style:{backgroundColor:"rgba(56, 161, 105, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(56, 161, 105, 0.3)",marginBottom:"1rem"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[p.jsx("input",{type:"checkbox",id:"isWholesale",name:"isWholesale",checked:O.isWholesale,onChange:G,style:{width:"18px",height:"18px",accentColor:"#38a169"}}),p.jsx("label",{htmlFor:"isWholesale",style:{color:"#38a169",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Precio Mayorista ($36 por kombucha)"})]}),p.jsxs("div",{style:{fontSize:"0.85rem",color:"#38a169",marginLeft:"1.5rem"},children:[p.jsxs("div",{style:{marginBottom:"0.5rem"},children:[p.jsx("button",{type:"button",onClick:Gt,disabled:Ae(),style:{background:Ae()?"#718096":"#38a169",color:"white",border:"none",padding:"0.25rem 0.75rem",borderRadius:"3px",cursor:Ae()?"not-allowed":"pointer",fontSize:"0.8rem",marginRight:"0.5rem"},children:Ae()?"Ya aplicado":"Aplicar a todos"}),p.jsx("button",{type:"button",onClick:Ki,style:{background:"#e53e3e",color:"white",border:"none",padding:"0.25rem 0.75rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Restaurar precios"})]}),O.isWholesale?p.jsx("span",{style:{color:"#90ee90",fontWeight:"bold"},children:" Aplicando precio mayorista ($36 por kombucha)"}):He()?p.jsx("span",{style:{color:"#90ee90",fontWeight:"bold"},children:" Aplicando automticamente (18+ kombuchas = $36 c/u)"}):p.jsx("span",{children:"Se aplica automticamente con 18+ kombuchas o seleccin manual"})]}),ce()>0&&p.jsxs("div",{style:{fontSize:"0.8rem",color:"#e2e8f0",marginLeft:"1.5rem",marginTop:"0.5rem"},children:[p.jsxs("span",{children:["Total de kombuchas: ",ce(),He()&&p.jsxs("span",{style:{color:"#90ee90",fontWeight:"bold"},children:[" "," Aplicando mayorista automticamente"]})]}),ce()>0&&p.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem"},children:p.jsx("span",{children:Ae()?p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#90ee90"},children:["Precio por kombucha: $",Je().toFixed(2)]}),p.jsxs("span",{style:{color:"#a0aec0"},children:[" "," Ahorro total: $",Yi().toFixed(2)]}),p.jsxs("div",{style:{marginTop:"0.25rem",fontSize:"0.7rem",color:"#cbd5e0"},children:[O.items.filter(K=>K.kombuchaId).map((K,re)=>{const ye=((xe(K.kombuchaId)||0)-Je())*parseFloat(K.cantidad);return ye>0?p.jsxs("div",{children:[Se(K.kombuchaId),": $",ye.toFixed(2)," de ahorro"]},`item-${re}`):null}),O.packs.filter(K=>K.kombuchas&&K.kombuchas.length>0).map((K,re)=>{let ae=0;if(K.kombuchas.length===6)ae=250-Je()*6;else{const ye=K.kombuchas.reduce((Ce,De)=>Ce+(xe(De)||0),0),ke=K.kombuchas.length*Je();ae=ye-ke}return ae>0?p.jsxs("div",{children:["Pack ",re+1," (",K.kombuchas.length," kombuchas): $",ae.toFixed(2)," de ahorro"]},`pack-${re}`):null})]})]}):p.jsxs("span",{style:{color:"#a0aec0"},children:["Precio por kombucha: $",O.items.find(K=>K.kombuchaId)?.precio||"0.00"]})})})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Productos de la Venta *"}),ce()>0&&p.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:Ae()?"rgba(56, 161, 105, 0.1)":"rgba(102, 126, 234, 0.1)",border:`1px solid ${Ae()?"#38a169":"#667eea"}`,borderRadius:"8px",fontSize:"0.9rem"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[p.jsx("strong",{style:{color:Ae()?"#38a169":"#667eea"},children:Ae()?"Precio Mayorista Aplicado":"Precio Regular"}),p.jsxs("span",{style:{color:Ae()?"#38a169":"#667eea",fontWeight:"bold"},children:["$",Ae()?Je().toFixed(2):"0.00"," por kombucha"]})]}),Ae()&&p.jsxs("div",{style:{color:"#38a169",fontSize:"0.8rem"},children:[" Ahorro total: $",Yi().toFixed(2)]})]}),p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsx("button",{type:"button",onClick:Ee,style:{background:"#4299e1",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem",marginRight:"0.5rem"},children:"+ Agregar Producto"}),p.jsx("button",{type:"button",onClick:Ve,style:{background:"#38a169",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Agregar Pack 6"})]}),O.items.map((K,re)=>p.jsxs("div",{style:{border:"1px solid #667eea",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"rgb(102, 126, 234)",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Producto ",re+1]}),O.items.length>1&&p.jsx("button",{type:"button",onClick:()=>Re(re),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Kombucha *"}),p.jsxs("select",{value:K.kombuchaId,onChange:ae=>ie(re,"kombuchaId",ae.target.value),style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0,children:[p.jsx("option",{value:"",children:"Selecciona una kombucha"}),L.map(ae=>p.jsxs("option",{value:ae.id,children:[ae.nombre," - $",ae.precio?.toFixed(2)||"0.00"]},ae.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Cantidad *"}),p.jsx("input",{type:"number",value:K.cantidad,onChange:ae=>ie(re,"cantidad",ae.target.value),min:"1",style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Precio *"}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:K.precio,onChange:ae=>ie(re,"precio",ae.target.value),style:{width:"100%",padding:"0.5rem",border:Es(K)?"2px solid #f56565":"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#4a5568"},placeholder:"0.00"}),p.jsx("small",{style:{color:"white",fontSize:"0.7rem"},children:K.kombuchaId&&xe(K.kombuchaId)?p.jsxs(p.Fragment,{children:[Ae()?p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#90ee90",fontWeight:"bold"},children:["Precio mayorista: $",Je().toFixed(2)]}),p.jsxs("span",{style:{color:"#e2e8f0",fontSize:"0.65rem"},children:[" ","(Original: $",xe(K.kombuchaId).toFixed(2),")"]})]}):p.jsxs(p.Fragment,{children:["Precio original: $",xe(K.kombuchaId).toFixed(2),p.jsxs("span",{style:{color:"#90ee90",fontSize:"0.65rem"},children:[" ","(Mayorista: $",Je().toFixed(2),")"]})]}),Es(K)&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#f56565",fontWeight:"bold"},children:[" "," Modificado"]}),p.jsx("button",{type:"button",onClick:()=>ie(re,"precio",st(K.kombuchaId)),style:{background:"none",border:"none",color:"#4299e1",textDecoration:"underline",cursor:"pointer",fontSize:"0.7rem",marginLeft:"0.5rem"},children:"Restaurar"})]})]}):"Precio sugerido del producto (puede ser modificado)"})]})]}),p.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:p.jsxs("strong",{style:{color:"white"},children:["Subtotal: $",((parseFloat(K.cantidad)||0)*(parseFloat(K.precio)||0)).toFixed(2)]})})]},re)),O.packs.length>0&&p.jsxs("div",{style:{marginTop:"2rem"},children:[p.jsx("h3",{style:{color:"#2d3748",marginBottom:"1rem",fontSize:"1.1rem"},children:"Packs de 6 Variedades"}),O.packs.map((K,re)=>p.jsxs("div",{style:{border:"1px solid #38a169",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"#38a169",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Pack ",re+1]}),p.jsx("button",{type:"button",onClick:()=>P(re),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Selecciona hasta 6 Kombuchas (puedes repetir sabores) *"}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",maxHeight:"300px",overflowY:"auto",padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:L.map(ae=>{const ye=(K.kombuchas||[]).filter(ke=>ke===ae.id).length;return p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease"},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",flex:1},children:[p.jsx("span",{style:{fontSize:"0.9rem",color:"white",fontWeight:"500"},children:ae.nombre}),p.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:["$",ae.precio?.toFixed(2)||"0.00"," por unidad"]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",padding:"0.5rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[p.jsx("button",{type:"button",onClick:()=>{const Ce=[...K.kombuchas||[],ae.id];Ce.length<=6&&fe(re,"kombuchas",Ce)},disabled:(K.kombuchas?.length||0)>=6,style:{background:(K.kombuchas?.length||0)>=6?"#718096":"#38a169",color:"white",border:"none",borderRadius:"4px",width:"28px",height:"28px",cursor:(K.kombuchas?.length||0)>=6?"not-allowed":"pointer",fontSize:"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:"Agregar una unidad",children:"+"}),p.jsx("span",{style:{color:"white",fontWeight:"bold",fontSize:"1.1rem",minWidth:"30px",textAlign:"center",padding:"0.25rem 0.5rem",backgroundColor:"rgba(255, 255, 255, 0.15)",borderRadius:"4px"},children:ye}),p.jsx("button",{type:"button",onClick:()=>{const ke=K.kombuchas||[],Ce=ke.indexOf(ae.id);if(Ce>-1){const De=[...ke];De.splice(Ce,1),fe(re,"kombuchas",De)}},disabled:ye===0,style:{background:ye===0?"#718096":"#f56565",color:"white",border:"none",borderRadius:"4px",width:"28px",height:"28px",cursor:ye===0?"not-allowed":"pointer",fontSize:"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:"Quitar una unidad",children:"-"})]})]},ae.id)})}),p.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[p.jsxs("span",{style:{color:"white",fontSize:"0.9rem",fontWeight:"500"},children:[K.kombuchas?.length||0,"/6 kombuchas seleccionadas"]}),K.kombuchas?.length===6&&p.jsx("span",{style:{color:"#90ee90",fontWeight:"bold",fontSize:"0.85rem"},children:" Pack completo"})]}),K.kombuchas&&K.kombuchas.length>0&&p.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.8)"},children:(()=>{const ae={};return K.kombuchas.forEach(ye=>{ae[ye]=(ae[ye]||0)+1}),Object.entries(ae).map(([ye,ke])=>p.jsxs("span",{style:{display:"inline-block",margin:"0.1rem",padding:"0.2rem 0.4rem",backgroundColor:"rgba(56, 161, 105, 0.3)",borderRadius:"4px",fontSize:"0.75rem",border:"1px solid rgba(56, 161, 105, 0.5)"},children:[Se(ye)," ",ke]},ye))})()})]})]}),p.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:[p.jsx("div",{style:{color:"white"},children:K.kombuchas?.length===6?p.jsxs("div",{children:[p.jsxs("strong",{children:["Pack completo de 6 variedades:",Ae()?p.jsxs("span",{style:{color:"#90ee90"},children:["$",(Je()*6).toFixed(2)]}):p.jsxs("span",{children:["$",250]})]}),Ae()?p.jsxs("div",{children:[p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.7rem",color:"#90ee90"},children:["Precio mayorista ($",Je().toFixed(2),"  6)"]}),p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.7rem",color:"#cbd5e0"},children:["Precio regular: $",250]})]}):p.jsxs("div",{children:[p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.7rem",color:"#90ee90"},children:["Con 18+ kombuchas: $",(Je()*6).toFixed(2)]})]})]}):K.kombuchas?.length>0?p.jsxs("div",{children:[p.jsxs("strong",{children:["Pack parcial (",K.kombuchas.length," kombuchas): $",K.precio.toFixed(2)]}),Ae()&&p.jsxs("div",{children:[p.jsx("br",{}),p.jsx("small",{style:{fontSize:"0.7rem",color:"#90ee90"},children:"Precio mayorista aplicado"})]}),p.jsx("br",{}),p.jsxs("small",{style:{fontSize:"0.8rem"},children:["Selecciona 6 para obtener el precio pack de $",250,Ae()&&` o ${(Je()*6).toFixed(2)} con mayorista`]})]}):p.jsx("strong",{children:"Selecciona kombuchas para el pack"})}),K.kombuchas&&K.kombuchas.length>0&&p.jsx("div",{style:{marginTop:"0.75rem",textAlign:"center"},children:p.jsx("button",{type:"button",onClick:()=>{const ae={...K};K.kombuchas.length===6?ae.precio=250:ae.precio=K.kombuchas.reduce((ye,ke)=>ye+(xe(ke)||0),0),U(ye=>{const ke=[...ye.packs];ke[re]=ae;const Ce=ye.items.reduce((et,tt)=>{const lt=parseFloat(tt.cantidad)||0,Yt=parseFloat(tt.precio)||0;return et+lt*Yt},0),De=ke.reduce((et,tt)=>et+tt.precio,0),Pe=Ce+De;return{...ye,packs:ke,total:Pe.toFixed(2)}})},style:{background:"none",border:"1px solid #90ee90",color:"#90ee90",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.2s ease"},onMouseOver:ae=>{ae.target.style.background="#90ee90",ae.target.style.color="white"},onMouseOut:ae=>{ae.target.style.background="none",ae.target.style.color="#90ee90"},title:"Restaurar precio original del pack",children:"Restaurar pack"})})]})]},re))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"total",children:"Total *"}),p.jsx("input",{type:"number",id:"total",name:"total",value:O.total,readOnly:!0,style:{backgroundColor:"#f7fafc",color:"#4a5568",cursor:"not-allowed",fontSize:"1.2rem",fontWeight:"bold"}}),p.jsx("small",{style:{color:"white",fontSize:"0.8rem"},children:"Calculado automticamente (suma de todos los productos)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"estado",children:"Estado *"}),p.jsxs("select",{id:"estado",name:"estado",value:O.estado,onChange:G,required:!0,children:[p.jsx("option",{value:"pendiente",children:"Pendiente"}),p.jsx("option",{value:"cancelada",children:"Cancelada"}),p.jsx("option",{value:"pagoPendiente",children:"Pago Pendiente"}),p.jsx("option",{value:"completada",children:"Completada"})]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:je,disabled:T,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:T,children:T?"Guardando...":u?"Actualizar":"Guardar"})]})]})]})})]})},b8=()=>{const n=ka(),[e,t]=N.useState([]),[i,s]=N.useState([]),[a,l]=N.useState(!0),[u,h]=N.useState(!1),[f,y]=N.useState(null),[v,x]=N.useState("nombre"),[T,C]=N.useState("asc"),[D,R]=N.useState(!1),[L,$]=N.useState(""),[q,Z]=N.useState([]),[Y,J]=N.useState(""),[F,I]=N.useState(!1),[O,U]=N.useState(null),[H,B]=N.useState({nombre:"",notas:"",clientes:[]}),z=async()=>{try{l(!0);const ce=(await zn(un(It,"rutas"))).docs.map(Ae=>({id:Ae.id,...Ae.data()}));t(ce)}catch(xe){console.error("Error fetching routes:",xe),$("Error al cargar las rutas")}finally{l(!1)}},Le=async()=>{try{const ce=(await zn(un(It,"clientes"))).docs.map(Ae=>({id:Ae.id,...Ae.data()}));s(ce)}catch(xe){console.error("Error fetching clients:",xe)}};N.useEffect(()=>{z(),Le()},[]),N.useEffect(()=>{n.state?.selectedCliente&&n.state?.showForm&&(Z([n.state.selectedCliente.id]),B(xe=>({...xe,nombre:`Ruta para ${n.state.selectedCliente.nombre}`})),h(!0))},[n.state]);const _e=xe=>{x(xe),C(T==="asc"?"desc":"asc")},G=xe=>v===xe?T==="asc"?"":"":"",ie=xe=>{const{name:ce,value:Ae}=xe.target;B(He=>({...He,[ce]:Ae}))},Ee=xe=>{Z(ce=>ce.includes(xe)?ce.filter(Ae=>Ae!==xe):[...ce,xe])},Ve=i.filter(xe=>xe.nombre.toLowerCase().includes(Y.toLowerCase())||xe.direccion.toLowerCase().includes(Y.toLowerCase())),P=async xe=>{if(xe.preventDefault(),!H.nombre.trim()){$("El nombre de la ruta es requerido");return}if(q.length===0){$("Debe seleccionar al menos un cliente");return}R(!0),$("");try{const ce={...H,clientes:q,fechaCreacion:Fs()};f?await Df(Ca(It,"rutas",f.id),ce):await Pc(un(It,"rutas"),ce),h(!1),y(null),je(),z()}catch(ce){console.error("Error saving route:",ce),$("Error al guardar la ruta")}finally{R(!1)}},fe=xe=>{y(xe),B({nombre:xe.nombre,notas:xe.notas||"",clientes:xe.clientes||[]}),Z(xe.clientes||[]),h(!0)},Re=async xe=>{if(window.confirm("Est seguro de que desea eliminar esta ruta?"))try{await Vg(Ca(It,"rutas",xe)),z()}catch(ce){console.error("Error deleting route:",ce),$("Error al eliminar la ruta")}},pe=()=>{h(!1),y(null),je()},Ne=xe=>{U(xe),I(!0)},qe=()=>{I(!1),U(null)},je=()=>{B({nombre:"",notas:"",clientes:[]}),Z([]),J(""),$("")},Ge=xe=>{const ce=i.find(Ae=>Ae.id===xe);return ce?ce.nombre:"Cliente no encontrado"},Se=xe=>{const ce=i.find(Ae=>Ae.id===xe);return ce?ce.direccion:"Direccin no encontrada"},Tt=[...e].sort((xe,ce)=>{let Ae=xe[v]||"",He=ce[v]||"";return typeof Ae=="string"&&(Ae=Ae.toLowerCase(),He=He.toLowerCase()),T==="asc"?Ae>He?1:-1:Ae<He?1:-1});return a?p.jsx("div",{className:"loading",children:"Cargando rutas..."}):p.jsxs("div",{className:"ruta-page",children:[p.jsxs("div",{className:"ruta-header",children:[p.jsx("h1",{children:"Gestin de Rutas de Entrega"}),p.jsx("button",{className:"add-ruta-btn",onClick:()=>h(!0),children:"Crear Nueva Ruta"})]}),L&&p.jsx("div",{className:"error-message",children:L}),u&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"form-container",children:[p.jsx("h2",{children:f?"Editar Ruta":"Crear Nueva Ruta"}),p.jsxs("form",{onSubmit:P,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nombre",children:"Nombre de la Ruta *"}),p.jsx("input",{type:"text",id:"nombre",name:"nombre",value:H.nombre,onChange:ie,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"notas",children:"Notas"}),p.jsx("textarea",{id:"notas",name:"notas",value:H.notas,onChange:ie,rows:"3"})]}),p.jsxs("div",{className:"clientes-selection",children:[p.jsx("h3",{children:"Seleccionar Clientes"}),p.jsx("div",{className:"search-container",children:p.jsx("input",{type:"text",placeholder:"Buscar clientes...",value:Y,onChange:xe=>J(xe.target.value),className:"search-input"})}),p.jsx("div",{className:"clientes-list",children:Ve.map(xe=>p.jsxs("div",{className:`cliente-item ${q.includes(xe.id)?"selected":""}`,onClick:()=>Ee(xe.id),children:[p.jsx("input",{type:"checkbox",checked:q.includes(xe.id),onChange:ce=>{ce.stopPropagation(),Ee(xe.id)},onClick:ce=>ce.stopPropagation()}),p.jsxs("div",{className:"cliente-info",children:[p.jsx("strong",{children:xe.nombre}),p.jsx("span",{children:xe.direccion})]})]},xe.id))}),q.length>0&&p.jsxs("div",{className:"selected-clients",children:[p.jsxs("h4",{children:["Clientes Seleccionados (",q.length,")"]}),p.jsx("div",{className:"selected-list",children:q.map((xe,ce)=>p.jsxs("div",{className:"ordered-client",children:[p.jsx("span",{className:"order-number",children:ce+1}),p.jsx("span",{children:Ge(xe)}),p.jsx("span",{className:"address",children:Se(xe)})]},xe))})]}),q.length>0&&p.jsxs("div",{className:"map-section",children:[p.jsx("h4",{children:"Vista del Mapa"}),(()=>{const xe=q.map(ce=>i.find(He=>He.id===ce)).filter(ce=>ce&&ce.direccionCoords);return xe.length>0?p.jsx("div",{className:"map-container",children:p.jsx(Jb,{clientes:xe})}):p.jsxs("div",{className:"no-coordinates-message",children:[p.jsx("p",{children:"Los clientes seleccionados no tienen coordenadas de ubicacin configuradas."}),p.jsx("p",{children:"Para ver la ubicacin en el mapa, asegrate de que los clientes tengan su direccin configurada correctamente."})]})})()]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:pe,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:D,children:D?"Guardando...":f?"Actualizar":"Crear"})]})]})]})}),F&&O&&p.jsx("div",{className:"form-overlay",children:p.jsxs("div",{className:"route-map-modal",children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:["Mapa de la Ruta: ",O.nombre]}),p.jsx("button",{className:"close-btn",onClick:qe,children:""})]}),p.jsx("div",{className:"map-view",children:(()=>{const xe=O.clientes.map(ce=>i.find(He=>He.id===ce)).filter(ce=>ce&&ce.direccionCoords);return xe.length>0?p.jsx("div",{className:"route-map-container",children:p.jsx(Jb,{clientes:xe})}):p.jsxs("div",{className:"no-coordinates-message",children:[p.jsx("p",{children:"Esta ruta no tiene clientes con coordenadas de ubicacin configuradas."}),p.jsx("p",{children:"Para ver la ubicacin en el mapa, asegrate de que los clientes tengan su direccin configurada correctamente."})]})})()})]})}),p.jsxs("div",{className:"ruta-content",children:[p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"rutas-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{onClick:()=>_e("nombre"),children:["Nombre ",G("nombre")]}),p.jsx("th",{children:"Clientes"}),p.jsxs("th",{onClick:()=>_e("fechaCreacion"),children:["Fecha Creacin ",G("fechaCreacion")]}),p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:Tt.map(xe=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsxs("div",{className:"ruta-name",children:[p.jsx("strong",{children:xe.nombre}),xe.notas&&p.jsx("span",{className:"description",children:xe.notas})]})}),p.jsxs("td",{children:[p.jsxs("div",{className:"clientes-count",children:[xe.clientes?.length||0," clientes"]}),xe.clientes&&xe.clientes.length>0&&p.jsxs("div",{className:"route-preview",children:[xe.clientes.slice(0,3).map((ce,Ae)=>p.jsxs("span",{className:"route-step",children:[Ae+1,". ",Ge(ce)]},ce)),xe.clientes.length>3&&p.jsxs("span",{className:"more-clients",children:["+",xe.clientes.length-3," ms"]})]})]}),p.jsx("td",{children:xe.fechaCreacion}),p.jsx("td",{children:p.jsxs("div",{className:"actions",children:[p.jsx("button",{className:"view-btn",onClick:()=>Ne(xe),children:"Ver Mapa"}),p.jsx("button",{className:"edit-btn",onClick:()=>fe(xe),children:"Editar"}),p.jsx("button",{className:"delete-btn",onClick:()=>Re(xe.id),children:"Eliminar"})]})})]},xe.id))})]})}),Tt.length===0&&p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No hay rutas creadas. Crea tu primera ruta para comenzar."})})]})]})},v8=({notifications:n,sales:e,onDateClick:t,onReminderClick:i,onSaleClick:s,onDateClickForSale:a})=>{const[l,u]=N.useState(new Date),[h,f]=N.useState([]),[y,v]=N.useState({}),[x,T]=N.useState({});N.useEffect(()=>{const I=l.getFullYear(),O=l.getMonth(),U=new Date(I,O,1),H=new Date(I,O+1,0),B=new Date(U);B.setDate(B.getDate()-U.getDay());const z=[],Le=new Date(B);for(;Le<=H||z.length<42;)z.push(new Date(Le)),Le.setDate(Le.getDate()+1);f(z)},[l]),N.useEffect(()=>{const I={};n.filter(U=>U.status==="pending").forEach(U=>{const H=U.reminderDate;I[H]||(I[H]=[]),I[H].push(U)}),v(I)},[n]),N.useEffect(()=>{const I={};e&&e.length>0&&e.forEach(O=>{const U=O.fecha?O.fecha.split("T")[0]:null;U&&(I[U]||(I[U]=[]),I[U].push(O))}),T(I)},[e]);const C=I=>{u(O=>{const U=new Date(O);return U.setMonth(U.getMonth()+I),U})},D=I=>I.toLocaleDateString("es-ES",{month:"long",year:"numeric",timeZone:"America/Mexico_City"}),R=I=>{const O=new Date;return I.toDateString()===O.toDateString()},L=I=>I.getMonth()===l.getMonth(),$=I=>I.toISOString().split("T")[0],q=I=>{switch(Ip(I)){case"high":return"#e74c3c";case"medium":return"#f39c12";case"low":return"#27ae60";default:return"#95a5a6"}},Z=I=>{const O=$(I),U=y[O]||[];t(I,U)},Y=(I,O)=>{O.stopPropagation(),a&&a(I)},J=I=>{i(I)},F=I=>{s(I)};return p.jsxs("div",{className:"reminder-calendar",children:[p.jsxs("div",{className:"calendar-header",children:[p.jsx("button",{className:"calendar-nav-btn",onClick:()=>C(-1),children:""}),p.jsx("h3",{className:"calendar-title",children:D(l)}),p.jsx("button",{className:"calendar-nav-btn",onClick:()=>C(1),children:""})]}),p.jsxs("div",{className:"calendar-grid",children:[["Dom","Lun","Mar","Mi","Jue","Vie","Sb"].map(I=>p.jsx("div",{className:"calendar-day-header",children:I},I)),h.map((I,O)=>{const U=$(I),H=y[U]||[],B=x[U]||[],z=R(I),Le=L(I);return p.jsxs("div",{className:`calendar-day ${z?"today":""} ${Le?"":"other-month"}`,onClick:()=>Z(I),children:[p.jsx("div",{className:"day-number",children:I.getDate()}),p.jsx("div",{className:"new-sale-button",children:p.jsx("button",{className:"new-sale-btn",onClick:_e=>Y(I,_e),title:"Registrar nueva venta",children:"+"})}),H.length>0&&p.jsxs("div",{className:"reminders-indicator",children:[H.map((_e,G)=>p.jsxs("div",{className:"reminder-item",children:[p.jsx("div",{className:"reminder-dot",style:{backgroundColor:q(_e)},onClick:ie=>{ie.stopPropagation(),J(_e)},title:`${_e.customerName} - ${_e.isDue?`${_e.daysOverdue} das vencido`:`${_e.daysUntilDue} das restantes`}`}),p.jsx("span",{className:"customer-name-tooltip",onClick:ie=>{ie.stopPropagation(),J(_e)},children:_e.customerName})]},_e.notificationId)),H.length>3&&p.jsxs("div",{className:"more-reminders",children:["+",H.length-3]})]}),B.length>0&&p.jsxs("div",{className:"sales-indicator",children:[B.map((_e,G)=>p.jsxs("div",{className:"sale-item",children:[p.jsx("div",{className:"sale-dot",style:{backgroundColor:(()=>{const ie=_e.estado==="completada"||_e.estado==="completed"||_e.estado==="Completado";return console.log(`Sale ${_e.id} estado: "${_e.estado}", isCompleted: ${ie}`),ie?"#007bff":"#6f42c1"})()},onClick:ie=>{ie.stopPropagation(),F(_e)},title:`Venta ${_e.id} - ${_e.estado||"pendiente"} - $${parseFloat(_e.total||0).toFixed(2)}`}),p.jsxs("span",{className:"sale-info-tooltip",children:["Venta $",parseFloat(_e.total||0).toFixed(2)]})]},_e.id)),B.length>3&&p.jsxs("div",{className:"more-sales",children:["+",B.length-3]})]})]},O)})]}),p.jsxs("div",{className:"calendar-legend",children:[p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot high-priority"}),p.jsx("span",{children:"Alta prioridad"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot medium-priority"}),p.jsx("span",{children:"Media prioridad"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot low-priority"}),p.jsx("span",{children:"Baja prioridad"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot completed-sale"}),p.jsx("span",{children:"Venta completada"})]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot pending-sale"}),p.jsx("span",{children:"Venta pendiente"})]})]})]})},x8=()=>{const[n,e]=N.useState([]),[t,i]=N.useState(!0),[s,a]=N.useState("all"),[l,u]=N.useState({}),[h,f]=N.useState(null),[y,v]=N.useState(!1),[x,T]=N.useState(""),[C,D]=N.useState(!0),[R,L]=N.useState(null),[$,q]=N.useState([]),[Z,Y]=N.useState([]),[J,F]=N.useState([]),[I,O]=N.useState([]),[U,H]=N.useState(!1),[B,z]=N.useState(null),[Le,_e]=N.useState(!1),[G,ie]=N.useState([]),[Ee,Ve]=N.useState(!1),[P,fe]=N.useState({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),Re=async()=>{try{i(!0);const[me,ze,Ke,St]=await Promise.all([zn(un(It,"ventas")),zn(un(It,"clientes")),zn(un(It,"kombuchas")),zn(un(It,"notifications"))]),Lt=me.docs.map(Ce=>({id:Ce.id,...Ce.data()})),K=ze.docs.map(Ce=>({id:Ce.id,...Ce.data()})),re=Ke.docs.map(Ce=>({id:Ce.id,...Ce.data()})),ae={};St.docs.forEach(Ce=>{const De=Ce.data();ae[De.notificationId]=De.status});const ke=n0(Lt,K).map(Ce=>({...Ce,status:ae[Ce.notificationId]||"pending"}));e(ke),u(rg(ke)),F(Lt),O(K),ie(re)}catch(me){console.error("Error fetching notifications:",me)}finally{i(!1)}};N.useEffect(()=>{Re()},[]),N.useEffect(()=>{const me=ze=>{ze.key==="Escape"&&(y&&(v(!1),f(null),T("")),U&&(H(!1),z(null)),Le&&Yi())};return(y||U||Le)&&document.addEventListener("keydown",me),()=>{document.removeEventListener("keydown",me)}},[y,U,Le]);const pe=async(me,ze,Ke="")=>{try{const St={notificationId:me,status:ze,notes:Ke,updatedAt:new Date().toISOString(),updatedBy:"user"},K=(await zn(un(It,"notifications"))).docs.find(re=>re.data().notificationId===me);K?await Df(Ca(It,"notifications",K.id),St):await Pc(un(It,"notifications"),St),e(re=>re.map(ae=>ae.notificationId===me?{...ae,status:ze,notes:Ke}:ae)),u(rg(n))}catch(St){console.error("Error saving notification status:",St)}},Ne=me=>{f(me),T(""),v(!0)},qe=async()=>{h&&(await pe(h.notificationId,"contacted",x),v(!1),f(null),T(""))},je=async me=>{await pe(me,"dismissed")},Ge=async me=>{await pe(me,"pending")},Se=(me,ze)=>{L(me),q(ze)},Tt=me=>{f(me),T(""),v(!0)},xe=me=>{z(me),H(!0)},ce=me=>{const ze=I.find(Ke=>Ke.id===me);return ze?ze.nombre:"Cliente no encontrado"},Ae=me=>{const{name:ze,value:Ke}=me.target;fe(St=>({...St,[ze]:Ke}))},He=(me,ze,Ke)=>{fe(St=>{const Lt=[...St.items];if(Lt[me]={...Lt[me],[ze]:Ke},ze==="kombuchaId"&&Ke){const re=G.find(ae=>ae.id===Ke);re&&re.precio&&(Lt[me].precio=re.precio.toString())}const K=Lt.reduce((re,ae)=>{const ye=(parseFloat(ae.cantidad)||0)*(parseFloat(ae.precio)||0);return re+ye},0);return{...St,items:Lt,total:K.toFixed(2)}})},Je=()=>{fe(me=>({...me,items:[...me.items,{kombuchaId:"",cantidad:1,precio:""}]}))},st=me=>{fe(ze=>({...ze,items:ze.items.filter((Ke,St)=>St!==me)}))},yn=me=>{const ze=G.find(Ke=>Ke.id===me);return ze?ze.precio:null},Gt=me=>{if(!me.kombuchaId)return!1;const ze=yn(me.kombuchaId);return ze&&parseFloat(me.precio)!==parseFloat(ze)},Ki=async me=>{me.preventDefault(),Ve(!0);try{const ze={...P,fecha:P.fecha,total:parseFloat(P.total),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Pc(un(It,"ventas"),ze),fe({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),_e(!1),await Re()}catch(ze){console.error("Error creating sale:",ze)}finally{Ve(!1)}},Yi=()=>{fe({fecha:Fs(),cliente:"",items:[{kombuchaId:"",cantidad:1,precio:""}],total:"0.00",estado:"pendiente"}),_e(!1)},Bs=me=>{L(me);const ze=me.toISOString().split("T")[0],Ke=n.filter(St=>St.status==="pending"&&St.reminderDate===ze);q(Ke),fe(St=>({...St,fecha:ze})),_e(!0)},xs=()=>{switch(s){case"pending":return n.filter(me=>me.status==="pending");case"overdue":return n.filter(me=>me.status==="pending"&&me.isDue);case"upcoming":return n.filter(me=>me.status==="pending"&&!me.isDue);case"contacted":return n.filter(me=>me.status==="contacted");case"dismissed":return n.filter(me=>me.status==="dismissed");default:return n}},Da=me=>`priority-${Ip(me)}`,Es=me=>{switch(me){case"pending":return"";case"contacted":return"";case"dismissed":return"";default:return""}};if(t)return p.jsx("div",{className:"recordatorios-page",children:p.jsx("div",{className:"loading",children:"Cargando recordatorios..."})});const vi=xs();return p.jsxs("div",{className:"recordatorios-page",children:[p.jsxs("div",{className:"recordatorios-header",children:[p.jsx("h1",{children:"Recordatorios de Clientes"}),p.jsxs("div",{className:"stats-summary",children:[p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-number",children:l.pending}),p.jsx("span",{className:"stat-label",children:"Pendientes"})]}),p.jsxs("div",{className:"stat-item overdue",children:[p.jsx("span",{className:"stat-number",children:l.overdue}),p.jsx("span",{className:"stat-label",children:"Vencidos"})]}),p.jsxs("div",{className:"stat-item upcoming",children:[p.jsx("span",{className:"stat-number",children:l.upcoming}),p.jsx("span",{className:"stat-label",children:"Prximos"})]})]})]}),p.jsxs("div",{className:"view-controls",children:[p.jsxs("div",{className:"view-toggle",children:[p.jsx("button",{className:`view-btn ${C?"active":""}`,onClick:()=>D(!0),children:" Vista Calendario"}),p.jsx("button",{className:`view-btn ${C?"":"active"}`,onClick:()=>D(!1),children:" Lista recordatorios"})]}),R&&p.jsxs("div",{className:"selected-date-info",children:[p.jsxs("span",{children:[ga(R.toISOString().split("T")[0])," - Fecha seleccionada"]}),p.jsx("button",{className:"clear-date-btn",onClick:()=>{L(null),q([])},children:" Limpiar"})]})]}),C&&p.jsx(v8,{notifications:n,sales:J,onDateClick:Se,onReminderClick:Tt,onSaleClick:xe,onDateClickForSale:Bs}),p.jsxs("div",{className:"filter-controls",children:[p.jsxs("button",{className:`filter-btn ${s==="all"?"active":""}`,onClick:()=>a("all"),children:["Todos (",l.total,")"]}),p.jsxs("button",{className:`filter-btn ${s==="pending"?"active":""}`,onClick:()=>a("pending"),children:["Pendientes (",l.pending,")"]}),p.jsxs("button",{className:`filter-btn ${s==="overdue"?"active":""}`,onClick:()=>a("overdue"),children:["Vencidos (",l.overdue,")"]}),p.jsxs("button",{className:`filter-btn ${s==="upcoming"?"active":""}`,onClick:()=>a("upcoming"),children:["Prximos (",l.upcoming,")"]}),p.jsxs("button",{className:`filter-btn ${s==="contacted"?"active":""}`,onClick:()=>a("contacted"),children:["Contactados (",l.contacted,")"]}),p.jsxs("button",{className:`filter-btn ${s==="dismissed"?"active":""}`,onClick:()=>a("dismissed"),children:["Descartados (",l.dismissed,")"]})]}),p.jsx("div",{className:"notifications-content",children:vi.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No hay recordatorios para mostrar"})}):p.jsx("div",{className:"notifications-grid",children:vi.map(me=>p.jsxs("div",{className:`notification-card ${Da(me)} ${me.status}`,children:[p.jsxs("div",{className:"notification-header",children:[p.jsxs("div",{className:"customer-info",children:[p.jsx("h3",{children:me.customerName}),p.jsxs("div",{className:"status-badge",children:[Es(me.status),me.status==="pending"&&me.isDue?"Vencido":me.status==="pending"?"Pendiente":me.status==="contacted"?"Contactado":"Descartado"]})]}),p.jsx("div",{className:"priority-indicator",children:Ip(me)==="high"?"":Ip(me)==="medium"?"":""})]}),p.jsxs("div",{className:"notification-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"ltima compra:"}),p.jsx("span",{className:"value",children:ga(me.lastSaleDate)})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Kombuchas:"}),p.jsx("span",{className:"value text-center",children:me.totalKombuchas})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Recordatorio:"}),p.jsx("span",{className:"value",children:ga(me.reminderDate)})]}),me.isDue&&p.jsxs("div",{className:"detail-row overdue",children:[p.jsx("span",{className:"label",children:"Das de retraso:"}),p.jsx("span",{className:"value",children:me.daysOverdue})]}),!me.isDue&&p.jsxs("div",{className:"detail-row upcoming",children:[p.jsx("span",{className:"label",children:"Das restantes:"}),p.jsx("span",{className:"value",children:me.daysUntilDue})]})]}),p.jsx("div",{className:"notification-message",children:$R(me)}),me.notes&&p.jsxs("div",{className:"notification-notes",children:[p.jsx("strong",{children:"Notas:"})," ",me.notes]}),p.jsxs("div",{className:"notification-actions",children:[me.status==="pending"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"action-btn contact-btn",onClick:()=>Ne(me),children:" Contactar"}),p.jsx("button",{className:"action-btn dismiss-btn",onClick:()=>je(me.notificationId),children:" Descartar"})]}),me.status==="contacted"&&p.jsx("button",{className:"action-btn reset-btn",onClick:()=>Ge(me.notificationId),children:" Reactivar"}),me.status==="dismissed"&&p.jsx("button",{className:"action-btn reset-btn",onClick:()=>Ge(me.notificationId),children:" Reactivar"})]})]},me.notificationId))})}),y&&h&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h2",{children:"Contactar Cliente"}),p.jsxs("div",{className:"customer-summary",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Cliente:"})," ",h.customerName]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Telfono:"})," ",h.customerPhone||"No disponible"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"ltima compra:"})," ",ga(h.lastSaleDate)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kombuchas compradas:"})," ",h.totalKombuchas]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"contactNotes",children:"Notas del contacto:"}),p.jsx("textarea",{id:"contactNotes",value:x,onChange:me=>T(me.target.value),placeholder:"Describe el resultado del contacto...",rows:"4"})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"cancel-btn",onClick:()=>v(!1),children:"Cancelar"}),p.jsx("button",{className:"submit-btn",onClick:qe,children:"Marcar como Contactado"})]})]})}),U&&B&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h2",{children:"Detalles de Venta"}),p.jsxs("div",{className:"sale-summary",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"ID de Venta:"})," ",B.id]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Fecha:"})," ",ga(B.fecha)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Total:"})," $",parseFloat(B.total||0).toFixed(2)]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Estado:"})," ",B.estado||"Pendiente"]}),B.cliente&&p.jsxs("p",{children:[p.jsx("strong",{children:"Cliente:"})," ",ce(B.cliente)]})]}),B.items&&B.items.length>0&&p.jsxs("div",{className:"sale-items",children:[p.jsx("h3",{children:"Productos Vendidos"}),p.jsx("div",{className:"items-list",children:B.items.map((me,ze)=>p.jsxs("div",{className:"item-row",children:[p.jsxs("span",{className:"item-name",children:["Producto ",ze+1]}),p.jsxs("span",{className:"item-quantity",children:["Cantidad: ",me.cantidad]}),p.jsxs("span",{className:"item-price",children:["Precio: $",parseFloat(me.precio||0).toFixed(2)]})]},ze))})]}),p.jsx("div",{className:"modal-actions",children:p.jsx("button",{className:"cancel-btn",onClick:()=>H(!1),children:"Cerrar"})})]})}),Le&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content sale-form-modal",children:[p.jsxs("h2",{children:["Nueva Venta - ",ga(P.fecha)]}),p.jsxs("form",{onSubmit:Ki,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"fecha",children:"Fecha *"}),p.jsx("input",{type:"date",id:"fecha",name:"fecha",value:P.fecha,onChange:Ae,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"cliente",children:"Cliente *"}),p.jsxs("select",{id:"cliente",name:"cliente",value:P.cliente,onChange:Ae,required:!0,children:[p.jsx("option",{value:"",children:"Selecciona un cliente"}),I.map(me=>p.jsx("option",{value:me.id,children:me.nombre},me.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Productos de la Venta *"}),p.jsx("div",{style:{marginBottom:"1rem"},children:p.jsx("button",{type:"button",onClick:Je,style:{background:"#4299e1",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Agregar Producto"})}),P.items.map((me,ze)=>p.jsxs("div",{style:{border:"1px solid #667eea",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",backgroundColor:"rgb(102, 126, 234)",color:"white"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[p.jsxs("h4",{style:{color:"white",margin:0},children:["Producto ",ze+1]}),P.items.length>1&&p.jsx("button",{type:"button",onClick:()=>st(ze),style:{background:"#f56565",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.8rem"},children:"Eliminar"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Kombucha *"}),p.jsxs("select",{value:me.kombuchaId,onChange:Ke=>He(ze,"kombuchaId",Ke.target.value),style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0,children:[p.jsx("option",{value:"",children:"Selecciona una kombucha"}),G.map(Ke=>p.jsxs("option",{value:Ke.id,children:[Ke.nombre," - $",Ke.precio?.toFixed(2)||"0.00"]},Ke.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Cantidad *"}),p.jsx("input",{type:"number",value:me.cantidad,onChange:Ke=>He(ze,"cantidad",Ke.target.value),min:"1",style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#2d3748"},required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{style:{color:"white",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Precio *"}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:me.precio,onChange:Ke=>He(ze,"precio",Ke.target.value),style:{width:"100%",padding:"0.5rem",border:Gt(me)?"2px solid #f56565":"2px solid #667eea",borderRadius:"5px",backgroundColor:"white",color:"#4a5568"},placeholder:"0.00"}),p.jsx("small",{style:{color:"white",fontSize:"0.7rem"},children:me.kombuchaId&&yn(me.kombuchaId)?p.jsxs(p.Fragment,{children:["Precio original: $",yn(me.kombuchaId).toFixed(2),Gt(me)&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{style:{color:"#f56565",fontWeight:"bold"},children:[" "," Modificado"]}),p.jsx("button",{type:"button",onClick:()=>He(ze,"precio",yn(me.kombuchaId)),style:{background:"none",border:"none",color:"#4299e1",textDecoration:"underline",cursor:"pointer",fontSize:"0.7rem",marginLeft:"0.5rem"},children:"Restaurar"})]})]}):"Precio sugerido del producto (puede ser modificado)"})]})]}),p.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",textAlign:"center"},children:p.jsxs("strong",{style:{color:"white"},children:["Subtotal: $",((parseFloat(me.cantidad)||0)*(parseFloat(me.precio)||0)).toFixed(2)]})})]},ze))]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"total",children:"Total *"}),p.jsx("input",{type:"number",id:"total",name:"total",value:P.total,readOnly:!0,style:{backgroundColor:"#f7fafc",color:"#4a5568",cursor:"not-allowed",fontSize:"1.2rem",fontWeight:"bold"}}),p.jsx("small",{style:{color:"#666",fontSize:"0.8rem"},children:"Calculado automticamente (suma de todos los productos)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"estado",children:"Estado *"}),p.jsxs("select",{id:"estado",name:"estado",value:P.estado,onChange:Ae,required:!0,children:[p.jsx("option",{value:"pendiente",children:"Pendiente"}),p.jsx("option",{value:"completada",children:"Completada"})]})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{type:"button",className:"cancel-btn",onClick:Yi,disabled:Ee,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"save-btn",disabled:Ee,children:Ee?"Guardando...":"Guardar Venta"})]})]})]})})]})},E8=()=>{const[n,e]=N.useState(""),[t,i]=N.useState(""),[s,a]=N.useState(""),[l,u]=N.useState(!1),h=lh(),{user:f,loading:y}=I0();if(N.useEffect(()=>{!y&&f&&h("/KombuchaApp")},[f,y,h]),y)return p.jsx("div",{className:"login-container",children:p.jsx("div",{className:"login-card",children:p.jsxs("div",{className:"login-header",children:[p.jsx("h1",{children:"Kombucha App"}),p.jsx("p",{children:"Cargando..."})]})})});if(f)return null;const v=async x=>{x.preventDefault(),a(""),u(!0);try{await D5(ig,n,t),h("/KombuchaApp")}catch(T){switch(console.error("Login error:",T),T.code){case"auth/user-not-found":a("Usuario no encontrado. Contacte al administrador.");break;case"auth/wrong-password":a("Contrasea incorrecta.");break;case"auth/invalid-email":a("Email invlido.");break;case"auth/too-many-requests":a("Demasiados intentos fallidos. Intente ms tarde.");break;default:a("Error al iniciar sesin. Intente nuevamente.")}}finally{u(!1)}};return p.jsx("div",{className:"login-container",children:p.jsxs("div",{className:"login-card",children:[p.jsxs("div",{className:"login-header",children:[p.jsx("h1",{children:"Kombucha App"}),p.jsx("p",{children:"Iniciar Sesin"})]}),p.jsxs("form",{onSubmit:v,className:"login-form",children:[s&&p.jsx("div",{className:"error-message",children:s}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:n,onChange:x=>e(x.target.value),required:!0,disabled:l,placeholder:"Ingrese su email"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Contrasea"}),p.jsx("input",{type:"password",id:"password",value:t,onChange:x=>i(x.target.value),required:!0,disabled:l,placeholder:"Ingrese su contrasea"})]}),p.jsx("button",{type:"submit",className:"login-button",disabled:l,children:l?"Iniciando sesin...":"Iniciar Sesin"})]}),p.jsxs("div",{className:"login-footer",children:[p.jsx("p",{children:"Esta es una aplicacin privada. Solo usuarios autorizados pueden acceder."}),p.jsx("p",{children:"Para solicitar acceso, contacte al administrador."})]})]})})},ev=N.forwardRef(({bsPrefix:n,bg:e="primary",pill:t=!1,text:i,className:s,as:a="span",...l},u)=>{const h=fn(n,"badge");return p.jsx(a,{ref:u,...l,className:Kt(s,h,t&&"rounded-pill",i&&`text-${i}`,e&&`bg-${e}`)})});ev.displayName="Badge";const k0=N.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=fn(e,"card-body"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));k0.displayName="CardBody";const vk=N.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=fn(e,"card-footer"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));vk.displayName="CardFooter";const xk=N.forwardRef(({bsPrefix:n,className:e,as:t="div",...i},s)=>{const a=fn(n,"card-header"),l=N.useMemo(()=>({cardHeaderBsPrefix:a}),[a]);return p.jsx(E0.Provider,{value:l,children:p.jsx(t,{ref:s,...i,className:Kt(e,a)})})});xk.displayName="CardHeader";const Ek=N.forwardRef(({bsPrefix:n,className:e,variant:t,as:i="img",...s},a)=>{const l=fn(n,"card-img");return p.jsx(i,{ref:a,className:Kt(t?`${l}-${t}`:l,e),...s})});Ek.displayName="CardImg";const wk=N.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=fn(e,"card-img-overlay"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));wk.displayName="CardImgOverlay";const Tk=N.forwardRef(({className:n,bsPrefix:e,as:t="a",...i},s)=>(e=fn(e,"card-link"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));Tk.displayName="CardLink";const w8=R0("h6"),Sk=N.forwardRef(({className:n,bsPrefix:e,as:t=w8,...i},s)=>(e=fn(e,"card-subtitle"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));Sk.displayName="CardSubtitle";const Ak=N.forwardRef(({className:n,bsPrefix:e,as:t="p",...i},s)=>(e=fn(e,"card-text"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));Ak.displayName="CardText";const T8=R0("h5"),Ck=N.forwardRef(({className:n,bsPrefix:e,as:t=T8,...i},s)=>(e=fn(e,"card-title"),p.jsx(t,{ref:s,className:Kt(n,e),...i})));Ck.displayName="CardTitle";const Rk=N.forwardRef(({bsPrefix:n,className:e,bg:t,text:i,border:s,body:a=!1,children:l,as:u="div",...h},f)=>{const y=fn(n,"card");return p.jsx(u,{ref:f,...h,className:Kt(e,y,t&&`bg-${t}`,i&&`text-${i}`,s&&`border-${s}`),children:a?p.jsx(k0,{children:l}):l})});Rk.displayName="Card";const Pd=Object.assign(Rk,{Img:Ek,Title:Ck,Subtitle:Sk,Body:k0,Link:Tk,Text:Ak,Header:xk,Footer:vk,ImgOverlay:wk}),Ik=N.forwardRef(({bsPrefix:n,className:e,striped:t,bordered:i,borderless:s,hover:a,size:l,variant:u,responsive:h,...f},y)=>{const v=fn(n,"table"),x=Kt(e,v,u&&`${v}-${u}`,l&&`${v}-${l}`,t&&`${v}-${typeof t=="string"?`striped-${t}`:"striped"}`,i&&`${v}-bordered`,s&&`${v}-borderless`,a&&`${v}-hover`),T=p.jsx("table",{...f,className:x,ref:y});if(h){let C=`${v}-responsive`;return typeof h=="string"&&(C=`${C}-${h}`),p.jsx("div",{className:C,children:T})}return T});Ik.displayName="Table";const S8=()=>{const[n,e]=N.useState([]),[t,i]=N.useState(!0),[s,a]=N.useState("");return N.useEffect(()=>{(async()=>{try{i(!0);const u=un(It,"users"),f=(await zn(u)).docs.map(y=>({id:y.id,...y.data()}));e(f)}catch(u){console.error("Error fetching users:",u),a("Error al cargar usuarios")}finally{i(!1)}})()},[]),t?p.jsx("div",{className:"user-management-container",children:p.jsx(Pd,{children:p.jsx(Pd.Body,{children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"spinner-border",role:"status",children:p.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),p.jsx("p",{className:"mt-2",children:"Cargando usuarios..."})]})})})}):p.jsx("div",{className:"user-management-container",children:p.jsxs(Pd,{children:[p.jsxs(Pd.Header,{children:[p.jsx("h4",{children:"Gestin de Usuarios"}),p.jsx("p",{className:"text-muted mb-0",children:"Vista de usuarios registrados en la aplicacin"})]}),p.jsxs(Pd.Body,{children:[s&&p.jsx("div",{className:"alert alert-warning",role:"alert",children:s}),p.jsx("div",{className:"admin-notice",children:p.jsxs("div",{className:"alert alert-info",role:"alert",children:[p.jsx("strong",{children:"Nota para Administradores:"}),p.jsx("br",{}),"Para agregar, editar o eliminar usuarios, use el"," ",p.jsx("a",{href:"https://console.firebase.google.com/project/kombuchaapp/authentication/users",target:"_blank",rel:"noopener noreferrer",className:"alert-link",children:"Firebase Console"}),"."]})}),n.length>0?p.jsxs(Ik,{responsive:!0,striped:!0,hover:!0,children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"ID"}),p.jsx("th",{children:"Email"}),p.jsx("th",{children:"Nombre"}),p.jsx("th",{children:"Rol"}),p.jsx("th",{children:"Estado"}),p.jsx("th",{children:"ltima Actividad"})]})}),p.jsx("tbody",{children:n.map(l=>p.jsxs("tr",{children:[p.jsx("td",{children:l.id}),p.jsx("td",{children:l.email}),p.jsx("td",{children:l.name||"N/A"}),p.jsx("td",{children:p.jsx(ev,{bg:l.role==="admin"?"danger":"primary",children:l.role||"user"})}),p.jsx("td",{children:p.jsx(ev,{bg:l.active?"success":"secondary",children:l.active?"Activo":"Inactivo"})}),p.jsx("td",{children:l.lastActivity?new Date(l.lastActivity.toDate()).toLocaleDateString("es-ES"):"N/A"})]},l.id))})]}):p.jsx("div",{className:"text-center py-4",children:p.jsxs("p",{className:"text-muted",children:["No hay usuarios registrados en Firestore.",p.jsx("br",{}),"Los usuarios de autenticacin se gestionan desde Firebase Console."]})})]})]})})},vl=({children:n})=>{const{user:e,loading:t}=I0();return t?p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1.2rem",color:"#666"},children:"Cargando..."}):e?n:p.jsx(zA,{to:"/login",replace:!0})};function A8(){return p.jsxs(LD,{children:[p.jsx(Pr,{path:"/login",element:p.jsx(E8,{})}),p.jsx(Pr,{path:"/",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(T9,{})]})})}),p.jsx(Pr,{path:"/clientes",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(p8,{})]})})}),p.jsx(Pr,{path:"/kombuchas",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(y8,{})]})})}),p.jsx(Pr,{path:"/ventas",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(_8,{})]})})}),p.jsx(Pr,{path:"/rutas",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(b8,{})]})})}),p.jsx(Pr,{path:"/mapa",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(g8,{})]})})}),p.jsx(Pr,{path:"/recordatorios",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(x8,{})]})})}),p.jsx(Pr,{path:"/usuarios",element:p.jsx(vl,{children:p.jsxs(p.Fragment,{children:[p.jsx(bl,{}),p.jsx(S8,{})]})})}),p.jsx(Pr,{path:"*",element:p.jsx(zA,{to:"/",replace:!0})})]})}function C8(){return p.jsx(c8,{children:p.jsx("div",{className:"App",children:p.jsx(aO,{basename:"/KombuchaApp",children:p.jsx(A8,{})})})})}qN.createRoot(document.getElementById("root")).render(p.jsx(fr.StrictMode,{children:p.jsx(C8,{})}));
